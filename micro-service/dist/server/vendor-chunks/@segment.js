/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@segment";
exports.ids = ["vendor-chunks/@segment"];
exports.modules = {

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatch: () => (/* binding */ dispatch),\n/* harmony export */   getDelay: () => (/* binding */ getDelay)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callback */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n\n/* The amount of time in ms to wait before invoking the callback. */\nvar getDelay = function (startTimeInEpochMS, timeoutInMS) {\n    var elapsedTime = Date.now() - startTimeInEpochMS;\n    // increasing the timeout increases the delay by almost the same amount -- this is weird legacy behavior.\n    return Math.max((timeoutInMS !== null && timeoutInMS !== void 0 ? timeoutInMS : 300) - elapsedTime, 0);\n};\n/**\n * Push an event into the dispatch queue and invoke any callbacks.\n *\n * @param event - Segment event to enqueue.\n * @param queue - Queue to dispatch against.\n * @param emitter - This is typically an instance of \"Analytics\" -- used for metrics / progress information.\n * @param options\n */\nfunction dispatch(ctx, queue, emitter, options) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var startTime, dispatched;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    emitter.emit('dispatch_start', ctx);\n                    startTime = Date.now();\n                    if (!queue.isEmpty()) return [3 /*break*/, 2];\n                    return [4 /*yield*/, queue.dispatchSingle(ctx)];\n                case 1:\n                    dispatched = _a.sent();\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, queue.dispatch(ctx)];\n                case 3:\n                    dispatched = _a.sent();\n                    _a.label = 4;\n                case 4:\n                    if (!(options === null || options === void 0 ? void 0 : options.callback)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, (0,_callback__WEBPACK_IMPORTED_MODULE_1__.invokeCallback)(dispatched, options.callback, getDelay(startTime, options.timeout))];\n                case 5:\n                    dispatched = _a.sent();\n                    _a.label = 6;\n                case 6:\n                    if (options === null || options === void 0 ? void 0 : options.debug) {\n                        dispatched.flush();\n                    }\n                    return [2 /*return*/, dispatched];\n            }\n        });\n    });\n}\n//# sourceMappingURL=dispatch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL2FuYWx5dGljcy9kaXNwYXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQStDO0FBQ0Y7QUFDN0M7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHlEQUFjO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9hbmFseXRpY3MvZGlzcGF0Y2guanM/MTQ2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbnZva2VDYWxsYmFjayB9IGZyb20gJy4uL2NhbGxiYWNrJztcbi8qIFRoZSBhbW91bnQgb2YgdGltZSBpbiBtcyB0byB3YWl0IGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2suICovXG5leHBvcnQgdmFyIGdldERlbGF5ID0gZnVuY3Rpb24gKHN0YXJ0VGltZUluRXBvY2hNUywgdGltZW91dEluTVMpIHtcbiAgICB2YXIgZWxhcHNlZFRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lSW5FcG9jaE1TO1xuICAgIC8vIGluY3JlYXNpbmcgdGhlIHRpbWVvdXQgaW5jcmVhc2VzIHRoZSBkZWxheSBieSBhbG1vc3QgdGhlIHNhbWUgYW1vdW50IC0tIHRoaXMgaXMgd2VpcmQgbGVnYWN5IGJlaGF2aW9yLlxuICAgIHJldHVybiBNYXRoLm1heCgodGltZW91dEluTVMgIT09IG51bGwgJiYgdGltZW91dEluTVMgIT09IHZvaWQgMCA/IHRpbWVvdXRJbk1TIDogMzAwKSAtIGVsYXBzZWRUaW1lLCAwKTtcbn07XG4vKipcbiAqIFB1c2ggYW4gZXZlbnQgaW50byB0aGUgZGlzcGF0Y2ggcXVldWUgYW5kIGludm9rZSBhbnkgY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSBldmVudCAtIFNlZ21lbnQgZXZlbnQgdG8gZW5xdWV1ZS5cbiAqIEBwYXJhbSBxdWV1ZSAtIFF1ZXVlIHRvIGRpc3BhdGNoIGFnYWluc3QuXG4gKiBAcGFyYW0gZW1pdHRlciAtIFRoaXMgaXMgdHlwaWNhbGx5IGFuIGluc3RhbmNlIG9mIFwiQW5hbHl0aWNzXCIgLS0gdXNlZCBmb3IgbWV0cmljcyAvIHByb2dyZXNzIGluZm9ybWF0aW9uLlxuICogQHBhcmFtIG9wdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoKGN0eCwgcXVldWUsIGVtaXR0ZXIsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFRpbWUsIGRpc3BhdGNoZWQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnZGlzcGF0Y2hfc3RhcnQnLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXVlLmlzRW1wdHkoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHF1ZXVlLmRpc3BhdGNoU2luZ2xlKGN0eCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hlZCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzQgLyp5aWVsZCovLCBxdWV1ZS5kaXNwYXRjaChjdHgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoZWQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jYWxsYmFjaykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbnZva2VDYWxsYmFjayhkaXNwYXRjaGVkLCBvcHRpb25zLmNhbGxiYWNrLCBnZXREZWxheShzdGFydFRpbWUsIG9wdGlvbnMudGltZW91dCkpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoZWQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoZWQuZmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZGlzcGF0Y2hlZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzcGF0Y2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/callback/index.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/callback/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invokeCallback: () => (/* binding */ invokeCallback),\n/* harmony export */   pTimeout: () => (/* binding */ pTimeout),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\nfunction pTimeout(promise, timeout) {\n    return new Promise(function (resolve, reject) {\n        var timeoutId = setTimeout(function () {\n            reject(Error('Promise timed out'));\n        }, timeout);\n        promise\n            .then(function (val) {\n            clearTimeout(timeoutId);\n            return resolve(val);\n        })\n            .catch(reject);\n    });\n}\nfunction sleep(timeoutInMs) {\n    return new Promise(function (resolve) { return setTimeout(resolve, timeoutInMs); });\n}\n/**\n * @param ctx\n * @param callback - the function to invoke\n * @param delay - aka \"timeout\". The amount of time in ms to wait before invoking the callback.\n */\nfunction invokeCallback(ctx, callback, delay) {\n    var cb = function () {\n        try {\n            return Promise.resolve(callback(ctx));\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    };\n    return (sleep(delay)\n        // pTimeout ensures that the callback can't cause the context to hang\n        .then(function () { return pTimeout(cb(), 1000); })\n        .catch(function (err) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.log('warn', 'Callback Error', { error: err });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stats.increment('callback_error');\n    })\n        .then(function () { return ctx; }));\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL2NhbGxiYWNrL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUCw0Q0FBNEMsMENBQTBDO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsOEJBQThCO0FBQzFEO0FBQ0Esc0ZBQXNGLFlBQVk7QUFDbEc7QUFDQSxLQUFLO0FBQ0wsNEJBQTRCLGFBQWE7QUFDekM7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9jYWxsYmFjay9pbmRleC5qcz9lNTU5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwVGltZW91dChwcm9taXNlLCB0aW1lb3V0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVqZWN0KEVycm9yKCdQcm9taXNlIHRpbWVkIG91dCcpKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIHByb21pc2VcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodmFsKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNsZWVwKHRpbWVvdXRJbk1zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJldHVybiBzZXRUaW1lb3V0KHJlc29sdmUsIHRpbWVvdXRJbk1zKTsgfSk7XG59XG4vKipcbiAqIEBwYXJhbSBjdHhcbiAqIEBwYXJhbSBjYWxsYmFjayAtIHRoZSBmdW5jdGlvbiB0byBpbnZva2VcbiAqIEBwYXJhbSBkZWxheSAtIGFrYSBcInRpbWVvdXRcIi4gVGhlIGFtb3VudCBvZiB0aW1lIGluIG1zIHRvIHdhaXQgYmVmb3JlIGludm9raW5nIHRoZSBjYWxsYmFjay5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKGN0eCwgY2FsbGJhY2ssIGRlbGF5KSB7XG4gICAgdmFyIGNiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjYWxsYmFjayhjdHgpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIChzbGVlcChkZWxheSlcbiAgICAgICAgLy8gcFRpbWVvdXQgZW5zdXJlcyB0aGF0IHRoZSBjYWxsYmFjayBjYW4ndCBjYXVzZSB0aGUgY29udGV4dCB0byBoYW5nXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBUaW1lb3V0KGNiKCksIDEwMDApOyB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjdHggPT09IG51bGwgfHwgY3R4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdHgubG9nKCd3YXJuJywgJ0NhbGxiYWNrIEVycm9yJywgeyBlcnJvcjogZXJyIH0pO1xuICAgICAgICBjdHggPT09IG51bGwgfHwgY3R4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdHguc3RhdHMuaW5jcmVtZW50KCdjYWxsYmFja19lcnJvcicpO1xuICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGN0eDsgfSkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/callback/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/context/index.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/context/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextCancelation: () => (/* binding */ ContextCancelation),\n/* harmony export */   CoreContext: () => (/* binding */ CoreContext)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(ssr)/../node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dset */ \"(ssr)/../node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../logger */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/logger/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stats */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n\n\n\n\nvar ContextCancelation = /** @class */ (function () {\n    function ContextCancelation(options) {\n        var _a, _b, _c;\n        this.retry = (_a = options.retry) !== null && _a !== void 0 ? _a : true;\n        this.type = (_b = options.type) !== null && _b !== void 0 ? _b : 'plugin Error';\n        this.reason = (_c = options.reason) !== null && _c !== void 0 ? _c : '';\n    }\n    return ContextCancelation;\n}());\n\nvar CoreContext = /** @class */ (function () {\n    function CoreContext(event, id, stats, logger) {\n        if (id === void 0) { id = (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(); }\n        if (stats === void 0) { stats = new _stats__WEBPACK_IMPORTED_MODULE_2__.NullStats(); }\n        if (logger === void 0) { logger = new _logger__WEBPACK_IMPORTED_MODULE_3__.CoreLogger(); }\n        this.attempts = 0;\n        this.event = event;\n        this._id = id;\n        this.logger = logger;\n        this.stats = stats;\n    }\n    CoreContext.system = function () {\n        // This should be overridden by the subclass to return an instance of the subclass.\n    };\n    CoreContext.prototype.isSame = function (other) {\n        return other.id === this.id;\n    };\n    CoreContext.prototype.cancel = function (error) {\n        if (error) {\n            throw error;\n        }\n        throw new ContextCancelation({ reason: 'Context Cancel' });\n    };\n    CoreContext.prototype.log = function (level, message, extras) {\n        this.logger.log(level, message, extras);\n    };\n    Object.defineProperty(CoreContext.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreContext.prototype.updateEvent = function (path, val) {\n        var _a;\n        // Don't allow integrations that are set to false to be overwritten with integration settings.\n        if (path.split('.')[0] === 'integrations') {\n            var integrationName = path.split('.')[1];\n            if (((_a = this.event.integrations) === null || _a === void 0 ? void 0 : _a[integrationName]) === false) {\n                return this.event;\n            }\n        }\n        (0,dset__WEBPACK_IMPORTED_MODULE_1__.dset)(this.event, path, val);\n        return this.event;\n    };\n    CoreContext.prototype.failedDelivery = function () {\n        return this._failedDelivery;\n    };\n    CoreContext.prototype.setFailedDelivery = function (options) {\n        this._failedDelivery = options;\n    };\n    CoreContext.prototype.logs = function () {\n        return this.logger.logs;\n    };\n    CoreContext.prototype.flush = function () {\n        this.logger.flush();\n        this.stats.flush();\n    };\n    CoreContext.prototype.toJSON = function () {\n        return {\n            id: this._id,\n            event: this.event,\n            logs: this.logger.logs,\n            metrics: this.stats.metrics,\n        };\n    };\n    return CoreContext;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL2NvbnRleHQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBDO0FBQ2Q7QUFDVztBQUNGO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzZCO0FBQzlCO0FBQ0E7QUFDQSw2QkFBNkIsS0FBSyxnREFBSTtBQUN0QyxnQ0FBZ0MsWUFBWSw2Q0FBUztBQUNyRCxpQ0FBaUMsYUFBYSwrQ0FBVTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywwQkFBMEI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBDQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNzQjtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9jb250ZXh0L2luZGV4LmpzPzYyZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ0BsdWtlZWQvdXVpZCc7XG5pbXBvcnQgeyBkc2V0IH0gZnJvbSAnZHNldCc7XG5pbXBvcnQgeyBDb3JlTG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IE51bGxTdGF0cyB9IGZyb20gJy4uL3N0YXRzJztcbnZhciBDb250ZXh0Q2FuY2VsYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29udGV4dENhbmNlbGF0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHRoaXMucmV0cnkgPSAoX2EgPSBvcHRpb25zLnJldHJ5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0cnVlO1xuICAgICAgICB0aGlzLnR5cGUgPSAoX2IgPSBvcHRpb25zLnR5cGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICdwbHVnaW4gRXJyb3InO1xuICAgICAgICB0aGlzLnJlYXNvbiA9IChfYyA9IG9wdGlvbnMucmVhc29uKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnJztcbiAgICB9XG4gICAgcmV0dXJuIENvbnRleHRDYW5jZWxhdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBDb250ZXh0Q2FuY2VsYXRpb24gfTtcbnZhciBDb3JlQ29udGV4dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb3JlQ29udGV4dChldmVudCwgaWQsIHN0YXRzLCBsb2dnZXIpIHtcbiAgICAgICAgaWYgKGlkID09PSB2b2lkIDApIHsgaWQgPSB1dWlkKCk7IH1cbiAgICAgICAgaWYgKHN0YXRzID09PSB2b2lkIDApIHsgc3RhdHMgPSBuZXcgTnVsbFN0YXRzKCk7IH1cbiAgICAgICAgaWYgKGxvZ2dlciA9PT0gdm9pZCAwKSB7IGxvZ2dlciA9IG5ldyBDb3JlTG9nZ2VyKCk7IH1cbiAgICAgICAgdGhpcy5hdHRlbXB0cyA9IDA7XG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgICAgICAgdGhpcy5faWQgPSBpZDtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgICAgIHRoaXMuc3RhdHMgPSBzdGF0cztcbiAgICB9XG4gICAgQ29yZUNvbnRleHQuc3lzdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBvdmVycmlkZGVuIGJ5IHRoZSBzdWJjbGFzcyB0byByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgdGhlIHN1YmNsYXNzLlxuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmlzU2FtZSA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICByZXR1cm4gb3RoZXIuaWQgPT09IHRoaXMuaWQ7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IENvbnRleHRDYW5jZWxhdGlvbih7IHJlYXNvbjogJ0NvbnRleHQgQ2FuY2VsJyB9KTtcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAobGV2ZWwsIG1lc3NhZ2UsIGV4dHJhcykge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2cobGV2ZWwsIG1lc3NhZ2UsIGV4dHJhcyk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29yZUNvbnRleHQucHJvdG90eXBlLCBcImlkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUudXBkYXRlRXZlbnQgPSBmdW5jdGlvbiAocGF0aCwgdmFsKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gRG9uJ3QgYWxsb3cgaW50ZWdyYXRpb25zIHRoYXQgYXJlIHNldCB0byBmYWxzZSB0byBiZSBvdmVyd3JpdHRlbiB3aXRoIGludGVncmF0aW9uIHNldHRpbmdzLlxuICAgICAgICBpZiAocGF0aC5zcGxpdCgnLicpWzBdID09PSAnaW50ZWdyYXRpb25zJykge1xuICAgICAgICAgICAgdmFyIGludGVncmF0aW9uTmFtZSA9IHBhdGguc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5ldmVudC5pbnRlZ3JhdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtpbnRlZ3JhdGlvbk5hbWVdKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkc2V0KHRoaXMuZXZlbnQsIHBhdGgsIHZhbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50O1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmZhaWxlZERlbGl2ZXJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmFpbGVkRGVsaXZlcnk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUuc2V0RmFpbGVkRGVsaXZlcnkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9mYWlsZWREZWxpdmVyeSA9IG9wdGlvbnM7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUubG9ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nZ2VyLmxvZ3M7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmZsdXNoKCk7XG4gICAgICAgIHRoaXMuc3RhdHMuZmx1c2goKTtcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdGhpcy5faWQsXG4gICAgICAgICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgICAgICAgIGxvZ3M6IHRoaXMubG9nZ2VyLmxvZ3MsXG4gICAgICAgICAgICBtZXRyaWNzOiB0aGlzLnN0YXRzLm1ldHJpY3MsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZUNvbnRleHQ7XG59KCkpO1xuZXhwb3J0IHsgQ29yZUNvbnRleHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/context/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/logger/index.js":
/*!************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/logger/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreLogger: () => (/* binding */ CoreLogger)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\nvar CoreLogger = /** @class */ (function () {\n    function CoreLogger() {\n        this._logs = [];\n    }\n    CoreLogger.prototype.log = function (level, message, extras) {\n        var time = new Date();\n        this._logs.push({\n            level: level,\n            message: message,\n            time: time,\n            extras: extras,\n        });\n    };\n    Object.defineProperty(CoreLogger.prototype, \"logs\", {\n        get: function () {\n            return this._logs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreLogger.prototype.flush = function () {\n        if (this.logs.length > 1) {\n            var formatted = this._logs.reduce(function (logs, log) {\n                var _a;\n                var _b, _c;\n                var line = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, log), { json: JSON.stringify(log.extras, null, ' '), extras: log.extras });\n                delete line['time'];\n                var key = (_c = (_b = log.time) === null || _b === void 0 ? void 0 : _b.toISOString()) !== null && _c !== void 0 ? _c : '';\n                if (logs[key]) {\n                    key = \"\".concat(key, \"-\").concat(Math.random());\n                }\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, logs), (_a = {}, _a[key] = line, _a));\n            }, {});\n            // ie doesn't like console.table\n            if (console.table) {\n                console.table(formatted);\n            }\n            else {\n                console.log(formatted);\n            }\n        }\n        else {\n            this.logs.forEach(function (logEntry) {\n                var level = logEntry.level, message = logEntry.message, extras = logEntry.extras;\n                if (level === 'info' || level === 'debug') {\n                    console.log(message, extras !== null && extras !== void 0 ? extras : '');\n                }\n                else {\n                    console[level](message, extras !== null && extras !== void 0 ? extras : '');\n                }\n            });\n        }\n        this._logs = [];\n    };\n    return CoreLogger;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL2xvZ2dlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsVUFBVSxpRUFBaUU7QUFDMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsaUJBQWlCO0FBQzVELGFBQWEsSUFBSTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNxQjtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9sb2dnZXIvaW5kZXguanM/OTFhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xudmFyIENvcmVMb2dnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUxvZ2dlcigpIHtcbiAgICAgICAgdGhpcy5fbG9ncyA9IFtdO1xuICAgIH1cbiAgICBDb3JlTG9nZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAobGV2ZWwsIG1lc3NhZ2UsIGV4dHJhcykge1xuICAgICAgICB2YXIgdGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRoaXMuX2xvZ3MucHVzaCh7XG4gICAgICAgICAgICBsZXZlbDogbGV2ZWwsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgdGltZTogdGltZSxcbiAgICAgICAgICAgIGV4dHJhczogZXh0cmFzLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb3JlTG9nZ2VyLnByb3RvdHlwZSwgXCJsb2dzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9ncztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIENvcmVMb2dnZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5sb2dzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHZhciBmb3JtYXR0ZWQgPSB0aGlzLl9sb2dzLnJlZHVjZShmdW5jdGlvbiAobG9ncywgbG9nKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHZhciBfYiwgX2M7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbG9nKSwgeyBqc29uOiBKU09OLnN0cmluZ2lmeShsb2cuZXh0cmFzLCBudWxsLCAnICcpLCBleHRyYXM6IGxvZy5leHRyYXMgfSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGxpbmVbJ3RpbWUnXTtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gKF9jID0gKF9iID0gbG9nLnRpbWUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50b0lTT1N0cmluZygpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnJztcbiAgICAgICAgICAgICAgICBpZiAobG9nc1trZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IFwiXCIuY29uY2F0KGtleSwgXCItXCIpLmNvbmNhdChNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBsb2dzKSwgKF9hID0ge30sIF9hW2tleV0gPSBsaW5lLCBfYSkpO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgLy8gaWUgZG9lc24ndCBsaWtlIGNvbnNvbGUudGFibGVcbiAgICAgICAgICAgIGlmIChjb25zb2xlLnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS50YWJsZShmb3JtYXR0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZm9ybWF0dGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5mb3JFYWNoKGZ1bmN0aW9uIChsb2dFbnRyeSkge1xuICAgICAgICAgICAgICAgIHZhciBsZXZlbCA9IGxvZ0VudHJ5LmxldmVsLCBtZXNzYWdlID0gbG9nRW50cnkubWVzc2FnZSwgZXh0cmFzID0gbG9nRW50cnkuZXh0cmFzO1xuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA9PT0gJ2luZm8nIHx8IGxldmVsID09PSAnZGVidWcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UsIGV4dHJhcyAhPT0gbnVsbCAmJiBleHRyYXMgIT09IHZvaWQgMCA/IGV4dHJhcyA6ICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGVbbGV2ZWxdKG1lc3NhZ2UsIGV4dHJhcyAhPT0gbnVsbCAmJiBleHRyYXMgIT09IHZvaWQgMCA/IGV4dHJhcyA6ICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2dzID0gW107XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZUxvZ2dlcjtcbn0oKSk7XG5leHBvcnQgeyBDb3JlTG9nZ2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/logger/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   backoff: () => (/* binding */ backoff)\n/* harmony export */ });\nfunction backoff(params) {\n    var random = Math.random() + 1;\n    var _a = params.minTimeout, minTimeout = _a === void 0 ? 500 : _a, _b = params.factor, factor = _b === void 0 ? 2 : _b, attempt = params.attempt, _c = params.maxTimeout, maxTimeout = _c === void 0 ? Infinity : _c;\n    return Math.min(random * minTimeout * Math.pow(factor, attempt), maxTimeout);\n}\n//# sourceMappingURL=backoff.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ByaW9yaXR5LXF1ZXVlL2JhY2tvZmYuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9wcmlvcml0eS1xdWV1ZS9iYWNrb2ZmLmpzPzE1MzAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGJhY2tvZmYocGFyYW1zKSB7XG4gICAgdmFyIHJhbmRvbSA9IE1hdGgucmFuZG9tKCkgKyAxO1xuICAgIHZhciBfYSA9IHBhcmFtcy5taW5UaW1lb3V0LCBtaW5UaW1lb3V0ID0gX2EgPT09IHZvaWQgMCA/IDUwMCA6IF9hLCBfYiA9IHBhcmFtcy5mYWN0b3IsIGZhY3RvciA9IF9iID09PSB2b2lkIDAgPyAyIDogX2IsIGF0dGVtcHQgPSBwYXJhbXMuYXR0ZW1wdCwgX2MgPSBwYXJhbXMubWF4VGltZW91dCwgbWF4VGltZW91dCA9IF9jID09PSB2b2lkIDAgPyBJbmZpbml0eSA6IF9jO1xuICAgIHJldHVybiBNYXRoLm1pbihyYW5kb20gKiBtaW5UaW1lb3V0ICogTWF0aC5wb3coZmFjdG9yLCBhdHRlbXB0KSwgbWF4VGltZW91dCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYWNrb2ZmLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ON_REMOVE_FROM_FUTURE: () => (/* binding */ ON_REMOVE_FROM_FUTURE),\n/* harmony export */   PriorityQueue: () => (/* binding */ PriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _backoff__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./backoff */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n\n\n\n/**\n * @internal\n */\nvar ON_REMOVE_FROM_FUTURE = 'onRemoveFromFuture';\nvar PriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(PriorityQueue, _super);\n    function PriorityQueue(maxAttempts, queue, seen) {\n        var _this = _super.call(this) || this;\n        _this.future = [];\n        _this.maxAttempts = maxAttempts;\n        _this.queue = queue;\n        _this.seen = seen !== null && seen !== void 0 ? seen : {};\n        return _this;\n    }\n    PriorityQueue.prototype.push = function () {\n        var _this = this;\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var accepted = items.map(function (operation) {\n            var attempts = _this.updateAttempts(operation);\n            if (attempts > _this.maxAttempts || _this.includes(operation)) {\n                return false;\n            }\n            _this.queue.push(operation);\n            return true;\n        });\n        this.queue = this.queue.sort(function (a, b) { return _this.getAttempts(a) - _this.getAttempts(b); });\n        return accepted;\n    };\n    PriorityQueue.prototype.pushWithBackoff = function (item) {\n        var _this = this;\n        if (this.getAttempts(item) === 0) {\n            return this.push(item)[0];\n        }\n        var attempt = this.updateAttempts(item);\n        if (attempt > this.maxAttempts || this.includes(item)) {\n            return false;\n        }\n        var timeout = (0,_backoff__WEBPACK_IMPORTED_MODULE_1__.backoff)({ attempt: attempt - 1 });\n        setTimeout(function () {\n            _this.queue.push(item);\n            // remove from future list\n            _this.future = _this.future.filter(function (f) { return f.id !== item.id; });\n            // Lets listeners know that a 'future' message is now available in the queue\n            _this.emit(ON_REMOVE_FROM_FUTURE);\n        }, timeout);\n        this.future.push(item);\n        return true;\n    };\n    PriorityQueue.prototype.getAttempts = function (item) {\n        var _a;\n        return (_a = this.seen[item.id]) !== null && _a !== void 0 ? _a : 0;\n    };\n    PriorityQueue.prototype.updateAttempts = function (item) {\n        this.seen[item.id] = this.getAttempts(item) + 1;\n        return this.getAttempts(item);\n    };\n    PriorityQueue.prototype.includes = function (item) {\n        return (this.queue.includes(item) ||\n            this.future.includes(item) ||\n            Boolean(this.queue.find(function (i) { return i.id === item.id; })) ||\n            Boolean(this.future.find(function (i) { return i.id === item.id; })));\n    };\n    PriorityQueue.prototype.pop = function () {\n        return this.queue.shift();\n    };\n    Object.defineProperty(PriorityQueue.prototype, \"length\", {\n        get: function () {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"todo\", {\n        get: function () {\n            return this.queue.length + this.future.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PriorityQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__.Emitter));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ByaW9yaXR5LXF1ZXVlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWtDO0FBQ3lCO0FBQ3ZCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVEQUF1RCxxREFBcUQ7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpREFBTyxHQUFHLHNCQUFzQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsMEJBQTBCO0FBQ3hGO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwwQkFBMEI7QUFDN0Usb0RBQW9ELDBCQUEwQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQyxDQUFDLHFFQUFPO0FBQ2dCO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ByaW9yaXR5LXF1ZXVlL2luZGV4LmpzPzUwMjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuaW1wb3J0IHsgYmFja29mZiB9IGZyb20gJy4vYmFja29mZic7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSA9ICdvblJlbW92ZUZyb21GdXR1cmUnO1xudmFyIFByaW9yaXR5UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFByaW9yaXR5UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUHJpb3JpdHlRdWV1ZShtYXhBdHRlbXB0cywgcXVldWUsIHNlZW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZnV0dXJlID0gW107XG4gICAgICAgIF90aGlzLm1heEF0dGVtcHRzID0gbWF4QXR0ZW1wdHM7XG4gICAgICAgIF90aGlzLnF1ZXVlID0gcXVldWU7XG4gICAgICAgIF90aGlzLnNlZW4gPSBzZWVuICE9PSBudWxsICYmIHNlZW4gIT09IHZvaWQgMCA/IHNlZW4gOiB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGl0ZW1zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFjY2VwdGVkID0gaXRlbXMubWFwKGZ1bmN0aW9uIChvcGVyYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBhdHRlbXB0cyA9IF90aGlzLnVwZGF0ZUF0dGVtcHRzKG9wZXJhdGlvbik7XG4gICAgICAgICAgICBpZiAoYXR0ZW1wdHMgPiBfdGhpcy5tYXhBdHRlbXB0cyB8fCBfdGhpcy5pbmNsdWRlcyhvcGVyYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMucXVldWUucHVzaChvcGVyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXVlID0gdGhpcy5xdWV1ZS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBfdGhpcy5nZXRBdHRlbXB0cyhhKSAtIF90aGlzLmdldEF0dGVtcHRzKGIpOyB9KTtcbiAgICAgICAgcmV0dXJuIGFjY2VwdGVkO1xuICAgIH07XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucHVzaFdpdGhCYWNrb2ZmID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuZ2V0QXR0ZW1wdHMoaXRlbSkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2goaXRlbSlbMF07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGF0dGVtcHQgPSB0aGlzLnVwZGF0ZUF0dGVtcHRzKGl0ZW0pO1xuICAgICAgICBpZiAoYXR0ZW1wdCA+IHRoaXMubWF4QXR0ZW1wdHMgfHwgdGhpcy5pbmNsdWRlcyhpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aW1lb3V0ID0gYmFja29mZih7IGF0dGVtcHQ6IGF0dGVtcHQgLSAxIH0pO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBmdXR1cmUgbGlzdFxuICAgICAgICAgICAgX3RoaXMuZnV0dXJlID0gX3RoaXMuZnV0dXJlLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5pZCAhPT0gaXRlbS5pZDsgfSk7XG4gICAgICAgICAgICAvLyBMZXRzIGxpc3RlbmVycyBrbm93IHRoYXQgYSAnZnV0dXJlJyBtZXNzYWdlIGlzIG5vdyBhdmFpbGFibGUgaW4gdGhlIHF1ZXVlXG4gICAgICAgICAgICBfdGhpcy5lbWl0KE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB0aGlzLmZ1dHVyZS5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldEF0dGVtcHRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zZWVuW2l0ZW0uaWRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgIH07XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUudXBkYXRlQXR0ZW1wdHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLnNlZW5baXRlbS5pZF0gPSB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pICsgMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0ZW1wdHMoaXRlbSk7XG4gICAgfTtcbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5xdWV1ZS5pbmNsdWRlcyhpdGVtKSB8fFxuICAgICAgICAgICAgdGhpcy5mdXR1cmUuaW5jbHVkZXMoaXRlbSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5xdWV1ZS5maW5kKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLmlkID09PSBpdGVtLmlkOyB9KSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5mdXR1cmUuZmluZChmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5pZCA9PT0gaXRlbS5pZDsgfSkpKTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJ0b2RvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggKyB0aGlzLmZ1dHVyZS5sZW5ndGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUHJpb3JpdHlRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgUHJpb3JpdHlRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/queue/delivery.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/queue/delivery.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attempt: () => (/* binding */ attempt),\n/* harmony export */   ensure: () => (/* binding */ ensure)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n\n\nfunction tryAsync(fn) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, fn()];\n                case 1: return [2 /*return*/, _a.sent()];\n                case 2:\n                    err_1 = _a.sent();\n                    return [2 /*return*/, Promise.reject(err_1)];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction attempt(ctx, plugin) {\n    ctx.log('debug', 'plugin', { plugin: plugin.name });\n    var start = new Date().getTime();\n    var hook = plugin[ctx.event.type];\n    if (hook === undefined) {\n        return Promise.resolve(ctx);\n    }\n    var newCtx = tryAsync(function () { return hook.apply(plugin, [ctx]); })\n        .then(function (ctx) {\n        var done = new Date().getTime() - start;\n        ctx.stats.gauge('plugin_time', done, [\"plugin:\".concat(plugin.name)]);\n        return ctx;\n    })\n        .catch(function (err) {\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation &&\n            err.type === 'middleware_cancellation') {\n            throw err;\n        }\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation) {\n            ctx.log('warn', err.type, {\n                plugin: plugin.name,\n                error: err,\n            });\n            return err;\n        }\n        ctx.log('error', 'plugin Error', {\n            plugin: plugin.name,\n            error: err,\n        });\n        ctx.stats.increment('plugin_error', 1, [\"plugin:\".concat(plugin.name)]);\n        return err;\n    });\n    return newCtx;\n}\nfunction ensure(ctx, plugin) {\n    return attempt(ctx, plugin).then(function (newContext) {\n        if (newContext instanceof _context__WEBPACK_IMPORTED_MODULE_1__.CoreContext) {\n            return newContext;\n        }\n        ctx.log('debug', 'Context canceled');\n        ctx.stats.increment('context_canceled');\n        ctx.cancel(newContext);\n    });\n}\n//# sourceMappingURL=delivery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3F1ZXVlL2RlbGl2ZXJ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDYztBQUM3RDtBQUNBLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1AsaUNBQWlDLHFCQUFxQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLG1DQUFtQztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDJCQUEyQix3REFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdEQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0NBQWtDLGlEQUFXO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9xdWV1ZS9kZWxpdmVyeS5qcz9kYjUzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IENvcmVDb250ZXh0LCBDb250ZXh0Q2FuY2VsYXRpb24gfSBmcm9tICcuLi9jb250ZXh0JztcbmZ1bmN0aW9uIHRyeUFzeW5jKGZuKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXJyXzE7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZuKCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9hLnNlbnQoKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVqZWN0KGVycl8xKV07XG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGF0dGVtcHQoY3R4LCBwbHVnaW4pIHtcbiAgICBjdHgubG9nKCdkZWJ1ZycsICdwbHVnaW4nLCB7IHBsdWdpbjogcGx1Z2luLm5hbWUgfSk7XG4gICAgdmFyIHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdmFyIGhvb2sgPSBwbHVnaW5bY3R4LmV2ZW50LnR5cGVdO1xuICAgIGlmIChob29rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjdHgpO1xuICAgIH1cbiAgICB2YXIgbmV3Q3R4ID0gdHJ5QXN5bmMoZnVuY3Rpb24gKCkgeyByZXR1cm4gaG9vay5hcHBseShwbHVnaW4sIFtjdHhdKTsgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICB2YXIgZG9uZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnQ7XG4gICAgICAgIGN0eC5zdGF0cy5nYXVnZSgncGx1Z2luX3RpbWUnLCBkb25lLCBbXCJwbHVnaW46XCIuY29uY2F0KHBsdWdpbi5uYW1lKV0pO1xuICAgICAgICByZXR1cm4gY3R4O1xuICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBDb250ZXh0Q2FuY2VsYXRpb24gJiZcbiAgICAgICAgICAgIGVyci50eXBlID09PSAnbWlkZGxld2FyZV9jYW5jZWxsYXRpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIENvbnRleHRDYW5jZWxhdGlvbikge1xuICAgICAgICAgICAgY3R4LmxvZygnd2FybicsIGVyci50eXBlLCB7XG4gICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5sb2coJ2Vycm9yJywgJ3BsdWdpbiBFcnJvcicsIHtcbiAgICAgICAgICAgIHBsdWdpbjogcGx1Z2luLm5hbWUsXG4gICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LnN0YXRzLmluY3JlbWVudCgncGx1Z2luX2Vycm9yJywgMSwgW1wicGx1Z2luOlwiLmNvbmNhdChwbHVnaW4ubmFtZSldKTtcbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3Q3R4O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZShjdHgsIHBsdWdpbikge1xuICAgIHJldHVybiBhdHRlbXB0KGN0eCwgcGx1Z2luKS50aGVuKGZ1bmN0aW9uIChuZXdDb250ZXh0KSB7XG4gICAgICAgIGlmIChuZXdDb250ZXh0IGluc3RhbmNlb2YgQ29yZUNvbnRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGN0eC5sb2coJ2RlYnVnJywgJ0NvbnRleHQgY2FuY2VsZWQnKTtcbiAgICAgICAgY3R4LnN0YXRzLmluY3JlbWVudCgnY29udGV4dF9jYW5jZWxlZCcpO1xuICAgICAgICBjdHguY2FuY2VsKG5ld0NvbnRleHQpO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsaXZlcnkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventQueue: () => (/* binding */ CoreEventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _utils_group_by__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/group-by */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\");\n/* harmony import */ var _priority_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../priority-queue */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _task_task_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../task/task-group */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/task/task-group.js\");\n/* harmony import */ var _delivery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./delivery */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n\n\n\n\n\n\n\nvar CoreEventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(CoreEventQueue, _super);\n    function CoreEventQueue(priorityQueue) {\n        var _this = _super.call(this) || this;\n        /**\n         * All event deliveries get suspended until all the tasks in this task group are complete.\n         * For example: a middleware that augments the event object should be loaded safely as a\n         * critical task, this way, event queue will wait for it to be ready before sending events.\n         *\n         * This applies to all the events already in the queue, and the upcoming ones\n         */\n        _this.criticalTasks = (0,_task_task_group__WEBPACK_IMPORTED_MODULE_1__.createTaskGroup)();\n        _this.plugins = [];\n        _this.failedInitializations = [];\n        _this.flushing = false;\n        _this.queue = priorityQueue;\n        _this.queue.on(_priority_queue__WEBPACK_IMPORTED_MODULE_2__.ON_REMOVE_FROM_FUTURE, function () {\n            _this.scheduleFlush(0);\n        });\n        return _this;\n    }\n    CoreEventQueue.prototype.register = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(plugin.type === 'destination' && plugin.name !== 'Segment.io')) return [3 /*break*/, 1];\n                        plugin.load(ctx, instance).catch(function (err) {\n                            _this.failedInitializations.push(plugin.name);\n                            _this.emit('initialization_failure', plugin);\n                            console.warn(plugin.name, err);\n                            ctx.log('warn', 'Failed to load destination', {\n                                plugin: plugin.name,\n                                error: err,\n                            });\n                            _this.plugins = _this.plugins.filter(function (p) { return p === plugin; });\n                        });\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, plugin.load(ctx, instance)];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        this.plugins.push(plugin);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.deregister = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var e_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        if (!plugin.unload) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.resolve(plugin.unload(ctx, instance))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        this.plugins = this.plugins.filter(function (p) { return p.name !== plugin.name; });\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        ctx.log('warn', 'Failed to unload destination', {\n                            plugin: plugin.name,\n                            error: e_1,\n                        });\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatch = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var willDeliver;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.push(ctx);\n                willDeliver = this.subscribeToDelivery(ctx);\n                this.scheduleFlush(0);\n                return [2 /*return*/, willDeliver];\n            });\n        });\n    };\n    CoreEventQueue.prototype.subscribeToDelivery = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        var onDeliver = function (flushed, delivered) {\n                            if (flushed.isSame(ctx)) {\n                                _this.off('flush', onDeliver);\n                                if (delivered) {\n                                    resolve(flushed);\n                                }\n                                else {\n                                    resolve(flushed);\n                                }\n                            }\n                        };\n                        _this.on('flush', onDeliver);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatchSingle = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.updateAttempts(ctx);\n                ctx.attempts = 1;\n                return [2 /*return*/, this.deliver(ctx).catch(function (err) {\n                        var accepted = _this.enqueuRetry(err, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err });\n                            return ctx;\n                        }\n                        return _this.subscribeToDelivery(ctx);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.isEmpty = function () {\n        return this.queue.length === 0;\n    };\n    CoreEventQueue.prototype.scheduleFlush = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = 500; }\n        if (this.flushing) {\n            return;\n        }\n        this.flushing = true;\n        setTimeout(function () {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            _this.flush().then(function () {\n                setTimeout(function () {\n                    _this.flushing = false;\n                    if (_this.queue.length) {\n                        _this.scheduleFlush(0);\n                    }\n                }, 0);\n            });\n        }, timeout);\n    };\n    CoreEventQueue.prototype.deliver = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var start, done, err_1, error;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.criticalTasks.done()];\n                    case 1:\n                        _a.sent();\n                        start = Date.now();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.flushOne(ctx)];\n                    case 3:\n                        ctx = _a.sent();\n                        done = Date.now() - start;\n                        this.emit('delivery_success', ctx);\n                        ctx.stats.gauge('delivered', done);\n                        ctx.log('debug', 'Delivered', ctx.event);\n                        return [2 /*return*/, ctx];\n                    case 4:\n                        err_1 = _a.sent();\n                        error = err_1;\n                        ctx.log('error', 'Failed to deliver', error);\n                        this.emit('delivery_failure', ctx, error);\n                        ctx.stats.increment('delivery_failed');\n                        throw err_1;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.enqueuRetry = function (err, ctx) {\n        var retriable = !(err instanceof _context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation) || err.retry;\n        if (!retriable) {\n            return false;\n        }\n        return this.queue.pushWithBackoff(ctx);\n    };\n    CoreEventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, err_2, accepted;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length === 0) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx = this.queue.pop();\n                        if (!ctx) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx.attempts = this.queue.getAttempts(ctx);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.deliver(ctx)];\n                    case 2:\n                        ctx = _a.sent();\n                        this.emit('flush', ctx, true);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_2 = _a.sent();\n                        accepted = this.enqueuRetry(err_2, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err_2 });\n                            this.emit('flush', ctx, false);\n                        }\n                        return [2 /*return*/, []];\n                    case 4: return [2 /*return*/, [ctx]];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.isReady = function () {\n        // return this.plugins.every((p) => p.isLoaded())\n        // should we wait for every plugin to load?\n        return true;\n    };\n    CoreEventQueue.prototype.availableExtensions = function (denyList) {\n        var available = this.plugins.filter(function (p) {\n            var _a, _b, _c;\n            // Only filter out destination plugins or the Segment.io plugin\n            if (p.type !== 'destination' && p.name !== 'Segment.io') {\n                return true;\n            }\n            var alternativeNameMatch = undefined;\n            (_a = p.alternativeNames) === null || _a === void 0 ? void 0 : _a.forEach(function (name) {\n                if (denyList[name] !== undefined) {\n                    alternativeNameMatch = denyList[name];\n                }\n            });\n            // Explicit integration option takes precedence, `All: false` does not apply to Segment.io\n            return ((_c = (_b = denyList[p.name]) !== null && _b !== void 0 ? _b : alternativeNameMatch) !== null && _c !== void 0 ? _c : (p.name === 'Segment.io' ? true : denyList.All) !== false);\n        });\n        var _a = (0,_utils_group_by__WEBPACK_IMPORTED_MODULE_4__.groupBy)(available, 'type'), _b = _a.before, before = _b === void 0 ? [] : _b, _c = _a.enrichment, enrichment = _c === void 0 ? [] : _c, _d = _a.destination, destination = _d === void 0 ? [] : _d, _e = _a.after, after = _e === void 0 ? [] : _e;\n        return {\n            before: before,\n            enrichment: enrichment,\n            destinations: destination,\n            after: after,\n        };\n    };\n    CoreEventQueue.prototype.flushOne = function (ctx) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _c, before, enrichment, _i, before_1, beforeWare, temp, _d, enrichment_1, enrichmentWare, temp, _e, destinations, after, afterCalls;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        if (!this.isReady()) {\n                            throw new Error('Not ready');\n                        }\n                        if (ctx.attempts > 1) {\n                            this.emit('delivery_retry', ctx);\n                        }\n                        _c = this.availableExtensions((_a = ctx.event.integrations) !== null && _a !== void 0 ? _a : {}), before = _c.before, enrichment = _c.enrichment;\n                        _i = 0, before_1 = before;\n                        _f.label = 1;\n                    case 1:\n                        if (!(_i < before_1.length)) return [3 /*break*/, 4];\n                        beforeWare = before_1[_i];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.ensure)(ctx, beforeWare)];\n                    case 2:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, beforeWare);\n                        _f.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d = 0, enrichment_1 = enrichment;\n                        _f.label = 5;\n                    case 5:\n                        if (!(_d < enrichment_1.length)) return [3 /*break*/, 8];\n                        enrichmentWare = enrichment_1[_d];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, enrichmentWare)];\n                    case 6:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, enrichmentWare);\n                        _f.label = 7;\n                    case 7:\n                        _d++;\n                        return [3 /*break*/, 5];\n                    case 8:\n                        _e = this.availableExtensions((_b = ctx.event.integrations) !== null && _b !== void 0 ? _b : {}), destinations = _e.destinations, after = _e.after;\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                setTimeout(function () {\n                                    var attempts = destinations.map(function (destination) {\n                                        return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, destination);\n                                    });\n                                    Promise.all(attempts).then(resolve).catch(reject);\n                                }, 0);\n                            })];\n                    case 9:\n                        _f.sent();\n                        ctx.stats.increment('message_delivered');\n                        this.emit('message_delivered', ctx);\n                        afterCalls = after.map(function (after) { return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, after); });\n                        return [4 /*yield*/, Promise.all(afterCalls)];\n                    case 10:\n                        _f.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    return CoreEventQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.Emitter));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTBEO0FBQ2Q7QUFDYztBQUNHO0FBQ0Y7QUFDTjtBQUNSO0FBQzdDO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpRUFBZTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrRUFBcUI7QUFDNUM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixnRkFBZ0Ysc0JBQXNCO0FBQ3RHLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRSxnQ0FBZ0M7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGFBQWE7QUFDakU7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUNBQXlDLHdEQUFrQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGVBQWU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsaUJBQWlCLHdEQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVIQUF1SDtBQUN2SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGlEQUFNO0FBQ25EO0FBQ0E7QUFDQSw0Q0FBNEMsaURBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsa0RBQU87QUFDcEQ7QUFDQTtBQUNBLDRDQUE0QyxpREFBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUhBQXVIO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxrREFBTztBQUN0RCxxQ0FBcUM7QUFDckM7QUFDQSxpQ0FBaUM7QUFDakMsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLE9BQU8sa0RBQU8sZUFBZTtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsQ0FBQyxDQUFDLHFFQUFPO0FBQ2lCO0FBQzFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzP2JiOTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnLi4vdXRpbHMvZ3JvdXAtYnknO1xuaW1wb3J0IHsgT05fUkVNT1ZFX0ZST01fRlVUVVJFIH0gZnJvbSAnLi4vcHJpb3JpdHktcXVldWUnO1xuaW1wb3J0IHsgQ29yZUNvbnRleHQsIENvbnRleHRDYW5jZWxhdGlvbiB9IGZyb20gJy4uL2NvbnRleHQnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVRhc2tHcm91cCB9IGZyb20gJy4uL3Rhc2svdGFzay1ncm91cCc7XG5pbXBvcnQgeyBhdHRlbXB0LCBlbnN1cmUgfSBmcm9tICcuL2RlbGl2ZXJ5JztcbnZhciBDb3JlRXZlbnRRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29yZUV2ZW50UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50UXVldWUocHJpb3JpdHlRdWV1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIGV2ZW50IGRlbGl2ZXJpZXMgZ2V0IHN1c3BlbmRlZCB1bnRpbCBhbGwgdGhlIHRhc2tzIGluIHRoaXMgdGFzayBncm91cCBhcmUgY29tcGxldGUuXG4gICAgICAgICAqIEZvciBleGFtcGxlOiBhIG1pZGRsZXdhcmUgdGhhdCBhdWdtZW50cyB0aGUgZXZlbnQgb2JqZWN0IHNob3VsZCBiZSBsb2FkZWQgc2FmZWx5IGFzIGFcbiAgICAgICAgICogY3JpdGljYWwgdGFzaywgdGhpcyB3YXksIGV2ZW50IHF1ZXVlIHdpbGwgd2FpdCBmb3IgaXQgdG8gYmUgcmVhZHkgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGFwcGxpZXMgdG8gYWxsIHRoZSBldmVudHMgYWxyZWFkeSBpbiB0aGUgcXVldWUsIGFuZCB0aGUgdXBjb21pbmcgb25lc1xuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3JpdGljYWxUYXNrcyA9IGNyZWF0ZVRhc2tHcm91cCgpO1xuICAgICAgICBfdGhpcy5wbHVnaW5zID0gW107XG4gICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucyA9IFtdO1xuICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHByaW9yaXR5UXVldWU7XG4gICAgICAgIF90aGlzLnF1ZXVlLm9uKE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGN0eCwgcGx1Z2luLCBpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGx1Z2luLnR5cGUgPT09ICdkZXN0aW5hdGlvbicgJiYgcGx1Z2luLm5hbWUgIT09ICdTZWdtZW50LmlvJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmxvYWQoY3R4LCBpbnN0YW5jZSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucy5wdXNoKHBsdWdpbi5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KCdpbml0aWFsaXphdGlvbl9mYWlsdXJlJywgcGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4ocGx1Z2luLm5hbWUsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnd2FybicsICdGYWlsZWQgdG8gbG9hZCBkZXN0aW5hdGlvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wbHVnaW5zID0gX3RoaXMucGx1Z2lucy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAgPT09IHBsdWdpbjsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKGN0eCwgcGx1Z2luLCBpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZV8xO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGx1Z2luLnVubG9hZCkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLnJlc29sdmUocGx1Z2luLnVubG9hZChjdHgsIGluc3RhbmNlKSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2lucyA9IHRoaXMucGx1Z2lucy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAubmFtZSAhPT0gcGx1Z2luLm5hbWU7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ3dhcm4nLCAnRmFpbGVkIHRvIHVubG9hZCBkZXN0aW5hdGlvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW46IHBsdWdpbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlXzEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWxsRGVsaXZlcjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdEaXNwYXRjaGluZycpO1xuICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ21lc3NhZ2VfZGlzcGF0Y2hlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaChjdHgpO1xuICAgICAgICAgICAgICAgIHdpbGxEZWxpdmVyID0gdGhpcy5zdWJzY3JpYmVUb0RlbGl2ZXJ5KGN0eCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUZsdXNoKDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB3aWxsRGVsaXZlcl07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuc3Vic2NyaWJlVG9EZWxpdmVyeSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbkRlbGl2ZXIgPSBmdW5jdGlvbiAoZmx1c2hlZCwgZGVsaXZlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZsdXNoZWQuaXNTYW1lKGN0eCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub2ZmKCdmbHVzaCcsIG9uRGVsaXZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxpdmVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmx1c2hlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZsdXNoZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uKCdmbHVzaCcsIG9uRGVsaXZlcik7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5kaXNwYXRjaFNpbmdsZSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdEaXNwYXRjaGluZycpO1xuICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ21lc3NhZ2VfZGlzcGF0Y2hlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMucXVldWUudXBkYXRlQXR0ZW1wdHMoY3R4KTtcbiAgICAgICAgICAgICAgICBjdHguYXR0ZW1wdHMgPSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmRlbGl2ZXIoY3R4KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWNjZXB0ZWQgPSBfdGhpcy5lbnF1ZXVSZXRyeShlcnIsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFjY2VwdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNldEZhaWxlZERlbGl2ZXJ5KHsgcmVhc29uOiBlcnIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zdWJzY3JpYmVUb0RlbGl2ZXJ5KGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggPT09IDA7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuc2NoZWR1bGVGbHVzaCA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aW1lb3V0ID09PSB2b2lkIDApIHsgdGltZW91dCA9IDUwMDsgfVxuICAgICAgICBpZiAodGhpcy5mbHVzaGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmx1c2hpbmcgPSB0cnVlO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgICAgIF90aGlzLmZsdXNoKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZsdXNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5xdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjaGVkdWxlRmx1c2goMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5kZWxpdmVyID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQsIGRvbmUsIGVycl8xLCBlcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jcml0aWNhbFRhc2tzLmRvbmUoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsyLCA0LCAsIDVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZmx1c2hPbmUoY3R4KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlbGl2ZXJ5X3N1Y2Nlc3MnLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0YXRzLmdhdWdlKCdkZWxpdmVyZWQnLCBkb25lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ2RlYnVnJywgJ0RlbGl2ZXJlZCcsIGN0eC5ldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGVycl8xO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnZXJyb3InLCAnRmFpbGVkIHRvIGRlbGl2ZXInLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlbGl2ZXJ5X2ZhaWx1cmUnLCBjdHgsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ2RlbGl2ZXJ5X2ZhaWxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyXzE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVSZXRyeSA9IGZ1bmN0aW9uIChlcnIsIGN0eCkge1xuICAgICAgICB2YXIgcmV0cmlhYmxlID0gIShlcnIgaW5zdGFuY2VvZiBDb250ZXh0Q2FuY2VsYXRpb24pIHx8IGVyci5yZXRyeTtcbiAgICAgICAgaWYgKCFyZXRyaWFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5wdXNoV2l0aEJhY2tvZmYoY3R4KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN0eCwgZXJyXzIsIGFjY2VwdGVkO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMucXVldWUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYXR0ZW1wdHMgPSB0aGlzLnF1ZXVlLmdldEF0dGVtcHRzKGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGl2ZXIoY3R4KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmx1c2gnLCBjdHgsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0ZWQgPSB0aGlzLmVucXVldVJldHJ5KGVycl8yLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY2NlcHRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zZXRGYWlsZWREZWxpdmVyeSh7IHJlYXNvbjogZXJyXzIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdmbHVzaCcsIGN0eCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtdXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgW2N0eF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5pc1JlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyByZXR1cm4gdGhpcy5wbHVnaW5zLmV2ZXJ5KChwKSA9PiBwLmlzTG9hZGVkKCkpXG4gICAgICAgIC8vIHNob3VsZCB3ZSB3YWl0IGZvciBldmVyeSBwbHVnaW4gdG8gbG9hZD9cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuYXZhaWxhYmxlRXh0ZW5zaW9ucyA9IGZ1bmN0aW9uIChkZW55TGlzdCkge1xuICAgICAgICB2YXIgYXZhaWxhYmxlID0gdGhpcy5wbHVnaW5zLmZpbHRlcihmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgICAgICAvLyBPbmx5IGZpbHRlciBvdXQgZGVzdGluYXRpb24gcGx1Z2lucyBvciB0aGUgU2VnbWVudC5pbyBwbHVnaW5cbiAgICAgICAgICAgIGlmIChwLnR5cGUgIT09ICdkZXN0aW5hdGlvbicgJiYgcC5uYW1lICE9PSAnU2VnbWVudC5pbycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhbHRlcm5hdGl2ZU5hbWVNYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIChfYSA9IHAuYWx0ZXJuYXRpdmVOYW1lcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVueUxpc3RbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBhbHRlcm5hdGl2ZU5hbWVNYXRjaCA9IGRlbnlMaXN0W25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gRXhwbGljaXQgaW50ZWdyYXRpb24gb3B0aW9uIHRha2VzIHByZWNlZGVuY2UsIGBBbGw6IGZhbHNlYCBkb2VzIG5vdCBhcHBseSB0byBTZWdtZW50LmlvXG4gICAgICAgICAgICByZXR1cm4gKChfYyA9IChfYiA9IGRlbnlMaXN0W3AubmFtZV0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGFsdGVybmF0aXZlTmFtZU1hdGNoKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAocC5uYW1lID09PSAnU2VnbWVudC5pbycgPyB0cnVlIDogZGVueUxpc3QuQWxsKSAhPT0gZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIF9hID0gZ3JvdXBCeShhdmFpbGFibGUsICd0eXBlJyksIF9iID0gX2EuYmVmb3JlLCBiZWZvcmUgPSBfYiA9PT0gdm9pZCAwID8gW10gOiBfYiwgX2MgPSBfYS5lbnJpY2htZW50LCBlbnJpY2htZW50ID0gX2MgPT09IHZvaWQgMCA/IFtdIDogX2MsIF9kID0gX2EuZGVzdGluYXRpb24sIGRlc3RpbmF0aW9uID0gX2QgPT09IHZvaWQgMCA/IFtdIDogX2QsIF9lID0gX2EuYWZ0ZXIsIGFmdGVyID0gX2UgPT09IHZvaWQgMCA/IFtdIDogX2U7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWZvcmU6IGJlZm9yZSxcbiAgICAgICAgICAgIGVucmljaG1lbnQ6IGVucmljaG1lbnQsXG4gICAgICAgICAgICBkZXN0aW5hdGlvbnM6IGRlc3RpbmF0aW9uLFxuICAgICAgICAgICAgYWZ0ZXI6IGFmdGVyLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmZsdXNoT25lID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2MsIGJlZm9yZSwgZW5yaWNobWVudCwgX2ksIGJlZm9yZV8xLCBiZWZvcmVXYXJlLCB0ZW1wLCBfZCwgZW5yaWNobWVudF8xLCBlbnJpY2htZW50V2FyZSwgdGVtcCwgX2UsIGRlc3RpbmF0aW9ucywgYWZ0ZXIsIGFmdGVyQ2FsbHM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9mKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfZi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNSZWFkeSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgcmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHguYXR0ZW1wdHMgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9yZXRyeScsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfYyA9IHRoaXMuYXZhaWxhYmxlRXh0ZW5zaW9ucygoX2EgPSBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSksIGJlZm9yZSA9IF9jLmJlZm9yZSwgZW5yaWNobWVudCA9IF9jLmVucmljaG1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaSA9IDAsIGJlZm9yZV8xID0gYmVmb3JlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2YubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfaSA8IGJlZm9yZV8xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlV2FyZSA9IGJlZm9yZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGVuc3VyZShjdHgsIGJlZm9yZVdhcmUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wIGluc3RhbmNlb2YgQ29yZUNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHggPSB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlX2VucmljaGVkJywgY3R4LCBiZWZvcmVXYXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2krKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZCA9IDAsIGVucmljaG1lbnRfMSA9IGVucmljaG1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5sYWJlbCA9IDU7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9kIDwgZW5yaWNobWVudF8xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5yaWNobWVudFdhcmUgPSBlbnJpY2htZW50XzFbX2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXR0ZW1wdChjdHgsIGVucmljaG1lbnRXYXJlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBfZi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZV9lbnJpY2hlZCcsIGN0eCwgZW5yaWNobWVudFdhcmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2YubGFiZWwgPSA3O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lID0gdGhpcy5hdmFpbGFibGVFeHRlbnNpb25zKChfYiA9IGN0eC5ldmVudC5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9KSwgZGVzdGluYXRpb25zID0gX2UuZGVzdGluYXRpb25zLCBhZnRlciA9IF9lLmFmdGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRlbXB0cyA9IGRlc3RpbmF0aW9ucy5tYXAoZnVuY3Rpb24gKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dGVtcHQoY3R4LCBkZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKGF0dGVtcHRzKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Yuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0YXRzLmluY3JlbWVudCgnbWVzc2FnZV9kZWxpdmVyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZV9kZWxpdmVyZWQnLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJDYWxscyA9IGFmdGVyLm1hcChmdW5jdGlvbiAoYWZ0ZXIpIHsgcmV0dXJuIGF0dGVtcHQoY3R4LCBhZnRlcik7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoYWZ0ZXJDYWxscyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Yuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVFdmVudFF1ZXVlO1xufShFbWl0dGVyKSk7XG5leHBvcnQgeyBDb3JlRXZlbnRRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnQtcXVldWUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/stats/index.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/stats/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreStats: () => (/* binding */ CoreStats),\n/* harmony export */   NullStats: () => (/* binding */ NullStats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\nvar compactMetricType = function (type) {\n    var enums = {\n        gauge: 'g',\n        counter: 'c',\n    };\n    return enums[type];\n};\nvar CoreStats = /** @class */ (function () {\n    function CoreStats() {\n        this.metrics = [];\n    }\n    CoreStats.prototype.increment = function (metric, by, tags) {\n        if (by === void 0) { by = 1; }\n        this.metrics.push({\n            metric: metric,\n            value: by,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'counter',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.gauge = function (metric, value, tags) {\n        this.metrics.push({\n            metric: metric,\n            value: value,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'gauge',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.flush = function () {\n        var formatted = this.metrics.map(function (m) { return ((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, m), { tags: m.tags.join(',') })); });\n        // ie doesn't like console.table\n        if (console.table) {\n            console.table(formatted);\n        }\n        else {\n            console.log(formatted);\n        }\n        this.metrics = [];\n    };\n    /**\n     * compact keys for smaller payload\n     */\n    CoreStats.prototype.serialize = function () {\n        return this.metrics.map(function (m) {\n            return {\n                m: m.metric,\n                v: m.value,\n                t: m.tags,\n                k: compactMetricType(m.type),\n                e: m.timestamp,\n            };\n        });\n    };\n    return CoreStats;\n}());\n\nvar NullStats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(NullStats, _super);\n    function NullStats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NullStats.prototype.gauge = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.increment = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.flush = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.serialize = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n        return [];\n    };\n    return NullStats;\n}(CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3N0YXRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHdEQUF3RCxRQUFRLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxRQUFRLHdCQUF3QixLQUFLO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsQ0FBQztBQUNvQjtBQUNyQjtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNvQjtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9zdGF0cy9pbmRleC5qcz8xM2YzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduLCBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbnZhciBjb21wYWN0TWV0cmljVHlwZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIGVudW1zID0ge1xuICAgICAgICBnYXVnZTogJ2cnLFxuICAgICAgICBjb3VudGVyOiAnYycsXG4gICAgfTtcbiAgICByZXR1cm4gZW51bXNbdHlwZV07XG59O1xudmFyIENvcmVTdGF0cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb3JlU3RhdHMoKSB7XG4gICAgICAgIHRoaXMubWV0cmljcyA9IFtdO1xuICAgIH1cbiAgICBDb3JlU3RhdHMucHJvdG90eXBlLmluY3JlbWVudCA9IGZ1bmN0aW9uIChtZXRyaWMsIGJ5LCB0YWdzKSB7XG4gICAgICAgIGlmIChieSA9PT0gdm9pZCAwKSB7IGJ5ID0gMTsgfVxuICAgICAgICB0aGlzLm1ldHJpY3MucHVzaCh7XG4gICAgICAgICAgICBtZXRyaWM6IG1ldHJpYyxcbiAgICAgICAgICAgIHZhbHVlOiBieSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgIT09IG51bGwgJiYgdGFncyAhPT0gdm9pZCAwID8gdGFncyA6IFtdLFxuICAgICAgICAgICAgdHlwZTogJ2NvdW50ZXInLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVTdGF0cy5wcm90b3R5cGUuZ2F1Z2UgPSBmdW5jdGlvbiAobWV0cmljLCB2YWx1ZSwgdGFncykge1xuICAgICAgICB0aGlzLm1ldHJpY3MucHVzaCh7XG4gICAgICAgICAgICBtZXRyaWM6IG1ldHJpYyxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgIT09IG51bGwgJiYgdGFncyAhPT0gdm9pZCAwID8gdGFncyA6IFtdLFxuICAgICAgICAgICAgdHlwZTogJ2dhdWdlJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlU3RhdHMucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5tZXRyaWNzLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBtKSwgeyB0YWdzOiBtLnRhZ3Muam9pbignLCcpIH0pKTsgfSk7XG4gICAgICAgIC8vIGllIGRvZXNuJ3QgbGlrZSBjb25zb2xlLnRhYmxlXG4gICAgICAgIGlmIChjb25zb2xlLnRhYmxlKSB7XG4gICAgICAgICAgICBjb25zb2xlLnRhYmxlKGZvcm1hdHRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmb3JtYXR0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWV0cmljcyA9IFtdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogY29tcGFjdCBrZXlzIGZvciBzbWFsbGVyIHBheWxvYWRcbiAgICAgKi9cbiAgICBDb3JlU3RhdHMucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0cmljcy5tYXAoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbTogbS5tZXRyaWMsXG4gICAgICAgICAgICAgICAgdjogbS52YWx1ZSxcbiAgICAgICAgICAgICAgICB0OiBtLnRhZ3MsXG4gICAgICAgICAgICAgICAgazogY29tcGFjdE1ldHJpY1R5cGUobS50eXBlKSxcbiAgICAgICAgICAgICAgICBlOiBtLnRpbWVzdGFtcCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVTdGF0cztcbn0oKSk7XG5leHBvcnQgeyBDb3JlU3RhdHMgfTtcbnZhciBOdWxsU3RhdHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE51bGxTdGF0cywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOdWxsU3RhdHMoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5nYXVnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOdWxsU3RhdHMucHJvdG90eXBlLmluY3JlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOdWxsU3RhdHMucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIF9hcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE51bGxTdGF0cy5wcm90b3R5cGUuc2VyaWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIF9hcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH07XG4gICAgcmV0dXJuIE51bGxTdGF0cztcbn0oQ29yZVN0YXRzKSk7XG5leHBvcnQgeyBOdWxsU3RhdHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/stats/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/task/task-group.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/task/task-group.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTaskGroup: () => (/* binding */ createTaskGroup)\n/* harmony export */ });\n/* harmony import */ var _utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-thenable */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\");\n\nvar createTaskGroup = function () {\n    var taskCompletionPromise;\n    var resolvePromise;\n    var count = 0;\n    return {\n        done: function () { return taskCompletionPromise; },\n        run: function (op) {\n            var returnValue = op();\n            if ((0,_utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__.isThenable)(returnValue)) {\n                if (++count === 1) {\n                    taskCompletionPromise = new Promise(function (res) { return (resolvePromise = res); });\n                }\n                returnValue.finally(function () { return --count === 0 && resolvePromise(); });\n            }\n            return returnValue;\n        },\n    };\n};\n//# sourceMappingURL=task-group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3Rhc2svdGFzay1ncm91cC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrRDtBQUMzQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtCQUErQjtBQUMzRDtBQUNBO0FBQ0EsZ0JBQWdCLDhEQUFVO0FBQzFCO0FBQ0EseUVBQXlFLGdDQUFnQztBQUN6RztBQUNBLGtEQUFrRCwyQ0FBMkM7QUFDN0Y7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdGFzay90YXNrLWdyb3VwLmpzPzRhNDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNUaGVuYWJsZSB9IGZyb20gJy4uL3V0aWxzL2lzLXRoZW5hYmxlJztcbmV4cG9ydCB2YXIgY3JlYXRlVGFza0dyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0YXNrQ29tcGxldGlvblByb21pc2U7XG4gICAgdmFyIHJlc29sdmVQcm9taXNlO1xuICAgIHZhciBjb3VudCA9IDA7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGFza0NvbXBsZXRpb25Qcm9taXNlOyB9LFxuICAgICAgICBydW46IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gb3AoKTtcbiAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHJldHVyblZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICgrK2NvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tDb21wbGV0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIChyZXNvbHZlUHJvbWlzZSA9IHJlcyk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZS5maW5hbGx5KGZ1bmN0aW9uICgpIHsgcmV0dXJuIC0tY291bnQgPT09IDAgJiYgcmVzb2x2ZVByb21pc2UoKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YXNrLWdyb3VwLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/task/task-group.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/utils/group-by.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/utils/group-by.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupBy: () => (/* binding */ groupBy)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\nfunction groupBy(collection, grouper) {\n    var results = {};\n    collection.forEach(function (item) {\n        var _a;\n        var key = undefined;\n        if (typeof grouper === 'string') {\n            var suggestedKey = item[grouper];\n            key =\n                typeof suggestedKey !== 'string'\n                    ? JSON.stringify(suggestedKey)\n                    : suggestedKey;\n        }\n        else if (grouper instanceof Function) {\n            key = grouper(item);\n        }\n        if (key === undefined) {\n            return;\n        }\n        results[key] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], ((_a = results[key]) !== null && _a !== void 0 ? _a : []), true), [item], false);\n    });\n    return results;\n}\n//# sourceMappingURL=group-by.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3V0aWxzL2dyb3VwLWJ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXNDO0FBQy9CO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvREFBYSxDQUFDLG9EQUFhO0FBQ2xELEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvZ3JvdXAtYnkuanM/MzE5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBCeShjb2xsZWN0aW9uLCBncm91cGVyKSB7XG4gICAgdmFyIHJlc3VsdHMgPSB7fTtcbiAgICBjb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIga2V5ID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodHlwZW9mIGdyb3VwZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB2YXIgc3VnZ2VzdGVkS2V5ID0gaXRlbVtncm91cGVyXTtcbiAgICAgICAgICAgIGtleSA9XG4gICAgICAgICAgICAgICAgdHlwZW9mIHN1Z2dlc3RlZEtleSAhPT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShzdWdnZXN0ZWRLZXkpXG4gICAgICAgICAgICAgICAgICAgIDogc3VnZ2VzdGVkS2V5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdyb3VwZXIgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAga2V5ID0gZ3JvdXBlcihpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRzW2tleV0gPSBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sICgoX2EgPSByZXN1bHRzW2tleV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdKSwgdHJ1ZSksIFtpdGVtXSwgZmFsc2UpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JvdXAtYnkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3V0aWxzL2lzLXRoZW5hYmxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3V0aWxzL2lzLXRoZW5hYmxlLmpzPzg0ZTYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgQ2hlY2sgaWYgIHRoZW5hYmxlXG4gKiAgKGluc3RhbmNlb2YgUHJvbWlzZSBkb2Vzbid0IHJlc3BlY3QgcmVhbG1zKVxuICovXG5leHBvcnQgdmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAndGhlbicgaW4gdmFsdWUgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtdGhlbmFibGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/assertions.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/validation/assertions.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertEventExists: () => (/* binding */ assertEventExists),\n/* harmony export */   assertEventType: () => (/* binding */ assertEventType),\n/* harmony export */   assertMessageId: () => (/* binding */ assertMessageId),\n/* harmony export */   assertTrackEventName: () => (/* binding */ assertTrackEventName),\n/* harmony export */   assertTrackEventProperties: () => (/* binding */ assertTrackEventProperties),\n/* harmony export */   assertTraits: () => (/* binding */ assertTraits),\n/* harmony export */   assertUserIdentity: () => (/* binding */ assertUserIdentity),\n/* harmony export */   validateEvent: () => (/* binding */ validateEvent)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\nvar stringError = 'is not a string';\nvar objError = 'is not an object';\nvar nilError = 'is nil';\nfunction assertUserIdentity(event) {\n    var USER_FIELD_NAME = '.userId/anonymousId/previousId/groupId';\n    var getAnyUserId = function (event) { var _a, _b, _c; return (_c = (_b = (_a = event.userId) !== null && _a !== void 0 ? _a : event.anonymousId) !== null && _b !== void 0 ? _b : event.groupId) !== null && _c !== void 0 ? _c : event.previousId; };\n    var id = getAnyUserId(event);\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, nilError);\n    }\n    else if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, stringError);\n    }\n}\nfunction assertEventExists(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', nilError);\n    }\n    if (typeof event !== 'object') {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', objError);\n    }\n}\nfunction assertEventType(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.type)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.type', stringError);\n    }\n}\nfunction assertTrackEventName(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.event', stringError);\n    }\n}\nfunction assertTrackEventProperties(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.properties)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.properties', objError);\n    }\n}\nfunction assertTraits(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.traits)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.traits', objError);\n    }\n}\nfunction assertMessageId(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.messageId)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.messageId', stringError);\n    }\n}\nfunction validateEvent(event) {\n    assertEventExists(event);\n    assertEventType(event);\n    assertMessageId(event);\n    if (event.type === 'track') {\n        assertTrackEventName(event);\n        assertTrackEventProperties(event);\n    }\n    if (['group', 'identify'].includes(event.type)) {\n        assertTraits(event);\n    }\n    assertUserIdentity(event);\n}\n//# sourceMappingURL=assertions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vYXNzZXJ0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ2lCO0FBQzVEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSwwQ0FBMEMsZ0JBQWdCO0FBQzFEO0FBQ0EsU0FBUyxnREFBTTtBQUNmLGtCQUFrQixvREFBZTtBQUNqQztBQUNBLGNBQWMsa0RBQVE7QUFDdEIsa0JBQWtCLG9EQUFlO0FBQ2pDO0FBQ0E7QUFDTztBQUNQLFNBQVMsZ0RBQU07QUFDZixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNBLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLGtEQUFRO0FBQ2pCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLGtEQUFRO0FBQ2pCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLHVEQUFhO0FBQ3RCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLHVEQUFhO0FBQ3RCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLGtEQUFRO0FBQ2pCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS92YWxpZGF0aW9uL2Fzc2VydGlvbnMuanM/NTA5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuL2Vycm9ycyc7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNQbGFpbk9iamVjdCwgZXhpc3RzIH0gZnJvbSAnLi9oZWxwZXJzJztcbnZhciBzdHJpbmdFcnJvciA9ICdpcyBub3QgYSBzdHJpbmcnO1xudmFyIG9iakVycm9yID0gJ2lzIG5vdCBhbiBvYmplY3QnO1xudmFyIG5pbEVycm9yID0gJ2lzIG5pbCc7XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VXNlcklkZW50aXR5KGV2ZW50KSB7XG4gICAgdmFyIFVTRVJfRklFTERfTkFNRSA9ICcudXNlcklkL2Fub255bW91c0lkL3ByZXZpb3VzSWQvZ3JvdXBJZCc7XG4gICAgdmFyIGdldEFueVVzZXJJZCA9IGZ1bmN0aW9uIChldmVudCkgeyB2YXIgX2EsIF9iLCBfYzsgcmV0dXJuIChfYyA9IChfYiA9IChfYSA9IGV2ZW50LnVzZXJJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXZlbnQuYW5vbnltb3VzSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGV2ZW50Lmdyb3VwSWQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGV2ZW50LnByZXZpb3VzSWQ7IH07XG4gICAgdmFyIGlkID0gZ2V0QW55VXNlcklkKGV2ZW50KTtcbiAgICBpZiAoIWV4aXN0cyhpZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihVU0VSX0ZJRUxEX05BTUUsIG5pbEVycm9yKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWlzU3RyaW5nKGlkKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFVTRVJfRklFTERfTkFNRSwgc3RyaW5nRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRFdmVudEV4aXN0cyhldmVudCkge1xuICAgIGlmICghZXhpc3RzKGV2ZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdFdmVudCcsIG5pbEVycm9yKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBldmVudCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignRXZlbnQnLCBvYmpFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEV2ZW50VHlwZShldmVudCkge1xuICAgIGlmICghaXNTdHJpbmcoZXZlbnQudHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLnR5cGUnLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRyYWNrRXZlbnROYW1lKGV2ZW50KSB7XG4gICAgaWYgKCFpc1N0cmluZyhldmVudC5ldmVudCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLmV2ZW50Jywgc3RyaW5nRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUcmFja0V2ZW50UHJvcGVydGllcyhldmVudCkge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChldmVudC5wcm9wZXJ0aWVzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcucHJvcGVydGllcycsIG9iakVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHJhaXRzKGV2ZW50KSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGV2ZW50LnRyYWl0cykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLnRyYWl0cycsIG9iakVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TWVzc2FnZUlkKGV2ZW50KSB7XG4gICAgaWYgKCFpc1N0cmluZyhldmVudC5tZXNzYWdlSWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJy5tZXNzYWdlSWQnLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRXZlbnQoZXZlbnQpIHtcbiAgICBhc3NlcnRFdmVudEV4aXN0cyhldmVudCk7XG4gICAgYXNzZXJ0RXZlbnRUeXBlKGV2ZW50KTtcbiAgICBhc3NlcnRNZXNzYWdlSWQoZXZlbnQpO1xuICAgIGlmIChldmVudC50eXBlID09PSAndHJhY2snKSB7XG4gICAgICAgIGFzc2VydFRyYWNrRXZlbnROYW1lKGV2ZW50KTtcbiAgICAgICAgYXNzZXJ0VHJhY2tFdmVudFByb3BlcnRpZXMoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoWydncm91cCcsICdpZGVudGlmeSddLmluY2x1ZGVzKGV2ZW50LnR5cGUpKSB7XG4gICAgICAgIGFzc2VydFRyYWl0cyhldmVudCk7XG4gICAgfVxuICAgIGFzc2VydFVzZXJJZGVudGl0eShldmVudCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3NlcnRpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/errors.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/validation/errors.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\nvar ValidationError = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(ValidationError, _super);\n    function ValidationError(field, message) {\n        var _this = _super.call(this, \"\".concat(field, \" \").concat(message)) || this;\n        _this.field = field;\n        return _this;\n    }\n    return ValidationError;\n}(Error));\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDO0FBQ2xDO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDMEI7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9lcnJvcnMuanM/MGQ1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbnZhciBWYWxpZGF0aW9uRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZhbGlkYXRpb25FcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBWYWxpZGF0aW9uRXJyb3IoZmllbGQsIG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJcIi5jb25jYXQoZmllbGQsIFwiIFwiKS5jb25jYXQobWVzc2FnZSkpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFZhbGlkYXRpb25FcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydCB7IFZhbGlkYXRpb25FcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/errors.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),\n/* harmony export */   isString: () => (/* binding */ isString)\n/* harmony export */ });\nfunction isString(obj) {\n    return typeof obj === 'string';\n}\nfunction isNumber(obj) {\n    return typeof obj === 'number';\n}\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\nfunction exists(val) {\n    return val !== undefined && val !== null;\n}\nfunction isPlainObject(obj) {\n    return (Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object');\n}\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vaGVscGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vaGVscGVycy5qcz83YjUwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyhvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdudW1iZXInO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnQgZnVuY3Rpb24gZXhpc3RzKHZhbCkge1xuICAgIHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCAmJiB2YWwgIT09IG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpID09PSAnb2JqZWN0Jyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWxwZXJzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js":
/*!****************************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferred: () => (/* binding */ createDeferred)\n/* harmony export */ });\n/**\n * Return a promise that can be externally resolved\n */\nvar createDeferred = function () {\n    var resolve;\n    var reject;\n    var settled = false;\n    var promise = new Promise(function (_resolve, _reject) {\n        resolve = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _resolve.apply(void 0, args);\n        };\n        reject = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _reject.apply(void 0, args);\n        };\n    });\n    return {\n        resolve: resolve,\n        reject: reject,\n        promise: promise,\n        isSettled: function () { return settled; },\n    };\n};\n//# sourceMappingURL=create-deferred.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzL2Rpc3QvZXNtL2NyZWF0ZS1kZWZlcnJlZC9jcmVhdGUtZGVmZXJyZWQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxpQkFBaUI7QUFDbEQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzL2Rpc3QvZXNtL2NyZWF0ZS1kZWZlcnJlZC9jcmVhdGUtZGVmZXJyZWQuanM/MzRmYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJldHVybiBhIHByb21pc2UgdGhhdCBjYW4gYmUgZXh0ZXJuYWxseSByZXNvbHZlZFxuICovXG5leHBvcnQgdmFyIGNyZWF0ZURlZmVycmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXNvbHZlO1xuICAgIHZhciByZWplY3Q7XG4gICAgdmFyIHNldHRsZWQgPSBmYWxzZTtcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChfcmVzb2x2ZSwgX3JlamVjdCkge1xuICAgICAgICByZXNvbHZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0dGxlZCA9IHRydWU7XG4gICAgICAgICAgICBfcmVzb2x2ZS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICByZWplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXR0bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIF9yZWplY3QuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXNvbHZlOiByZXNvbHZlLFxuICAgICAgICByZWplY3Q6IHJlamVjdCxcbiAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgaXNTZXR0bGVkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXR0bGVkOyB9LFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlLWRlZmVycmVkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Emitter: () => (/* binding */ Emitter)\n/* harmony export */ });\n/**\n * Event Emitter that takes the expected contract as a generic\n * @example\n * ```ts\n *  type Contract = {\n *    delivery_success: [DeliverySuccessResponse, Metrics],\n *    delivery_failure: [DeliveryError]\n * }\n *  new Emitter<Contract>()\n *  .on('delivery_success', (res, metrics) => ...)\n *  .on('delivery_failure', (err) => ...)\n * ```\n */\nvar Emitter = /** @class */ (function () {\n    function Emitter(options) {\n        var _a;\n        this.callbacks = {};\n        this.warned = false;\n        this.maxListeners = (_a = options === null || options === void 0 ? void 0 : options.maxListeners) !== null && _a !== void 0 ? _a : 10;\n    }\n    Emitter.prototype.warnIfPossibleMemoryLeak = function (event) {\n        if (this.warned) {\n            return;\n        }\n        if (this.maxListeners &&\n            this.callbacks[event].length > this.maxListeners) {\n            console.warn(\"Event Emitter: Possible memory leak detected; \".concat(String(event), \" has exceeded \").concat(this.maxListeners, \" listeners.\"));\n            this.warned = true;\n        }\n    };\n    Emitter.prototype.on = function (event, callback) {\n        if (!this.callbacks[event]) {\n            this.callbacks[event] = [callback];\n        }\n        else {\n            this.callbacks[event].push(callback);\n            this.warnIfPossibleMemoryLeak(event);\n        }\n        return this;\n    };\n    Emitter.prototype.once = function (event, callback) {\n        var _this = this;\n        var on = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            _this.off(event, on);\n            callback.apply(_this, args);\n        };\n        this.on(event, on);\n        return this;\n    };\n    Emitter.prototype.off = function (event, callback) {\n        var _a;\n        var fns = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        var without = fns.filter(function (fn) { return fn !== callback; });\n        this.callbacks[event] = without;\n        return this;\n    };\n    Emitter.prototype.emit = function (event) {\n        var _this = this;\n        var _a;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var callbacks = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        callbacks.forEach(function (callback) {\n            callback.apply(_this, args);\n        });\n        return this;\n    };\n    return Emitter;\n}());\n\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzL2Rpc3QvZXNtL2VtaXR0ZXIvZW1pdHRlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHlCQUF5QjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ2tCO0FBQ25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzL2Rpc3QvZXNtL2VtaXR0ZXIvZW1pdHRlci5qcz9kZWJmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRXZlbnQgRW1pdHRlciB0aGF0IHRha2VzIHRoZSBleHBlY3RlZCBjb250cmFjdCBhcyBhIGdlbmVyaWNcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogIHR5cGUgQ29udHJhY3QgPSB7XG4gKiAgICBkZWxpdmVyeV9zdWNjZXNzOiBbRGVsaXZlcnlTdWNjZXNzUmVzcG9uc2UsIE1ldHJpY3NdLFxuICogICAgZGVsaXZlcnlfZmFpbHVyZTogW0RlbGl2ZXJ5RXJyb3JdXG4gKiB9XG4gKiAgbmV3IEVtaXR0ZXI8Q29udHJhY3Q+KClcbiAqICAub24oJ2RlbGl2ZXJ5X3N1Y2Nlc3MnLCAocmVzLCBtZXRyaWNzKSA9PiAuLi4pXG4gKiAgLm9uKCdkZWxpdmVyeV9mYWlsdXJlJywgKGVycikgPT4gLi4uKVxuICogYGBgXG4gKi9cbnZhciBFbWl0dGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVtaXR0ZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0ge307XG4gICAgICAgIHRoaXMud2FybmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubWF4TGlzdGVuZXJzID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm1heExpc3RlbmVycykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMTA7XG4gICAgfVxuICAgIEVtaXR0ZXIucHJvdG90eXBlLndhcm5JZlBvc3NpYmxlTWVtb3J5TGVhayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodGhpcy53YXJuZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhMaXN0ZW5lcnMgJiZcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50XS5sZW5ndGggPiB0aGlzLm1heExpc3RlbmVycykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXZlbnQgRW1pdHRlcjogUG9zc2libGUgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQ7IFwiLmNvbmNhdChTdHJpbmcoZXZlbnQpLCBcIiBoYXMgZXhjZWVkZWQgXCIpLmNvbmNhdCh0aGlzLm1heExpc3RlbmVycywgXCIgbGlzdGVuZXJzLlwiKSk7XG4gICAgICAgICAgICB0aGlzLndhcm5lZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIXRoaXMuY2FsbGJhY2tzW2V2ZW50XSkge1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbZXZlbnRdID0gW2NhbGxiYWNrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHRoaXMud2FybklmUG9zc2libGVNZW1vcnlMZWFrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLm9mZihldmVudCwgb24pO1xuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoX3RoaXMsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKGV2ZW50LCBvbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRW1pdHRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBmbnMgPSAoX2EgPSB0aGlzLmNhbGxiYWNrc1tldmVudF0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdO1xuICAgICAgICB2YXIgd2l0aG91dCA9IGZucy5maWx0ZXIoZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbiAhPT0gY2FsbGJhY2s7IH0pO1xuICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0gPSB3aXRob3V0O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FsbGJhY2tzID0gKF9hID0gdGhpcy5jYWxsYmFja3NbZXZlbnRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseShfdGhpcywgYXJncyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBFbWl0dGVyO1xufSgpKTtcbmV4cG9ydCB7IEVtaXR0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtaXR0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/browser/index.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/browser/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalyticsBrowser: () => (/* binding */ AnalyticsBrowser),\n/* harmony export */   loadLegacySettings: () => (/* binding */ loadLegacySettings)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_get_process_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/get-process-env */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/parse-cdn */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/fetch */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _core_analytics__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/analytics */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../core/context */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _lib_merged_options__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/merged-options */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n/* harmony import */ var _plugins_env_enrichment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../plugins/env-enrichment */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js\");\n/* harmony import */ var _plugins_remote_loader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../plugins/remote-loader */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js\");\n/* harmony import */ var _plugins_segmentio__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../plugins/segmentio */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js\");\n/* harmony import */ var _plugins_validation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../plugins/validation */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/validation/index.js\");\n/* harmony import */ var _core_buffer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/buffer */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\");\n/* harmony import */ var _core_inspector__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../core/inspector */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js\");\n/* harmony import */ var _core_stats__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../core/stats */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../lib/global-analytics-helper */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction loadLegacySettings(writeKey, cdnURL) {\n    var baseUrl = cdnURL !== null && cdnURL !== void 0 ? cdnURL : (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_0__.getCDN)();\n    return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_1__.fetch)(\"\".concat(baseUrl, \"/v1/projects/\").concat(writeKey, \"/settings\"))\n        .then(function (res) {\n        if (!res.ok) {\n            return res.text().then(function (errorResponseMessage) {\n                throw new Error(errorResponseMessage);\n            });\n        }\n        return res.json();\n    })\n        .catch(function (err) {\n        console.error(err.message);\n        throw err;\n    });\n}\nfunction hasLegacyDestinations(settings) {\n    return ((0,_lib_get_process_env__WEBPACK_IMPORTED_MODULE_2__.getProcessEnv)().NODE_ENV !== 'test' &&\n        // just one integration means segmentio\n        Object.keys(settings.integrations).length > 1);\n}\nfunction hasTsubMiddleware(settings) {\n    var _a, _b, _c;\n    return ((0,_lib_get_process_env__WEBPACK_IMPORTED_MODULE_2__.getProcessEnv)().NODE_ENV !== 'test' &&\n        ((_c = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) > 0);\n}\n/**\n * With AJS classic, we allow users to call setAnonymousId before the library initialization.\n * This is important because some of the destinations will use the anonymousId during the initialization,\n * and if we set anonId afterwards, that wouldn’t impact the destination.\n *\n * Also Ensures events can be registered before library initialization.\n * This is important so users can register to 'initialize' and any events that may fire early during setup.\n */\nfunction flushPreBuffer(analytics, buffer) {\n    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_3__.flushSetAnonymousID)(analytics, buffer);\n    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_3__.flushOn)(analytics, buffer);\n}\n/**\n * Finish flushing buffer and cleanup.\n */\nfunction flushFinalBuffer(analytics, buffer) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0: \n                // Call popSnippetWindowBuffer before each flush task since there may be\n                // analytics calls during async function calls.\n                return [4 /*yield*/, (0,_core_buffer__WEBPACK_IMPORTED_MODULE_3__.flushAddSourceMiddleware)(analytics, buffer)];\n                case 1:\n                    // Call popSnippetWindowBuffer before each flush task since there may be\n                    // analytics calls during async function calls.\n                    _a.sent();\n                    (0,_core_buffer__WEBPACK_IMPORTED_MODULE_3__.flushAnalyticsCallsInNewTask)(analytics, buffer);\n                    // Clear buffer, just in case analytics is loaded twice; we don't want to fire events off again.\n                    buffer.clear();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction registerPlugins(writeKey, legacySettings, analytics, options, pluginLikes, legacyIntegrationSources) {\n    var _a, _b, _c;\n    if (pluginLikes === void 0) { pluginLikes = []; }\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n        var plugins, pluginSources, tsubMiddleware, _d, legacyDestinations, _e, schemaFilter, _f, mergedSettings, remotePlugins, toRegister, shouldIgnoreSegmentio, _g, _h, ctx;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_j) {\n            switch (_j.label) {\n                case 0:\n                    plugins = pluginLikes === null || pluginLikes === void 0 ? void 0 : pluginLikes.filter(function (pluginLike) { return typeof pluginLike === 'object'; });\n                    pluginSources = pluginLikes === null || pluginLikes === void 0 ? void 0 : pluginLikes.filter(function (pluginLike) {\n                        return typeof pluginLike === 'function' &&\n                            typeof pluginLike.pluginName === 'string';\n                    });\n                    if (!hasTsubMiddleware(legacySettings)) return [3 /*break*/, 2];\n                    return [4 /*yield*/, Promise.all(/*! import() | tsub-middleware */[__webpack_require__.e(\"vendor-chunks/@segment\"), __webpack_require__.e(\"vendor-chunks/dset\"), __webpack_require__.e(\"vendor-chunks/@stdlib\"), __webpack_require__.e(\"vendor-chunks/tiny-hashes\"), __webpack_require__.e(\"vendor-chunks/dlv\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/routing-middleware */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js\")).then(function (mod) {\n                            return mod.tsubMiddleware(legacySettings.middlewareSettings.routingRules);\n                        })];\n                case 1:\n                    _d = _j.sent();\n                    return [3 /*break*/, 3];\n                case 2:\n                    _d = undefined;\n                    _j.label = 3;\n                case 3:\n                    tsubMiddleware = _d;\n                    if (!(hasLegacyDestinations(legacySettings) || legacyIntegrationSources.length > 0)) return [3 /*break*/, 5];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | ajs-destination */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/ajs-destination */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js\")).then(function (mod) {\n                            return mod.ajsDestinations(writeKey, legacySettings, analytics.integrations, options, tsubMiddleware, legacyIntegrationSources);\n                        })];\n                case 4:\n                    _e = _j.sent();\n                    return [3 /*break*/, 6];\n                case 5:\n                    _e = [];\n                    _j.label = 6;\n                case 6:\n                    legacyDestinations = _e;\n                    if (!legacySettings.legacyVideoPluginsEnabled) return [3 /*break*/, 8];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | legacyVideos */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/legacy-video-plugins */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js\")).then(function (mod) {\n                            return mod.loadLegacyVideoPlugins(analytics);\n                        })];\n                case 7:\n                    _j.sent();\n                    _j.label = 8;\n                case 8:\n                    if (!((_a = options.plan) === null || _a === void 0 ? void 0 : _a.track)) return [3 /*break*/, 10];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | schemaFilter */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/schema-filter */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js\")).then(function (mod) {\n                            var _a;\n                            return mod.schemaFilter((_a = options.plan) === null || _a === void 0 ? void 0 : _a.track, legacySettings);\n                        })];\n                case 9:\n                    _f = _j.sent();\n                    return [3 /*break*/, 11];\n                case 10:\n                    _f = undefined;\n                    _j.label = 11;\n                case 11:\n                    schemaFilter = _f;\n                    mergedSettings = (0,_lib_merged_options__WEBPACK_IMPORTED_MODULE_5__.mergedOptions)(legacySettings, options);\n                    return [4 /*yield*/, (0,_plugins_remote_loader__WEBPACK_IMPORTED_MODULE_6__.remoteLoader)(legacySettings, analytics.integrations, mergedSettings, options, tsubMiddleware, pluginSources).catch(function () { return []; })];\n                case 12:\n                    remotePlugins = _j.sent();\n                    toRegister = (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__spreadArray)([\n                        _plugins_validation__WEBPACK_IMPORTED_MODULE_7__.validation,\n                        _plugins_env_enrichment__WEBPACK_IMPORTED_MODULE_8__.envEnrichment\n                    ], plugins, true), legacyDestinations, true), remotePlugins, true);\n                    if (schemaFilter) {\n                        toRegister.push(schemaFilter);\n                    }\n                    shouldIgnoreSegmentio = (((_b = options.integrations) === null || _b === void 0 ? void 0 : _b.All) === false &&\n                        !options.integrations['Segment.io']) ||\n                        (options.integrations && options.integrations['Segment.io'] === false);\n                    if (!!shouldIgnoreSegmentio) return [3 /*break*/, 14];\n                    _h = (_g = toRegister).push;\n                    return [4 /*yield*/, (0,_plugins_segmentio__WEBPACK_IMPORTED_MODULE_9__.segmentio)(analytics, mergedSettings['Segment.io'], legacySettings.integrations)];\n                case 13:\n                    _h.apply(_g, [_j.sent()]);\n                    _j.label = 14;\n                case 14: return [4 /*yield*/, analytics.register.apply(analytics, toRegister)];\n                case 15:\n                    ctx = _j.sent();\n                    if (!Object.entries((_c = legacySettings.enabledMiddleware) !== null && _c !== void 0 ? _c : {}).some(function (_a) {\n                        var enabled = _a[1];\n                        return enabled;\n                    })) return [3 /*break*/, 17];\n                    return [4 /*yield*/, __webpack_require__.e(/*! import() | remoteMiddleware */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../plugins/remote-middleware */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js\")).then(function (_a) {\n                            var remoteMiddlewares = _a.remoteMiddlewares;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(_this, void 0, void 0, function () {\n                                var middleware, promises;\n                                return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0: return [4 /*yield*/, remoteMiddlewares(ctx, legacySettings, options.obfuscate)];\n                                        case 1:\n                                            middleware = _b.sent();\n                                            promises = middleware.map(function (mdw) {\n                                                return analytics.addSourceMiddleware(mdw);\n                                            });\n                                            return [2 /*return*/, Promise.all(promises)];\n                                    }\n                                });\n                            });\n                        })];\n                case 16:\n                    _j.sent();\n                    _j.label = 17;\n                case 17: return [2 /*return*/, ctx];\n            }\n        });\n    });\n}\nfunction loadAnalytics(settings, options, preInitBuffer) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    if (options === void 0) { options = {}; }\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n        var legacySettings, _l, disabled, retryQueue, analytics, plugins, classicIntegrations, segmentLoadOptions, ctx, search, hash, term;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_m) {\n            switch (_m.label) {\n                case 0:\n                    // return no-op analytics instance if disabled\n                    if (options.disable === true) {\n                        return [2 /*return*/, [new _core_analytics__WEBPACK_IMPORTED_MODULE_10__.NullAnalytics(), _core_context__WEBPACK_IMPORTED_MODULE_11__.Context.system()]];\n                    }\n                    if (options.globalAnalyticsKey)\n                        (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_12__.setGlobalAnalyticsKey)(options.globalAnalyticsKey);\n                    // this is an ugly side-effect, but it's for the benefits of the plugins that get their cdn via getCDN()\n                    if (settings.cdnURL)\n                        (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_0__.setGlobalCDNUrl)(settings.cdnURL);\n                    if (options.initialPageview) {\n                        // capture the page context early, so it's always up-to-date\n                        preInitBuffer.push(new _core_buffer__WEBPACK_IMPORTED_MODULE_3__.PreInitMethodCall('page', []));\n                    }\n                    if (!((_a = settings.cdnSettings) !== null && _a !== void 0)) return [3 /*break*/, 1];\n                    _l = _a;\n                    return [3 /*break*/, 3];\n                case 1: return [4 /*yield*/, loadLegacySettings(settings.writeKey, settings.cdnURL)];\n                case 2:\n                    _l = (_m.sent());\n                    _m.label = 3;\n                case 3:\n                    legacySettings = _l;\n                    if (options.updateCDNSettings) {\n                        legacySettings = options.updateCDNSettings(legacySettings);\n                    }\n                    if (!(typeof options.disable === 'function')) return [3 /*break*/, 5];\n                    return [4 /*yield*/, options.disable(legacySettings)];\n                case 4:\n                    disabled = _m.sent();\n                    if (disabled) {\n                        return [2 /*return*/, [new _core_analytics__WEBPACK_IMPORTED_MODULE_10__.NullAnalytics(), _core_context__WEBPACK_IMPORTED_MODULE_11__.Context.system()]];\n                    }\n                    _m.label = 5;\n                case 5:\n                    retryQueue = (_c = (_b = legacySettings.integrations['Segment.io']) === null || _b === void 0 ? void 0 : _b.retryQueue) !== null && _c !== void 0 ? _c : true;\n                    options = (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({ retryQueue: retryQueue }, options);\n                    analytics = new _core_analytics__WEBPACK_IMPORTED_MODULE_10__.Analytics(settings, options);\n                    (0,_core_inspector__WEBPACK_IMPORTED_MODULE_13__.attachInspector)(analytics);\n                    plugins = (_d = settings.plugins) !== null && _d !== void 0 ? _d : [];\n                    classicIntegrations = (_e = settings.classicIntegrations) !== null && _e !== void 0 ? _e : [];\n                    segmentLoadOptions = (_f = options.integrations) === null || _f === void 0 ? void 0 : _f['Segment.io'];\n                    _core_stats__WEBPACK_IMPORTED_MODULE_14__.Stats.initRemoteMetrics((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({}, legacySettings.metrics), { host: (_g = segmentLoadOptions === null || segmentLoadOptions === void 0 ? void 0 : segmentLoadOptions.apiHost) !== null && _g !== void 0 ? _g : (_h = legacySettings.metrics) === null || _h === void 0 ? void 0 : _h.host, protocol: segmentLoadOptions === null || segmentLoadOptions === void 0 ? void 0 : segmentLoadOptions.protocol }));\n                    // needs to be flushed before plugins are registered\n                    flushPreBuffer(analytics, preInitBuffer);\n                    return [4 /*yield*/, registerPlugins(settings.writeKey, legacySettings, analytics, options, plugins, classicIntegrations)];\n                case 6:\n                    ctx = _m.sent();\n                    search = (_j = window.location.search) !== null && _j !== void 0 ? _j : '';\n                    hash = (_k = window.location.hash) !== null && _k !== void 0 ? _k : '';\n                    term = search.length ? search : hash.replace(/(?=#).*(?=\\?)/, '');\n                    if (!term.includes('ajs_')) return [3 /*break*/, 8];\n                    return [4 /*yield*/, analytics.queryString(term).catch(console.error)];\n                case 7:\n                    _m.sent();\n                    _m.label = 8;\n                case 8:\n                    analytics.initialized = true;\n                    analytics.emit('initialize', settings, options);\n                    return [4 /*yield*/, flushFinalBuffer(analytics, preInitBuffer)];\n                case 9:\n                    _m.sent();\n                    return [2 /*return*/, [analytics, ctx]];\n            }\n        });\n    });\n}\n/**\n * The public browser interface for Segment Analytics\n *\n * @example\n * ```ts\n *  export const analytics = new AnalyticsBrowser()\n *  analytics.load({ writeKey: 'foo' })\n * ```\n * @link https://github.com/segmentio/analytics-next/#readme\n */\nvar AnalyticsBrowser = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__extends)(AnalyticsBrowser, _super);\n    function AnalyticsBrowser() {\n        var _this = this;\n        var _a = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_15__.createDeferred)(), loadStart = _a.promise, resolveLoadStart = _a.resolve;\n        _this = _super.call(this, function (buffer) {\n            return loadStart.then(function (_a) {\n                var settings = _a[0], options = _a[1];\n                return loadAnalytics(settings, options, buffer);\n            });\n        }) || this;\n        _this._resolveLoadStart = function (settings, options) {\n            return resolveLoadStart([settings, options]);\n        };\n        return _this;\n    }\n    /**\n     * Fully initialize an analytics instance, including:\n     *\n     * * Fetching settings from the segment CDN (by default).\n     * * Fetching all remote destinations configured by the user (if applicable).\n     * * Flushing buffered analytics events.\n     * * Loading all middleware.\n     *\n     * Note:️  This method should only be called *once* in your application.\n     *\n     * @example\n     * ```ts\n     * export const analytics = new AnalyticsBrowser()\n     * analytics.load({ writeKey: 'foo' })\n     * ```\n     */\n    AnalyticsBrowser.prototype.load = function (settings, options) {\n        if (options === void 0) { options = {}; }\n        this._resolveLoadStart(settings, options);\n        return this;\n    };\n    /**\n     * Instantiates an object exposing Analytics methods.\n     *\n     * @example\n     * ```ts\n     * const ajs = AnalyticsBrowser.load({ writeKey: '<YOUR_WRITE_KEY>' })\n     *\n     * ajs.track(\"foo\")\n     * ...\n     * ```\n     */\n    AnalyticsBrowser.load = function (settings, options) {\n        if (options === void 0) { options = {}; }\n        return new AnalyticsBrowser().load(settings, options);\n    };\n    AnalyticsBrowser.standalone = function (writeKey, options) {\n        return AnalyticsBrowser.load({ writeKey: writeKey }, options).then(function (res) { return res[0]; });\n    };\n    return AnalyticsBrowser;\n}(_core_buffer__WEBPACK_IMPORTED_MODULE_3__.AnalyticsBuffered));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2Jyb3dzZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1GO0FBQzVCO0FBQ0k7QUFDdEI7QUFDeUI7QUFDcEI7QUFDWTtBQUNZO0FBQ1I7QUFDRDtBQUNSO0FBQ0U7QUFDMEc7QUFDekc7QUFDZDtBQUNpQztBQUNoRTtBQUNQLGtFQUFrRSxzREFBTTtBQUN4RSxXQUFXLGlEQUFLO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZLG1FQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1FQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGlFQUFtQjtBQUN2QixJQUFJLHFEQUFPO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0RBQVM7QUFDcEIsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzRUFBd0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMEVBQTRCO0FBQ2hELDZFQUE2RTtBQUM3RTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0E7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQSxtSUFBbUksd0NBQXdDO0FBQzNLO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHlDQUF5QyxtZEFDeUQ7QUFDbEc7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGtRQUNzRDtBQUMvRjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseVFBQ3dEO0FBQ2pHO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMlBBQ2lEO0FBQzFGO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxrRUFBYTtBQUNsRCx5Q0FBeUMsb0VBQVkscUhBQXFILFlBQVk7QUFDdEw7QUFDQTtBQUNBLGlDQUFpQyxvREFBYSxDQUFDLG9EQUFhLENBQUMsb0RBQWE7QUFDMUUsd0JBQXdCLDJEQUFVO0FBQ2xDLHdCQUF3QixrRUFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNkRBQVM7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUhBQW1IO0FBQ25IO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIseUNBQXlDLHVRQUN5RDtBQUNsRztBQUNBLG1DQUFtQyxnREFBUztBQUM1QztBQUNBLHVDQUF1QyxrREFBVztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QixXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwyREFBYSxJQUFJLG1EQUFPO0FBQzNFO0FBQ0E7QUFDQSx3QkFBd0Isb0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQSx3QkFBd0IsK0RBQWU7QUFDdkM7QUFDQTtBQUNBLCtDQUErQywyREFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDJEQUFhLElBQUksbURBQU87QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVEsR0FBRyx3QkFBd0I7QUFDakUsb0NBQW9DLHVEQUFTO0FBQzdDLG9CQUFvQixpRUFBZTtBQUNuQztBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0NBQUssbUJBQW1CLCtDQUFRLENBQUMsK0NBQVEsR0FBRyw2QkFBNkIsNFVBQTRVO0FBQ3phO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUJBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQSxpQkFBaUIsaUZBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsOEJBQThCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsb0JBQW9CLGlDQUFpQyxnQkFBZ0I7QUFDNUc7QUFDQTtBQUNBLENBQUMsQ0FBQywyREFBaUI7QUFDUztBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9icm93c2VyL2luZGV4LmpzPzYwZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19leHRlbmRzLCBfX2dlbmVyYXRvciwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgZ2V0UHJvY2Vzc0VudiB9IGZyb20gJy4uL2xpYi9nZXQtcHJvY2Vzcy1lbnYnO1xuaW1wb3J0IHsgZ2V0Q0ROLCBzZXRHbG9iYWxDRE5VcmwgfSBmcm9tICcuLi9saWIvcGFyc2UtY2RuJztcbmltcG9ydCB7IGZldGNoIH0gZnJvbSAnLi4vbGliL2ZldGNoJztcbmltcG9ydCB7IEFuYWx5dGljcywgTnVsbEFuYWx5dGljcywgfSBmcm9tICcuLi9jb3JlL2FuYWx5dGljcyc7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IG1lcmdlZE9wdGlvbnMgfSBmcm9tICcuLi9saWIvbWVyZ2VkLW9wdGlvbnMnO1xuaW1wb3J0IHsgY3JlYXRlRGVmZXJyZWQgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5pbXBvcnQgeyBlbnZFbnJpY2htZW50IH0gZnJvbSAnLi4vcGx1Z2lucy9lbnYtZW5yaWNobWVudCc7XG5pbXBvcnQgeyByZW1vdGVMb2FkZXIsIH0gZnJvbSAnLi4vcGx1Z2lucy9yZW1vdGUtbG9hZGVyJztcbmltcG9ydCB7IHNlZ21lbnRpbyB9IGZyb20gJy4uL3BsdWdpbnMvc2VnbWVudGlvJztcbmltcG9ydCB7IHZhbGlkYXRpb24gfSBmcm9tICcuLi9wbHVnaW5zL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHsgQW5hbHl0aWNzQnVmZmVyZWQsIGZsdXNoQW5hbHl0aWNzQ2FsbHNJbk5ld1Rhc2ssIGZsdXNoQWRkU291cmNlTWlkZGxld2FyZSwgZmx1c2hTZXRBbm9ueW1vdXNJRCwgZmx1c2hPbiwgUHJlSW5pdE1ldGhvZENhbGwsIH0gZnJvbSAnLi4vY29yZS9idWZmZXInO1xuaW1wb3J0IHsgYXR0YWNoSW5zcGVjdG9yIH0gZnJvbSAnLi4vY29yZS9pbnNwZWN0b3InO1xuaW1wb3J0IHsgU3RhdHMgfSBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCB7IHNldEdsb2JhbEFuYWx5dGljc0tleSB9IGZyb20gJy4uL2xpYi9nbG9iYWwtYW5hbHl0aWNzLWhlbHBlcic7XG5leHBvcnQgZnVuY3Rpb24gbG9hZExlZ2FjeVNldHRpbmdzKHdyaXRlS2V5LCBjZG5VUkwpIHtcbiAgICB2YXIgYmFzZVVybCA9IGNkblVSTCAhPT0gbnVsbCAmJiBjZG5VUkwgIT09IHZvaWQgMCA/IGNkblVSTCA6IGdldENETigpO1xuICAgIHJldHVybiBmZXRjaChcIlwiLmNvbmNhdChiYXNlVXJsLCBcIi92MS9wcm9qZWN0cy9cIikuY29uY2F0KHdyaXRlS2V5LCBcIi9zZXR0aW5nc1wiKSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy50ZXh0KCkudGhlbihmdW5jdGlvbiAoZXJyb3JSZXNwb25zZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JSZXNwb25zZU1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGhhc0xlZ2FjeURlc3RpbmF0aW9ucyhzZXR0aW5ncykge1xuICAgIHJldHVybiAoZ2V0UHJvY2Vzc0VudigpLk5PREVfRU5WICE9PSAndGVzdCcgJiZcbiAgICAgICAgLy8ganVzdCBvbmUgaW50ZWdyYXRpb24gbWVhbnMgc2VnbWVudGlvXG4gICAgICAgIE9iamVjdC5rZXlzKHNldHRpbmdzLmludGVncmF0aW9ucykubGVuZ3RoID4gMSk7XG59XG5mdW5jdGlvbiBoYXNUc3ViTWlkZGxld2FyZShzZXR0aW5ncykge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIHJldHVybiAoZ2V0UHJvY2Vzc0VudigpLk5PREVfRU5WICE9PSAndGVzdCcgJiZcbiAgICAgICAgKChfYyA9IChfYiA9IChfYSA9IHNldHRpbmdzLm1pZGRsZXdhcmVTZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJvdXRpbmdSdWxlcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmxlbmd0aCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMCkgPiAwKTtcbn1cbi8qKlxuICogV2l0aCBBSlMgY2xhc3NpYywgd2UgYWxsb3cgdXNlcnMgdG8gY2FsbCBzZXRBbm9ueW1vdXNJZCBiZWZvcmUgdGhlIGxpYnJhcnkgaW5pdGlhbGl6YXRpb24uXG4gKiBUaGlzIGlzIGltcG9ydGFudCBiZWNhdXNlIHNvbWUgb2YgdGhlIGRlc3RpbmF0aW9ucyB3aWxsIHVzZSB0aGUgYW5vbnltb3VzSWQgZHVyaW5nIHRoZSBpbml0aWFsaXphdGlvbixcbiAqIGFuZCBpZiB3ZSBzZXQgYW5vbklkIGFmdGVyd2FyZHMsIHRoYXQgd291bGRu4oCZdCBpbXBhY3QgdGhlIGRlc3RpbmF0aW9uLlxuICpcbiAqIEFsc28gRW5zdXJlcyBldmVudHMgY2FuIGJlIHJlZ2lzdGVyZWQgYmVmb3JlIGxpYnJhcnkgaW5pdGlhbGl6YXRpb24uXG4gKiBUaGlzIGlzIGltcG9ydGFudCBzbyB1c2VycyBjYW4gcmVnaXN0ZXIgdG8gJ2luaXRpYWxpemUnIGFuZCBhbnkgZXZlbnRzIHRoYXQgbWF5IGZpcmUgZWFybHkgZHVyaW5nIHNldHVwLlxuICovXG5mdW5jdGlvbiBmbHVzaFByZUJ1ZmZlcihhbmFseXRpY3MsIGJ1ZmZlcikge1xuICAgIGZsdXNoU2V0QW5vbnltb3VzSUQoYW5hbHl0aWNzLCBidWZmZXIpO1xuICAgIGZsdXNoT24oYW5hbHl0aWNzLCBidWZmZXIpO1xufVxuLyoqXG4gKiBGaW5pc2ggZmx1c2hpbmcgYnVmZmVyIGFuZCBjbGVhbnVwLlxuICovXG5mdW5jdGlvbiBmbHVzaEZpbmFsQnVmZmVyKGFuYWx5dGljcywgYnVmZmVyKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBcbiAgICAgICAgICAgICAgICAvLyBDYWxsIHBvcFNuaXBwZXRXaW5kb3dCdWZmZXIgYmVmb3JlIGVhY2ggZmx1c2ggdGFzayBzaW5jZSB0aGVyZSBtYXkgYmVcbiAgICAgICAgICAgICAgICAvLyBhbmFseXRpY3MgY2FsbHMgZHVyaW5nIGFzeW5jIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZsdXNoQWRkU291cmNlTWlkZGxld2FyZShhbmFseXRpY3MsIGJ1ZmZlcildO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCBwb3BTbmlwcGV0V2luZG93QnVmZmVyIGJlZm9yZSBlYWNoIGZsdXNoIHRhc2sgc2luY2UgdGhlcmUgbWF5IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuYWx5dGljcyBjYWxscyBkdXJpbmcgYXN5bmMgZnVuY3Rpb24gY2FsbHMuXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgZmx1c2hBbmFseXRpY3NDYWxsc0luTmV3VGFzayhhbmFseXRpY3MsIGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIGJ1ZmZlciwganVzdCBpbiBjYXNlIGFuYWx5dGljcyBpcyBsb2FkZWQgdHdpY2U7IHdlIGRvbid0IHdhbnQgdG8gZmlyZSBldmVudHMgb2ZmIGFnYWluLlxuICAgICAgICAgICAgICAgICAgICBidWZmZXIuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHJlZ2lzdGVyUGx1Z2lucyh3cml0ZUtleSwgbGVnYWN5U2V0dGluZ3MsIGFuYWx5dGljcywgb3B0aW9ucywgcGx1Z2luTGlrZXMsIGxlZ2FjeUludGVncmF0aW9uU291cmNlcykge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGlmIChwbHVnaW5MaWtlcyA9PT0gdm9pZCAwKSB7IHBsdWdpbkxpa2VzID0gW107IH1cbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwbHVnaW5zLCBwbHVnaW5Tb3VyY2VzLCB0c3ViTWlkZGxld2FyZSwgX2QsIGxlZ2FjeURlc3RpbmF0aW9ucywgX2UsIHNjaGVtYUZpbHRlciwgX2YsIG1lcmdlZFNldHRpbmdzLCByZW1vdGVQbHVnaW5zLCB0b1JlZ2lzdGVyLCBzaG91bGRJZ25vcmVTZWdtZW50aW8sIF9nLCBfaCwgY3R4O1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9qKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9qLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zID0gcGx1Z2luTGlrZXMgPT09IG51bGwgfHwgcGx1Z2luTGlrZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbkxpa2VzLmZpbHRlcihmdW5jdGlvbiAocGx1Z2luTGlrZSkgeyByZXR1cm4gdHlwZW9mIHBsdWdpbkxpa2UgPT09ICdvYmplY3QnOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luU291cmNlcyA9IHBsdWdpbkxpa2VzID09PSBudWxsIHx8IHBsdWdpbkxpa2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW5MaWtlcy5maWx0ZXIoZnVuY3Rpb24gKHBsdWdpbkxpa2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcGx1Z2luTGlrZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBwbHVnaW5MaWtlLnBsdWdpbk5hbWUgPT09ICdzdHJpbmcnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNUc3ViTWlkZGxld2FyZShsZWdhY3lTZXR0aW5ncykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcInRzdWItbWlkZGxld2FyZVwiICovICcuLi9wbHVnaW5zL3JvdXRpbmctbWlkZGxld2FyZScpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QudHN1Yk1pZGRsZXdhcmUobGVnYWN5U2V0dGluZ3MubWlkZGxld2FyZVNldHRpbmdzLnJvdXRpbmdSdWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfZCA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgX2oubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdHN1Yk1pZGRsZXdhcmUgPSBfZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaGFzTGVnYWN5RGVzdGluYXRpb25zKGxlZ2FjeVNldHRpbmdzKSB8fCBsZWdhY3lJbnRlZ3JhdGlvblNvdXJjZXMubGVuZ3RoID4gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImFqcy1kZXN0aW5hdGlvblwiICovICcuLi9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbicpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QuYWpzRGVzdGluYXRpb25zKHdyaXRlS2V5LCBsZWdhY3lTZXR0aW5ncywgYW5hbHl0aWNzLmludGVncmF0aW9ucywgb3B0aW9ucywgdHN1Yk1pZGRsZXdhcmUsIGxlZ2FjeUludGVncmF0aW9uU291cmNlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBfZSA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBfZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBsZWdhY3lEZXN0aW5hdGlvbnMgPSBfZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsZWdhY3lTZXR0aW5ncy5sZWdhY3lWaWRlb1BsdWdpbnNFbmFibGVkKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJsZWdhY3lWaWRlb3NcIiAqLyAnLi4vcGx1Z2lucy9sZWdhY3ktdmlkZW8tcGx1Z2lucycpLnRoZW4oZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QubG9hZExlZ2FjeVZpZGVvUGx1Z2lucyhhbmFseXRpY3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDg7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISgoX2EgPSBvcHRpb25zLnBsYW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmFjaykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJzY2hlbWFGaWx0ZXJcIiAqLyAnLi4vcGx1Z2lucy9zY2hlbWEtZmlsdGVyJykudGhlbihmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2Quc2NoZW1hRmlsdGVyKChfYSA9IG9wdGlvbnMucGxhbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRyYWNrLCBsZWdhY3lTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBfZiA9IF9qLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMTFdO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIF9mID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDExO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYUZpbHRlciA9IF9mO1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRTZXR0aW5ncyA9IG1lcmdlZE9wdGlvbnMobGVnYWN5U2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW1vdGVMb2FkZXIobGVnYWN5U2V0dGluZ3MsIGFuYWx5dGljcy5pbnRlZ3JhdGlvbnMsIG1lcmdlZFNldHRpbmdzLCBvcHRpb25zLCB0c3ViTWlkZGxld2FyZSwgcGx1Z2luU291cmNlcykuY2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICByZW1vdGVQbHVnaW5zID0gX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICB0b1JlZ2lzdGVyID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudkVucmljaG1lbnRcbiAgICAgICAgICAgICAgICAgICAgXSwgcGx1Z2lucywgdHJ1ZSksIGxlZ2FjeURlc3RpbmF0aW9ucywgdHJ1ZSksIHJlbW90ZVBsdWdpbnMsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZW1hRmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b1JlZ2lzdGVyLnB1c2goc2NoZW1hRmlsdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzaG91bGRJZ25vcmVTZWdtZW50aW8gPSAoKChfYiA9IG9wdGlvbnMuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuQWxsKSA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFvcHRpb25zLmludGVncmF0aW9uc1snU2VnbWVudC5pbyddKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKG9wdGlvbnMuaW50ZWdyYXRpb25zICYmIG9wdGlvbnMuaW50ZWdyYXRpb25zWydTZWdtZW50LmlvJ10gPT09IGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhc2hvdWxkSWdub3JlU2VnbWVudGlvKSByZXR1cm4gWzMgLypicmVhayovLCAxNF07XG4gICAgICAgICAgICAgICAgICAgIF9oID0gKF9nID0gdG9SZWdpc3RlcikucHVzaDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2VnbWVudGlvKGFuYWx5dGljcywgbWVyZ2VkU2V0dGluZ3NbJ1NlZ21lbnQuaW8nXSwgbGVnYWN5U2V0dGluZ3MuaW50ZWdyYXRpb25zKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgX2guYXBwbHkoX2csIFtfai5zZW50KCldKTtcbiAgICAgICAgICAgICAgICAgICAgX2oubGFiZWwgPSAxNDtcbiAgICAgICAgICAgICAgICBjYXNlIDE0OiByZXR1cm4gWzQgLyp5aWVsZCovLCBhbmFseXRpY3MucmVnaXN0ZXIuYXBwbHkoYW5hbHl0aWNzLCB0b1JlZ2lzdGVyKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5lbnRyaWVzKChfYyA9IGxlZ2FjeVNldHRpbmdzLmVuYWJsZWRNaWRkbGV3YXJlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB7fSkuc29tZShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmFibGVkID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgfSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDE3XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJyZW1vdGVNaWRkbGV3YXJlXCIgKi8gJy4uL3BsdWdpbnMvcmVtb3RlLW1pZGRsZXdhcmUnKS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVNaWRkbGV3YXJlcyA9IF9hLnJlbW90ZU1pZGRsZXdhcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaWRkbGV3YXJlLCBwcm9taXNlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVtb3RlTWlkZGxld2FyZXMoY3R4LCBsZWdhY3lTZXR0aW5ncywgb3B0aW9ucy5vYmZ1c2NhdGUpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZGRsZXdhcmUgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzID0gbWlkZGxld2FyZS5tYXAoZnVuY3Rpb24gKG1kdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuYWx5dGljcy5hZGRTb3VyY2VNaWRkbGV3YXJlKG1kdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5hbGwocHJvbWlzZXMpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICAgICAgX2ouc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDE3O1xuICAgICAgICAgICAgICAgIGNhc2UgMTc6IHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGxvYWRBbmFseXRpY3Moc2V0dGluZ3MsIG9wdGlvbnMsIHByZUluaXRCdWZmZXIpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsZWdhY3lTZXR0aW5ncywgX2wsIGRpc2FibGVkLCByZXRyeVF1ZXVlLCBhbmFseXRpY3MsIHBsdWdpbnMsIGNsYXNzaWNJbnRlZ3JhdGlvbnMsIHNlZ21lbnRMb2FkT3B0aW9ucywgY3R4LCBzZWFyY2gsIGhhc2gsIHRlcm07XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX20pIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX20ubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBuby1vcCBhbmFseXRpY3MgaW5zdGFuY2UgaWYgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtuZXcgTnVsbEFuYWx5dGljcygpLCBDb250ZXh0LnN5c3RlbSgpXV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ2xvYmFsQW5hbHl0aWNzS2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0R2xvYmFsQW5hbHl0aWNzS2V5KG9wdGlvbnMuZ2xvYmFsQW5hbHl0aWNzS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhbiB1Z2x5IHNpZGUtZWZmZWN0LCBidXQgaXQncyBmb3IgdGhlIGJlbmVmaXRzIG9mIHRoZSBwbHVnaW5zIHRoYXQgZ2V0IHRoZWlyIGNkbiB2aWEgZ2V0Q0ROKClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmNkblVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEdsb2JhbENETlVybChzZXR0aW5ncy5jZG5VUkwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbml0aWFsUGFnZXZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhcHR1cmUgdGhlIHBhZ2UgY29udGV4dCBlYXJseSwgc28gaXQncyBhbHdheXMgdXAtdG8tZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlSW5pdEJ1ZmZlci5wdXNoKG5ldyBQcmVJbml0TWV0aG9kQ2FsbCgncGFnZScsIFtdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9hID0gc2V0dGluZ3MuY2RuU2V0dGluZ3MpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDApKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgX2wgPSBfYTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkTGVnYWN5U2V0dGluZ3Moc2V0dGluZ3Mud3JpdGVLZXksIHNldHRpbmdzLmNkblVSTCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgX2wgPSAoX20uc2VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgX20ubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbGVnYWN5U2V0dGluZ3MgPSBfbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlQ0ROU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2FjeVNldHRpbmdzID0gb3B0aW9ucy51cGRhdGVDRE5TZXR0aW5ncyhsZWdhY3lTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIG9wdGlvbnMuZGlzYWJsZSA9PT0gJ2Z1bmN0aW9uJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBvcHRpb25zLmRpc2FibGUobGVnYWN5U2V0dGluZ3MpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkID0gX20uc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbbmV3IE51bGxBbmFseXRpY3MoKSwgQ29udGV4dC5zeXN0ZW0oKV1dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9tLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIHJldHJ5UXVldWUgPSAoX2MgPSAoX2IgPSBsZWdhY3lTZXR0aW5ncy5pbnRlZ3JhdGlvbnNbJ1NlZ21lbnQuaW8nXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnJldHJ5UXVldWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBfX2Fzc2lnbih7IHJldHJ5UXVldWU6IHJldHJ5UXVldWUgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3Moc2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBhdHRhY2hJbnNwZWN0b3IoYW5hbHl0aWNzKTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2lucyA9IChfZCA9IHNldHRpbmdzLnBsdWdpbnMpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBjbGFzc2ljSW50ZWdyYXRpb25zID0gKF9lID0gc2V0dGluZ3MuY2xhc3NpY0ludGVncmF0aW9ucykgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogW107XG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRMb2FkT3B0aW9ucyA9IChfZiA9IG9wdGlvbnMuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZbJ1NlZ21lbnQuaW8nXTtcbiAgICAgICAgICAgICAgICAgICAgU3RhdHMuaW5pdFJlbW90ZU1ldHJpY3MoX19hc3NpZ24oX19hc3NpZ24oe30sIGxlZ2FjeVNldHRpbmdzLm1ldHJpY3MpLCB7IGhvc3Q6IChfZyA9IHNlZ21lbnRMb2FkT3B0aW9ucyA9PT0gbnVsbCB8fCBzZWdtZW50TG9hZE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlZ21lbnRMb2FkT3B0aW9ucy5hcGlIb3N0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAoX2ggPSBsZWdhY3lTZXR0aW5ncy5tZXRyaWNzKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guaG9zdCwgcHJvdG9jb2w6IHNlZ21lbnRMb2FkT3B0aW9ucyA9PT0gbnVsbCB8fCBzZWdtZW50TG9hZE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlZ21lbnRMb2FkT3B0aW9ucy5wcm90b2NvbCB9KSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5lZWRzIHRvIGJlIGZsdXNoZWQgYmVmb3JlIHBsdWdpbnMgYXJlIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgICAgICAgICAgZmx1c2hQcmVCdWZmZXIoYW5hbHl0aWNzLCBwcmVJbml0QnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVnaXN0ZXJQbHVnaW5zKHNldHRpbmdzLndyaXRlS2V5LCBsZWdhY3lTZXR0aW5ncywgYW5hbHl0aWNzLCBvcHRpb25zLCBwbHVnaW5zLCBjbGFzc2ljSW50ZWdyYXRpb25zKV07XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBjdHggPSBfbS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaCA9IChfaiA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpICE9PSBudWxsICYmIF9qICE9PSB2b2lkIDAgPyBfaiA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBoYXNoID0gKF9rID0gd2luZG93LmxvY2F0aW9uLmhhc2gpICE9PSBudWxsICYmIF9rICE9PSB2b2lkIDAgPyBfayA6ICcnO1xuICAgICAgICAgICAgICAgICAgICB0ZXJtID0gc2VhcmNoLmxlbmd0aCA/IHNlYXJjaCA6IGhhc2gucmVwbGFjZSgvKD89IykuKig/PVxcPykvLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGVybS5pbmNsdWRlcygnYWpzXycpKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYW5hbHl0aWNzLnF1ZXJ5U3RyaW5nKHRlcm0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIF9tLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX20ubGFiZWwgPSA4O1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgYW5hbHl0aWNzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYW5hbHl0aWNzLmVtaXQoJ2luaXRpYWxpemUnLCBzZXR0aW5ncywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZsdXNoRmluYWxCdWZmZXIoYW5hbHl0aWNzLCBwcmVJbml0QnVmZmVyKV07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBfbS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbYW5hbHl0aWNzLCBjdHhdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIFRoZSBwdWJsaWMgYnJvd3NlciBpbnRlcmZhY2UgZm9yIFNlZ21lbnQgQW5hbHl0aWNzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiAgZXhwb3J0IGNvbnN0IGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3NCcm93c2VyKClcbiAqICBhbmFseXRpY3MubG9hZCh7IHdyaXRlS2V5OiAnZm9vJyB9KVxuICogYGBgXG4gKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2VnbWVudGlvL2FuYWx5dGljcy1uZXh0LyNyZWFkbWVcbiAqL1xudmFyIEFuYWx5dGljc0Jyb3dzZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFuYWx5dGljc0Jyb3dzZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5hbHl0aWNzQnJvd3NlcigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gY3JlYXRlRGVmZXJyZWQoKSwgbG9hZFN0YXJ0ID0gX2EucHJvbWlzZSwgcmVzb2x2ZUxvYWRTdGFydCA9IF9hLnJlc29sdmU7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRTdGFydC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IF9hWzBdLCBvcHRpb25zID0gX2FbMV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRBbmFseXRpY3Moc2V0dGluZ3MsIG9wdGlvbnMsIGJ1ZmZlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3Jlc29sdmVMb2FkU3RhcnQgPSBmdW5jdGlvbiAoc2V0dGluZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlTG9hZFN0YXJ0KFtzZXR0aW5ncywgb3B0aW9uc10pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZ1bGx5IGluaXRpYWxpemUgYW4gYW5hbHl0aWNzIGluc3RhbmNlLCBpbmNsdWRpbmc6XG4gICAgICpcbiAgICAgKiAqIEZldGNoaW5nIHNldHRpbmdzIGZyb20gdGhlIHNlZ21lbnQgQ0ROIChieSBkZWZhdWx0KS5cbiAgICAgKiAqIEZldGNoaW5nIGFsbCByZW1vdGUgZGVzdGluYXRpb25zIGNvbmZpZ3VyZWQgYnkgdGhlIHVzZXIgKGlmIGFwcGxpY2FibGUpLlxuICAgICAqICogRmx1c2hpbmcgYnVmZmVyZWQgYW5hbHl0aWNzIGV2ZW50cy5cbiAgICAgKiAqIExvYWRpbmcgYWxsIG1pZGRsZXdhcmUuXG4gICAgICpcbiAgICAgKiBOb3RlOu+4jyAgVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkICpvbmNlKiBpbiB5b3VyIGFwcGxpY2F0aW9uLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIGV4cG9ydCBjb25zdCBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzQnJvd3NlcigpXG4gICAgICogYW5hbHl0aWNzLmxvYWQoeyB3cml0ZUtleTogJ2ZvbycgfSlcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBBbmFseXRpY3NCcm93c2VyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKHNldHRpbmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHRoaXMuX3Jlc29sdmVMb2FkU3RhcnQoc2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlcyBhbiBvYmplY3QgZXhwb3NpbmcgQW5hbHl0aWNzIG1ldGhvZHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgYWpzID0gQW5hbHl0aWNzQnJvd3Nlci5sb2FkKHsgd3JpdGVLZXk6ICc8WU9VUl9XUklURV9LRVk+JyB9KVxuICAgICAqXG4gICAgICogYWpzLnRyYWNrKFwiZm9vXCIpXG4gICAgICogLi4uXG4gICAgICogYGBgXG4gICAgICovXG4gICAgQW5hbHl0aWNzQnJvd3Nlci5sb2FkID0gZnVuY3Rpb24gKHNldHRpbmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHJldHVybiBuZXcgQW5hbHl0aWNzQnJvd3NlcigpLmxvYWQoc2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgQW5hbHl0aWNzQnJvd3Nlci5zdGFuZGFsb25lID0gZnVuY3Rpb24gKHdyaXRlS2V5LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBBbmFseXRpY3NCcm93c2VyLmxvYWQoeyB3cml0ZUtleTogd3JpdGVLZXkgfSwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXNbMF07IH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEFuYWx5dGljc0Jyb3dzZXI7XG59KEFuYWx5dGljc0J1ZmZlcmVkKSk7XG5leHBvcnQgeyBBbmFseXRpY3NCcm93c2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/browser/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* binding */ Analytics),\n/* harmony export */   NullAnalytics: () => (/* binding */ NullAnalytics)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _arguments_resolver__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../arguments-resolver */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js\");\n/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../connection */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../context */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../events */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/events/index.js\");\n/* harmony import */ var _queue_event_queue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../queue/event-queue */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../user */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/user/index.js\");\n/* harmony import */ var _lib_bind_all__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/bind-all */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_get_global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/get-global */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../lib/global-analytics-helper */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _buffer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../buffer */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar deprecationWarning = 'This is being deprecated and will be not be available in future releases of Analytics JS';\n// reference any pre-existing \"analytics\" object so a user can restore the reference\nvar global = (0,_lib_get_global__WEBPACK_IMPORTED_MODULE_0__.getGlobal)();\nvar _analytics = global === null || global === void 0 ? void 0 : global.analytics;\nfunction createDefaultQueue(name, retryQueue, disablePersistance) {\n    if (retryQueue === void 0) { retryQueue = false; }\n    if (disablePersistance === void 0) { disablePersistance = false; }\n    var maxAttempts = retryQueue ? 10 : 1;\n    var priorityQueue = disablePersistance\n        ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_1__.PriorityQueue(maxAttempts, [])\n        : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_2__.PersistedPriorityQueue(maxAttempts, name);\n    return new _queue_event_queue__WEBPACK_IMPORTED_MODULE_3__.EventQueue(priorityQueue);\n}\n/* analytics-classic stubs */\nfunction _stub() {\n    console.warn(deprecationWarning);\n}\nvar Analytics = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__extends)(Analytics, _super);\n    function Analytics(settings, options, queue, user, group) {\n        var _this = this;\n        var _a, _b, _c;\n        _this = _super.call(this) || this;\n        _this._debug = false;\n        _this.initialized = false;\n        _this.user = function () {\n            return _this._user;\n        };\n        _this.init = _this.initialize.bind(_this);\n        _this.log = _stub;\n        _this.addIntegrationMiddleware = _stub;\n        _this.listeners = _stub;\n        _this.addEventListener = _stub;\n        _this.removeAllListeners = _stub;\n        _this.removeListener = _stub;\n        _this.removeEventListener = _stub;\n        _this.hasListeners = _stub;\n        _this.add = _stub;\n        _this.addIntegration = _stub;\n        var cookieOptions = options === null || options === void 0 ? void 0 : options.cookie;\n        var disablePersistance = (_a = options === null || options === void 0 ? void 0 : options.disableClientPersistence) !== null && _a !== void 0 ? _a : false;\n        _this.settings = settings;\n        _this.settings.timeout = (_b = _this.settings.timeout) !== null && _b !== void 0 ? _b : 300;\n        _this.queue =\n            queue !== null && queue !== void 0 ? queue : createDefaultQueue(\"\".concat(settings.writeKey, \":event-queue\"), options === null || options === void 0 ? void 0 : options.retryQueue, disablePersistance);\n        var storageSetting = options === null || options === void 0 ? void 0 : options.storage;\n        _this._universalStorage = _this.createStore(disablePersistance, storageSetting, cookieOptions);\n        _this._user =\n            user !== null && user !== void 0 ? user : new _user__WEBPACK_IMPORTED_MODULE_5__.User((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({ persist: !disablePersistance, storage: options === null || options === void 0 ? void 0 : options.storage }, options === null || options === void 0 ? void 0 : options.user), cookieOptions).load();\n        _this._group =\n            group !== null && group !== void 0 ? group : new _user__WEBPACK_IMPORTED_MODULE_5__.Group((0,tslib__WEBPACK_IMPORTED_MODULE_4__.__assign)({ persist: !disablePersistance, storage: options === null || options === void 0 ? void 0 : options.storage }, options === null || options === void 0 ? void 0 : options.group), cookieOptions).load();\n        _this.eventFactory = new _events__WEBPACK_IMPORTED_MODULE_6__.EventFactory(_this._user);\n        _this.integrations = (_c = options === null || options === void 0 ? void 0 : options.integrations) !== null && _c !== void 0 ? _c : {};\n        _this.options = options !== null && options !== void 0 ? options : {};\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(_this);\n        return _this;\n    }\n    /**\n     * Creates the storage system based on the settings received\n     * @returns Storage\n     */\n    Analytics.prototype.createStore = function (disablePersistance, storageSetting, cookieOptions) {\n        // DisablePersistance option overrides all, no storage will be used outside of memory even if specified\n        if (disablePersistance) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_8__.UniversalStorage([new _storage__WEBPACK_IMPORTED_MODULE_9__.MemoryStorage()]);\n        }\n        else {\n            if (storageSetting) {\n                if ((0,_storage__WEBPACK_IMPORTED_MODULE_10__.isArrayOfStoreType)(storageSetting)) {\n                    // We will create the store with the priority for customer settings\n                    return new _storage__WEBPACK_IMPORTED_MODULE_8__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_11__.initializeStorages)((0,_storage__WEBPACK_IMPORTED_MODULE_11__.applyCookieOptions)(storageSetting.stores, cookieOptions)));\n                }\n            }\n        }\n        // We default to our multi storage with priority\n        return new _storage__WEBPACK_IMPORTED_MODULE_8__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_11__.initializeStorages)([\n            _storage__WEBPACK_IMPORTED_MODULE_12__.StoreType.LocalStorage,\n            {\n                name: _storage__WEBPACK_IMPORTED_MODULE_12__.StoreType.Cookie,\n                settings: cookieOptions,\n            },\n            _storage__WEBPACK_IMPORTED_MODULE_12__.StoreType.Memory,\n        ]));\n    };\n    Object.defineProperty(Analytics.prototype, \"storage\", {\n        get: function () {\n            return this._universalStorage;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Analytics.prototype.track = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, name, data, opts, cb, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_13__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_14__.resolveArguments.apply(void 0, args), name = _a[0], data = _a[1], opts = _a[2], cb = _a[3];\n                segmentEvent = this.eventFactory.track(name, data, opts, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, cb).then(function (ctx) {\n                        _this.emit('track', name, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.page = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, category, page, properties, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_13__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_14__.resolvePageArguments.apply(void 0, args), category = _a[0], page = _a[1], properties = _a[2], options = _a[3], callback = _a[4];\n                segmentEvent = this.eventFactory.page(category, page, properties, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('page', category, page, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.identify = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, id, _traits, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_13__.popPageContext)(args);\n                _a = (0,_arguments_resolver__WEBPACK_IMPORTED_MODULE_14__.resolveUserArguments)(this._user).apply(void 0, args), id = _a[0], _traits = _a[1], options = _a[2], callback = _a[3];\n                this._user.identify(id, _traits);\n                segmentEvent = this.eventFactory.identify(this._user.id(), this._user.traits(), options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('identify', ctx.event.userId, ctx.event.traits, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.group = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_13__.popPageContext)(args);\n        if (args.length === 0) {\n            return this._group;\n        }\n        var _a = (0,_arguments_resolver__WEBPACK_IMPORTED_MODULE_14__.resolveUserArguments)(this._group).apply(void 0, args), id = _a[0], _traits = _a[1], options = _a[2], callback = _a[3];\n        this._group.identify(id, _traits);\n        var groupId = this._group.id();\n        var groupTraits = this._group.traits();\n        var segmentEvent = this.eventFactory.group(groupId, groupTraits, options, this.integrations, pageCtx);\n        return this._dispatch(segmentEvent, callback).then(function (ctx) {\n            _this.emit('group', ctx.event.groupId, ctx.event.traits, ctx.event.options);\n            return ctx;\n        });\n    };\n    Analytics.prototype.alias = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, to, from, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_13__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_14__.resolveAliasArguments.apply(void 0, args), to = _a[0], from = _a[1], options = _a[2], callback = _a[3];\n                segmentEvent = this.eventFactory.alias(to, from, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('alias', to, from, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.screen = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var pageCtx, _a, category, page, properties, options, callback, segmentEvent;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                pageCtx = (0,_buffer__WEBPACK_IMPORTED_MODULE_13__.popPageContext)(args);\n                _a = _arguments_resolver__WEBPACK_IMPORTED_MODULE_14__.resolvePageArguments.apply(void 0, args), category = _a[0], page = _a[1], properties = _a[2], options = _a[3], callback = _a[4];\n                segmentEvent = this.eventFactory.screen(category, page, properties, options, this.integrations, pageCtx);\n                return [2 /*return*/, this._dispatch(segmentEvent, callback).then(function (ctx) {\n                        _this.emit('screen', category, page, ctx.event.properties, ctx.event.options);\n                        return ctx;\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.trackClick = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.link).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackLink = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.link).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackSubmit = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.form).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.trackForm = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var autotrack;\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() | auto-track */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../auto-track */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\"))];\n                    case 1:\n                        autotrack = _b.sent();\n                        return [2 /*return*/, (_a = autotrack.form).call.apply(_a, (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__spreadArray)([this], args, false))];\n                }\n            });\n        });\n    };\n    Analytics.prototype.register = function () {\n        var plugins = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            plugins[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, registrations;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ctx = _context__WEBPACK_IMPORTED_MODULE_15__.Context.system();\n                        registrations = plugins.map(function (xt) {\n                            return _this.queue.register(ctx, xt, _this);\n                        });\n                        return [4 /*yield*/, Promise.all(registrations)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    Analytics.prototype.deregister = function () {\n        var plugins = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            plugins[_i] = arguments[_i];\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, deregistrations;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ctx = _context__WEBPACK_IMPORTED_MODULE_15__.Context.system();\n                        deregistrations = plugins.map(function (pl) {\n                            var plugin = _this.queue.plugins.find(function (p) { return p.name === pl; });\n                            if (plugin) {\n                                return _this.queue.deregister(ctx, plugin, _this);\n                            }\n                            else {\n                                ctx.log('warn', \"plugin \".concat(pl, \" not found\"));\n                            }\n                        });\n                        return [4 /*yield*/, Promise.all(deregistrations)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    Analytics.prototype.debug = function (toggle) {\n        // Make sure legacy ajs debug gets turned off if it was enabled before upgrading.\n        if (toggle === false && localStorage.getItem('debug')) {\n            localStorage.removeItem('debug');\n        }\n        this._debug = toggle;\n        return this;\n    };\n    Analytics.prototype.reset = function () {\n        this._user.reset();\n        this._group.reset();\n        this.emit('reset');\n    };\n    Analytics.prototype.timeout = function (timeout) {\n        this.settings.timeout = timeout;\n    };\n    Analytics.prototype._dispatch = function (event, callback) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var ctx;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                ctx = new _context__WEBPACK_IMPORTED_MODULE_15__.Context(event);\n                if ((0,_connection__WEBPACK_IMPORTED_MODULE_16__.isOffline)() && !this.options.retryQueue) {\n                    return [2 /*return*/, ctx];\n                }\n                return [2 /*return*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.dispatch)(ctx, this.queue, this, {\n                        callback: callback,\n                        debug: this._debug,\n                        timeout: this.settings.timeout,\n                    })];\n            });\n        });\n    };\n    Analytics.prototype.addSourceMiddleware = function (fn) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.queue.criticalTasks.run(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(_this, void 0, void 0, function () {\n                            var sourceMiddlewarePlugin, integrations, plugin;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../plugins/middleware */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\"))];\n                                    case 1:\n                                        sourceMiddlewarePlugin = (_a.sent()).sourceMiddlewarePlugin;\n                                        integrations = {};\n                                        this.queue.plugins.forEach(function (plugin) {\n                                            if (plugin.type === 'destination') {\n                                                return (integrations[plugin.name] = true);\n                                            }\n                                        });\n                                        plugin = sourceMiddlewarePlugin(fn, integrations);\n                                        return [4 /*yield*/, this.register(plugin)];\n                                    case 2:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    /* TODO: This does not have to return a promise? */\n    Analytics.prototype.addDestinationMiddleware = function (integrationName) {\n        var middlewares = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            middlewares[_i - 1] = arguments[_i];\n        }\n        var legacyDestinations = this.queue.plugins.filter(function (xt) { return xt.name.toLowerCase() === integrationName.toLowerCase(); });\n        legacyDestinations.forEach(function (destination) {\n            destination.addMiddleware.apply(destination, middlewares);\n        });\n        return Promise.resolve(this);\n    };\n    Analytics.prototype.setAnonymousId = function (id) {\n        return this._user.anonymousId(id);\n    };\n    Analytics.prototype.queryString = function (query) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            var queryString;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.options.useQueryString === false) {\n                            return [2 /*return*/, []];\n                        }\n                        return [4 /*yield*/, __webpack_require__.e(/*! import() | queryString */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! ../query-string */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js\"))];\n                    case 1:\n                        queryString = (_a.sent()).queryString;\n                        return [2 /*return*/, queryString(this, query)];\n                }\n            });\n        });\n    };\n    /**\n     * @deprecated This function does not register a destination plugin.\n     *\n     * Instantiates a legacy Analytics.js destination.\n     *\n     * This function does not register the destination as an Analytics.JS plugin,\n     * all the it does it to invoke the factory function back.\n     */\n    Analytics.prototype.use = function (legacyPluginFactory) {\n        legacyPluginFactory(this);\n        return this;\n    };\n    Analytics.prototype.ready = function (callback) {\n        if (callback === void 0) { callback = function (res) { return res; }; }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                return [2 /*return*/, Promise.all(this.queue.plugins.map(function (i) { return (i.ready ? i.ready() : Promise.resolve()); })).then(function (res) {\n                        callback(res);\n                        return res;\n                    })];\n            });\n        });\n    };\n    // analytics-classic api\n    Analytics.prototype.noConflict = function () {\n        console.warn(deprecationWarning);\n        (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_18__.setGlobalAnalytics)(_analytics !== null && _analytics !== void 0 ? _analytics : this);\n        return this;\n    };\n    Analytics.prototype.normalize = function (msg) {\n        console.warn(deprecationWarning);\n        return this.eventFactory.normalize(msg);\n    };\n    Object.defineProperty(Analytics.prototype, \"failedInitializations\", {\n        get: function () {\n            console.warn(deprecationWarning);\n            return this.queue.failedInitializations;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Analytics.prototype, \"VERSION\", {\n        get: function () {\n            return _generated_version__WEBPACK_IMPORTED_MODULE_19__.version;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /* @deprecated - noop */\n    Analytics.prototype.initialize = function (_settings, _options) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                console.warn(deprecationWarning);\n                return [2 /*return*/, Promise.resolve(this)];\n            });\n        });\n    };\n    Analytics.prototype.pageview = function (url) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.warn(deprecationWarning);\n                        return [4 /*yield*/, this.page({ path: url })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    Object.defineProperty(Analytics.prototype, \"plugins\", {\n        get: function () {\n            var _a;\n            console.warn(deprecationWarning);\n            // @ts-expect-error\n            return (_a = this._plugins) !== null && _a !== void 0 ? _a : {};\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Analytics.prototype, \"Integrations\", {\n        get: function () {\n            console.warn(deprecationWarning);\n            var integrations = this.queue.plugins\n                .filter(function (plugin) { return plugin.type === 'destination'; })\n                .reduce(function (acc, plugin) {\n                var name = \"\".concat(plugin.name\n                    .toLowerCase()\n                    .replace('.', '')\n                    .split(' ')\n                    .join('-'), \"Integration\");\n                // @ts-expect-error\n                var integration = window[name];\n                if (!integration) {\n                    return acc;\n                }\n                var nested = integration.Integration; // hack - Google Analytics function resides in the \"Integration\" field\n                if (nested) {\n                    acc[plugin.name] = nested;\n                    return acc;\n                }\n                acc[plugin.name] = integration;\n                return acc;\n            }, {});\n            return integrations;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // snippet function\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Analytics.prototype.push = function (args) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var an = this;\n        var method = args.shift();\n        if (method) {\n            if (!an[method])\n                return;\n        }\n        an[method].apply(this, args);\n    };\n    return Analytics;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_20__.Emitter));\n\n/**\n * @returns a no-op analytics instance that does not create cookies or localstorage, or send any events to segment.\n */\nvar NullAnalytics = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__extends)(NullAnalytics, _super);\n    function NullAnalytics() {\n        var _this = _super.call(this, { writeKey: '' }, { disableClientPersistence: true }) || this;\n        _this.initialized = true;\n        return _this;\n    }\n    return NullAnalytics;\n}(Analytics));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvYW5hbHl0aWNzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1GO0FBQzBDO0FBQ25GO0FBQ0w7QUFDYztBQUNRO0FBQ2pCO0FBQ1E7QUFDWjtBQUNJO0FBQ2tDO0FBQzFCO0FBQ087QUFDUjtBQUNvRjtBQUM5RDtBQUM1QjtBQUMzQztBQUNBO0FBQ0EsYUFBYSwwREFBUztBQUN0QjtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLHlDQUF5QztBQUN6QztBQUNBO0FBQ0EsY0FBYyw4REFBYTtBQUMzQixjQUFjLGlGQUFzQjtBQUNwQyxlQUFlLDBEQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELHVDQUFJLENBQUMsK0NBQVEsR0FBRywwR0FBMEc7QUFDcEw7QUFDQSw2REFBNkQsd0NBQUssQ0FBQywrQ0FBUSxHQUFHLDBHQUEwRztBQUN4TCxpQ0FBaUMsaURBQVk7QUFDN0M7QUFDQTtBQUNBLFFBQVEseURBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFnQixNQUFNLG1EQUFhO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2REFBa0I7QUFDdEM7QUFDQSwrQkFBK0Isc0RBQWdCLENBQUMsNkRBQWtCLENBQUMsNkRBQWtCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFnQixDQUFDLDZEQUFrQjtBQUN0RCxZQUFZLGdEQUFTO0FBQ3JCO0FBQ0Esc0JBQXNCLGdEQUFTO0FBQy9CO0FBQ0EsYUFBYTtBQUNiLFlBQVksZ0RBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQixrRUFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQixzRUFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsMEJBQTBCLHdEQUFjO0FBQ3hDLHFCQUFxQiwwRUFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwRUFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCLDBCQUEwQix3REFBYztBQUN4QyxxQkFBcUIsdUVBQXFCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCLDBCQUEwQix3REFBYztBQUN4QyxxQkFBcUIsc0VBQW9CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0EsaURBQWlELGtPQUM0QjtBQUM3RTtBQUNBO0FBQ0EsbUZBQW1GLG9EQUFhO0FBQ2hHO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQSxpREFBaUQsa09BQzRCO0FBQzdFO0FBQ0E7QUFDQSxtRkFBbUYsb0RBQWE7QUFDaEc7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBLGlEQUFpRCxrT0FDNEI7QUFDN0U7QUFDQTtBQUNBLG1GQUFtRixvREFBYTtBQUNoRztBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0EsaURBQWlELGtPQUM0QjtBQUM3RTtBQUNBO0FBQ0EsbUZBQW1GLG9EQUFhO0FBQ2hHO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBLDhCQUE4Qiw4Q0FBTztBQUNyQztBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0EsOEJBQThCLDhDQUFPO0FBQ3JDO0FBQ0EsaUZBQWlGLHVCQUF1QjtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QiwwQkFBMEIsOENBQU87QUFDakMsb0JBQW9CLHVEQUFTO0FBQzdCO0FBQ0E7QUFDQSxzQ0FBc0Msa0VBQVE7QUFDOUM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQSw0RkFBNEYsT0FBTyxnREFBUztBQUM1RztBQUNBLG1DQUFtQyxrREFBVztBQUM5QztBQUNBLGlFQUFpRSwwTUFDdUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBLDJFQUEyRSxpRUFBaUU7QUFDNUk7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsNk9BQ3VDO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDRCQUE0QjtBQUMvRCxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5Qix3RkFBd0YsbURBQW1EO0FBQzNJO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUZBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1CQUFtQix3REFBTztBQUMxQixTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxXQUFXO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHVDQUF1QztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsSUFBSTtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxDQUFDLHNFQUFPO0FBQ1k7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQSx3Q0FBd0MsY0FBYyxJQUFJLGdDQUFnQztBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDd0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hbmFseXRpY3MvaW5kZXguanM/ZjI0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyByZXNvbHZlQWxpYXNBcmd1bWVudHMsIHJlc29sdmVBcmd1bWVudHMsIHJlc29sdmVQYWdlQXJndW1lbnRzLCByZXNvbHZlVXNlckFyZ3VtZW50cywgfSBmcm9tICcuLi9hcmd1bWVudHMtcmVzb2x2ZXInO1xuaW1wb3J0IHsgaXNPZmZsaW5lIH0gZnJvbSAnLi4vY29ubmVjdGlvbic7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dCc7XG5pbXBvcnQgeyBkaXNwYXRjaCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5pbXBvcnQgeyBFdmVudEZhY3RvcnksIH0gZnJvbSAnLi4vZXZlbnRzJztcbmltcG9ydCB7IEV2ZW50UXVldWUgfSBmcm9tICcuLi9xdWV1ZS9ldmVudC1xdWV1ZSc7XG5pbXBvcnQgeyBHcm91cCwgVXNlciB9IGZyb20gJy4uL3VzZXInO1xuaW1wb3J0IGF1dG9CaW5kIGZyb20gJy4uLy4uL2xpYi9iaW5kLWFsbCc7XG5pbXBvcnQgeyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlL3BlcnNpc3RlZCc7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi4vLi4vZ2VuZXJhdGVkL3ZlcnNpb24nO1xuaW1wb3J0IHsgUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4uLy4uL2xpYi9wcmlvcml0eS1xdWV1ZSc7XG5pbXBvcnQgeyBnZXRHbG9iYWwgfSBmcm9tICcuLi8uLi9saWIvZ2V0LWdsb2JhbCc7XG5pbXBvcnQgeyBNZW1vcnlTdG9yYWdlLCBVbml2ZXJzYWxTdG9yYWdlLCBTdG9yZVR5cGUsIGFwcGx5Q29va2llT3B0aW9ucywgaW5pdGlhbGl6ZVN0b3JhZ2VzLCBpc0FycmF5T2ZTdG9yZVR5cGUsIH0gZnJvbSAnLi4vc3RvcmFnZSc7XG5pbXBvcnQgeyBzZXRHbG9iYWxBbmFseXRpY3MgfSBmcm9tICcuLi8uLi9saWIvZ2xvYmFsLWFuYWx5dGljcy1oZWxwZXInO1xuaW1wb3J0IHsgcG9wUGFnZUNvbnRleHQgfSBmcm9tICcuLi9idWZmZXInO1xudmFyIGRlcHJlY2F0aW9uV2FybmluZyA9ICdUaGlzIGlzIGJlaW5nIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgbm90IGJlIGF2YWlsYWJsZSBpbiBmdXR1cmUgcmVsZWFzZXMgb2YgQW5hbHl0aWNzIEpTJztcbi8vIHJlZmVyZW5jZSBhbnkgcHJlLWV4aXN0aW5nIFwiYW5hbHl0aWNzXCIgb2JqZWN0IHNvIGEgdXNlciBjYW4gcmVzdG9yZSB0aGUgcmVmZXJlbmNlXG52YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG52YXIgX2FuYWx5dGljcyA9IGdsb2JhbCA9PT0gbnVsbCB8fCBnbG9iYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdsb2JhbC5hbmFseXRpY3M7XG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0UXVldWUobmFtZSwgcmV0cnlRdWV1ZSwgZGlzYWJsZVBlcnNpc3RhbmNlKSB7XG4gICAgaWYgKHJldHJ5UXVldWUgPT09IHZvaWQgMCkgeyByZXRyeVF1ZXVlID0gZmFsc2U7IH1cbiAgICBpZiAoZGlzYWJsZVBlcnNpc3RhbmNlID09PSB2b2lkIDApIHsgZGlzYWJsZVBlcnNpc3RhbmNlID0gZmFsc2U7IH1cbiAgICB2YXIgbWF4QXR0ZW1wdHMgPSByZXRyeVF1ZXVlID8gMTAgOiAxO1xuICAgIHZhciBwcmlvcml0eVF1ZXVlID0gZGlzYWJsZVBlcnNpc3RhbmNlXG4gICAgICAgID8gbmV3IFByaW9yaXR5UXVldWUobWF4QXR0ZW1wdHMsIFtdKVxuICAgICAgICA6IG5ldyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKG1heEF0dGVtcHRzLCBuYW1lKTtcbiAgICByZXR1cm4gbmV3IEV2ZW50UXVldWUocHJpb3JpdHlRdWV1ZSk7XG59XG4vKiBhbmFseXRpY3MtY2xhc3NpYyBzdHVicyAqL1xuZnVuY3Rpb24gX3N0dWIoKSB7XG4gICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG59XG52YXIgQW5hbHl0aWNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBbmFseXRpY3MsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5hbHl0aWNzKHNldHRpbmdzLCBvcHRpb25zLCBxdWV1ZSwgdXNlciwgZ3JvdXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX2RlYnVnID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuX3VzZXI7XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmluaXQgPSBfdGhpcy5pbml0aWFsaXplLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5sb2cgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMuYWRkSW50ZWdyYXRpb25NaWRkbGV3YXJlID0gX3N0dWI7XG4gICAgICAgIF90aGlzLmxpc3RlbmVycyA9IF9zdHViO1xuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyID0gX3N0dWI7XG4gICAgICAgIF90aGlzLnJlbW92ZUFsbExpc3RlbmVycyA9IF9zdHViO1xuICAgICAgICBfdGhpcy5yZW1vdmVMaXN0ZW5lciA9IF9zdHViO1xuICAgICAgICBfdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyID0gX3N0dWI7XG4gICAgICAgIF90aGlzLmhhc0xpc3RlbmVycyA9IF9zdHViO1xuICAgICAgICBfdGhpcy5hZGQgPSBfc3R1YjtcbiAgICAgICAgX3RoaXMuYWRkSW50ZWdyYXRpb24gPSBfc3R1YjtcbiAgICAgICAgdmFyIGNvb2tpZU9wdGlvbnMgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY29va2llO1xuICAgICAgICB2YXIgZGlzYWJsZVBlcnNpc3RhbmNlID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRpc2FibGVDbGllbnRQZXJzaXN0ZW5jZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XG4gICAgICAgIF90aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIF90aGlzLnNldHRpbmdzLnRpbWVvdXQgPSAoX2IgPSBfdGhpcy5zZXR0aW5ncy50aW1lb3V0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAzMDA7XG4gICAgICAgIF90aGlzLnF1ZXVlID1cbiAgICAgICAgICAgIHF1ZXVlICE9PSBudWxsICYmIHF1ZXVlICE9PSB2b2lkIDAgPyBxdWV1ZSA6IGNyZWF0ZURlZmF1bHRRdWV1ZShcIlwiLmNvbmNhdChzZXR0aW5ncy53cml0ZUtleSwgXCI6ZXZlbnQtcXVldWVcIiksIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yZXRyeVF1ZXVlLCBkaXNhYmxlUGVyc2lzdGFuY2UpO1xuICAgICAgICB2YXIgc3RvcmFnZVNldHRpbmcgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc3RvcmFnZTtcbiAgICAgICAgX3RoaXMuX3VuaXZlcnNhbFN0b3JhZ2UgPSBfdGhpcy5jcmVhdGVTdG9yZShkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2VTZXR0aW5nLCBjb29raWVPcHRpb25zKTtcbiAgICAgICAgX3RoaXMuX3VzZXIgPVxuICAgICAgICAgICAgdXNlciAhPT0gbnVsbCAmJiB1c2VyICE9PSB2b2lkIDAgPyB1c2VyIDogbmV3IFVzZXIoX19hc3NpZ24oeyBwZXJzaXN0OiAhZGlzYWJsZVBlcnNpc3RhbmNlLCBzdG9yYWdlOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc3RvcmFnZSB9LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudXNlciksIGNvb2tpZU9wdGlvbnMpLmxvYWQoKTtcbiAgICAgICAgX3RoaXMuX2dyb3VwID1cbiAgICAgICAgICAgIGdyb3VwICE9PSBudWxsICYmIGdyb3VwICE9PSB2b2lkIDAgPyBncm91cCA6IG5ldyBHcm91cChfX2Fzc2lnbih7IHBlcnNpc3Q6ICFkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2U6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zdG9yYWdlIH0sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ncm91cCksIGNvb2tpZU9wdGlvbnMpLmxvYWQoKTtcbiAgICAgICAgX3RoaXMuZXZlbnRGYWN0b3J5ID0gbmV3IEV2ZW50RmFjdG9yeShfdGhpcy5fdXNlcik7XG4gICAgICAgIF90aGlzLmludGVncmF0aW9ucyA9IChfYyA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHt9O1xuICAgICAgICBfdGhpcy5vcHRpb25zID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge307XG4gICAgICAgIGF1dG9CaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBzdG9yYWdlIHN5c3RlbSBiYXNlZCBvbiB0aGUgc2V0dGluZ3MgcmVjZWl2ZWRcbiAgICAgKiBAcmV0dXJucyBTdG9yYWdlXG4gICAgICovXG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5jcmVhdGVTdG9yZSA9IGZ1bmN0aW9uIChkaXNhYmxlUGVyc2lzdGFuY2UsIHN0b3JhZ2VTZXR0aW5nLCBjb29raWVPcHRpb25zKSB7XG4gICAgICAgIC8vIERpc2FibGVQZXJzaXN0YW5jZSBvcHRpb24gb3ZlcnJpZGVzIGFsbCwgbm8gc3RvcmFnZSB3aWxsIGJlIHVzZWQgb3V0c2lkZSBvZiBtZW1vcnkgZXZlbiBpZiBzcGVjaWZpZWRcbiAgICAgICAgaWYgKGRpc2FibGVQZXJzaXN0YW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbml2ZXJzYWxTdG9yYWdlKFtuZXcgTWVtb3J5U3RvcmFnZSgpXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3RvcmFnZVNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheU9mU3RvcmVUeXBlKHN0b3JhZ2VTZXR0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSB3aWxsIGNyZWF0ZSB0aGUgc3RvcmUgd2l0aCB0aGUgcHJpb3JpdHkgZm9yIGN1c3RvbWVyIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVW5pdmVyc2FsU3RvcmFnZShpbml0aWFsaXplU3RvcmFnZXMoYXBwbHlDb29raWVPcHRpb25zKHN0b3JhZ2VTZXR0aW5nLnN0b3JlcywgY29va2llT3B0aW9ucykpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgZGVmYXVsdCB0byBvdXIgbXVsdGkgc3RvcmFnZSB3aXRoIHByaW9yaXR5XG4gICAgICAgIHJldHVybiBuZXcgVW5pdmVyc2FsU3RvcmFnZShpbml0aWFsaXplU3RvcmFnZXMoW1xuICAgICAgICAgICAgU3RvcmVUeXBlLkxvY2FsU3RvcmFnZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBTdG9yZVR5cGUuQ29va2llLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiBjb29raWVPcHRpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFN0b3JlVHlwZS5NZW1vcnksXG4gICAgICAgIF0pKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmFseXRpY3MucHJvdG90eXBlLCBcInN0b3JhZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91bml2ZXJzYWxTdG9yYWdlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZUN0eCwgX2EsIG5hbWUsIGRhdGEsIG9wdHMsIGNiLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVBcmd1bWVudHMuYXBwbHkodm9pZCAwLCBhcmdzKSwgbmFtZSA9IF9hWzBdLCBkYXRhID0gX2FbMV0sIG9wdHMgPSBfYVsyXSwgY2IgPSBfYVszXTtcbiAgICAgICAgICAgICAgICBzZWdtZW50RXZlbnQgPSB0aGlzLmV2ZW50RmFjdG9yeS50cmFjayhuYW1lLCBkYXRhLCBvcHRzLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2IpLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgndHJhY2snLCBuYW1lLCBjdHguZXZlbnQucHJvcGVydGllcywgY3R4LmV2ZW50Lm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgY2F0ZWdvcnksIHBhZ2UsIHByb3BlcnRpZXMsIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVQYWdlQXJndW1lbnRzLmFwcGx5KHZvaWQgMCwgYXJncyksIGNhdGVnb3J5ID0gX2FbMF0sIHBhZ2UgPSBfYVsxXSwgcHJvcGVydGllcyA9IF9hWzJdLCBvcHRpb25zID0gX2FbM10sIGNhbGxiYWNrID0gX2FbNF07XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkucGFnZShjYXRlZ29yeSwgcGFnZSwgcHJvcGVydGllcywgb3B0aW9ucywgdGhpcy5pbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLl9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKS50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ3BhZ2UnLCBjYXRlZ29yeSwgcGFnZSwgY3R4LmV2ZW50LnByb3BlcnRpZXMsIGN0eC5ldmVudC5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VDdHgsIF9hLCBpZCwgX3RyYWl0cywgb3B0aW9ucywgY2FsbGJhY2ssIHNlZ21lbnRFdmVudDtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgcGFnZUN0eCA9IHBvcFBhZ2VDb250ZXh0KGFyZ3MpO1xuICAgICAgICAgICAgICAgIF9hID0gcmVzb2x2ZVVzZXJBcmd1bWVudHModGhpcy5fdXNlcikuYXBwbHkodm9pZCAwLCBhcmdzKSwgaWQgPSBfYVswXSwgX3RyYWl0cyA9IF9hWzFdLCBvcHRpb25zID0gX2FbMl0sIGNhbGxiYWNrID0gX2FbM107XG4gICAgICAgICAgICAgICAgdGhpcy5fdXNlci5pZGVudGlmeShpZCwgX3RyYWl0cyk7XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkuaWRlbnRpZnkodGhpcy5fdXNlci5pZCgpLCB0aGlzLl91c2VyLnRyYWl0cygpLCBvcHRpb25zLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgnaWRlbnRpZnknLCBjdHguZXZlbnQudXNlcklkLCBjdHguZXZlbnQudHJhaXRzLCBjdHguZXZlbnQub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWdlQ3R4ID0gcG9wUGFnZUNvbnRleHQoYXJncyk7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHJlc29sdmVVc2VyQXJndW1lbnRzKHRoaXMuX2dyb3VwKS5hcHBseSh2b2lkIDAsIGFyZ3MpLCBpZCA9IF9hWzBdLCBfdHJhaXRzID0gX2FbMV0sIG9wdGlvbnMgPSBfYVsyXSwgY2FsbGJhY2sgPSBfYVszXTtcbiAgICAgICAgdGhpcy5fZ3JvdXAuaWRlbnRpZnkoaWQsIF90cmFpdHMpO1xuICAgICAgICB2YXIgZ3JvdXBJZCA9IHRoaXMuX2dyb3VwLmlkKCk7XG4gICAgICAgIHZhciBncm91cFRyYWl0cyA9IHRoaXMuX2dyb3VwLnRyYWl0cygpO1xuICAgICAgICB2YXIgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3RvcnkuZ3JvdXAoZ3JvdXBJZCwgZ3JvdXBUcmFpdHMsIG9wdGlvbnMsIHRoaXMuaW50ZWdyYXRpb25zLCBwYWdlQ3R4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgX3RoaXMuZW1pdCgnZ3JvdXAnLCBjdHguZXZlbnQuZ3JvdXBJZCwgY3R4LmV2ZW50LnRyYWl0cywgY3R4LmV2ZW50Lm9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgdG8sIGZyb20sIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVBbGlhc0FyZ3VtZW50cy5hcHBseSh2b2lkIDAsIGFyZ3MpLCB0byA9IF9hWzBdLCBmcm9tID0gX2FbMV0sIG9wdGlvbnMgPSBfYVsyXSwgY2FsbGJhY2sgPSBfYVszXTtcbiAgICAgICAgICAgICAgICBzZWdtZW50RXZlbnQgPSB0aGlzLmV2ZW50RmFjdG9yeS5hbGlhcyh0bywgZnJvbSwgb3B0aW9ucywgdGhpcy5pbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLl9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKS50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoJ2FsaWFzJywgdG8sIGZyb20sIGN0eC5ldmVudC5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuc2NyZWVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlQ3R4LCBfYSwgY2F0ZWdvcnksIHBhZ2UsIHByb3BlcnRpZXMsIG9wdGlvbnMsIGNhbGxiYWNrLCBzZWdtZW50RXZlbnQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHBhZ2VDdHggPSBwb3BQYWdlQ29udGV4dChhcmdzKTtcbiAgICAgICAgICAgICAgICBfYSA9IHJlc29sdmVQYWdlQXJndW1lbnRzLmFwcGx5KHZvaWQgMCwgYXJncyksIGNhdGVnb3J5ID0gX2FbMF0sIHBhZ2UgPSBfYVsxXSwgcHJvcGVydGllcyA9IF9hWzJdLCBvcHRpb25zID0gX2FbM10sIGNhbGxiYWNrID0gX2FbNF07XG4gICAgICAgICAgICAgICAgc2VnbWVudEV2ZW50ID0gdGhpcy5ldmVudEZhY3Rvcnkuc2NyZWVuKGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCB0aGlzLmludGVncmF0aW9ucywgcGFnZUN0eCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spLnRoZW4oZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgnc2NyZWVuJywgY2F0ZWdvcnksIHBhZ2UsIGN0eC5ldmVudC5wcm9wZXJ0aWVzLCBjdHguZXZlbnQub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGF1dG90cmFjaztcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgLyogd2VicGFja0NodW5rTmFtZTogXCJhdXRvLXRyYWNrXCIgKi8gJy4uL2F1dG8tdHJhY2snKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG90cmFjayA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCAoX2EgPSBhdXRvdHJhY2subGluaykuY2FsbC5hcHBseShfYSwgX19zcHJlYWRBcnJheShbdGhpc10sIGFyZ3MsIGZhbHNlKSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUudHJhY2tMaW5rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvdHJhY2s7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYXV0by10cmFja1wiICovICcuLi9hdXRvLXRyYWNrJyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvdHJhY2sgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hID0gYXV0b3RyYWNrLmxpbmspLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW3RoaXNdLCBhcmdzLCBmYWxzZSkpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrU3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvdHJhY2s7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGltcG9ydChcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYXV0by10cmFja1wiICovICcuLi9hdXRvLXRyYWNrJyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvdHJhY2sgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hID0gYXV0b3RyYWNrLmZvcm0pLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW3RoaXNdLCBhcmdzLCBmYWxzZSkpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRyYWNrRm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXV0b3RyYWNrO1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImF1dG8tdHJhY2tcIiAqLyAnLi4vYXV0by10cmFjaycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b3RyYWNrID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIChfYSA9IGF1dG90cmFjay5mb3JtKS5jYWxsLmFwcGx5KF9hLCBfX3NwcmVhZEFycmF5KFt0aGlzXSwgYXJncywgZmFsc2UpKV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBsdWdpbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHBsdWdpbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4LCByZWdpc3RyYXRpb25zO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IENvbnRleHQuc3lzdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25zID0gcGx1Z2lucy5tYXAoZnVuY3Rpb24gKHh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnF1ZXVlLnJlZ2lzdGVyKGN0eCwgeHQsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwocmVnaXN0cmF0aW9ucyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmRlcmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwbHVnaW5zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBwbHVnaW5zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN0eCwgZGVyZWdpc3RyYXRpb25zO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IENvbnRleHQuc3lzdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdHJhdGlvbnMgPSBwbHVnaW5zLm1hcChmdW5jdGlvbiAocGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGx1Z2luID0gX3RoaXMucXVldWUucGx1Z2lucy5maW5kKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLm5hbWUgPT09IHBsOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5xdWV1ZS5kZXJlZ2lzdGVyKGN0eCwgcGx1Z2luLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgXCJwbHVnaW4gXCIuY29uY2F0KHBsLCBcIiBub3QgZm91bmRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoZGVyZWdpc3RyYXRpb25zKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAodG9nZ2xlKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBsZWdhY3kgYWpzIGRlYnVnIGdldHMgdHVybmVkIG9mZiBpZiBpdCB3YXMgZW5hYmxlZCBiZWZvcmUgdXBncmFkaW5nLlxuICAgICAgICBpZiAodG9nZ2xlID09PSBmYWxzZSAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGVidWcnKSkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGVidWcgPSB0b2dnbGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdXNlci5yZXNldCgpO1xuICAgICAgICB0aGlzLl9ncm91cC5yZXNldCgpO1xuICAgICAgICB0aGlzLmVtaXQoJ3Jlc2V0Jyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzLnRpbWVvdXQgPSB0aW1lb3V0O1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5fZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHg7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4ID0gbmV3IENvbnRleHQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSAmJiAhdGhpcy5vcHRpb25zLnJldHJ5UXVldWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkaXNwYXRjaChjdHgsIHRoaXMucXVldWUsIHRoaXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnOiB0aGlzLl9kZWJ1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMuc2V0dGluZ3MudGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5hZGRTb3VyY2VNaWRkbGV3YXJlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucXVldWUuY3JpdGljYWxUYXNrcy5ydW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNaWRkbGV3YXJlUGx1Z2luLCBpbnRlZ3JhdGlvbnMsIHBsdWdpbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwibWlkZGxld2FyZVwiICovICcuLi8uLi9wbHVnaW5zL21pZGRsZXdhcmUnKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlTWlkZGxld2FyZVBsdWdpbiA9IChfYS5zZW50KCkpLnNvdXJjZU1pZGRsZXdhcmVQbHVnaW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnR5cGUgPT09ICdkZXN0aW5hdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaW50ZWdyYXRpb25zW3BsdWdpbi5uYW1lXSA9IHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luID0gc291cmNlTWlkZGxld2FyZVBsdWdpbihmbiwgaW50ZWdyYXRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZ2lzdGVyKHBsdWdpbildO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKiBUT0RPOiBUaGlzIGRvZXMgbm90IGhhdmUgdG8gcmV0dXJuIGEgcHJvbWlzZT8gKi9cbiAgICBBbmFseXRpY3MucHJvdG90eXBlLmFkZERlc3RpbmF0aW9uTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbk5hbWUpIHtcbiAgICAgICAgdmFyIG1pZGRsZXdhcmVzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBtaWRkbGV3YXJlc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVnYWN5RGVzdGluYXRpb25zID0gdGhpcy5xdWV1ZS5wbHVnaW5zLmZpbHRlcihmdW5jdGlvbiAoeHQpIHsgcmV0dXJuIHh0Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gaW50ZWdyYXRpb25OYW1lLnRvTG93ZXJDYXNlKCk7IH0pO1xuICAgICAgICBsZWdhY3lEZXN0aW5hdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZE1pZGRsZXdhcmUuYXBwbHkoZGVzdGluYXRpb24sIG1pZGRsZXdhcmVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnNldEFub255bW91c0lkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyLmFub255bW91c0lkKGlkKTtcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUucXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VRdWVyeVN0cmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW1wb3J0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6IFwicXVlcnlTdHJpbmdcIiAqLyAnLi4vcXVlcnktc3RyaW5nJyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyA9IChfYS5zZW50KCkpLnF1ZXJ5U3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXJ5U3RyaW5nKHRoaXMsIHF1ZXJ5KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWdpc3RlciBhIGRlc3RpbmF0aW9uIHBsdWdpbi5cbiAgICAgKlxuICAgICAqIEluc3RhbnRpYXRlcyBhIGxlZ2FjeSBBbmFseXRpY3MuanMgZGVzdGluYXRpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZ2lzdGVyIHRoZSBkZXN0aW5hdGlvbiBhcyBhbiBBbmFseXRpY3MuSlMgcGx1Z2luLFxuICAgICAqIGFsbCB0aGUgaXQgZG9lcyBpdCB0byBpbnZva2UgdGhlIGZhY3RvcnkgZnVuY3Rpb24gYmFjay5cbiAgICAgKi9cbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIChsZWdhY3lQbHVnaW5GYWN0b3J5KSB7XG4gICAgICAgIGxlZ2FjeVBsdWdpbkZhY3RvcnkodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5yZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICBpZiAoY2FsbGJhY2sgPT09IHZvaWQgMCkgeyBjYWxsYmFjayA9IGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlczsgfTsgfVxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UuYWxsKHRoaXMucXVldWUucGx1Z2lucy5tYXAoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIChpLnJlYWR5ID8gaS5yZWFkeSgpIDogUHJvbWlzZS5yZXNvbHZlKCkpOyB9KSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy8gYW5hbHl0aWNzLWNsYXNzaWMgYXBpXG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbiAgICAgICAgc2V0R2xvYmFsQW5hbHl0aWNzKF9hbmFseXRpY3MgIT09IG51bGwgJiYgX2FuYWx5dGljcyAhPT0gdm9pZCAwID8gX2FuYWx5dGljcyA6IHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEFuYWx5dGljcy5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24gKG1zZykge1xuICAgICAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRGYWN0b3J5Lm5vcm1hbGl6ZShtc2cpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFuYWx5dGljcy5wcm90b3R5cGUsIFwiZmFpbGVkSW5pdGlhbGl6YXRpb25zXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZGVwcmVjYXRpb25XYXJuaW5nKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmZhaWxlZEluaXRpYWxpemF0aW9ucztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbmFseXRpY3MucHJvdG90eXBlLCBcIlZFUlNJT05cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyogQGRlcHJlY2F0ZWQgLSBub29wICovXG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKF9zZXR0aW5ncywgX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihkZXByZWNhdGlvbldhcm5pbmcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlc29sdmUodGhpcyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQW5hbHl0aWNzLnByb3RvdHlwZS5wYWdldmlldyA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBhZ2UoeyBwYXRoOiB1cmwgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpc107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFuYWx5dGljcy5wcm90b3R5cGUsIFwicGx1Z2luc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGRlcHJlY2F0aW9uV2FybmluZyk7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fcGx1Z2lucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5hbHl0aWNzLnByb3RvdHlwZSwgXCJJbnRlZ3JhdGlvbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihkZXByZWNhdGlvbldhcm5pbmcpO1xuICAgICAgICAgICAgdmFyIGludGVncmF0aW9ucyA9IHRoaXMucXVldWUucGx1Z2luc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHBsdWdpbikgeyByZXR1cm4gcGx1Z2luLnR5cGUgPT09ICdkZXN0aW5hdGlvbic7IH0pXG4gICAgICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IFwiXCIuY29uY2F0KHBsdWdpbi5uYW1lXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCcuJywgJycpXG4gICAgICAgICAgICAgICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCctJyksIFwiSW50ZWdyYXRpb25cIik7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvbiA9IHdpbmRvd1tuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoIWludGVncmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBuZXN0ZWQgPSBpbnRlZ3JhdGlvbi5JbnRlZ3JhdGlvbjsgLy8gaGFjayAtIEdvb2dsZSBBbmFseXRpY3MgZnVuY3Rpb24gcmVzaWRlcyBpbiB0aGUgXCJJbnRlZ3JhdGlvblwiIGZpZWxkXG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBhY2NbcGx1Z2luLm5hbWVdID0gbmVzdGVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhY2NbcGx1Z2luLm5hbWVdID0gaW50ZWdyYXRpb247XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnRlZ3JhdGlvbnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvLyBzbmlwcGV0IGZ1bmN0aW9uXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBBbmFseXRpY3MucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB2YXIgYW4gPSB0aGlzO1xuICAgICAgICB2YXIgbWV0aG9kID0gYXJncy5zaGlmdCgpO1xuICAgICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgICAgICBpZiAoIWFuW21ldGhvZF0pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFuW21ldGhvZF0uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfTtcbiAgICByZXR1cm4gQW5hbHl0aWNzO1xufShFbWl0dGVyKSk7XG5leHBvcnQgeyBBbmFseXRpY3MgfTtcbi8qKlxuICogQHJldHVybnMgYSBuby1vcCBhbmFseXRpY3MgaW5zdGFuY2UgdGhhdCBkb2VzIG5vdCBjcmVhdGUgY29va2llcyBvciBsb2NhbHN0b3JhZ2UsIG9yIHNlbmQgYW55IGV2ZW50cyB0byBzZWdtZW50LlxuICovXG52YXIgTnVsbEFuYWx5dGljcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTnVsbEFuYWx5dGljcywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOdWxsQW5hbHl0aWNzKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7IHdyaXRlS2V5OiAnJyB9LCB7IGRpc2FibGVDbGllbnRQZXJzaXN0ZW5jZTogdHJ1ZSB9KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE51bGxBbmFseXRpY3M7XG59KEFuYWx5dGljcykpO1xuZXhwb3J0IHsgTnVsbEFuYWx5dGljcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resolveAliasArguments: () => (/* binding */ resolveAliasArguments),\n/* harmony export */   resolveArguments: () => (/* binding */ resolveArguments),\n/* harmony export */   resolvePageArguments: () => (/* binding */ resolvePageArguments),\n/* harmony export */   resolveUserArguments: () => (/* binding */ resolveUserArguments)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n/**\n * Helper for the track method\n */\nfunction resolveArguments(eventName, properties, options, callback) {\n    var _a;\n    var args = [eventName, properties, options, callback];\n    var name = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName) ? eventName.event : eventName;\n    if (!name || !(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString)(name)) {\n        throw new Error('Event missing');\n    }\n    var data = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName)\n        ? (_a = eventName.properties) !== null && _a !== void 0 ? _a : {}\n        : (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(properties)\n            ? properties\n            : {};\n    var opts = {};\n    if (!(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(options)) {\n        opts = options !== null && options !== void 0 ? options : {};\n    }\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(eventName) && !(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(properties)) {\n        opts = properties !== null && properties !== void 0 ? properties : {};\n    }\n    var cb = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    return [name, data, opts, cb];\n}\n/**\n * Helper for page, screen methods\n */\nfunction resolvePageArguments(category, name, properties, options, callback) {\n    var _a, _b;\n    var resolvedCategory = null;\n    var resolvedName = null;\n    var args = [category, name, properties, options, callback];\n    var strings = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString);\n    if (strings[0] !== undefined && strings[1] !== undefined) {\n        resolvedCategory = strings[0];\n        resolvedName = strings[1];\n    }\n    if (strings.length === 1) {\n        resolvedCategory = null;\n        resolvedName = strings[0];\n    }\n    var resolvedCallback = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    var objects = args.filter(function (obj) {\n        if (resolvedName === null) {\n            return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(obj);\n        }\n        return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(obj) || obj === null;\n    });\n    var resolvedProperties = ((_a = objects[0]) !== null && _a !== void 0 ? _a : {});\n    var resolvedOptions = ((_b = objects[1]) !== null && _b !== void 0 ? _b : {});\n    return [\n        resolvedCategory,\n        resolvedName,\n        resolvedProperties,\n        resolvedOptions,\n        resolvedCallback,\n    ];\n}\n/**\n * Helper for group, identify methods\n */\nvar resolveUserArguments = function (user) {\n    return function () {\n        var _a, _b, _c;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var values = {};\n        // It's a stack so it's reversed so that we go through each of the expected arguments\n        var orderStack = [\n            'callback',\n            'options',\n            'traits',\n            'id',\n        ];\n        // Read each argument and eval the possible values here\n        for (var _d = 0, args_1 = args; _d < args_1.length; _d++) {\n            var arg = args_1[_d];\n            var current = orderStack.pop();\n            if (current === 'id') {\n                if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString)(arg) || (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(arg)) {\n                    values.id = arg.toString();\n                    continue;\n                }\n                if (arg === null || arg === undefined) {\n                    continue;\n                }\n                // First argument should always be the id, if it is not a valid value we can skip it\n                current = orderStack.pop();\n            }\n            // Traits and Options\n            if ((current === 'traits' || current === 'options') &&\n                (arg === null || arg === undefined || (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(arg))) {\n                values[current] = arg;\n            }\n            // Callback\n            if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction)(arg)) {\n                values.callback = arg;\n                break; // This is always the last argument\n            }\n        }\n        return [\n            (_a = values.id) !== null && _a !== void 0 ? _a : user.id(),\n            ((_b = values.traits) !== null && _b !== void 0 ? _b : {}),\n            (_c = values.options) !== null && _c !== void 0 ? _c : {},\n            values.callback,\n        ];\n    };\n};\n/**\n * Helper for alias method\n */\nfunction resolveAliasArguments(to, from, options, callback) {\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(to))\n        to = to.toString(); // Legacy behaviour - allow integers for alias calls\n    if ((0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isNumber)(from))\n        from = from.toString();\n    var args = [to, from, options, callback];\n    var _a = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isString), _b = _a[0], aliasTo = _b === void 0 ? to : _b, _c = _a[1], aliasFrom = _c === void 0 ? null : _c;\n    var _d = args.filter(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)[0], opts = _d === void 0 ? {} : _d;\n    var resolvedCallback = args.find(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isFunction);\n    return [aliasTo, aliasFrom, opts, resolvedCallback];\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvYXJndW1lbnRzLXJlc29sdmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlGO0FBQ3pGO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsc0VBQWE7QUFDNUIsa0JBQWtCLGlFQUFRO0FBQzFCO0FBQ0E7QUFDQSxlQUFlLHNFQUFhO0FBQzVCO0FBQ0EsVUFBVSxzRUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1FQUFVO0FBQ25CO0FBQ0E7QUFDQSxRQUFRLHNFQUFhLGdCQUFnQixtRUFBVTtBQUMvQztBQUNBO0FBQ0EsdUJBQXVCLCtEQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZEQUFRO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsK0RBQVU7QUFDL0M7QUFDQTtBQUNBLG1CQUFtQixzRUFBYTtBQUNoQztBQUNBLGVBQWUsc0VBQWE7QUFDNUIsS0FBSztBQUNMLG1GQUFtRjtBQUNuRixnRkFBZ0Y7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLG9CQUFvQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVEsU0FBUyxpRUFBUTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHNFQUFhO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtRUFBVTtBQUMxQjtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRSxxRUFBcUU7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFFBQVEsaUVBQVE7QUFDaEIsNEJBQTRCO0FBQzVCLFFBQVEsaUVBQVE7QUFDaEI7QUFDQTtBQUNBLHlCQUF5Qiw2REFBUTtBQUNqQyx5QkFBeUIsa0VBQWEsZ0NBQWdDO0FBQ3RFLHFDQUFxQywrREFBVTtBQUMvQztBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9hcmd1bWVudHMtcmVzb2x2ZXIvaW5kZXguanM/MmZhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0Z1bmN0aW9uLCBpc1BsYWluT2JqZWN0LCBpc1N0cmluZywgaXNOdW1iZXIsIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuLyoqXG4gKiBIZWxwZXIgZm9yIHRoZSB0cmFjayBtZXRob2RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVBcmd1bWVudHMoZXZlbnROYW1lLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtldmVudE5hbWUsIHByb3BlcnRpZXMsIG9wdGlvbnMsIGNhbGxiYWNrXTtcbiAgICB2YXIgbmFtZSA9IGlzUGxhaW5PYmplY3QoZXZlbnROYW1lKSA/IGV2ZW50TmFtZS5ldmVudCA6IGV2ZW50TmFtZTtcbiAgICBpZiAoIW5hbWUgfHwgIWlzU3RyaW5nKG5hbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgbWlzc2luZycpO1xuICAgIH1cbiAgICB2YXIgZGF0YSA9IGlzUGxhaW5PYmplY3QoZXZlbnROYW1lKVxuICAgICAgICA/IChfYSA9IGV2ZW50TmFtZS5wcm9wZXJ0aWVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fVxuICAgICAgICA6IGlzUGxhaW5PYmplY3QocHJvcGVydGllcylcbiAgICAgICAgICAgID8gcHJvcGVydGllc1xuICAgICAgICAgICAgOiB7fTtcbiAgICB2YXIgb3B0cyA9IHt9O1xuICAgIGlmICghaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICBvcHRzID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge307XG4gICAgfVxuICAgIGlmIChpc1BsYWluT2JqZWN0KGV2ZW50TmFtZSkgJiYgIWlzRnVuY3Rpb24ocHJvcGVydGllcykpIHtcbiAgICAgICAgb3B0cyA9IHByb3BlcnRpZXMgIT09IG51bGwgJiYgcHJvcGVydGllcyAhPT0gdm9pZCAwID8gcHJvcGVydGllcyA6IHt9O1xuICAgIH1cbiAgICB2YXIgY2IgPSBhcmdzLmZpbmQoaXNGdW5jdGlvbik7XG4gICAgcmV0dXJuIFtuYW1lLCBkYXRhLCBvcHRzLCBjYl07XG59XG4vKipcbiAqIEhlbHBlciBmb3IgcGFnZSwgc2NyZWVuIG1ldGhvZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVQYWdlQXJndW1lbnRzKGNhdGVnb3J5LCBuYW1lLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdmFyIHJlc29sdmVkQ2F0ZWdvcnkgPSBudWxsO1xuICAgIHZhciByZXNvbHZlZE5hbWUgPSBudWxsO1xuICAgIHZhciBhcmdzID0gW2NhdGVnb3J5LCBuYW1lLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBjYWxsYmFja107XG4gICAgdmFyIHN0cmluZ3MgPSBhcmdzLmZpbHRlcihpc1N0cmluZyk7XG4gICAgaWYgKHN0cmluZ3NbMF0gIT09IHVuZGVmaW5lZCAmJiBzdHJpbmdzWzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVzb2x2ZWRDYXRlZ29yeSA9IHN0cmluZ3NbMF07XG4gICAgICAgIHJlc29sdmVkTmFtZSA9IHN0cmluZ3NbMV07XG4gICAgfVxuICAgIGlmIChzdHJpbmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXNvbHZlZENhdGVnb3J5ID0gbnVsbDtcbiAgICAgICAgcmVzb2x2ZWROYW1lID0gc3RyaW5nc1swXTtcbiAgICB9XG4gICAgdmFyIHJlc29sdmVkQ2FsbGJhY2sgPSBhcmdzLmZpbmQoaXNGdW5jdGlvbik7XG4gICAgdmFyIG9iamVjdHMgPSBhcmdzLmZpbHRlcihmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmIChyZXNvbHZlZE5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1BsYWluT2JqZWN0KG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzUGxhaW5PYmplY3Qob2JqKSB8fCBvYmogPT09IG51bGw7XG4gICAgfSk7XG4gICAgdmFyIHJlc29sdmVkUHJvcGVydGllcyA9ICgoX2EgPSBvYmplY3RzWzBdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSk7XG4gICAgdmFyIHJlc29sdmVkT3B0aW9ucyA9ICgoX2IgPSBvYmplY3RzWzFdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgcmVzb2x2ZWRDYXRlZ29yeSxcbiAgICAgICAgcmVzb2x2ZWROYW1lLFxuICAgICAgICByZXNvbHZlZFByb3BlcnRpZXMsXG4gICAgICAgIHJlc29sdmVkT3B0aW9ucyxcbiAgICAgICAgcmVzb2x2ZWRDYWxsYmFjayxcbiAgICBdO1xufVxuLyoqXG4gKiBIZWxwZXIgZm9yIGdyb3VwLCBpZGVudGlmeSBtZXRob2RzXG4gKi9cbmV4cG9ydCB2YXIgcmVzb2x2ZVVzZXJBcmd1bWVudHMgPSBmdW5jdGlvbiAodXNlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YWx1ZXMgPSB7fTtcbiAgICAgICAgLy8gSXQncyBhIHN0YWNrIHNvIGl0J3MgcmV2ZXJzZWQgc28gdGhhdCB3ZSBnbyB0aHJvdWdoIGVhY2ggb2YgdGhlIGV4cGVjdGVkIGFyZ3VtZW50c1xuICAgICAgICB2YXIgb3JkZXJTdGFjayA9IFtcbiAgICAgICAgICAgICdjYWxsYmFjaycsXG4gICAgICAgICAgICAnb3B0aW9ucycsXG4gICAgICAgICAgICAndHJhaXRzJyxcbiAgICAgICAgICAgICdpZCcsXG4gICAgICAgIF07XG4gICAgICAgIC8vIFJlYWQgZWFjaCBhcmd1bWVudCBhbmQgZXZhbCB0aGUgcG9zc2libGUgdmFsdWVzIGhlcmVcbiAgICAgICAgZm9yICh2YXIgX2QgPSAwLCBhcmdzXzEgPSBhcmdzOyBfZCA8IGFyZ3NfMS5sZW5ndGg7IF9kKyspIHtcbiAgICAgICAgICAgIHZhciBhcmcgPSBhcmdzXzFbX2RdO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBvcmRlclN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09ICdpZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcoYXJnKSB8fCBpc051bWJlcihhcmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5pZCA9IGFyZy50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFyZyA9PT0gbnVsbCB8fCBhcmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgYXJndW1lbnQgc2hvdWxkIGFsd2F5cyBiZSB0aGUgaWQsIGlmIGl0IGlzIG5vdCBhIHZhbGlkIHZhbHVlIHdlIGNhbiBza2lwIGl0XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IG9yZGVyU3RhY2sucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUcmFpdHMgYW5kIE9wdGlvbnNcbiAgICAgICAgICAgIGlmICgoY3VycmVudCA9PT0gJ3RyYWl0cycgfHwgY3VycmVudCA9PT0gJ29wdGlvbnMnKSAmJlxuICAgICAgICAgICAgICAgIChhcmcgPT09IG51bGwgfHwgYXJnID09PSB1bmRlZmluZWQgfHwgaXNQbGFpbk9iamVjdChhcmcpKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlc1tjdXJyZW50XSA9IGFyZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENhbGxiYWNrXG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihhcmcpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzLmNhbGxiYWNrID0gYXJnO1xuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBUaGlzIGlzIGFsd2F5cyB0aGUgbGFzdCBhcmd1bWVudFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAoX2EgPSB2YWx1ZXMuaWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVzZXIuaWQoKSxcbiAgICAgICAgICAgICgoX2IgPSB2YWx1ZXMudHJhaXRzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSksXG4gICAgICAgICAgICAoX2MgPSB2YWx1ZXMub3B0aW9ucykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDoge30sXG4gICAgICAgICAgICB2YWx1ZXMuY2FsbGJhY2ssXG4gICAgICAgIF07XG4gICAgfTtcbn07XG4vKipcbiAqIEhlbHBlciBmb3IgYWxpYXMgbWV0aG9kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQWxpYXNBcmd1bWVudHModG8sIGZyb20sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGlzTnVtYmVyKHRvKSlcbiAgICAgICAgdG8gPSB0by50b1N0cmluZygpOyAvLyBMZWdhY3kgYmVoYXZpb3VyIC0gYWxsb3cgaW50ZWdlcnMgZm9yIGFsaWFzIGNhbGxzXG4gICAgaWYgKGlzTnVtYmVyKGZyb20pKVxuICAgICAgICBmcm9tID0gZnJvbS50b1N0cmluZygpO1xuICAgIHZhciBhcmdzID0gW3RvLCBmcm9tLCBvcHRpb25zLCBjYWxsYmFja107XG4gICAgdmFyIF9hID0gYXJncy5maWx0ZXIoaXNTdHJpbmcpLCBfYiA9IF9hWzBdLCBhbGlhc1RvID0gX2IgPT09IHZvaWQgMCA/IHRvIDogX2IsIF9jID0gX2FbMV0sIGFsaWFzRnJvbSA9IF9jID09PSB2b2lkIDAgPyBudWxsIDogX2M7XG4gICAgdmFyIF9kID0gYXJncy5maWx0ZXIoaXNQbGFpbk9iamVjdClbMF0sIG9wdHMgPSBfZCA9PT0gdm9pZCAwID8ge30gOiBfZDtcbiAgICB2YXIgcmVzb2x2ZWRDYWxsYmFjayA9IGFyZ3MuZmluZChpc0Z1bmN0aW9uKTtcbiAgICByZXR1cm4gW2FsaWFzVG8sIGFsaWFzRnJvbSwgb3B0cywgcmVzb2x2ZWRDYWxsYmFja107XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   form: () => (/* binding */ form),\n/* harmony export */   link: () => (/* binding */ link)\n/* harmony export */ });\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./callback */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n// Check if a user is opening the link in a new tab\nfunction userNewTab(event) {\n    var typedEvent = event;\n    if (typedEvent.ctrlKey ||\n        typedEvent.shiftKey ||\n        typedEvent.metaKey ||\n        (typedEvent.button && typedEvent.button == 1)) {\n        return true;\n    }\n    return false;\n}\n// Check if the link opens in new tab\nfunction linkNewTab(element, href) {\n    if (element.target === '_blank' && href) {\n        return true;\n    }\n    return false;\n}\nfunction link(links, event, properties, options) {\n    var _this = this;\n    var elements = [];\n    // always arrays, handles jquery\n    if (!links) {\n        return this;\n    }\n    if (links instanceof Element) {\n        elements = [links];\n    }\n    else if ('toArray' in links) {\n        elements = links.toArray();\n    }\n    else {\n        elements = links;\n    }\n    elements.forEach(function (el) {\n        el.addEventListener('click', function (elementEvent) {\n            var _a, _b;\n            var ev = event instanceof Function ? event(el) : event;\n            var props = properties instanceof Function ? properties(el) : properties;\n            var href = el.getAttribute('href') ||\n                el.getAttributeNS('http://www.w3.org/1999/xlink', 'href') ||\n                el.getAttribute('xlink:href') ||\n                ((_a = el.getElementsByTagName('a')[0]) === null || _a === void 0 ? void 0 : _a.getAttribute('href'));\n            var trackEvent = (0,_callback__WEBPACK_IMPORTED_MODULE_0__.pTimeout)(_this.track(ev, props, options !== null && options !== void 0 ? options : {}), (_b = _this.settings.timeout) !== null && _b !== void 0 ? _b : 500);\n            if (!linkNewTab(el, href) &&\n                !userNewTab(elementEvent)) {\n                if (href) {\n                    elementEvent.preventDefault\n                        ? elementEvent.preventDefault()\n                        : (elementEvent.returnValue = false);\n                    trackEvent\n                        .catch(console.error)\n                        .then(function () {\n                        window.location.href = href;\n                    })\n                        .catch(console.error);\n                }\n            }\n        }, false);\n    });\n    return this;\n}\nfunction form(forms, event, properties, options) {\n    var _this = this;\n    // always arrays, handles jquery\n    if (!forms)\n        return this;\n    if (forms instanceof HTMLFormElement)\n        forms = [forms];\n    var elements = forms;\n    elements.forEach(function (el) {\n        if (!(el instanceof Element))\n            throw new TypeError('Must pass HTMLElement to trackForm/trackSubmit.');\n        var handler = function (elementEvent) {\n            var _a;\n            elementEvent.preventDefault\n                ? elementEvent.preventDefault()\n                : (elementEvent.returnValue = false);\n            var ev = event instanceof Function ? event(el) : event;\n            var props = properties instanceof Function ? properties(el) : properties;\n            var trackEvent = (0,_callback__WEBPACK_IMPORTED_MODULE_0__.pTimeout)(_this.track(ev, props, options !== null && options !== void 0 ? options : {}), (_a = _this.settings.timeout) !== null && _a !== void 0 ? _a : 500);\n            trackEvent\n                .catch(console.error)\n                .then(function () {\n                el.submit();\n            })\n                .catch(console.error);\n        };\n        // Support the events happening through jQuery or Zepto instead of through\n        // the normal DOM API, because `el.submit` doesn't bubble up events...\n        var $ = window.jQuery || window.Zepto;\n        if ($) {\n            $(el).submit(handler);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-misused-promises\n            el.addEventListener('submit', handler, false);\n        }\n    });\n    return this;\n}\n//# sourceMappingURL=auto-track.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvYXV0by10cmFjay5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbURBQVEsNkVBQTZFO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtREFBUSw2RUFBNkU7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2F1dG8tdHJhY2suanM/ZDkwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwVGltZW91dCB9IGZyb20gJy4vY2FsbGJhY2snO1xuLy8gQ2hlY2sgaWYgYSB1c2VyIGlzIG9wZW5pbmcgdGhlIGxpbmsgaW4gYSBuZXcgdGFiXG5mdW5jdGlvbiB1c2VyTmV3VGFiKGV2ZW50KSB7XG4gICAgdmFyIHR5cGVkRXZlbnQgPSBldmVudDtcbiAgICBpZiAodHlwZWRFdmVudC5jdHJsS2V5IHx8XG4gICAgICAgIHR5cGVkRXZlbnQuc2hpZnRLZXkgfHxcbiAgICAgICAgdHlwZWRFdmVudC5tZXRhS2V5IHx8XG4gICAgICAgICh0eXBlZEV2ZW50LmJ1dHRvbiAmJiB0eXBlZEV2ZW50LmJ1dHRvbiA9PSAxKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8gQ2hlY2sgaWYgdGhlIGxpbmsgb3BlbnMgaW4gbmV3IHRhYlxuZnVuY3Rpb24gbGlua05ld1RhYihlbGVtZW50LCBocmVmKSB7XG4gICAgaWYgKGVsZW1lbnQudGFyZ2V0ID09PSAnX2JsYW5rJyAmJiBocmVmKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbGluayhsaW5rcywgZXZlbnQsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHZhciBlbGVtZW50cyA9IFtdO1xuICAgIC8vIGFsd2F5cyBhcnJheXMsIGhhbmRsZXMganF1ZXJ5XG4gICAgaWYgKCFsaW5rcykge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKGxpbmtzIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50cyA9IFtsaW5rc107XG4gICAgfVxuICAgIGVsc2UgaWYgKCd0b0FycmF5JyBpbiBsaW5rcykge1xuICAgICAgICBlbGVtZW50cyA9IGxpbmtzLnRvQXJyYXkoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVsZW1lbnRzID0gbGlua3M7XG4gICAgfVxuICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGVsZW1lbnRFdmVudCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIHZhciBldiA9IGV2ZW50IGluc3RhbmNlb2YgRnVuY3Rpb24gPyBldmVudChlbCkgOiBldmVudDtcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IHByb3BlcnRpZXMgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IHByb3BlcnRpZXMoZWwpIDogcHJvcGVydGllcztcbiAgICAgICAgICAgIHZhciBocmVmID0gZWwuZ2V0QXR0cmlidXRlKCdocmVmJykgfHxcbiAgICAgICAgICAgICAgICBlbC5nZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsICdocmVmJykgfHxcbiAgICAgICAgICAgICAgICBlbC5nZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnKSB8fFxuICAgICAgICAgICAgICAgICgoX2EgPSBlbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0QXR0cmlidXRlKCdocmVmJykpO1xuICAgICAgICAgICAgdmFyIHRyYWNrRXZlbnQgPSBwVGltZW91dChfdGhpcy50cmFjayhldiwgcHJvcHMsIG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9KSwgKF9iID0gX3RoaXMuc2V0dGluZ3MudGltZW91dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogNTAwKTtcbiAgICAgICAgICAgIGlmICghbGlua05ld1RhYihlbCwgaHJlZikgJiZcbiAgICAgICAgICAgICAgICAhdXNlck5ld1RhYihlbGVtZW50RXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhyZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudEV2ZW50LnByZXZlbnREZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICA/IGVsZW1lbnRFdmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChlbGVtZW50RXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrRXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZmFsc2UpO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm0oZm9ybXMsIGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAvLyBhbHdheXMgYXJyYXlzLCBoYW5kbGVzIGpxdWVyeVxuICAgIGlmICghZm9ybXMpXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIGlmIChmb3JtcyBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudClcbiAgICAgICAgZm9ybXMgPSBbZm9ybXNdO1xuICAgIHZhciBlbGVtZW50cyA9IGZvcm1zO1xuICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIGlmICghKGVsIGluc3RhbmNlb2YgRWxlbWVudCkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNdXN0IHBhc3MgSFRNTEVsZW1lbnQgdG8gdHJhY2tGb3JtL3RyYWNrU3VibWl0LicpO1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChlbGVtZW50RXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGVsZW1lbnRFdmVudC5wcmV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgICAgID8gZWxlbWVudEV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICA6IChlbGVtZW50RXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgZXYgPSBldmVudCBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gZXZlbnQoZWwpIDogZXZlbnQ7XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBwcm9wZXJ0aWVzIGluc3RhbmNlb2YgRnVuY3Rpb24gPyBwcm9wZXJ0aWVzKGVsKSA6IHByb3BlcnRpZXM7XG4gICAgICAgICAgICB2YXIgdHJhY2tFdmVudCA9IHBUaW1lb3V0KF90aGlzLnRyYWNrKGV2LCBwcm9wcywgb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge30pLCAoX2EgPSBfdGhpcy5zZXR0aW5ncy50aW1lb3V0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiA1MDApO1xuICAgICAgICAgICAgdHJhY2tFdmVudFxuICAgICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlbC5zdWJtaXQoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBTdXBwb3J0IHRoZSBldmVudHMgaGFwcGVuaW5nIHRocm91Z2ggalF1ZXJ5IG9yIFplcHRvIGluc3RlYWQgb2YgdGhyb3VnaFxuICAgICAgICAvLyB0aGUgbm9ybWFsIERPTSBBUEksIGJlY2F1c2UgYGVsLnN1Ym1pdGAgZG9lc24ndCBidWJibGUgdXAgZXZlbnRzLi4uXG4gICAgICAgIHZhciAkID0gd2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG87XG4gICAgICAgIGlmICgkKSB7XG4gICAgICAgICAgICAkKGVsKS5zdWJtaXQoaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXV0by10cmFjay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalyticsBuffered: () => (/* binding */ AnalyticsBuffered),\n/* harmony export */   PreInitMethodCall: () => (/* binding */ PreInitMethodCall),\n/* harmony export */   PreInitMethodCallBuffer: () => (/* binding */ PreInitMethodCallBuffer),\n/* harmony export */   callAnalyticsMethod: () => (/* binding */ callAnalyticsMethod),\n/* harmony export */   flushAddSourceMiddleware: () => (/* binding */ flushAddSourceMiddleware),\n/* harmony export */   flushAnalyticsCallsInNewTask: () => (/* binding */ flushAnalyticsCallsInNewTask),\n/* harmony export */   flushOn: () => (/* binding */ flushOn),\n/* harmony export */   flushSetAnonymousID: () => (/* binding */ flushSetAnonymousID),\n/* harmony export */   hasBufferedPageContextAsLastArg: () => (/* binding */ hasBufferedPageContextAsLastArg),\n/* harmony export */   popPageContext: () => (/* binding */ popPageContext)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_is_thenable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/is-thenable */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/global-analytics-helper */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../page */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\");\n\n\n\n\n\nvar flushSyncAnalyticsCalls = function (name, analytics, buffer) {\n    buffer.getCalls(name).forEach(function (c) {\n        // While the underlying methods are synchronous, the callAnalyticsMethod returns a promise,\n        // which normalizes success and error states between async and non-async methods, with no perf penalty.\n        callAnalyticsMethod(analytics, c).catch(console.error);\n    });\n};\nvar flushAddSourceMiddleware = function (analytics, buffer) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n    var _i, _a, c;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _i = 0, _a = buffer.getCalls('addSourceMiddleware');\n                _b.label = 1;\n            case 1:\n                if (!(_i < _a.length)) return [3 /*break*/, 4];\n                c = _a[_i];\n                return [4 /*yield*/, callAnalyticsMethod(analytics, c).catch(console.error)];\n            case 2:\n                _b.sent();\n                _b.label = 3;\n            case 3:\n                _i++;\n                return [3 /*break*/, 1];\n            case 4: return [2 /*return*/];\n        }\n    });\n}); };\nvar flushOn = flushSyncAnalyticsCalls.bind(undefined, 'on');\nvar flushSetAnonymousID = flushSyncAnalyticsCalls.bind(undefined, 'setAnonymousId');\nvar flushAnalyticsCallsInNewTask = function (analytics, buffer) {\n    buffer.toArray().forEach(function (m) {\n        setTimeout(function () {\n            callAnalyticsMethod(analytics, m).catch(console.error);\n        }, 0);\n    });\n};\nvar popPageContext = function (args) {\n    if (hasBufferedPageContextAsLastArg(args)) {\n        var ctx = args.pop();\n        return (0,_page__WEBPACK_IMPORTED_MODULE_1__.createPageContext)(ctx);\n    }\n};\nvar hasBufferedPageContextAsLastArg = function (args) {\n    var lastArg = args[args.length - 1];\n    return (0,_page__WEBPACK_IMPORTED_MODULE_1__.isBufferedPageContext)(lastArg);\n};\n/**\n *  Represents a buffered method call that occurred before initialization.\n */\nvar PreInitMethodCall = /** @class */ (function () {\n    function PreInitMethodCall(method, args, resolve, reject) {\n        if (resolve === void 0) { resolve = function () { }; }\n        if (reject === void 0) { reject = console.error; }\n        this.method = method;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.called = false;\n        this.args = args;\n    }\n    return PreInitMethodCall;\n}());\n\n/**\n *  Represents any and all the buffered method calls that occurred before initialization.\n */\nvar PreInitMethodCallBuffer = /** @class */ (function () {\n    function PreInitMethodCallBuffer() {\n        var calls = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            calls[_i] = arguments[_i];\n        }\n        this._callMap = {};\n        this.push.apply(this, calls);\n    }\n    Object.defineProperty(PreInitMethodCallBuffer.prototype, \"calls\", {\n        /**\n         * Pull any buffered method calls from the window object, and use them to hydrate the instance buffer.\n         */\n        get: function () {\n            this._pushSnippetWindowBuffer();\n            return this._callMap;\n        },\n        set: function (calls) {\n            this._callMap = calls;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PreInitMethodCallBuffer.prototype.getCalls = function (methodName) {\n        var _a;\n        return ((_a = this.calls[methodName]) !== null && _a !== void 0 ? _a : []);\n    };\n    PreInitMethodCallBuffer.prototype.push = function () {\n        var _this = this;\n        var calls = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            calls[_i] = arguments[_i];\n        }\n        calls.forEach(function (call) {\n            var eventsExpectingPageContext = [\n                'track',\n                'screen',\n                'alias',\n                'group',\n                'page',\n                'identify',\n            ];\n            if (eventsExpectingPageContext.includes(call.method) &&\n                !hasBufferedPageContextAsLastArg(call.args)) {\n                call.args = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], call.args, true), [(0,_page__WEBPACK_IMPORTED_MODULE_1__.getDefaultBufferedPageContext)()], false);\n            }\n            if (_this.calls[call.method]) {\n                _this.calls[call.method].push(call);\n            }\n            else {\n                _this.calls[call.method] = [call];\n            }\n        });\n    };\n    PreInitMethodCallBuffer.prototype.clear = function () {\n        // clear calls in the global snippet buffered array.\n        this._pushSnippetWindowBuffer();\n        // clear calls in this instance\n        this.calls = {};\n    };\n    PreInitMethodCallBuffer.prototype.toArray = function () {\n        var _a;\n        return (_a = []).concat.apply(_a, Object.values(this.calls));\n    };\n    /**\n     * Fetch the buffered method calls from the window object,\n     * normalize them, and use them to hydrate the buffer.\n     * This removes existing buffered calls from the window object.\n     */\n    PreInitMethodCallBuffer.prototype._pushSnippetWindowBuffer = function () {\n        var wa = (0,_lib_global_analytics_helper__WEBPACK_IMPORTED_MODULE_2__.getGlobalAnalytics)();\n        if (!Array.isArray(wa))\n            return undefined;\n        var buffered = wa.splice(0, wa.length);\n        var calls = buffered.map(function (_a) {\n            var methodName = _a[0], args = _a.slice(1);\n            return new PreInitMethodCall(methodName, args);\n        });\n        this.push.apply(this, calls);\n    };\n    return PreInitMethodCallBuffer;\n}());\n\n/**\n *  Call method and mark as \"called\"\n *  This function should never throw an error\n */\nfunction callAnalyticsMethod(analytics, call) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var result, err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 3, , 4]);\n                    if (call.called) {\n                        return [2 /*return*/, undefined];\n                    }\n                    call.called = true;\n                    result = analytics[call.method].apply(analytics, call.args);\n                    if (!(0,_lib_is_thenable__WEBPACK_IMPORTED_MODULE_3__.isThenable)(result)) return [3 /*break*/, 2];\n                    // do not defer for non-async methods\n                    return [4 /*yield*/, result];\n                case 1:\n                    // do not defer for non-async methods\n                    _a.sent();\n                    _a.label = 2;\n                case 2:\n                    call.resolve(result);\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    call.reject(err_1);\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nvar AnalyticsBuffered = /** @class */ (function () {\n    function AnalyticsBuffered(loader) {\n        var _this = this;\n        this.trackSubmit = this._createMethod('trackSubmit');\n        this.trackClick = this._createMethod('trackClick');\n        this.trackLink = this._createMethod('trackLink');\n        this.pageView = this._createMethod('pageview');\n        this.identify = this._createMethod('identify');\n        this.reset = this._createMethod('reset');\n        this.group = this._createMethod('group');\n        this.track = this._createMethod('track');\n        this.ready = this._createMethod('ready');\n        this.alias = this._createMethod('alias');\n        this.debug = this._createChainableMethod('debug');\n        this.page = this._createMethod('page');\n        this.once = this._createChainableMethod('once');\n        this.off = this._createChainableMethod('off');\n        this.on = this._createChainableMethod('on');\n        this.addSourceMiddleware = this._createMethod('addSourceMiddleware');\n        this.setAnonymousId = this._createMethod('setAnonymousId');\n        this.addDestinationMiddleware = this._createMethod('addDestinationMiddleware');\n        this.screen = this._createMethod('screen');\n        this.register = this._createMethod('register');\n        this.deregister = this._createMethod('deregister');\n        this.user = this._createMethod('user');\n        this.VERSION = _generated_version__WEBPACK_IMPORTED_MODULE_4__.version;\n        this._preInitBuffer = new PreInitMethodCallBuffer();\n        this._promise = loader(this._preInitBuffer);\n        this._promise\n            .then(function (_a) {\n            var ajs = _a[0], ctx = _a[1];\n            _this.instance = ajs;\n            _this.ctx = ctx;\n        })\n            .catch(function () {\n            // intentionally do nothing...\n            // this result of this promise will be caught by the 'catch' block on this class.\n        });\n    }\n    AnalyticsBuffered.prototype.then = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).then.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype.catch = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).catch.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype.finally = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this._promise).finally.apply(_a, args);\n    };\n    AnalyticsBuffered.prototype._createMethod = function (methodName) {\n        var _this = this;\n        return function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.instance) {\n                var result = (_a = _this.instance)[methodName].apply(_a, args);\n                return Promise.resolve(result);\n            }\n            return new Promise(function (resolve, reject) {\n                _this._preInitBuffer.push(new PreInitMethodCall(methodName, args, resolve, reject));\n            });\n        };\n    };\n    /**\n     *  These are for methods that where determining when the method gets \"flushed\" is not important.\n     *  These methods will resolve when analytics is fully initialized, and return type (other than Analytics)will not be available.\n     */\n    AnalyticsBuffered.prototype._createChainableMethod = function (methodName) {\n        var _this = this;\n        return function () {\n            var _a;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.instance) {\n                void (_a = _this.instance)[methodName].apply(_a, args);\n                return _this;\n            }\n            else {\n                _this._preInitBuffer.push(new PreInitMethodCall(methodName, args));\n            }\n            return _this;\n        };\n    };\n    return AnalyticsBuffered;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvYnVmZmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RDtBQUNYO0FBQ0Q7QUFDcUI7QUFDNEI7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLDhEQUE4RCxPQUFPLGdEQUFTO0FBQ3JGO0FBQ0EsV0FBVyxrREFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ00sMkNBQTJDLFNBQUk7QUFDL0MsdURBQXVELFNBQUk7QUFDM0Q7QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0EsZUFBZSx3REFBaUI7QUFDaEM7QUFDQTtBQUNPO0FBQ1A7QUFDQSxXQUFXLDREQUFxQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUM0QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9EQUFhLENBQUMsb0RBQWEsd0JBQXdCLG9FQUE2QjtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdGQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNrQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw0REFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNEI7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9idWZmZXIvaW5kZXguanM/YTY3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc1RoZW5hYmxlIH0gZnJvbSAnLi4vLi4vbGliL2lzLXRoZW5hYmxlJztcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi8uLi9nZW5lcmF0ZWQvdmVyc2lvbic7XG5pbXBvcnQgeyBnZXRHbG9iYWxBbmFseXRpY3MgfSBmcm9tICcuLi8uLi9saWIvZ2xvYmFsLWFuYWx5dGljcy1oZWxwZXInO1xuaW1wb3J0IHsgaXNCdWZmZXJlZFBhZ2VDb250ZXh0LCBnZXREZWZhdWx0QnVmZmVyZWRQYWdlQ29udGV4dCwgY3JlYXRlUGFnZUNvbnRleHQsIH0gZnJvbSAnLi4vcGFnZSc7XG52YXIgZmx1c2hTeW5jQW5hbHl0aWNzQ2FsbHMgPSBmdW5jdGlvbiAobmFtZSwgYW5hbHl0aWNzLCBidWZmZXIpIHtcbiAgICBidWZmZXIuZ2V0Q2FsbHMobmFtZSkuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAvLyBXaGlsZSB0aGUgdW5kZXJseWluZyBtZXRob2RzIGFyZSBzeW5jaHJvbm91cywgdGhlIGNhbGxBbmFseXRpY3NNZXRob2QgcmV0dXJucyBhIHByb21pc2UsXG4gICAgICAgIC8vIHdoaWNoIG5vcm1hbGl6ZXMgc3VjY2VzcyBhbmQgZXJyb3Igc3RhdGVzIGJldHdlZW4gYXN5bmMgYW5kIG5vbi1hc3luYyBtZXRob2RzLCB3aXRoIG5vIHBlcmYgcGVuYWx0eS5cbiAgICAgICAgY2FsbEFuYWx5dGljc01ldGhvZChhbmFseXRpY3MsIGMpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0pO1xufTtcbmV4cG9ydCB2YXIgZmx1c2hBZGRTb3VyY2VNaWRkbGV3YXJlID0gZnVuY3Rpb24gKGFuYWx5dGljcywgYnVmZmVyKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBfaSwgX2EsIGM7XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgX2kgPSAwLCBfYSA9IGJ1ZmZlci5nZXRDYWxscygnYWRkU291cmNlTWlkZGxld2FyZScpO1xuICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIShfaSA8IF9hLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGMgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY2FsbEFuYWx5dGljc01ldGhvZChhbmFseXRpY3MsIGMpLmNhdGNoKGNvbnNvbGUuZXJyb3IpXTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgX2IubGFiZWwgPSAzO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIF9pKys7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XG4gICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7IH07XG5leHBvcnQgdmFyIGZsdXNoT24gPSBmbHVzaFN5bmNBbmFseXRpY3NDYWxscy5iaW5kKHRoaXMsICdvbicpO1xuZXhwb3J0IHZhciBmbHVzaFNldEFub255bW91c0lEID0gZmx1c2hTeW5jQW5hbHl0aWNzQ2FsbHMuYmluZCh0aGlzLCAnc2V0QW5vbnltb3VzSWQnKTtcbmV4cG9ydCB2YXIgZmx1c2hBbmFseXRpY3NDYWxsc0luTmV3VGFzayA9IGZ1bmN0aW9uIChhbmFseXRpY3MsIGJ1ZmZlcikge1xuICAgIGJ1ZmZlci50b0FycmF5KCkuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbGxBbmFseXRpY3NNZXRob2QoYW5hbHl0aWNzLCBtKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfSk7XG59O1xuZXhwb3J0IHZhciBwb3BQYWdlQ29udGV4dCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgaWYgKGhhc0J1ZmZlcmVkUGFnZUNvbnRleHRBc0xhc3RBcmcoYXJncykpIHtcbiAgICAgICAgdmFyIGN0eCA9IGFyZ3MucG9wKCk7XG4gICAgICAgIHJldHVybiBjcmVhdGVQYWdlQ29udGV4dChjdHgpO1xuICAgIH1cbn07XG5leHBvcnQgdmFyIGhhc0J1ZmZlcmVkUGFnZUNvbnRleHRBc0xhc3RBcmcgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBsYXN0QXJnID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBpc0J1ZmZlcmVkUGFnZUNvbnRleHQobGFzdEFyZyk7XG59O1xuLyoqXG4gKiAgUmVwcmVzZW50cyBhIGJ1ZmZlcmVkIG1ldGhvZCBjYWxsIHRoYXQgb2NjdXJyZWQgYmVmb3JlIGluaXRpYWxpemF0aW9uLlxuICovXG52YXIgUHJlSW5pdE1ldGhvZENhbGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJlSW5pdE1ldGhvZENhbGwobWV0aG9kLCBhcmdzLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKHJlc29sdmUgPT09IHZvaWQgMCkgeyByZXNvbHZlID0gZnVuY3Rpb24gKCkgeyB9OyB9XG4gICAgICAgIGlmIChyZWplY3QgPT09IHZvaWQgMCkgeyByZWplY3QgPSBjb25zb2xlLmVycm9yOyB9XG4gICAgICAgIHRoaXMubWV0aG9kID0gbWV0aG9kO1xuICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgdGhpcy5jYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hcmdzID0gYXJncztcbiAgICB9XG4gICAgcmV0dXJuIFByZUluaXRNZXRob2RDYWxsO1xufSgpKTtcbmV4cG9ydCB7IFByZUluaXRNZXRob2RDYWxsIH07XG4vKipcbiAqICBSZXByZXNlbnRzIGFueSBhbmQgYWxsIHRoZSBidWZmZXJlZCBtZXRob2QgY2FsbHMgdGhhdCBvY2N1cnJlZCBiZWZvcmUgaW5pdGlhbGl6YXRpb24uXG4gKi9cbnZhciBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlcigpIHtcbiAgICAgICAgdmFyIGNhbGxzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBjYWxsc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhbGxNYXAgPSB7fTtcbiAgICAgICAgdGhpcy5wdXNoLmFwcGx5KHRoaXMsIGNhbGxzKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByZUluaXRNZXRob2RDYWxsQnVmZmVyLnByb3RvdHlwZSwgXCJjYWxsc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQdWxsIGFueSBidWZmZXJlZCBtZXRob2QgY2FsbHMgZnJvbSB0aGUgd2luZG93IG9iamVjdCwgYW5kIHVzZSB0aGVtIHRvIGh5ZHJhdGUgdGhlIGluc3RhbmNlIGJ1ZmZlci5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fcHVzaFNuaXBwZXRXaW5kb3dCdWZmZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsTWFwO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjYWxscykge1xuICAgICAgICAgICAgdGhpcy5fY2FsbE1hcCA9IGNhbGxzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIucHJvdG90eXBlLmdldENhbGxzID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuY2FsbHNbbWV0aG9kTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdKTtcbiAgICB9O1xuICAgIFByZUluaXRNZXRob2RDYWxsQnVmZmVyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY2FsbHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGNhbGxzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgY2FsbHMuZm9yRWFjaChmdW5jdGlvbiAoY2FsbCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50c0V4cGVjdGluZ1BhZ2VDb250ZXh0ID0gW1xuICAgICAgICAgICAgICAgICd0cmFjaycsXG4gICAgICAgICAgICAgICAgJ3NjcmVlbicsXG4gICAgICAgICAgICAgICAgJ2FsaWFzJyxcbiAgICAgICAgICAgICAgICAnZ3JvdXAnLFxuICAgICAgICAgICAgICAgICdwYWdlJyxcbiAgICAgICAgICAgICAgICAnaWRlbnRpZnknLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmIChldmVudHNFeHBlY3RpbmdQYWdlQ29udGV4dC5pbmNsdWRlcyhjYWxsLm1ldGhvZCkgJiZcbiAgICAgICAgICAgICAgICAhaGFzQnVmZmVyZWRQYWdlQ29udGV4dEFzTGFzdEFyZyhjYWxsLmFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgY2FsbC5hcmdzID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBjYWxsLmFyZ3MsIHRydWUpLCBbZ2V0RGVmYXVsdEJ1ZmZlcmVkUGFnZUNvbnRleHQoKV0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5jYWxsc1tjYWxsLm1ldGhvZF0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYWxsc1tjYWxsLm1ldGhvZF0ucHVzaChjYWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbGxzW2NhbGwubWV0aG9kXSA9IFtjYWxsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGNsZWFyIGNhbGxzIGluIHRoZSBnbG9iYWwgc25pcHBldCBidWZmZXJlZCBhcnJheS5cbiAgICAgICAgdGhpcy5fcHVzaFNuaXBwZXRXaW5kb3dCdWZmZXIoKTtcbiAgICAgICAgLy8gY2xlYXIgY2FsbHMgaW4gdGhpcyBpbnN0YW5jZVxuICAgICAgICB0aGlzLmNhbGxzID0ge307XG4gICAgfTtcbiAgICBQcmVJbml0TWV0aG9kQ2FsbEJ1ZmZlci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gW10pLmNvbmNhdC5hcHBseShfYSwgT2JqZWN0LnZhbHVlcyh0aGlzLmNhbGxzKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGZXRjaCB0aGUgYnVmZmVyZWQgbWV0aG9kIGNhbGxzIGZyb20gdGhlIHdpbmRvdyBvYmplY3QsXG4gICAgICogbm9ybWFsaXplIHRoZW0sIGFuZCB1c2UgdGhlbSB0byBoeWRyYXRlIHRoZSBidWZmZXIuXG4gICAgICogVGhpcyByZW1vdmVzIGV4aXN0aW5nIGJ1ZmZlcmVkIGNhbGxzIGZyb20gdGhlIHdpbmRvdyBvYmplY3QuXG4gICAgICovXG4gICAgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIucHJvdG90eXBlLl9wdXNoU25pcHBldFdpbmRvd0J1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdhID0gZ2V0R2xvYmFsQW5hbHl0aWNzKCk7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh3YSkpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgYnVmZmVyZWQgPSB3YS5zcGxpY2UoMCwgd2EubGVuZ3RoKTtcbiAgICAgICAgdmFyIGNhbGxzID0gYnVmZmVyZWQubWFwKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSBfYVswXSwgYXJncyA9IF9hLnNsaWNlKDEpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcmVJbml0TWV0aG9kQ2FsbChtZXRob2ROYW1lLCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHVzaC5hcHBseSh0aGlzLCBjYWxscyk7XG4gICAgfTtcbiAgICByZXR1cm4gUHJlSW5pdE1ldGhvZENhbGxCdWZmZXI7XG59KCkpO1xuZXhwb3J0IHsgUHJlSW5pdE1ldGhvZENhbGxCdWZmZXIgfTtcbi8qKlxuICogIENhbGwgbWV0aG9kIGFuZCBtYXJrIGFzIFwiY2FsbGVkXCJcbiAqICBUaGlzIGZ1bmN0aW9uIHNob3VsZCBuZXZlciB0aHJvdyBhbiBlcnJvclxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsbEFuYWx5dGljc01ldGhvZChhbmFseXRpY3MsIGNhbGwpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQsIGVycl8xO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbC5jYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1bmRlZmluZWRdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhbGwuY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYW5hbHl0aWNzW2NhbGwubWV0aG9kXS5hcHBseShhbmFseXRpY3MsIGNhbGwuYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNUaGVuYWJsZShyZXN1bHQpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGRlZmVyIGZvciBub24tYXN5bmMgbWV0aG9kc1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXN1bHRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGRlZmVyIGZvciBub24tYXN5bmMgbWV0aG9kc1xuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGNhbGwucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsLnJlamVjdChlcnJfMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbnZhciBBbmFseXRpY3NCdWZmZXJlZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBbmFseXRpY3NCdWZmZXJlZChsb2FkZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy50cmFja1N1Ym1pdCA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2tTdWJtaXQnKTtcbiAgICAgICAgdGhpcy50cmFja0NsaWNrID0gdGhpcy5fY3JlYXRlTWV0aG9kKCd0cmFja0NsaWNrJyk7XG4gICAgICAgIHRoaXMudHJhY2tMaW5rID0gdGhpcy5fY3JlYXRlTWV0aG9kKCd0cmFja0xpbmsnKTtcbiAgICAgICAgdGhpcy5wYWdlVmlldyA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgncGFnZXZpZXcnKTtcbiAgICAgICAgdGhpcy5pZGVudGlmeSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnaWRlbnRpZnknKTtcbiAgICAgICAgdGhpcy5yZXNldCA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgncmVzZXQnKTtcbiAgICAgICAgdGhpcy5ncm91cCA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnZ3JvdXAnKTtcbiAgICAgICAgdGhpcy50cmFjayA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2snKTtcbiAgICAgICAgdGhpcy5yZWFkeSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgncmVhZHknKTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnYWxpYXMnKTtcbiAgICAgICAgdGhpcy5kZWJ1ZyA9IHRoaXMuX2NyZWF0ZUNoYWluYWJsZU1ldGhvZCgnZGVidWcnKTtcbiAgICAgICAgdGhpcy5wYWdlID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdwYWdlJyk7XG4gICAgICAgIHRoaXMub25jZSA9IHRoaXMuX2NyZWF0ZUNoYWluYWJsZU1ldGhvZCgnb25jZScpO1xuICAgICAgICB0aGlzLm9mZiA9IHRoaXMuX2NyZWF0ZUNoYWluYWJsZU1ldGhvZCgnb2ZmJyk7XG4gICAgICAgIHRoaXMub24gPSB0aGlzLl9jcmVhdGVDaGFpbmFibGVNZXRob2QoJ29uJyk7XG4gICAgICAgIHRoaXMuYWRkU291cmNlTWlkZGxld2FyZSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnYWRkU291cmNlTWlkZGxld2FyZScpO1xuICAgICAgICB0aGlzLnNldEFub255bW91c0lkID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdzZXRBbm9ueW1vdXNJZCcpO1xuICAgICAgICB0aGlzLmFkZERlc3RpbmF0aW9uTWlkZGxld2FyZSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnYWRkRGVzdGluYXRpb25NaWRkbGV3YXJlJyk7XG4gICAgICAgIHRoaXMuc2NyZWVuID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdzY3JlZW4nKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlciA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgncmVnaXN0ZXInKTtcbiAgICAgICAgdGhpcy5kZXJlZ2lzdGVyID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdkZXJlZ2lzdGVyJyk7XG4gICAgICAgIHRoaXMudXNlciA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndXNlcicpO1xuICAgICAgICB0aGlzLlZFUlNJT04gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLl9wcmVJbml0QnVmZmVyID0gbmV3IFByZUluaXRNZXRob2RDYWxsQnVmZmVyKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UgPSBsb2FkZXIodGhpcy5fcHJlSW5pdEJ1ZmZlcik7XG4gICAgICAgIHRoaXMuX3Byb21pc2VcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGFqcyA9IF9hWzBdLCBjdHggPSBfYVsxXTtcbiAgICAgICAgICAgIF90aGlzLmluc3RhbmNlID0gYWpzO1xuICAgICAgICAgICAgX3RoaXMuY3R4ID0gY3R4O1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGludGVudGlvbmFsbHkgZG8gbm90aGluZy4uLlxuICAgICAgICAgICAgLy8gdGhpcyByZXN1bHQgb2YgdGhpcyBwcm9taXNlIHdpbGwgYmUgY2F1Z2h0IGJ5IHRoZSAnY2F0Y2gnIGJsb2NrIG9uIHRoaXMgY2xhc3MuXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBBbmFseXRpY3NCdWZmZXJlZC5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLl9wcm9taXNlKS50aGVuLmFwcGx5KF9hLCBhcmdzKTtcbiAgICB9O1xuICAgIEFuYWx5dGljc0J1ZmZlcmVkLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLl9wcm9taXNlKS5jYXRjaC5hcHBseShfYSwgYXJncyk7XG4gICAgfTtcbiAgICBBbmFseXRpY3NCdWZmZXJlZC5wcm90b3R5cGUuZmluYWxseSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLl9wcm9taXNlKS5maW5hbGx5LmFwcGx5KF9hLCBhcmdzKTtcbiAgICB9O1xuICAgIEFuYWx5dGljc0J1ZmZlcmVkLnByb3RvdHlwZS5fY3JlYXRlTWV0aG9kID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5pbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAoX2EgPSBfdGhpcy5pbnN0YW5jZSlbbWV0aG9kTmFtZV0uYXBwbHkoX2EsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3ByZUluaXRCdWZmZXIucHVzaChuZXcgUHJlSW5pdE1ldGhvZENhbGwobWV0aG9kTmFtZSwgYXJncywgcmVzb2x2ZSwgcmVqZWN0KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqICBUaGVzZSBhcmUgZm9yIG1ldGhvZHMgdGhhdCB3aGVyZSBkZXRlcm1pbmluZyB3aGVuIHRoZSBtZXRob2QgZ2V0cyBcImZsdXNoZWRcIiBpcyBub3QgaW1wb3J0YW50LlxuICAgICAqICBUaGVzZSBtZXRob2RzIHdpbGwgcmVzb2x2ZSB3aGVuIGFuYWx5dGljcyBpcyBmdWxseSBpbml0aWFsaXplZCwgYW5kIHJldHVybiB0eXBlIChvdGhlciB0aGFuIEFuYWx5dGljcyl3aWxsIG5vdCBiZSBhdmFpbGFibGUuXG4gICAgICovXG4gICAgQW5hbHl0aWNzQnVmZmVyZWQucHJvdG90eXBlLl9jcmVhdGVDaGFpbmFibGVNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLmluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdm9pZCAoX2EgPSBfdGhpcy5pbnN0YW5jZSlbbWV0aG9kTmFtZV0uYXBwbHkoX2EsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLl9wcmVJbml0QnVmZmVyLnB1c2gobmV3IFByZUluaXRNZXRob2RDYWxsKG1ldGhvZE5hbWUsIGFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBBbmFseXRpY3NCdWZmZXJlZDtcbn0oKSk7XG5leHBvcnQgeyBBbmFseXRpY3NCdWZmZXJlZCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isOffline: () => (/* binding */ isOffline),\n/* harmony export */   isOnline: () => (/* binding */ isOnline)\n/* harmony export */ });\n/* harmony import */ var _environment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../environment */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n\nfunction isOnline() {\n    if ((0,_environment__WEBPACK_IMPORTED_MODULE_0__.isBrowser)()) {\n        return window.navigator.onLine;\n    }\n    return true;\n}\nfunction isOffline() {\n    return !isOnline();\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvY29ubmVjdGlvbi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDcEM7QUFDUCxRQUFRLHVEQUFTO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9jb25uZWN0aW9uL2luZGV4LmpzPzhjMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNCcm93c2VyIH0gZnJvbSAnLi4vZW52aXJvbm1lbnQnO1xuZXhwb3J0IGZ1bmN0aW9uIGlzT25saW5lKCkge1xuICAgIGlmIChpc0Jyb3dzZXIoKSkge1xuICAgICAgICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci5vbkxpbmU7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzT2ZmbGluZSgpIHtcbiAgICByZXR1cm4gIWlzT25saW5lKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SEGMENT_API_HOST: () => (/* binding */ SEGMENT_API_HOST)\n/* harmony export */ });\nvar SEGMENT_API_HOST = 'api.segment.io/v1';\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvY29uc3RhbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvY29uc3RhbnRzL2luZGV4LmpzP2I1MWIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBTRUdNRU5UX0FQSV9IT1NUID0gJ2FwaS5zZWdtZW50LmlvL3YxJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Context: () => (/* binding */ Context),\n/* harmony export */   ContextCancelation: () => (/* reexport safe */ _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.ContextCancelation)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../stats */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\");\n\n\n\nvar Context = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Context, _super);\n    function Context(event, id) {\n        return _super.call(this, event, id, new _stats__WEBPACK_IMPORTED_MODULE_1__.Stats()) || this;\n    }\n    Context.system = function () {\n        return new this({ type: 'track', event: 'system' });\n    };\n    return Context;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.CoreContext));\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvY29udGV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFrQztBQUN5QztBQUMxQztBQUNqQztBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBLGdEQUFnRCx5Q0FBSztBQUNyRDtBQUNBO0FBQ0EsMEJBQTBCLGdDQUFnQztBQUMxRDtBQUNBO0FBQ0EsQ0FBQyxDQUFDLGdFQUFXO0FBQ007QUFDVztBQUM5QiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2NvbnRleHQvaW5kZXguanM/ZTJiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IENvcmVDb250ZXh0LCBDb250ZXh0Q2FuY2VsYXRpb24sIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgU3RhdHMgfSBmcm9tICcuLi9zdGF0cyc7XG52YXIgQ29udGV4dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29udGV4dCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb250ZXh0KGV2ZW50LCBpZCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgZXZlbnQsIGlkLCBuZXcgU3RhdHMoKSkgfHwgdGhpcztcbiAgICB9XG4gICAgQ29udGV4dC5zeXN0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh7IHR5cGU6ICd0cmFjaycsIGV2ZW50OiAnc3lzdGVtJyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb250ZXh0O1xufShDb3JlQ29udGV4dCkpO1xuZXhwb3J0IHsgQ29udGV4dCB9O1xuZXhwb3J0IHsgQ29udGV4dENhbmNlbGF0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isServer: () => (/* binding */ isServer)\n/* harmony export */ });\nfunction isBrowser() {\n    return typeof window !== 'undefined';\n}\nfunction isServer() {\n    return !isBrowser();\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvZW52aXJvbm1lbnQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2Vudmlyb25tZW50L2luZGV4LmpzPzViODkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTZXJ2ZXIoKSB7XG4gICAgcmV0dXJuICFpc0Jyb3dzZXIoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/events/index.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/events/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventFactory: () => (/* binding */ EventFactory)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(ssr)/../node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dset */ \"(ssr)/../node_modules/dset/dist/index.mjs\");\n/* harmony import */ var spark_md5__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! spark-md5 */ \"(ssr)/../node_modules/spark-md5/spark-md5.js\");\n/* harmony import */ var spark_md5__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(spark_md5__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../page */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js\");\n\n\n\n\n\n\nvar EventFactory = /** @class */ (function () {\n    function EventFactory(user) {\n        this.user = user;\n    }\n    EventFactory.prototype.track = function (event, properties, options, globalIntegrations, pageCtx) {\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, this.baseEvent()), { event: event, type: 'track', properties: properties, options: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, globalIntegrations) }), pageCtx);\n    };\n    EventFactory.prototype.page = function (category, page, properties, options, globalIntegrations, pageCtx) {\n        var _a;\n        var event = {\n            type: 'page',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n            event.properties = (_a = event.properties) !== null && _a !== void 0 ? _a : {};\n            event.properties.category = category;\n        }\n        if (page !== null) {\n            event.name = page;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, this.baseEvent()), event), pageCtx);\n    };\n    EventFactory.prototype.screen = function (category, screen, properties, options, globalIntegrations, pageCtx) {\n        var event = {\n            type: 'screen',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n        }\n        if (screen !== null) {\n            event.name = screen;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, this.baseEvent()), event), pageCtx);\n    };\n    EventFactory.prototype.identify = function (userId, traits, options, globalIntegrations, pageCtx) {\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, this.baseEvent()), { type: 'identify', userId: userId, traits: traits, options: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, globalIntegrations) }), pageCtx);\n    };\n    EventFactory.prototype.group = function (groupId, traits, options, globalIntegrations, pageCtx) {\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, this.baseEvent()), { type: 'group', traits: traits, options: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, globalIntegrations), groupId: groupId }), pageCtx);\n    };\n    EventFactory.prototype.alias = function (to, from, options, globalIntegrations, pageCtx) {\n        var base = {\n            userId: to,\n            type: 'alias',\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, globalIntegrations),\n        };\n        if (from !== null) {\n            base.previousId = from;\n        }\n        if (to === undefined) {\n            return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, base), this.baseEvent()));\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, this.baseEvent()), base), pageCtx);\n    };\n    EventFactory.prototype.baseEvent = function () {\n        var base = {\n            integrations: {},\n            options: {},\n        };\n        var user = this.user;\n        if (user.id()) {\n            base.userId = user.id();\n        }\n        if (user.anonymousId()) {\n            base.anonymousId = user.anonymousId();\n        }\n        return base;\n    };\n    /**\n     * Builds the context part of an event based on \"foreign\" keys that\n     * are provided in the `Options` parameter for an Event\n     */\n    EventFactory.prototype.context = function (event) {\n        var _a, _b, _c;\n        var optionsKeys = ['integrations', 'anonymousId', 'timestamp', 'userId'];\n        var options = (_a = event.options) !== null && _a !== void 0 ? _a : {};\n        delete options['integrations'];\n        var providedOptionsKeys = Object.keys(options);\n        var context = (_c = (_b = event.options) === null || _b === void 0 ? void 0 : _b.context) !== null && _c !== void 0 ? _c : {};\n        var overrides = {};\n        providedOptionsKeys.forEach(function (key) {\n            if (key === 'context') {\n                return;\n            }\n            if (optionsKeys.includes(key)) {\n                (0,dset__WEBPACK_IMPORTED_MODULE_1__.dset)(overrides, key, options[key]);\n            }\n            else {\n                (0,dset__WEBPACK_IMPORTED_MODULE_1__.dset)(context, key, options[key]);\n            }\n        });\n        return [context, overrides];\n    };\n    EventFactory.prototype.normalize = function (event, pageCtx) {\n        var _a, _b, _c;\n        // set anonymousId globally if we encounter an override\n        //segment.com/docs/connections/sources/catalog/libraries/website/javascript/identity/#override-the-anonymous-id-using-the-options-object\n        ((_a = event.options) === null || _a === void 0 ? void 0 : _a.anonymousId) &&\n            this.user.anonymousId(event.options.anonymousId);\n        var integrationBooleans = Object.keys((_b = event.integrations) !== null && _b !== void 0 ? _b : {}).reduce(function (integrationNames, name) {\n            var _a;\n            var _b;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, integrationNames), (_a = {}, _a[name] = Boolean((_b = event.integrations) === null || _b === void 0 ? void 0 : _b[name]), _a));\n        }, {});\n        // This is pretty trippy, but here's what's going on:\n        // - a) We don't pass initial integration options as part of the event, only if they're true or false\n        // - b) We do accept per integration overrides (like integrations.Amplitude.sessionId) at the event level\n        // Hence the need to convert base integration options to booleans, but maintain per event integration overrides\n        var allIntegrations = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({}, integrationBooleans), (_c = event.options) === null || _c === void 0 ? void 0 : _c.integrations);\n        var _d = this.context(event), context = _d[0], overrides = _d[1];\n        var options = event.options, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__rest)(event, [\"options\"]);\n        var newEvent = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({ timestamp: new Date() }, rest), { context: context, integrations: allIntegrations }), overrides), { messageId: 'ajs-next-' + spark_md5__WEBPACK_IMPORTED_MODULE_2___default().hash(JSON.stringify(event) + (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)()) });\n        (0,_page__WEBPACK_IMPORTED_MODULE_4__.addPageContext)(newEvent, pageCtx);\n        return newEvent;\n    };\n    return EventFactory;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvZXZlbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBeUM7QUFDQztBQUNkO0FBQ0E7QUFDYTtBQUNaO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLHVCQUF1Qiw4REFBOEQsK0NBQVEsR0FBRywwQkFBMEIsK0NBQVEsR0FBRyx1QkFBdUI7QUFDOU07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBUSxHQUFHO0FBQ25DLHFCQUFxQiwrQ0FBUSxHQUFHO0FBQ2hDLDBCQUEwQiwrQ0FBUSxHQUFHO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0NBQVEsR0FBRztBQUNuQyxxQkFBcUIsK0NBQVEsR0FBRztBQUNoQywwQkFBMEIsK0NBQVEsR0FBRztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLDJEQUEyRCwrQ0FBUSxHQUFHLDBCQUEwQiwrQ0FBUSxHQUFHLHVCQUF1QjtBQUMzTTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyx1QkFBdUIsd0NBQXdDLCtDQUFRLEdBQUcsMEJBQTBCLCtDQUFRLEdBQUcseUNBQXlDO0FBQzFNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsK0NBQVEsR0FBRztBQUNoQywwQkFBMEIsK0NBQVEsR0FBRztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUN0RDtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQTtBQUNBLGdCQUFnQiwwQ0FBSTtBQUNwQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkdBQTJHO0FBQzNHO0FBQ0E7QUFDQSxtQkFBbUIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLDZCQUE2QjtBQUNwRSxTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQSw0Q0FBNEMsNkNBQU07QUFDbEQsdUJBQXVCLCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLFdBQVcsaURBQWlELGlCQUFpQix5QkFBeUIscURBQVEseUJBQXlCLGdEQUFJLEtBQUs7QUFDcE8sUUFBUSxxREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3VCO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvZXZlbnRzL2luZGV4LmpzPzEwN2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ0BsdWtlZWQvdXVpZCc7XG5pbXBvcnQgeyBkc2V0IH0gZnJvbSAnZHNldCc7XG5pbXBvcnQgbWQ1IGZyb20gJ3NwYXJrLW1kNSc7XG5pbXBvcnQgeyBhZGRQYWdlQ29udGV4dCB9IGZyb20gJy4uL3BhZ2UnO1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlcmZhY2VzJztcbnZhciBFdmVudEZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXZlbnRGYWN0b3J5KHVzZXIpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcbiAgICB9XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIChldmVudCwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIHsgZXZlbnQ6IGV2ZW50LCB0eXBlOiAndHJhY2snLCBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGdsb2JhbEludGVncmF0aW9ucykgfSksIHBhZ2VDdHgpO1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgZXZlbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiAncGFnZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzID0gKF9hID0gZXZlbnQucHJvcGVydGllcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50Lm5hbWUgPSBwYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGV2ZW50KSwgcGFnZUN0eCk7XG4gICAgfTtcbiAgICBFdmVudEZhY3RvcnkucHJvdG90eXBlLnNjcmVlbiA9IGZ1bmN0aW9uIChjYXRlZ29yeSwgc2NyZWVuLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMsIHBhZ2VDdHgpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0ge1xuICAgICAgICAgICAgdHlwZTogJ3NjcmVlbicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjcmVlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXZlbnQubmFtZSA9IHNjcmVlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCBldmVudCksIHBhZ2VDdHgpO1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uICh1c2VySWQsIHRyYWl0cywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIHsgdHlwZTogJ2lkZW50aWZ5JywgdXNlcklkOiB1c2VySWQsIHRyYWl0czogdHJhaXRzLCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGdsb2JhbEludGVncmF0aW9ucykgfSksIHBhZ2VDdHgpO1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uIChncm91cElkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucywgcGFnZUN0eCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCB7IHR5cGU6ICdncm91cCcsIHRyYWl0czogdHJhaXRzLCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGdsb2JhbEludGVncmF0aW9ucyksIGdyb3VwSWQ6IGdyb3VwSWQgfSksIHBhZ2VDdHgpO1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uICh0bywgZnJvbSwgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zLCBwYWdlQ3R4KSB7XG4gICAgICAgIHZhciBiYXNlID0ge1xuICAgICAgICAgICAgdXNlcklkOiB0byxcbiAgICAgICAgICAgIHR5cGU6ICdhbGlhcycsXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYmFzZS5wcmV2aW91c0lkID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCBiYXNlKSwgdGhpcy5iYXNlRXZlbnQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGJhc2UpLCBwYWdlQ3R4KTtcbiAgICB9O1xuICAgIEV2ZW50RmFjdG9yeS5wcm90b3R5cGUuYmFzZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYmFzZSA9IHtcbiAgICAgICAgICAgIGludGVncmF0aW9uczoge30sXG4gICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVzZXIgPSB0aGlzLnVzZXI7XG4gICAgICAgIGlmICh1c2VyLmlkKCkpIHtcbiAgICAgICAgICAgIGJhc2UudXNlcklkID0gdXNlci5pZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyLmFub255bW91c0lkKCkpIHtcbiAgICAgICAgICAgIGJhc2UuYW5vbnltb3VzSWQgPSB1c2VyLmFub255bW91c0lkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGNvbnRleHQgcGFydCBvZiBhbiBldmVudCBiYXNlZCBvbiBcImZvcmVpZ25cIiBrZXlzIHRoYXRcbiAgICAgKiBhcmUgcHJvdmlkZWQgaW4gdGhlIGBPcHRpb25zYCBwYXJhbWV0ZXIgZm9yIGFuIEV2ZW50XG4gICAgICovXG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5jb250ZXh0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB2YXIgb3B0aW9uc0tleXMgPSBbJ2ludGVncmF0aW9ucycsICdhbm9ueW1vdXNJZCcsICd0aW1lc3RhbXAnLCAndXNlcklkJ107XG4gICAgICAgIHZhciBvcHRpb25zID0gKF9hID0gZXZlbnQub3B0aW9ucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgIGRlbGV0ZSBvcHRpb25zWydpbnRlZ3JhdGlvbnMnXTtcbiAgICAgICAgdmFyIHByb3ZpZGVkT3B0aW9uc0tleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSAoX2MgPSAoX2IgPSBldmVudC5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY29udGV4dCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDoge307XG4gICAgICAgIHZhciBvdmVycmlkZXMgPSB7fTtcbiAgICAgICAgcHJvdmlkZWRPcHRpb25zS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdjb250ZXh0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zS2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgZHNldChvdmVycmlkZXMsIGtleSwgb3B0aW9uc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzZXQoY29udGV4dCwga2V5LCBvcHRpb25zW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtjb250ZXh0LCBvdmVycmlkZXNdO1xuICAgIH07XG4gICAgRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoZXZlbnQsIHBhZ2VDdHgpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIC8vIHNldCBhbm9ueW1vdXNJZCBnbG9iYWxseSBpZiB3ZSBlbmNvdW50ZXIgYW4gb3ZlcnJpZGVcbiAgICAgICAgLy9zZWdtZW50LmNvbS9kb2NzL2Nvbm5lY3Rpb25zL3NvdXJjZXMvY2F0YWxvZy9saWJyYXJpZXMvd2Vic2l0ZS9qYXZhc2NyaXB0L2lkZW50aXR5LyNvdmVycmlkZS10aGUtYW5vbnltb3VzLWlkLXVzaW5nLXRoZS1vcHRpb25zLW9iamVjdFxuICAgICAgICAoKF9hID0gZXZlbnQub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFub255bW91c0lkKSAmJlxuICAgICAgICAgICAgdGhpcy51c2VyLmFub255bW91c0lkKGV2ZW50Lm9wdGlvbnMuYW5vbnltb3VzSWQpO1xuICAgICAgICB2YXIgaW50ZWdyYXRpb25Cb29sZWFucyA9IE9iamVjdC5rZXlzKChfYiA9IGV2ZW50LmludGVncmF0aW9ucykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pLnJlZHVjZShmdW5jdGlvbiAoaW50ZWdyYXRpb25OYW1lcywgbmFtZSkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIF9iO1xuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvbk5hbWVzKSwgKF9hID0ge30sIF9hW25hbWVdID0gQm9vbGVhbigoX2IgPSBldmVudC5pbnRlZ3JhdGlvbnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltuYW1lXSksIF9hKSk7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgLy8gVGhpcyBpcyBwcmV0dHkgdHJpcHB5LCBidXQgaGVyZSdzIHdoYXQncyBnb2luZyBvbjpcbiAgICAgICAgLy8gLSBhKSBXZSBkb24ndCBwYXNzIGluaXRpYWwgaW50ZWdyYXRpb24gb3B0aW9ucyBhcyBwYXJ0IG9mIHRoZSBldmVudCwgb25seSBpZiB0aGV5J3JlIHRydWUgb3IgZmFsc2VcbiAgICAgICAgLy8gLSBiKSBXZSBkbyBhY2NlcHQgcGVyIGludGVncmF0aW9uIG92ZXJyaWRlcyAobGlrZSBpbnRlZ3JhdGlvbnMuQW1wbGl0dWRlLnNlc3Npb25JZCkgYXQgdGhlIGV2ZW50IGxldmVsXG4gICAgICAgIC8vIEhlbmNlIHRoZSBuZWVkIHRvIGNvbnZlcnQgYmFzZSBpbnRlZ3JhdGlvbiBvcHRpb25zIHRvIGJvb2xlYW5zLCBidXQgbWFpbnRhaW4gcGVyIGV2ZW50IGludGVncmF0aW9uIG92ZXJyaWRlc1xuICAgICAgICB2YXIgYWxsSW50ZWdyYXRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGludGVncmF0aW9uQm9vbGVhbnMpLCAoX2MgPSBldmVudC5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuaW50ZWdyYXRpb25zKTtcbiAgICAgICAgdmFyIF9kID0gdGhpcy5jb250ZXh0KGV2ZW50KSwgY29udGV4dCA9IF9kWzBdLCBvdmVycmlkZXMgPSBfZFsxXTtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBldmVudC5vcHRpb25zLCByZXN0ID0gX19yZXN0KGV2ZW50LCBbXCJvcHRpb25zXCJdKTtcbiAgICAgICAgdmFyIG5ld0V2ZW50ID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oeyB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSwgcmVzdCksIHsgY29udGV4dDogY29udGV4dCwgaW50ZWdyYXRpb25zOiBhbGxJbnRlZ3JhdGlvbnMgfSksIG92ZXJyaWRlcyksIHsgbWVzc2FnZUlkOiAnYWpzLW5leHQtJyArIG1kNS5oYXNoKEpTT04uc3RyaW5naWZ5KGV2ZW50KSArIHV1aWQoKSkgfSk7XG4gICAgICAgIGFkZFBhZ2VDb250ZXh0KG5ld0V2ZW50LCBwYWdlQ3R4KTtcbiAgICAgICAgcmV0dXJuIG5ld0V2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZW50RmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBFdmVudEZhY3RvcnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/events/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attachInspector: () => (/* binding */ attachInspector)\n/* harmony export */ });\n/* harmony import */ var _lib_get_global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/get-global */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\nvar _a;\nvar _b;\n\nvar env = (0,_lib_get_global__WEBPACK_IMPORTED_MODULE_0__.getGlobal)();\n// The code below assumes the inspector extension will use Object.assign\n// to add the inspect interface on to this object reference (unless the\n// extension code ran first and has already set up the variable)\nvar inspectorHost = ((_a = (_b = env)['__SEGMENT_INSPECTOR__']) !== null && _a !== void 0 ? _a : (_b['__SEGMENT_INSPECTOR__'] = {}));\nvar attachInspector = function (analytics) { var _a; return (_a = inspectorHost.attach) === null || _a === void 0 ? void 0 : _a.call(inspectorHost, analytics); };\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvaW5zcGVjdG9yL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNpRDtBQUNqRCxVQUFVLDBEQUFTO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGtJQUFrSTtBQUMzSCw2Q0FBNkMsUUFBUTtBQUM1RCIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL2luc3BlY3Rvci9pbmRleC5qcz9hNmRmIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfYTtcbnZhciBfYjtcbmltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4uLy4uL2xpYi9nZXQtZ2xvYmFsJztcbnZhciBlbnYgPSBnZXRHbG9iYWwoKTtcbi8vIFRoZSBjb2RlIGJlbG93IGFzc3VtZXMgdGhlIGluc3BlY3RvciBleHRlbnNpb24gd2lsbCB1c2UgT2JqZWN0LmFzc2lnblxuLy8gdG8gYWRkIHRoZSBpbnNwZWN0IGludGVyZmFjZSBvbiB0byB0aGlzIG9iamVjdCByZWZlcmVuY2UgKHVubGVzcyB0aGVcbi8vIGV4dGVuc2lvbiBjb2RlIHJhbiBmaXJzdCBhbmQgaGFzIGFscmVhZHkgc2V0IHVwIHRoZSB2YXJpYWJsZSlcbnZhciBpbnNwZWN0b3JIb3N0ID0gKChfYSA9IChfYiA9IGVudilbJ19fU0VHTUVOVF9JTlNQRUNUT1JfXyddKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2JbJ19fU0VHTUVOVF9JTlNQRUNUT1JfXyddID0ge30pKTtcbmV4cG9ydCB2YXIgYXR0YWNoSW5zcGVjdG9yID0gZnVuY3Rpb24gKGFuYWx5dGljcykgeyB2YXIgX2E7IHJldHVybiAoX2EgPSBpbnNwZWN0b3JIb3N0LmF0dGFjaCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwoaW5zcGVjdG9ySG9zdCwgYW5hbHl0aWNzKTsgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addPageContext: () => (/* binding */ addPageContext)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_pick__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/pick */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/pick.js\");\n/* harmony import */ var _get_page_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./get-page-context */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\");\n\n\n\n/**\n * Augments a segment event with information about the current page.\n * Page information like URL changes frequently, so this is meant to be captured as close to the event call as possible.\n * Things like `userAgent` do not change, so they can be added later in the flow.\n * We prefer not to add this information to this function, as it increases the main bundle size.\n */\nvar addPageContext = function (event, pageCtx) {\n    if (pageCtx === void 0) { pageCtx = (0,_get_page_context__WEBPACK_IMPORTED_MODULE_0__.getDefaultPageContext)(); }\n    var evtCtx = event.context; // Context should be set earlier in the flow\n    var pageContextFromEventProps;\n    if (event.type === 'page') {\n        pageContextFromEventProps =\n            event.properties && (0,_lib_pick__WEBPACK_IMPORTED_MODULE_1__.pick)(event.properties, Object.keys(pageCtx));\n        event.properties = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, pageCtx), event.properties), (event.name ? { name: event.name } : {}));\n    }\n    evtCtx.page = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, pageCtx), pageContextFromEventProps), evtCtx.page);\n};\n//# sourceMappingURL=add-page-context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcGFnZS9hZGQtcGFnZS1jb250ZXh0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUM7QUFDSztBQUNxQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDhCQUE4QixVQUFVLHdFQUFxQjtBQUM3RCxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLCtDQUFJO0FBQ3BDLDJCQUEyQiwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsR0FBRywrQ0FBK0MsbUJBQW1CLElBQUk7QUFDOUg7QUFDQSxrQkFBa0IsK0NBQVEsQ0FBQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDL0M7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3BhZ2UvYWRkLXBhZ2UtY29udGV4dC5qcz82ZjMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBwaWNrIH0gZnJvbSAnLi4vLi4vbGliL3BpY2snO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFBhZ2VDb250ZXh0IH0gZnJvbSAnLi9nZXQtcGFnZS1jb250ZXh0Jztcbi8qKlxuICogQXVnbWVudHMgYSBzZWdtZW50IGV2ZW50IHdpdGggaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgcGFnZS5cbiAqIFBhZ2UgaW5mb3JtYXRpb24gbGlrZSBVUkwgY2hhbmdlcyBmcmVxdWVudGx5LCBzbyB0aGlzIGlzIG1lYW50IHRvIGJlIGNhcHR1cmVkIGFzIGNsb3NlIHRvIHRoZSBldmVudCBjYWxsIGFzIHBvc3NpYmxlLlxuICogVGhpbmdzIGxpa2UgYHVzZXJBZ2VudGAgZG8gbm90IGNoYW5nZSwgc28gdGhleSBjYW4gYmUgYWRkZWQgbGF0ZXIgaW4gdGhlIGZsb3cuXG4gKiBXZSBwcmVmZXIgbm90IHRvIGFkZCB0aGlzIGluZm9ybWF0aW9uIHRvIHRoaXMgZnVuY3Rpb24sIGFzIGl0IGluY3JlYXNlcyB0aGUgbWFpbiBidW5kbGUgc2l6ZS5cbiAqL1xuZXhwb3J0IHZhciBhZGRQYWdlQ29udGV4dCA9IGZ1bmN0aW9uIChldmVudCwgcGFnZUN0eCkge1xuICAgIGlmIChwYWdlQ3R4ID09PSB2b2lkIDApIHsgcGFnZUN0eCA9IGdldERlZmF1bHRQYWdlQ29udGV4dCgpOyB9XG4gICAgdmFyIGV2dEN0eCA9IGV2ZW50LmNvbnRleHQ7IC8vIENvbnRleHQgc2hvdWxkIGJlIHNldCBlYXJsaWVyIGluIHRoZSBmbG93XG4gICAgdmFyIHBhZ2VDb250ZXh0RnJvbUV2ZW50UHJvcHM7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdwYWdlJykge1xuICAgICAgICBwYWdlQ29udGV4dEZyb21FdmVudFByb3BzID1cbiAgICAgICAgICAgIGV2ZW50LnByb3BlcnRpZXMgJiYgcGljayhldmVudC5wcm9wZXJ0aWVzLCBPYmplY3Qua2V5cyhwYWdlQ3R4KSk7XG4gICAgICAgIGV2ZW50LnByb3BlcnRpZXMgPSBfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcGFnZUN0eCksIGV2ZW50LnByb3BlcnRpZXMpLCAoZXZlbnQubmFtZSA/IHsgbmFtZTogZXZlbnQubmFtZSB9IDoge30pKTtcbiAgICB9XG4gICAgZXZ0Q3R4LnBhZ2UgPSBfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcGFnZUN0eCksIHBhZ2VDb250ZXh0RnJvbUV2ZW50UHJvcHMpLCBldnRDdHgucGFnZSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRkLXBhZ2UtY29udGV4dC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BufferedPageContextDiscriminant: () => (/* binding */ BufferedPageContextDiscriminant),\n/* harmony export */   createBufferedPageContext: () => (/* binding */ createBufferedPageContext),\n/* harmony export */   createPageContext: () => (/* binding */ createPageContext),\n/* harmony export */   getDefaultBufferedPageContext: () => (/* binding */ getDefaultBufferedPageContext),\n/* harmony export */   getDefaultPageContext: () => (/* binding */ getDefaultPageContext),\n/* harmony export */   isBufferedPageContext: () => (/* binding */ isBufferedPageContext)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\nvar BufferedPageContextDiscriminant = 'bpc';\n/**\n * `BufferedPageContext` object builder\n */\nvar createBufferedPageContext = function (url, canonicalUrl, search, path, title, referrer) { return ({\n    __t: BufferedPageContextDiscriminant,\n    c: canonicalUrl,\n    p: path,\n    u: url,\n    s: search,\n    t: title,\n    r: referrer,\n}); };\n// my clever/dubious way of making sure this type guard does not get out sync with the type definition\nvar BUFFERED_PAGE_CONTEXT_KEYS = Object.keys(createBufferedPageContext('', '', '', '', '', ''));\nfunction isBufferedPageContext(bufferedPageCtx) {\n    if (!(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(bufferedPageCtx))\n        return false;\n    if (bufferedPageCtx.__t !== BufferedPageContextDiscriminant)\n        return false;\n    // ensure obj has all the keys we expect, and none we don't.\n    for (var k in bufferedPageCtx) {\n        if (!BUFFERED_PAGE_CONTEXT_KEYS.includes(k)) {\n            return false;\n        }\n    }\n    return true;\n}\n//  Legacy logic: we are we appending search parameters to the canonical URL -- I guess the canonical URL is  \"not canonical enough\" (lol)\nvar createCanonicalURL = function (canonicalUrl, searchParams) {\n    return canonicalUrl.indexOf('?') > -1\n        ? canonicalUrl\n        : canonicalUrl + searchParams;\n};\n/**\n * Strips hash from URL.\n * http://www.segment.local#test -> http://www.segment.local\n */\nvar removeHash = function (href) {\n    var hashIdx = href.indexOf('#');\n    return hashIdx === -1 ? href : href.slice(0, hashIdx);\n};\nvar parseCanonicalPath = function (canonicalUrl) {\n    try {\n        return new URL(canonicalUrl).pathname;\n    }\n    catch (_e) {\n        // this is classic behavior -- we assume that if the canonical URL is invalid, it's a raw path.\n        return canonicalUrl[0] === '/' ? canonicalUrl : '/' + canonicalUrl;\n    }\n};\n/**\n * Create a `PageContext` from a `BufferedPageContext`.\n * `BufferedPageContext` keys are minified to save bytes in the snippet.\n */\nvar createPageContext = function (_a) {\n    var canonicalUrl = _a.c, pathname = _a.p, search = _a.s, url = _a.u, referrer = _a.r, title = _a.t;\n    var newPath = canonicalUrl ? parseCanonicalPath(canonicalUrl) : pathname;\n    var newUrl = canonicalUrl\n        ? createCanonicalURL(canonicalUrl, search)\n        : removeHash(url);\n    return {\n        path: newPath,\n        referrer: referrer,\n        search: search,\n        title: title,\n        url: newUrl,\n    };\n};\n/**\n * Get page properties from the browser window/document.\n */\nvar getDefaultBufferedPageContext = function () {\n    var c = document.querySelector(\"link[rel='canonical']\");\n    return createBufferedPageContext(location.href, (c && c.getAttribute('href')) || undefined, location.search, location.pathname, document.title, document.referrer);\n};\n/**\n * Get page properties from the browser window/document.\n */\nvar getDefaultPageContext = function () {\n    return createPageContext(getDefaultBufferedPageContext());\n};\n//# sourceMappingURL=get-page-context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcGFnZS9nZXQtcGFnZS1jb250ZXh0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0Q7QUFDakQ7QUFDUDtBQUNBO0FBQ0E7QUFDTyw4RkFBOEY7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNPO0FBQ1AsU0FBUyxzRUFBYTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9wYWdlL2dldC1wYWdlLWNvbnRleHQuanM/MmNkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuZXhwb3J0IHZhciBCdWZmZXJlZFBhZ2VDb250ZXh0RGlzY3JpbWluYW50ID0gJ2JwYyc7XG4vKipcbiAqIGBCdWZmZXJlZFBhZ2VDb250ZXh0YCBvYmplY3QgYnVpbGRlclxuICovXG5leHBvcnQgdmFyIGNyZWF0ZUJ1ZmZlcmVkUGFnZUNvbnRleHQgPSBmdW5jdGlvbiAodXJsLCBjYW5vbmljYWxVcmwsIHNlYXJjaCwgcGF0aCwgdGl0bGUsIHJlZmVycmVyKSB7IHJldHVybiAoe1xuICAgIF9fdDogQnVmZmVyZWRQYWdlQ29udGV4dERpc2NyaW1pbmFudCxcbiAgICBjOiBjYW5vbmljYWxVcmwsXG4gICAgcDogcGF0aCxcbiAgICB1OiB1cmwsXG4gICAgczogc2VhcmNoLFxuICAgIHQ6IHRpdGxlLFxuICAgIHI6IHJlZmVycmVyLFxufSk7IH07XG4vLyBteSBjbGV2ZXIvZHViaW91cyB3YXkgb2YgbWFraW5nIHN1cmUgdGhpcyB0eXBlIGd1YXJkIGRvZXMgbm90IGdldCBvdXQgc3luYyB3aXRoIHRoZSB0eXBlIGRlZmluaXRpb25cbnZhciBCVUZGRVJFRF9QQUdFX0NPTlRFWFRfS0VZUyA9IE9iamVjdC5rZXlzKGNyZWF0ZUJ1ZmZlcmVkUGFnZUNvbnRleHQoJycsICcnLCAnJywgJycsICcnLCAnJykpO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnVmZmVyZWRQYWdlQ29udGV4dChidWZmZXJlZFBhZ2VDdHgpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoYnVmZmVyZWRQYWdlQ3R4KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChidWZmZXJlZFBhZ2VDdHguX190ICE9PSBCdWZmZXJlZFBhZ2VDb250ZXh0RGlzY3JpbWluYW50KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gZW5zdXJlIG9iaiBoYXMgYWxsIHRoZSBrZXlzIHdlIGV4cGVjdCwgYW5kIG5vbmUgd2UgZG9uJ3QuXG4gICAgZm9yICh2YXIgayBpbiBidWZmZXJlZFBhZ2VDdHgpIHtcbiAgICAgICAgaWYgKCFCVUZGRVJFRF9QQUdFX0NPTlRFWFRfS0VZUy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLy8gIExlZ2FjeSBsb2dpYzogd2UgYXJlIHdlIGFwcGVuZGluZyBzZWFyY2ggcGFyYW1ldGVycyB0byB0aGUgY2Fub25pY2FsIFVSTCAtLSBJIGd1ZXNzIHRoZSBjYW5vbmljYWwgVVJMIGlzICBcIm5vdCBjYW5vbmljYWwgZW5vdWdoXCIgKGxvbClcbnZhciBjcmVhdGVDYW5vbmljYWxVUkwgPSBmdW5jdGlvbiAoY2Fub25pY2FsVXJsLCBzZWFyY2hQYXJhbXMpIHtcbiAgICByZXR1cm4gY2Fub25pY2FsVXJsLmluZGV4T2YoJz8nKSA+IC0xXG4gICAgICAgID8gY2Fub25pY2FsVXJsXG4gICAgICAgIDogY2Fub25pY2FsVXJsICsgc2VhcmNoUGFyYW1zO1xufTtcbi8qKlxuICogU3RyaXBzIGhhc2ggZnJvbSBVUkwuXG4gKiBodHRwOi8vd3d3LnNlZ21lbnQubG9jYWwjdGVzdCAtPiBodHRwOi8vd3d3LnNlZ21lbnQubG9jYWxcbiAqL1xudmFyIHJlbW92ZUhhc2ggPSBmdW5jdGlvbiAoaHJlZikge1xuICAgIHZhciBoYXNoSWR4ID0gaHJlZi5pbmRleE9mKCcjJyk7XG4gICAgcmV0dXJuIGhhc2hJZHggPT09IC0xID8gaHJlZiA6IGhyZWYuc2xpY2UoMCwgaGFzaElkeCk7XG59O1xudmFyIHBhcnNlQ2Fub25pY2FsUGF0aCA9IGZ1bmN0aW9uIChjYW5vbmljYWxVcmwpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IFVSTChjYW5vbmljYWxVcmwpLnBhdGhuYW1lO1xuICAgIH1cbiAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgLy8gdGhpcyBpcyBjbGFzc2ljIGJlaGF2aW9yIC0tIHdlIGFzc3VtZSB0aGF0IGlmIHRoZSBjYW5vbmljYWwgVVJMIGlzIGludmFsaWQsIGl0J3MgYSByYXcgcGF0aC5cbiAgICAgICAgcmV0dXJuIGNhbm9uaWNhbFVybFswXSA9PT0gJy8nID8gY2Fub25pY2FsVXJsIDogJy8nICsgY2Fub25pY2FsVXJsO1xuICAgIH1cbn07XG4vKipcbiAqIENyZWF0ZSBhIGBQYWdlQ29udGV4dGAgZnJvbSBhIGBCdWZmZXJlZFBhZ2VDb250ZXh0YC5cbiAqIGBCdWZmZXJlZFBhZ2VDb250ZXh0YCBrZXlzIGFyZSBtaW5pZmllZCB0byBzYXZlIGJ5dGVzIGluIHRoZSBzbmlwcGV0LlxuICovXG5leHBvcnQgdmFyIGNyZWF0ZVBhZ2VDb250ZXh0ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGNhbm9uaWNhbFVybCA9IF9hLmMsIHBhdGhuYW1lID0gX2EucCwgc2VhcmNoID0gX2EucywgdXJsID0gX2EudSwgcmVmZXJyZXIgPSBfYS5yLCB0aXRsZSA9IF9hLnQ7XG4gICAgdmFyIG5ld1BhdGggPSBjYW5vbmljYWxVcmwgPyBwYXJzZUNhbm9uaWNhbFBhdGgoY2Fub25pY2FsVXJsKSA6IHBhdGhuYW1lO1xuICAgIHZhciBuZXdVcmwgPSBjYW5vbmljYWxVcmxcbiAgICAgICAgPyBjcmVhdGVDYW5vbmljYWxVUkwoY2Fub25pY2FsVXJsLCBzZWFyY2gpXG4gICAgICAgIDogcmVtb3ZlSGFzaCh1cmwpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHBhdGg6IG5ld1BhdGgsXG4gICAgICAgIHJlZmVycmVyOiByZWZlcnJlcixcbiAgICAgICAgc2VhcmNoOiBzZWFyY2gsXG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgdXJsOiBuZXdVcmwsXG4gICAgfTtcbn07XG4vKipcbiAqIEdldCBwYWdlIHByb3BlcnRpZXMgZnJvbSB0aGUgYnJvd3NlciB3aW5kb3cvZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RGVmYXVsdEJ1ZmZlcmVkUGFnZUNvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibGlua1tyZWw9J2Nhbm9uaWNhbCddXCIpO1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXJlZFBhZ2VDb250ZXh0KGxvY2F0aW9uLmhyZWYsIChjICYmIGMuZ2V0QXR0cmlidXRlKCdocmVmJykpIHx8IHVuZGVmaW5lZCwgbG9jYXRpb24uc2VhcmNoLCBsb2NhdGlvbi5wYXRobmFtZSwgZG9jdW1lbnQudGl0bGUsIGRvY3VtZW50LnJlZmVycmVyKTtcbn07XG4vKipcbiAqIEdldCBwYWdlIHByb3BlcnRpZXMgZnJvbSB0aGUgYnJvd3NlciB3aW5kb3cvZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCB2YXIgZ2V0RGVmYXVsdFBhZ2VDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjcmVhdGVQYWdlQ29udGV4dChnZXREZWZhdWx0QnVmZmVyZWRQYWdlQ29udGV4dCgpKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtcGFnZS1jb250ZXh0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/page/get-page-context.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js":
/*!********************************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gracefulDecodeURIComponent: () => (/* binding */ gracefulDecodeURIComponent)\n/* harmony export */ });\n/**\n * Tries to gets the unencoded version of an encoded component of a\n * Uniform Resource Identifier (URI). If input string is malformed,\n * returns it back as-is.\n *\n * Note: All occurences of the `+` character become ` ` (spaces).\n **/\nfunction gracefulDecodeURIComponent(encodedURIComponent) {\n    try {\n        return decodeURIComponent(encodedURIComponent.replace(/\\+/g, ' '));\n    }\n    catch (_a) {\n        return encodedURIComponent;\n    }\n}\n//# sourceMappingURL=gracefulDecodeURIComponent.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcXVlcnktc3RyaW5nL2dyYWNlZnVsRGVjb2RlVVJJQ29tcG9uZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3F1ZXJ5LXN0cmluZy9ncmFjZWZ1bERlY29kZVVSSUNvbXBvbmVudC5qcz9iYzk0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVHJpZXMgdG8gZ2V0cyB0aGUgdW5lbmNvZGVkIHZlcnNpb24gb2YgYW4gZW5jb2RlZCBjb21wb25lbnQgb2YgYVxuICogVW5pZm9ybSBSZXNvdXJjZSBJZGVudGlmaWVyIChVUkkpLiBJZiBpbnB1dCBzdHJpbmcgaXMgbWFsZm9ybWVkLFxuICogcmV0dXJucyBpdCBiYWNrIGFzLWlzLlxuICpcbiAqIE5vdGU6IEFsbCBvY2N1cmVuY2VzIG9mIHRoZSBgK2AgY2hhcmFjdGVyIGJlY29tZSBgIGAgKHNwYWNlcykuXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZFVSSUNvbXBvbmVudCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZFVSSUNvbXBvbmVudC5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gZW5jb2RlZFVSSUNvbXBvbmVudDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ncmFjZWZ1bERlY29kZVVSSUNvbXBvbmVudC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   queryString: () => (/* binding */ queryString)\n/* harmony export */ });\n/* harmony import */ var _pickPrefix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pickPrefix */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js\");\n/* harmony import */ var _gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gracefulDecodeURIComponent */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\n\nfunction queryString(analytics, query) {\n    var a = document.createElement('a');\n    a.href = query;\n    var parsed = a.search.slice(1);\n    var params = parsed.split('&').reduce(function (acc, str) {\n        var _a = str.split('='), k = _a[0], v = _a[1];\n        acc[k] = (0,_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_0__.gracefulDecodeURIComponent)(v);\n        return acc;\n    }, {});\n    var calls = [];\n    var ajs_uid = params.ajs_uid, ajs_event = params.ajs_event, ajs_aid = params.ajs_aid;\n    var _a = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.isPlainObject)(analytics.options.useQueryString)\n        ? analytics.options.useQueryString\n        : {}, _b = _a.aid, aidPattern = _b === void 0 ? /.+/ : _b, _c = _a.uid, uidPattern = _c === void 0 ? /.+/ : _c;\n    if (ajs_aid) {\n        var anonId = Array.isArray(params.ajs_aid)\n            ? params.ajs_aid[0]\n            : params.ajs_aid;\n        if (aidPattern.test(anonId)) {\n            analytics.setAnonymousId(anonId);\n        }\n    }\n    if (ajs_uid) {\n        var uid = Array.isArray(params.ajs_uid)\n            ? params.ajs_uid[0]\n            : params.ajs_uid;\n        if (uidPattern.test(uid)) {\n            var traits = (0,_pickPrefix__WEBPACK_IMPORTED_MODULE_2__.pickPrefix)('ajs_trait_', params);\n            calls.push(analytics.identify(uid, traits));\n        }\n    }\n    if (ajs_event) {\n        var event_1 = Array.isArray(params.ajs_event)\n            ? params.ajs_event[0]\n            : params.ajs_event;\n        var props = (0,_pickPrefix__WEBPACK_IMPORTED_MODULE_2__.pickPrefix)('ajs_prop_', params);\n        calls.push(analytics.track(event_1, props));\n    }\n    return Promise.all(calls);\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcXVlcnktc3RyaW5nL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMEM7QUFDZ0M7QUFDbEI7QUFDakQ7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVGQUEwQjtBQUMzQztBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQSxhQUFhLHNFQUFhO0FBQzFCO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVEQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVEQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9xdWVyeS1zdHJpbmcvaW5kZXguanM/ZWUyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwaWNrUHJlZml4IH0gZnJvbSAnLi9waWNrUHJlZml4JztcbmltcG9ydCB7IGdyYWNlZnVsRGVjb2RlVVJJQ29tcG9uZW50IH0gZnJvbSAnLi9ncmFjZWZ1bERlY29kZVVSSUNvbXBvbmVudCc7XG5pbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5U3RyaW5nKGFuYWx5dGljcywgcXVlcnkpIHtcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBhLmhyZWYgPSBxdWVyeTtcbiAgICB2YXIgcGFyc2VkID0gYS5zZWFyY2guc2xpY2UoMSk7XG4gICAgdmFyIHBhcmFtcyA9IHBhcnNlZC5zcGxpdCgnJicpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBzdHIpIHtcbiAgICAgICAgdmFyIF9hID0gc3RyLnNwbGl0KCc9JyksIGsgPSBfYVswXSwgdiA9IF9hWzFdO1xuICAgICAgICBhY2Nba10gPSBncmFjZWZ1bERlY29kZVVSSUNvbXBvbmVudCh2KTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gICAgdmFyIGNhbGxzID0gW107XG4gICAgdmFyIGFqc191aWQgPSBwYXJhbXMuYWpzX3VpZCwgYWpzX2V2ZW50ID0gcGFyYW1zLmFqc19ldmVudCwgYWpzX2FpZCA9IHBhcmFtcy5hanNfYWlkO1xuICAgIHZhciBfYSA9IGlzUGxhaW5PYmplY3QoYW5hbHl0aWNzLm9wdGlvbnMudXNlUXVlcnlTdHJpbmcpXG4gICAgICAgID8gYW5hbHl0aWNzLm9wdGlvbnMudXNlUXVlcnlTdHJpbmdcbiAgICAgICAgOiB7fSwgX2IgPSBfYS5haWQsIGFpZFBhdHRlcm4gPSBfYiA9PT0gdm9pZCAwID8gLy4rLyA6IF9iLCBfYyA9IF9hLnVpZCwgdWlkUGF0dGVybiA9IF9jID09PSB2b2lkIDAgPyAvLisvIDogX2M7XG4gICAgaWYgKGFqc19haWQpIHtcbiAgICAgICAgdmFyIGFub25JZCA9IEFycmF5LmlzQXJyYXkocGFyYW1zLmFqc19haWQpXG4gICAgICAgICAgICA/IHBhcmFtcy5hanNfYWlkWzBdXG4gICAgICAgICAgICA6IHBhcmFtcy5hanNfYWlkO1xuICAgICAgICBpZiAoYWlkUGF0dGVybi50ZXN0KGFub25JZCkpIHtcbiAgICAgICAgICAgIGFuYWx5dGljcy5zZXRBbm9ueW1vdXNJZChhbm9uSWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhanNfdWlkKSB7XG4gICAgICAgIHZhciB1aWQgPSBBcnJheS5pc0FycmF5KHBhcmFtcy5hanNfdWlkKVxuICAgICAgICAgICAgPyBwYXJhbXMuYWpzX3VpZFswXVxuICAgICAgICAgICAgOiBwYXJhbXMuYWpzX3VpZDtcbiAgICAgICAgaWYgKHVpZFBhdHRlcm4udGVzdCh1aWQpKSB7XG4gICAgICAgICAgICB2YXIgdHJhaXRzID0gcGlja1ByZWZpeCgnYWpzX3RyYWl0XycsIHBhcmFtcyk7XG4gICAgICAgICAgICBjYWxscy5wdXNoKGFuYWx5dGljcy5pZGVudGlmeSh1aWQsIHRyYWl0cykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhanNfZXZlbnQpIHtcbiAgICAgICAgdmFyIGV2ZW50XzEgPSBBcnJheS5pc0FycmF5KHBhcmFtcy5hanNfZXZlbnQpXG4gICAgICAgICAgICA/IHBhcmFtcy5hanNfZXZlbnRbMF1cbiAgICAgICAgICAgIDogcGFyYW1zLmFqc19ldmVudDtcbiAgICAgICAgdmFyIHByb3BzID0gcGlja1ByZWZpeCgnYWpzX3Byb3BfJywgcGFyYW1zKTtcbiAgICAgICAgY2FsbHMucHVzaChhbmFseXRpY3MudHJhY2soZXZlbnRfMSwgcHJvcHMpKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGNhbGxzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickPrefix: () => (/* binding */ pickPrefix)\n/* harmony export */ });\n/**\n * Returns an object containing only the properties prefixed by the input\n * string.\n * Ex: prefix('ajs_traits_', { ajs_traits_address: '123 St' })\n * will return { address: '123 St' }\n **/\nfunction pickPrefix(prefix, object) {\n    return Object.keys(object).reduce(function (acc, key) {\n        if (key.startsWith(prefix)) {\n            var field = key.substr(prefix.length);\n            acc[field] = object[key];\n        }\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=pickPrefix.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcXVlcnktc3RyaW5nL3BpY2tQcmVmaXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4QkFBOEI7QUFDN0QsaUJBQWlCO0FBQ2pCO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcXVlcnktc3RyaW5nL3BpY2tQcmVmaXguanM/Zjc2MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgb25seSB0aGUgcHJvcGVydGllcyBwcmVmaXhlZCBieSB0aGUgaW5wdXRcbiAqIHN0cmluZy5cbiAqIEV4OiBwcmVmaXgoJ2Fqc190cmFpdHNfJywgeyBhanNfdHJhaXRzX2FkZHJlc3M6ICcxMjMgU3QnIH0pXG4gKiB3aWxsIHJldHVybiB7IGFkZHJlc3M6ICcxMjMgU3QnIH1cbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBwaWNrUHJlZml4KHByZWZpeCwgb2JqZWN0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgocHJlZml4KSkge1xuICAgICAgICAgICAgdmFyIGZpZWxkID0ga2V5LnN1YnN0cihwcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgICAgIGFjY1tmaWVsZF0gPSBvYmplY3Rba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpY2tQcmVmaXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventQueue: () => (/* binding */ EventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\");\n/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../connection */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n\n\n\n\nvar EventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(EventQueue, _super);\n    function EventQueue(nameOrQueue) {\n        return _super.call(this, typeof nameOrQueue === 'string'\n            ? new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__.PersistedPriorityQueue(4, nameOrQueue)\n            : nameOrQueue) || this;\n    }\n    EventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                if ((0,_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)())\n                    return [2 /*return*/, []];\n                return [2 /*return*/, _super.prototype.flush.call(this)];\n            });\n        });\n    };\n    return EventQueue;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.CoreEventQueue));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcXVldWUvZXZlbnQtcXVldWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMEQ7QUFDa0I7QUFDbkI7QUFDZjtBQUMxQztBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0Esa0JBQWtCLGlGQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QixvQkFBb0Isc0RBQVM7QUFDN0I7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUMsQ0FBQyxtRUFBYztBQUNNO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvcXVldWUvZXZlbnQtcXVldWUuanM/OWMxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZXh0ZW5kcywgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFBlcnNpc3RlZFByaW9yaXR5UXVldWUgfSBmcm9tICcuLi8uLi9saWIvcHJpb3JpdHktcXVldWUvcGVyc2lzdGVkJztcbmltcG9ydCB7IENvcmVFdmVudFF1ZXVlIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgaXNPZmZsaW5lIH0gZnJvbSAnLi4vY29ubmVjdGlvbic7XG52YXIgRXZlbnRRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRXZlbnRRdWV1ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFdmVudFF1ZXVlKG5hbWVPclF1ZXVlKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlb2YgbmFtZU9yUXVldWUgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IG5ldyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKDQsIG5hbWVPclF1ZXVlKVxuICAgICAgICAgICAgOiBuYW1lT3JRdWV1ZSkgfHwgdGhpcztcbiAgICB9XG4gICAgRXZlbnRRdWV1ZS5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNPZmZsaW5lKCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9zdXBlci5wcm90b3R5cGUuZmx1c2guY2FsbCh0aGlzKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gRXZlbnRRdWV1ZTtcbn0oQ29yZUV2ZW50UXVldWUpKTtcbmV4cG9ydCB7IEV2ZW50UXVldWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Stats: () => (/* binding */ Stats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n/* harmony import */ var _remote_metrics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./remote-metrics */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js\");\n\n\n\nvar remoteMetrics;\nvar Stats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Stats, _super);\n    function Stats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Stats.initRemoteMetrics = function (options) {\n        remoteMetrics = new _remote_metrics__WEBPACK_IMPORTED_MODULE_1__.RemoteMetrics(options);\n    };\n    Stats.prototype.increment = function (metric, by, tags) {\n        _super.prototype.increment.call(this, metric, by, tags);\n        remoteMetrics === null || remoteMetrics === void 0 ? void 0 : remoteMetrics.increment(metric, tags !== null && tags !== void 0 ? tags : []);\n    };\n    return Stats;\n}(_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RhdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrQztBQUNrQjtBQUNIO0FBQ2pEO0FBQ0E7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMERBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxDQUFDLDhEQUFTO0FBQ007QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdGF0cy9pbmRleC5qcz9mNDhmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQ29yZVN0YXRzIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgUmVtb3RlTWV0cmljcyB9IGZyb20gJy4vcmVtb3RlLW1ldHJpY3MnO1xudmFyIHJlbW90ZU1ldHJpY3M7XG52YXIgU3RhdHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN0YXRzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN0YXRzKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFN0YXRzLmluaXRSZW1vdGVNZXRyaWNzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmVtb3RlTWV0cmljcyA9IG5ldyBSZW1vdGVNZXRyaWNzKG9wdGlvbnMpO1xuICAgIH07XG4gICAgU3RhdHMucHJvdG90eXBlLmluY3JlbWVudCA9IGZ1bmN0aW9uIChtZXRyaWMsIGJ5LCB0YWdzKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuaW5jcmVtZW50LmNhbGwodGhpcywgbWV0cmljLCBieSwgdGFncyk7XG4gICAgICAgIHJlbW90ZU1ldHJpY3MgPT09IG51bGwgfHwgcmVtb3RlTWV0cmljcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVtb3RlTWV0cmljcy5pbmNyZW1lbnQobWV0cmljLCB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdHM7XG59KENvcmVTdGF0cykpO1xuZXhwb3J0IHsgU3RhdHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   recordIntegrationMetric: () => (/* binding */ recordIntegrationMetric)\n/* harmony export */ });\nfunction recordIntegrationMetric(ctx, _a) {\n    var methodName = _a.methodName, integrationName = _a.integrationName, type = _a.type, _b = _a.didError, didError = _b === void 0 ? false : _b;\n    ctx.stats.increment(\"analytics_js.integration.invoke\".concat(didError ? '.error' : ''), 1, [\n        \"method:\".concat(methodName),\n        \"integration_name:\".concat(integrationName),\n        \"type:\".concat(type),\n    ]);\n}\n//# sourceMappingURL=metric-helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RhdHMvbWV0cmljLWhlbHBlcnMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0YXRzL21ldHJpYy1oZWxwZXJzLmpzP2NjYmMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwgX2EpIHtcbiAgICB2YXIgbWV0aG9kTmFtZSA9IF9hLm1ldGhvZE5hbWUsIGludGVncmF0aW9uTmFtZSA9IF9hLmludGVncmF0aW9uTmFtZSwgdHlwZSA9IF9hLnR5cGUsIF9iID0gX2EuZGlkRXJyb3IsIGRpZEVycm9yID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2I7XG4gICAgY3R4LnN0YXRzLmluY3JlbWVudChcImFuYWx5dGljc19qcy5pbnRlZ3JhdGlvbi5pbnZva2VcIi5jb25jYXQoZGlkRXJyb3IgPyAnLmVycm9yJyA6ICcnKSwgMSwgW1xuICAgICAgICBcIm1ldGhvZDpcIi5jb25jYXQobWV0aG9kTmFtZSksXG4gICAgICAgIFwiaW50ZWdyYXRpb25fbmFtZTpcIi5jb25jYXQoaW50ZWdyYXRpb25OYW1lKSxcbiAgICAgICAgXCJ0eXBlOlwiLmNvbmNhdCh0eXBlKSxcbiAgICBdKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldHJpYy1oZWxwZXJzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RemoteMetrics: () => (/* binding */ RemoteMetrics)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/fetch */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_version_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/version-type */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\");\n\n\n\n\n\nvar createRemoteMetric = function (metric, tags, versionType) {\n    var formattedTags = tags.reduce(function (acc, t) {\n        var _a = t.split(':'), k = _a[0], v = _a[1];\n        acc[k] = v;\n        return acc;\n    }, {});\n    return {\n        type: 'Counter',\n        metric: metric,\n        value: 1,\n        tags: (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, formattedTags), { library: 'analytics.js', library_version: versionType === 'web' ? \"next-\".concat(_generated_version__WEBPACK_IMPORTED_MODULE_1__.version) : \"npm:next-\".concat(_generated_version__WEBPACK_IMPORTED_MODULE_1__.version) }),\n    };\n};\nfunction logError(err) {\n    console.error('Error sending segment performance metrics', err);\n}\nvar RemoteMetrics = /** @class */ (function () {\n    function RemoteMetrics(options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e;\n        this.host = (_a = options === null || options === void 0 ? void 0 : options.host) !== null && _a !== void 0 ? _a : _constants__WEBPACK_IMPORTED_MODULE_2__.SEGMENT_API_HOST;\n        this.sampleRate = (_b = options === null || options === void 0 ? void 0 : options.sampleRate) !== null && _b !== void 0 ? _b : 1;\n        this.flushTimer = (_c = options === null || options === void 0 ? void 0 : options.flushTimer) !== null && _c !== void 0 ? _c : 30 * 1000; /* 30s */\n        this.maxQueueSize = (_d = options === null || options === void 0 ? void 0 : options.maxQueueSize) !== null && _d !== void 0 ? _d : 20;\n        this.protocol = (_e = options === null || options === void 0 ? void 0 : options.protocol) !== null && _e !== void 0 ? _e : 'https';\n        this.queue = [];\n        if (this.sampleRate > 0) {\n            var flushing_1 = false;\n            var run_1 = function () {\n                if (flushing_1) {\n                    return;\n                }\n                flushing_1 = true;\n                _this.flush().catch(logError);\n                flushing_1 = false;\n                setTimeout(run_1, _this.flushTimer);\n            };\n            run_1();\n        }\n    }\n    RemoteMetrics.prototype.increment = function (metric, tags) {\n        // All metrics are part of an allow list in Tracking API\n        if (!metric.includes('analytics_js.')) {\n            return;\n        }\n        // /m doesn't like empty tags\n        if (tags.length === 0) {\n            return;\n        }\n        if (Math.random() > this.sampleRate) {\n            return;\n        }\n        if (this.queue.length >= this.maxQueueSize) {\n            return;\n        }\n        var remoteMetric = createRemoteMetric(metric, tags, (0,_lib_version_type__WEBPACK_IMPORTED_MODULE_3__.getVersionType)());\n        this.queue.push(remoteMetric);\n        if (metric.includes('error')) {\n            this.flush().catch(logError);\n        }\n    };\n    RemoteMetrics.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length <= 0) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.send().catch(function (error) {\n                                logError(error);\n                                _this.sampleRate = 0;\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    RemoteMetrics.prototype.send = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var payload, headers, url;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                payload = { series: this.queue };\n                this.queue = [];\n                headers = { 'Content-Type': 'text/plain' };\n                url = \"\".concat(this.protocol, \"://\").concat(this.host, \"/m\");\n                return [2 /*return*/, (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_4__.fetch)(url, {\n                        headers: headers,\n                        body: JSON.stringify(payload),\n                        method: 'POST',\n                    })];\n            });\n        });\n    };\n    return RemoteMetrics;\n}());\n\n//# sourceMappingURL=remote-metrics.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RhdHMvcmVtb3RlLW1ldHJpY3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXlEO0FBQ2pCO0FBQ1U7QUFDTTtBQUNSO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLG9CQUFvQixpRkFBaUYsdURBQU8sdUJBQXVCLHVEQUFPLEdBQUc7QUFDL0s7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkhBQTJILHdEQUFnQjtBQUMzSTtBQUNBLGtKQUFrSjtBQUNsSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGlFQUFjO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUIsNEJBQTRCO0FBQzVCO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0Esc0NBQXNDLGlEQUFLO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ3dCO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RhdHMvcmVtb3RlLW1ldHJpY3MuanM/MTdhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICcuLi8uLi9saWIvZmV0Y2gnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uLy4uL2dlbmVyYXRlZC92ZXJzaW9uJztcbmltcG9ydCB7IGdldFZlcnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vbGliL3ZlcnNpb24tdHlwZSc7XG5pbXBvcnQgeyBTRUdNRU5UX0FQSV9IT1NUIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbnZhciBjcmVhdGVSZW1vdGVNZXRyaWMgPSBmdW5jdGlvbiAobWV0cmljLCB0YWdzLCB2ZXJzaW9uVHlwZSkge1xuICAgIHZhciBmb3JtYXR0ZWRUYWdzID0gdGFncy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgdCkge1xuICAgICAgICB2YXIgX2EgPSB0LnNwbGl0KCc6JyksIGsgPSBfYVswXSwgdiA9IF9hWzFdO1xuICAgICAgICBhY2Nba10gPSB2O1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnQ291bnRlcicsXG4gICAgICAgIG1ldHJpYzogbWV0cmljLFxuICAgICAgICB2YWx1ZTogMSxcbiAgICAgICAgdGFnczogX19hc3NpZ24oX19hc3NpZ24oe30sIGZvcm1hdHRlZFRhZ3MpLCB7IGxpYnJhcnk6ICdhbmFseXRpY3MuanMnLCBsaWJyYXJ5X3ZlcnNpb246IHZlcnNpb25UeXBlID09PSAnd2ViJyA/IFwibmV4dC1cIi5jb25jYXQodmVyc2lvbikgOiBcIm5wbTpuZXh0LVwiLmNvbmNhdCh2ZXJzaW9uKSB9KSxcbiAgICB9O1xufTtcbmZ1bmN0aW9uIGxvZ0Vycm9yKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgc2VnbWVudCBwZXJmb3JtYW5jZSBtZXRyaWNzJywgZXJyKTtcbn1cbnZhciBSZW1vdGVNZXRyaWNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlbW90ZU1ldHJpY3Mob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICB0aGlzLmhvc3QgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaG9zdCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogU0VHTUVOVF9BUElfSE9TVDtcbiAgICAgICAgdGhpcy5zYW1wbGVSYXRlID0gKF9iID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNhbXBsZVJhdGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDE7XG4gICAgICAgIHRoaXMuZmx1c2hUaW1lciA9IChfYyA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5mbHVzaFRpbWVyKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAzMCAqIDEwMDA7IC8qIDMwcyAqL1xuICAgICAgICB0aGlzLm1heFF1ZXVlU2l6ZSA9IChfZCA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tYXhRdWV1ZVNpemUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDIwO1xuICAgICAgICB0aGlzLnByb3RvY29sID0gKF9lID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByb3RvY29sKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAnaHR0cHMnO1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIGlmICh0aGlzLnNhbXBsZVJhdGUgPiAwKSB7XG4gICAgICAgICAgICB2YXIgZmx1c2hpbmdfMSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHJ1bl8xID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChmbHVzaGluZ18xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmx1c2hpbmdfMSA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMuZmx1c2goKS5jYXRjaChsb2dFcnJvcik7XG4gICAgICAgICAgICAgICAgZmx1c2hpbmdfMSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocnVuXzEsIF90aGlzLmZsdXNoVGltZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1bl8xKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUmVtb3RlTWV0cmljcy5wcm90b3R5cGUuaW5jcmVtZW50ID0gZnVuY3Rpb24gKG1ldHJpYywgdGFncykge1xuICAgICAgICAvLyBBbGwgbWV0cmljcyBhcmUgcGFydCBvZiBhbiBhbGxvdyBsaXN0IGluIFRyYWNraW5nIEFQSVxuICAgICAgICBpZiAoIW1ldHJpYy5pbmNsdWRlcygnYW5hbHl0aWNzX2pzLicpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gL20gZG9lc24ndCBsaWtlIGVtcHR5IHRhZ3NcbiAgICAgICAgaWYgKHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiB0aGlzLnNhbXBsZVJhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPj0gdGhpcy5tYXhRdWV1ZVNpemUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVtb3RlTWV0cmljID0gY3JlYXRlUmVtb3RlTWV0cmljKG1ldHJpYywgdGFncywgZ2V0VmVyc2lvblR5cGUoKSk7XG4gICAgICAgIHRoaXMucXVldWUucHVzaChyZW1vdGVNZXRyaWMpO1xuICAgICAgICBpZiAobWV0cmljLmluY2x1ZGVzKCdlcnJvcicpKSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoKCkuY2F0Y2gobG9nRXJyb3IpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZW1vdGVNZXRyaWNzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zZW5kKCkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2FtcGxlUmF0ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUmVtb3RlTWV0cmljcy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBheWxvYWQsIGhlYWRlcnMsIHVybDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkID0geyBzZXJpZXM6IHRoaXMucXVldWUgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgaGVhZGVycyA9IHsgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJyB9O1xuICAgICAgICAgICAgICAgIHVybCA9IFwiXCIuY29uY2F0KHRoaXMucHJvdG9jb2wsIFwiOi8vXCIpLmNvbmNhdCh0aGlzLmhvc3QsIFwiL21cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZldGNoKHVybCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBSZW1vdGVNZXRyaWNzO1xufSgpKTtcbmV4cG9ydCB7IFJlbW90ZU1ldHJpY3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW90ZS1tZXRyaWNzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CookieStorage: () => (/* binding */ CookieStorage)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(ssr)/../node_modules/js-cookie/dist/js.cookie.mjs\");\n/* harmony import */ var _user_tld__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user/tld */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\");\n\n\n\nvar ONE_YEAR = 365;\n/**\n * Data storage using browser cookies\n */\nvar CookieStorage = /** @class */ (function () {\n    function CookieStorage(options) {\n        if (options === void 0) { options = CookieStorage.defaults; }\n        this.options = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, CookieStorage.defaults), options);\n    }\n    Object.defineProperty(CookieStorage, \"defaults\", {\n        get: function () {\n            return {\n                maxage: ONE_YEAR,\n                domain: (0,_user_tld__WEBPACK_IMPORTED_MODULE_2__.tld)(window.location.href),\n                path: '/',\n                sameSite: 'Lax',\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CookieStorage.prototype.opts = function () {\n        return {\n            sameSite: this.options.sameSite,\n            expires: this.options.maxage,\n            domain: this.options.domain,\n            path: this.options.path,\n            secure: this.options.secure,\n        };\n    };\n    CookieStorage.prototype.get = function (key) {\n        var _a;\n        try {\n            var value = js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(key);\n            if (value === undefined || value === null) {\n                return null;\n            }\n            try {\n                return (_a = JSON.parse(value)) !== null && _a !== void 0 ? _a : null;\n            }\n            catch (e) {\n                return (value !== null && value !== void 0 ? value : null);\n            }\n        }\n        catch (e) {\n            return null;\n        }\n    };\n    CookieStorage.prototype.set = function (key, value) {\n        if (typeof value === 'string') {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(key, value, this.opts());\n        }\n        else if (value === null) {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(key, this.opts());\n        }\n        else {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(key, JSON.stringify(value), this.opts());\n        }\n    };\n    CookieStorage.prototype.remove = function (key) {\n        return js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(key, this.opts());\n    };\n    return CookieStorage;\n}());\n\n//# sourceMappingURL=cookieStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9jb29raWVTdG9yYWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUM7QUFDTDtBQUNNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyx1QkFBdUIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOENBQUc7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBRztBQUNmO0FBQ0E7QUFDQSxZQUFZLGlEQUFHO0FBQ2Y7QUFDQTtBQUNBLFlBQVksaURBQUc7QUFDZjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlEQUFHO0FBQ2xCO0FBQ0E7QUFDQSxDQUFDO0FBQ3dCO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9jb29raWVTdG9yYWdlLmpzPzAyMzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBqYXIgZnJvbSAnanMtY29va2llJztcbmltcG9ydCB7IHRsZCB9IGZyb20gJy4uL3VzZXIvdGxkJztcbnZhciBPTkVfWUVBUiA9IDM2NTtcbi8qKlxuICogRGF0YSBzdG9yYWdlIHVzaW5nIGJyb3dzZXIgY29va2llc1xuICovXG52YXIgQ29va2llU3RvcmFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb29raWVTdG9yYWdlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gQ29va2llU3RvcmFnZS5kZWZhdWx0czsgfVxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgQ29va2llU3RvcmFnZS5kZWZhdWx0cyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29va2llU3RvcmFnZSwgXCJkZWZhdWx0c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtYXhhZ2U6IE9ORV9ZRUFSLFxuICAgICAgICAgICAgICAgIGRvbWFpbjogdGxkKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSxcbiAgICAgICAgICAgICAgICBwYXRoOiAnLycsXG4gICAgICAgICAgICAgICAgc2FtZVNpdGU6ICdMYXgnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIENvb2tpZVN0b3JhZ2UucHJvdG90eXBlLm9wdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzYW1lU2l0ZTogdGhpcy5vcHRpb25zLnNhbWVTaXRlLFxuICAgICAgICAgICAgZXhwaXJlczogdGhpcy5vcHRpb25zLm1heGFnZSxcbiAgICAgICAgICAgIGRvbWFpbjogdGhpcy5vcHRpb25zLmRvbWFpbixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMub3B0aW9ucy5wYXRoLFxuICAgICAgICAgICAgc2VjdXJlOiB0aGlzLm9wdGlvbnMuc2VjdXJlLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgQ29va2llU3RvcmFnZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBqYXIuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9hID0gSlNPTi5wYXJzZSh2YWx1ZSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCA/IHZhbHVlIDogbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb29raWVTdG9yYWdlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgamFyLnNldChrZXksIHZhbHVlLCB0aGlzLm9wdHMoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGphci5yZW1vdmUoa2V5LCB0aGlzLm9wdHMoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBqYXIuc2V0KGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpLCB0aGlzLm9wdHMoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvb2tpZVN0b3JhZ2UucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGphci5yZW1vdmUoa2V5LCB0aGlzLm9wdHMoKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29va2llU3RvcmFnZTtcbn0oKSk7XG5leHBvcnQgeyBDb29raWVTdG9yYWdlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb29raWVTdG9yYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CookieStorage: () => (/* reexport safe */ _cookieStorage__WEBPACK_IMPORTED_MODULE_2__.CookieStorage),\n/* harmony export */   LocalStorage: () => (/* reexport safe */ _localStorage__WEBPACK_IMPORTED_MODULE_1__.LocalStorage),\n/* harmony export */   MemoryStorage: () => (/* reexport safe */ _memoryStorage__WEBPACK_IMPORTED_MODULE_3__.MemoryStorage),\n/* harmony export */   StoreType: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_0__.StoreType),\n/* harmony export */   UniversalStorage: () => (/* reexport safe */ _universalStorage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage),\n/* harmony export */   applyCookieOptions: () => (/* binding */ applyCookieOptions),\n/* harmony export */   initializeStorages: () => (/* binding */ initializeStorages),\n/* harmony export */   isArrayOfStoreType: () => (/* reexport safe */ _settings__WEBPACK_IMPORTED_MODULE_5__.isArrayOfStoreType),\n/* harmony export */   isStoreTypeWithSettings: () => (/* reexport safe */ _settings__WEBPACK_IMPORTED_MODULE_5__.isStoreTypeWithSettings)\n/* harmony export */ });\n/* harmony import */ var _cookieStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cookieStorage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\");\n/* harmony import */ var _localStorage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./localStorage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js\");\n/* harmony import */ var _memoryStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./memoryStorage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./settings */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _universalStorage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./universalStorage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Creates multiple storage systems from an array of StoreType and options\n * @param args StoreType and options\n * @returns Storage array\n */\nfunction initializeStorages(args) {\n    var storages = args.map(function (s) {\n        var type;\n        var settings;\n        if ((0,_settings__WEBPACK_IMPORTED_MODULE_5__.isStoreTypeWithSettings)(s)) {\n            type = s.name;\n            settings = s.settings;\n        }\n        else {\n            type = s;\n        }\n        switch (type) {\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Cookie:\n                return new _cookieStorage__WEBPACK_IMPORTED_MODULE_2__.CookieStorage(settings);\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.LocalStorage:\n                return new _localStorage__WEBPACK_IMPORTED_MODULE_1__.LocalStorage();\n            case _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Memory:\n                return new _memoryStorage__WEBPACK_IMPORTED_MODULE_3__.MemoryStorage();\n            default:\n                throw new Error(\"Unknown Store Type: \".concat(s));\n        }\n    });\n    return storages;\n}\n/**\n * Injects the CookieOptions into a the arguments for initializeStorage\n * @param storeTypes list of storeType\n * @param cookieOptions cookie Options\n * @returns arguments for initializeStorage\n */\nfunction applyCookieOptions(storeTypes, cookieOptions) {\n    return storeTypes.map(function (s) {\n        if (cookieOptions && s === _types__WEBPACK_IMPORTED_MODULE_0__.StoreType.Cookie) {\n            return {\n                name: s,\n                settings: cookieOptions,\n            };\n        }\n        return s;\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDRjtBQUNFO0FBQ0s7QUFDakI7QUFDWjtBQUNPO0FBQ0M7QUFDQTtBQUNHO0FBQ1I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrRUFBdUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkNBQVM7QUFDMUIsMkJBQTJCLHlEQUFhO0FBQ3hDLGlCQUFpQiw2Q0FBUztBQUMxQiwyQkFBMkIsdURBQVk7QUFDdkMsaUJBQWlCLDZDQUFTO0FBQzFCLDJCQUEyQix5REFBYTtBQUN4QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxtQ0FBbUMsNkNBQVM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL2luZGV4LmpzPzBmYmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29va2llU3RvcmFnZSB9IGZyb20gJy4vY29va2llU3RvcmFnZSc7XG5pbXBvcnQgeyBMb2NhbFN0b3JhZ2UgfSBmcm9tICcuL2xvY2FsU3RvcmFnZSc7XG5pbXBvcnQgeyBNZW1vcnlTdG9yYWdlIH0gZnJvbSAnLi9tZW1vcnlTdG9yYWdlJztcbmltcG9ydCB7IGlzU3RvcmVUeXBlV2l0aFNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBTdG9yZVR5cGUgfSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9sb2NhbFN0b3JhZ2UnO1xuZXhwb3J0ICogZnJvbSAnLi9jb29raWVTdG9yYWdlJztcbmV4cG9ydCAqIGZyb20gJy4vbWVtb3J5U3RvcmFnZSc7XG5leHBvcnQgKiBmcm9tICcuL3VuaXZlcnNhbFN0b3JhZ2UnO1xuZXhwb3J0ICogZnJvbSAnLi9zZXR0aW5ncyc7XG4vKipcbiAqIENyZWF0ZXMgbXVsdGlwbGUgc3RvcmFnZSBzeXN0ZW1zIGZyb20gYW4gYXJyYXkgb2YgU3RvcmVUeXBlIGFuZCBvcHRpb25zXG4gKiBAcGFyYW0gYXJncyBTdG9yZVR5cGUgYW5kIG9wdGlvbnNcbiAqIEByZXR1cm5zIFN0b3JhZ2UgYXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVTdG9yYWdlcyhhcmdzKSB7XG4gICAgdmFyIHN0b3JhZ2VzID0gYXJncy5tYXAoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgIHZhciBzZXR0aW5ncztcbiAgICAgICAgaWYgKGlzU3RvcmVUeXBlV2l0aFNldHRpbmdzKHMpKSB7XG4gICAgICAgICAgICB0eXBlID0gcy5uYW1lO1xuICAgICAgICAgICAgc2V0dGluZ3MgPSBzLnNldHRpbmdzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHlwZSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFN0b3JlVHlwZS5Db29raWU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb29raWVTdG9yYWdlKHNldHRpbmdzKTtcbiAgICAgICAgICAgIGNhc2UgU3RvcmVUeXBlLkxvY2FsU3RvcmFnZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExvY2FsU3RvcmFnZSgpO1xuICAgICAgICAgICAgY2FzZSBTdG9yZVR5cGUuTWVtb3J5OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWVtb3J5U3RvcmFnZSgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIFN0b3JlIFR5cGU6IFwiLmNvbmNhdChzKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc3RvcmFnZXM7XG59XG4vKipcbiAqIEluamVjdHMgdGhlIENvb2tpZU9wdGlvbnMgaW50byBhIHRoZSBhcmd1bWVudHMgZm9yIGluaXRpYWxpemVTdG9yYWdlXG4gKiBAcGFyYW0gc3RvcmVUeXBlcyBsaXN0IG9mIHN0b3JlVHlwZVxuICogQHBhcmFtIGNvb2tpZU9wdGlvbnMgY29va2llIE9wdGlvbnNcbiAqIEByZXR1cm5zIGFyZ3VtZW50cyBmb3IgaW5pdGlhbGl6ZVN0b3JhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5Q29va2llT3B0aW9ucyhzdG9yZVR5cGVzLCBjb29raWVPcHRpb25zKSB7XG4gICAgcmV0dXJuIHN0b3JlVHlwZXMubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIGlmIChjb29raWVPcHRpb25zICYmIHMgPT09IFN0b3JlVHlwZS5Db29raWUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogcyxcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogY29va2llT3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalStorage: () => (/* binding */ LocalStorage)\n/* harmony export */ });\n/**\n * Data storage using browser's localStorage\n */\nvar LocalStorage = /** @class */ (function () {\n    function LocalStorage() {\n    }\n    LocalStorage.prototype.localStorageWarning = function (key, state) {\n        console.warn(\"Unable to access \".concat(key, \", localStorage may be \").concat(state));\n    };\n    LocalStorage.prototype.get = function (key) {\n        var _a;\n        try {\n            var val = localStorage.getItem(key);\n            if (val === null) {\n                return null;\n            }\n            try {\n                return (_a = JSON.parse(val)) !== null && _a !== void 0 ? _a : null;\n            }\n            catch (e) {\n                return (val !== null && val !== void 0 ? val : null);\n            }\n        }\n        catch (err) {\n            this.localStorageWarning(key, 'unavailable');\n            return null;\n        }\n    };\n    LocalStorage.prototype.set = function (key, value) {\n        try {\n            localStorage.setItem(key, JSON.stringify(value));\n        }\n        catch (_a) {\n            this.localStorageWarning(key, 'full');\n        }\n    };\n    LocalStorage.prototype.remove = function (key) {\n        try {\n            return localStorage.removeItem(key);\n        }\n        catch (err) {\n            this.localStorageWarning(key, 'unavailable');\n        }\n    };\n    return LocalStorage;\n}());\n\n//# sourceMappingURL=localStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9sb2NhbFN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDdUI7QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvY29yZS9zdG9yYWdlL2xvY2FsU3RvcmFnZS5qcz9kMGE2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YSBzdG9yYWdlIHVzaW5nIGJyb3dzZXIncyBsb2NhbFN0b3JhZ2VcbiAqL1xudmFyIExvY2FsU3RvcmFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2NhbFN0b3JhZ2UoKSB7XG4gICAgfVxuICAgIExvY2FsU3RvcmFnZS5wcm90b3R5cGUubG9jYWxTdG9yYWdlV2FybmluZyA9IGZ1bmN0aW9uIChrZXksIHN0YXRlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlVuYWJsZSB0byBhY2Nlc3MgXCIuY29uY2F0KGtleSwgXCIsIGxvY2FsU3RvcmFnZSBtYXkgYmUgXCIpLmNvbmNhdChzdGF0ZSkpO1xuICAgIH07XG4gICAgTG9jYWxTdG9yYWdlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB2YWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9hID0gSlNPTi5wYXJzZSh2YWwpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbCAhPT0gbnVsbCAmJiB2YWwgIT09IHZvaWQgMCA/IHZhbCA6IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yYWdlV2FybmluZyhrZXksICd1bmF2YWlsYWJsZScpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExvY2FsU3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yYWdlV2FybmluZyhrZXksICdmdWxsJyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExvY2FsU3RvcmFnZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5sb2NhbFN0b3JhZ2VXYXJuaW5nKGtleSwgJ3VuYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBMb2NhbFN0b3JhZ2U7XG59KCkpO1xuZXhwb3J0IHsgTG9jYWxTdG9yYWdlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2NhbFN0b3JhZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MemoryStorage: () => (/* binding */ MemoryStorage)\n/* harmony export */ });\n/**\n * Data Storage using in memory object\n */\nvar MemoryStorage = /** @class */ (function () {\n    function MemoryStorage() {\n        this.cache = {};\n    }\n    MemoryStorage.prototype.get = function (key) {\n        var _a;\n        return ((_a = this.cache[key]) !== null && _a !== void 0 ? _a : null);\n    };\n    MemoryStorage.prototype.set = function (key, value) {\n        this.cache[key] = value;\n    };\n    MemoryStorage.prototype.remove = function (key) {\n        delete this.cache[key];\n    };\n    return MemoryStorage;\n}());\n\n//# sourceMappingURL=memoryStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9tZW1vcnlTdG9yYWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3dCO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9tZW1vcnlTdG9yYWdlLmpzPzE3YzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEYXRhIFN0b3JhZ2UgdXNpbmcgaW4gbWVtb3J5IG9iamVjdFxuICovXG52YXIgTWVtb3J5U3RvcmFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNZW1vcnlTdG9yYWdlKCkge1xuICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgfVxuICAgIE1lbW9yeVN0b3JhZ2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuY2FjaGVba2V5XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbCk7XG4gICAgfTtcbiAgICBNZW1vcnlTdG9yYWdlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmNhY2hlW2tleV0gPSB2YWx1ZTtcbiAgICB9O1xuICAgIE1lbW9yeVN0b3JhZ2UucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuY2FjaGVba2V5XTtcbiAgICB9O1xuICAgIHJldHVybiBNZW1vcnlTdG9yYWdlO1xufSgpKTtcbmV4cG9ydCB7IE1lbW9yeVN0b3JhZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbW9yeVN0b3JhZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isArrayOfStoreType: () => (/* binding */ isArrayOfStoreType),\n/* harmony export */   isStoreTypeWithSettings: () => (/* binding */ isStoreTypeWithSettings)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n\nfunction isArrayOfStoreType(s) {\n    return (s &&\n        s.stores &&\n        Array.isArray(s.stores) &&\n        s.stores.every(function (e) { return Object.values(_types__WEBPACK_IMPORTED_MODULE_0__.StoreType).includes(e); }));\n}\nfunction isStoreTypeWithSettings(s) {\n    return typeof s === 'object' && s.name !== undefined;\n}\n//# sourceMappingURL=settings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9zZXR0aW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0M7QUFDN0I7QUFDUDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUJBQXFCLDZDQUFTLGdCQUFnQjtBQUNwRjtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS9zZXR0aW5ncy5qcz80NTdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JlVHlwZSB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXlPZlN0b3JlVHlwZShzKSB7XG4gICAgcmV0dXJuIChzICYmXG4gICAgICAgIHMuc3RvcmVzICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkocy5zdG9yZXMpICYmXG4gICAgICAgIHMuc3RvcmVzLmV2ZXJ5KGZ1bmN0aW9uIChlKSB7IHJldHVybiBPYmplY3QudmFsdWVzKFN0b3JlVHlwZSkuaW5jbHVkZXMoZSk7IH0pKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1N0b3JlVHlwZVdpdGhTZXR0aW5ncyhzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzID09PSAnb2JqZWN0JyAmJiBzLm5hbWUgIT09IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldHRpbmdzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreType: () => (/* binding */ StoreType)\n/* harmony export */ });\nvar StoreType = {\n    Cookie: 'cookie',\n    LocalStorage: 'localStorage',\n    Memory: 'memory',\n};\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS90eXBlcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS90eXBlcy5qcz80ZWRmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgU3RvcmVUeXBlID0ge1xuICAgIENvb2tpZTogJ2Nvb2tpZScsXG4gICAgTG9jYWxTdG9yYWdlOiAnbG9jYWxTdG9yYWdlJyxcbiAgICBNZW1vcnk6ICdtZW1vcnknLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UniversalStorage: () => (/* binding */ UniversalStorage)\n/* harmony export */ });\n// not adding to private method because those method names do not get minified atm, and does not use 'this'\nvar _logStoreKeyError = function (store, action, key, err) {\n    console.warn(\"\".concat(store.constructor.name, \": Can't \").concat(action, \" key \\\"\").concat(key, \"\\\" | Err: \").concat(err));\n};\n/**\n * Uses multiple storages in a priority list to get/set values in the order they are specified.\n */\nvar UniversalStorage = /** @class */ (function () {\n    function UniversalStorage(stores) {\n        this.stores = stores;\n    }\n    UniversalStorage.prototype.get = function (key) {\n        var val = null;\n        for (var _i = 0, _a = this.stores; _i < _a.length; _i++) {\n            var store = _a[_i];\n            try {\n                val = store.get(key);\n                if (val !== undefined && val !== null) {\n                    return val;\n                }\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'get', key, e);\n            }\n        }\n        return null;\n    };\n    UniversalStorage.prototype.set = function (key, value) {\n        this.stores.forEach(function (store) {\n            try {\n                store.set(key, value);\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'set', key, e);\n            }\n        });\n    };\n    UniversalStorage.prototype.clear = function (key) {\n        this.stores.forEach(function (store) {\n            try {\n                store.remove(key);\n            }\n            catch (e) {\n                _logStoreKeyError(store, 'remove', key, e);\n            }\n        });\n    };\n    /*\n      This is to support few scenarios where:\n      - value exist in one of the stores ( as a result of other stores being cleared from browser ) and we want to resync them\n      - read values in AJS 1.0 format ( for customers after 1.0 --> 2.0 migration ) and then re-write them in AJS 2.0 format\n    */\n    UniversalStorage.prototype.getAndSync = function (key) {\n        var val = this.get(key);\n        // legacy behavior, getAndSync can change the type of a value from number to string (AJS 1.0 stores numerical values as a number)\n        var coercedValue = (typeof val === 'number' ? val.toString() : val);\n        this.set(key, coercedValue);\n        return coercedValue;\n    };\n    return UniversalStorage;\n}());\n\n//# sourceMappingURL=universalStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvc3RvcmFnZS91bml2ZXJzYWxTdG9yYWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxnQkFBZ0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUMyQjtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3N0b3JhZ2UvdW5pdmVyc2FsU3RvcmFnZS5qcz82MjY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIG5vdCBhZGRpbmcgdG8gcHJpdmF0ZSBtZXRob2QgYmVjYXVzZSB0aG9zZSBtZXRob2QgbmFtZXMgZG8gbm90IGdldCBtaW5pZmllZCBhdG0sIGFuZCBkb2VzIG5vdCB1c2UgJ3RoaXMnXG52YXIgX2xvZ1N0b3JlS2V5RXJyb3IgPSBmdW5jdGlvbiAoc3RvcmUsIGFjdGlvbiwga2V5LCBlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJcIi5jb25jYXQoc3RvcmUuY29uc3RydWN0b3IubmFtZSwgXCI6IENhbid0IFwiKS5jb25jYXQoYWN0aW9uLCBcIiBrZXkgXFxcIlwiKS5jb25jYXQoa2V5LCBcIlxcXCIgfCBFcnI6IFwiKS5jb25jYXQoZXJyKSk7XG59O1xuLyoqXG4gKiBVc2VzIG11bHRpcGxlIHN0b3JhZ2VzIGluIGEgcHJpb3JpdHkgbGlzdCB0byBnZXQvc2V0IHZhbHVlcyBpbiB0aGUgb3JkZXIgdGhleSBhcmUgc3BlY2lmaWVkLlxuICovXG52YXIgVW5pdmVyc2FsU3RvcmFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVbml2ZXJzYWxTdG9yYWdlKHN0b3Jlcykge1xuICAgICAgICB0aGlzLnN0b3JlcyA9IHN0b3JlcztcbiAgICB9XG4gICAgVW5pdmVyc2FsU3RvcmFnZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuc3RvcmVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gX2FbX2ldO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWwgPSBzdG9yZS5nZXQoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAodmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfbG9nU3RvcmVLZXlFcnJvcihzdG9yZSwgJ2dldCcsIGtleSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBVbml2ZXJzYWxTdG9yYWdlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnN0b3Jlcy5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdG9yZS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9sb2dTdG9yZUtleUVycm9yKHN0b3JlLCAnc2V0Jywga2V5LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBVbml2ZXJzYWxTdG9yYWdlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdGhpcy5zdG9yZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RvcmUucmVtb3ZlKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9sb2dTdG9yZUtleUVycm9yKHN0b3JlLCAncmVtb3ZlJywga2V5LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKlxuICAgICAgVGhpcyBpcyB0byBzdXBwb3J0IGZldyBzY2VuYXJpb3Mgd2hlcmU6XG4gICAgICAtIHZhbHVlIGV4aXN0IGluIG9uZSBvZiB0aGUgc3RvcmVzICggYXMgYSByZXN1bHQgb2Ygb3RoZXIgc3RvcmVzIGJlaW5nIGNsZWFyZWQgZnJvbSBicm93c2VyICkgYW5kIHdlIHdhbnQgdG8gcmVzeW5jIHRoZW1cbiAgICAgIC0gcmVhZCB2YWx1ZXMgaW4gQUpTIDEuMCBmb3JtYXQgKCBmb3IgY3VzdG9tZXJzIGFmdGVyIDEuMCAtLT4gMi4wIG1pZ3JhdGlvbiApIGFuZCB0aGVuIHJlLXdyaXRlIHRoZW0gaW4gQUpTIDIuMCBmb3JtYXRcbiAgICAqL1xuICAgIFVuaXZlcnNhbFN0b3JhZ2UucHJvdG90eXBlLmdldEFuZFN5bmMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWwgPSB0aGlzLmdldChrZXkpO1xuICAgICAgICAvLyBsZWdhY3kgYmVoYXZpb3IsIGdldEFuZFN5bmMgY2FuIGNoYW5nZSB0aGUgdHlwZSBvZiBhIHZhbHVlIGZyb20gbnVtYmVyIHRvIHN0cmluZyAoQUpTIDEuMCBzdG9yZXMgbnVtZXJpY2FsIHZhbHVlcyBhcyBhIG51bWJlcilcbiAgICAgICAgdmFyIGNvZXJjZWRWYWx1ZSA9ICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJyA/IHZhbC50b1N0cmluZygpIDogdmFsKTtcbiAgICAgICAgdGhpcy5zZXQoa2V5LCBjb2VyY2VkVmFsdWUpO1xuICAgICAgICByZXR1cm4gY29lcmNlZFZhbHVlO1xuICAgIH07XG4gICAgcmV0dXJuIFVuaXZlcnNhbFN0b3JhZ2U7XG59KCkpO1xuZXhwb3J0IHsgVW5pdmVyc2FsU3RvcmFnZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pdmVyc2FsU3RvcmFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/user/index.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/user/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Group: () => (/* binding */ Group),\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(ssr)/../node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var _lib_bind_all__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/bind-all */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js\");\n\n\n\n\nvar defaults = {\n    persist: true,\n    cookie: {\n        key: 'ajs_user_id',\n        oldKey: 'ajs_user',\n    },\n    localStorage: {\n        key: 'ajs_user_traits',\n    },\n};\nvar User = /** @class */ (function () {\n    function User(options, cookieOptions) {\n        if (options === void 0) { options = defaults; }\n        var _this = this;\n        var _a, _b, _c, _d;\n        this.options = {};\n        this.id = function (id) {\n            if (_this.options.disable) {\n                return null;\n            }\n            var prevId = _this.identityStore.getAndSync(_this.idKey);\n            if (id !== undefined) {\n                _this.identityStore.set(_this.idKey, id);\n                var changingIdentity = id !== prevId && prevId !== null && id !== null;\n                if (changingIdentity) {\n                    _this.anonymousId(null);\n                }\n            }\n            var retId = _this.identityStore.getAndSync(_this.idKey);\n            if (retId)\n                return retId;\n            var retLeg = _this.legacyUserStore.get(defaults.cookie.oldKey);\n            return retLeg ? (typeof retLeg === 'object' ? retLeg.id : retLeg) : null;\n        };\n        this.anonymousId = function (id) {\n            var _a, _b;\n            if (_this.options.disable) {\n                return null;\n            }\n            if (id === undefined) {\n                var val = (_a = _this.identityStore.getAndSync(_this.anonKey)) !== null && _a !== void 0 ? _a : (_b = _this.legacySIO()) === null || _b === void 0 ? void 0 : _b[0];\n                if (val) {\n                    return val;\n                }\n            }\n            if (id === null) {\n                _this.identityStore.set(_this.anonKey, null);\n                return _this.identityStore.getAndSync(_this.anonKey);\n            }\n            _this.identityStore.set(_this.anonKey, id !== null && id !== void 0 ? id : (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)());\n            return _this.identityStore.getAndSync(_this.anonKey);\n        };\n        this.traits = function (traits) {\n            var _a;\n            if (_this.options.disable) {\n                return;\n            }\n            if (traits === null) {\n                traits = {};\n            }\n            if (traits) {\n                _this.traitsStore.set(_this.traitsKey, traits !== null && traits !== void 0 ? traits : {});\n            }\n            return (_a = _this.traitsStore.get(_this.traitsKey)) !== null && _a !== void 0 ? _a : {};\n        };\n        this.options = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, defaults), options);\n        this.cookieOptions = cookieOptions;\n        this.idKey = (_b = (_a = options.cookie) === null || _a === void 0 ? void 0 : _a.key) !== null && _b !== void 0 ? _b : defaults.cookie.key;\n        this.traitsKey = (_d = (_c = options.localStorage) === null || _c === void 0 ? void 0 : _c.key) !== null && _d !== void 0 ? _d : defaults.localStorage.key;\n        this.anonKey = 'ajs_anonymous_id';\n        this.identityStore = this.createStorage(this.options, cookieOptions);\n        // using only cookies for legacy user store\n        this.legacyUserStore = this.createStorage(this.options, cookieOptions, function (s) { return s === _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie; });\n        // using only localStorage / memory for traits store\n        this.traitsStore = this.createStorage(this.options, cookieOptions, function (s) { return s !== _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie; });\n        var legacyUser = this.legacyUserStore.get(defaults.cookie.oldKey);\n        if (legacyUser && typeof legacyUser === 'object') {\n            legacyUser.id && this.id(legacyUser.id);\n            legacyUser.traits && this.traits(legacyUser.traits);\n        }\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this);\n    }\n    User.prototype.legacySIO = function () {\n        var val = this.legacyUserStore.get('_sio');\n        if (!val) {\n            return null;\n        }\n        var _a = val.split('----'), anon = _a[0], user = _a[1];\n        return [anon, user];\n    };\n    User.prototype.identify = function (id, traits) {\n        if (this.options.disable) {\n            return;\n        }\n        traits = traits !== null && traits !== void 0 ? traits : {};\n        var currentId = this.id();\n        if (currentId === null || currentId === id) {\n            traits = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.traits()), traits);\n        }\n        if (id) {\n            this.id(id);\n        }\n        this.traits(traits);\n    };\n    User.prototype.logout = function () {\n        this.anonymousId(null);\n        this.id(null);\n        this.traits({});\n    };\n    User.prototype.reset = function () {\n        this.logout();\n        this.identityStore.clear(this.idKey);\n        this.identityStore.clear(this.anonKey);\n        this.traitsStore.clear(this.traitsKey);\n    };\n    User.prototype.load = function () {\n        return new User(this.options, this.cookieOptions);\n    };\n    User.prototype.save = function () {\n        return true;\n    };\n    /**\n     * Creates the right storage system applying all the user options, cookie options and particular filters\n     * @param options UserOptions\n     * @param cookieOpts CookieOptions\n     * @param filterStores filter function to apply to any StoreTypes (skipped if options specify using a custom storage)\n     * @returns a Storage object\n     */\n    User.prototype.createStorage = function (options, cookieOpts, filterStores) {\n        var stores = [\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.LocalStorage,\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Cookie,\n            _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.Memory,\n        ];\n        // If disabled we won't have any storage functionality\n        if (options.disable) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage([]);\n        }\n        // If persistance is disabled we will always fallback to Memory Storage\n        if (!options.persist) {\n            return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage([new _storage__WEBPACK_IMPORTED_MODULE_5__.MemoryStorage()]);\n        }\n        if (options.storage !== undefined && options.storage !== null) {\n            if ((0,_storage__WEBPACK_IMPORTED_MODULE_6__.isArrayOfStoreType)(options.storage)) {\n                // If the user only specified order of stores we will still apply filters and transformations e.g. not using localStorage if localStorageFallbackDisabled\n                stores = options.storage.stores;\n            }\n        }\n        // Disable LocalStorage\n        if (options.localStorageFallbackDisabled) {\n            stores = stores.filter(function (s) { return s !== _storage__WEBPACK_IMPORTED_MODULE_2__.StoreType.LocalStorage; });\n        }\n        // Apply Additional filters\n        if (filterStores) {\n            stores = stores.filter(filterStores);\n        }\n        return new _storage__WEBPACK_IMPORTED_MODULE_4__.UniversalStorage((0,_storage__WEBPACK_IMPORTED_MODULE_7__.initializeStorages)((0,_storage__WEBPACK_IMPORTED_MODULE_7__.applyCookieOptions)(stores, cookieOpts)));\n    };\n    User.defaults = defaults;\n    return User;\n}());\n\nvar groupDefaults = {\n    persist: true,\n    cookie: {\n        key: 'ajs_group_id',\n    },\n    localStorage: {\n        key: 'ajs_group_properties',\n    },\n};\nvar Group = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__extends)(Group, _super);\n    function Group(options, cookie) {\n        if (options === void 0) { options = groupDefaults; }\n        var _this = _super.call(this, (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, groupDefaults), options), cookie) || this;\n        _this.anonymousId = function (_id) {\n            return undefined;\n        };\n        (0,_lib_bind_all__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this);\n        return _this;\n    }\n    return Group;\n}(User));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvdXNlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ0Y7QUFDQTtBQUMyRjtBQUNySTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RixnREFBSTtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUdBQXlHO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEZBQThGLGFBQWEsK0NBQVMsVUFBVTtBQUM5SDtBQUNBLDBGQUEwRixhQUFhLCtDQUFTLFVBQVU7QUFDMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0NBQVM7QUFDckIsWUFBWSwrQ0FBUztBQUNyQixZQUFZLCtDQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzREFBZ0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFnQixNQUFNLG1EQUFhO0FBQzFEO0FBQ0E7QUFDQSxnQkFBZ0IsNERBQWtCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxhQUFhLCtDQUFTLGdCQUFnQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFnQixDQUFDLDREQUFrQixDQUFDLDREQUFrQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ2U7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0Esa0NBQWtDO0FBQ2xDLHNDQUFzQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ2dCO0FBQ2pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvdXNlci9pbmRleC5qcz82NThlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduLCBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICdAbHVrZWVkL3V1aWQnO1xuaW1wb3J0IGF1dG9CaW5kIGZyb20gJy4uLy4uL2xpYi9iaW5kLWFsbCc7XG5pbXBvcnQgeyBVbml2ZXJzYWxTdG9yYWdlLCBNZW1vcnlTdG9yYWdlLCBTdG9yZVR5cGUsIGFwcGx5Q29va2llT3B0aW9ucywgaW5pdGlhbGl6ZVN0b3JhZ2VzLCBpc0FycmF5T2ZTdG9yZVR5cGUsIH0gZnJvbSAnLi4vc3RvcmFnZSc7XG52YXIgZGVmYXVsdHMgPSB7XG4gICAgcGVyc2lzdDogdHJ1ZSxcbiAgICBjb29raWU6IHtcbiAgICAgICAga2V5OiAnYWpzX3VzZXJfaWQnLFxuICAgICAgICBvbGRLZXk6ICdhanNfdXNlcicsXG4gICAgfSxcbiAgICBsb2NhbFN0b3JhZ2U6IHtcbiAgICAgICAga2V5OiAnYWpzX3VzZXJfdHJhaXRzJyxcbiAgICB9LFxufTtcbnZhciBVc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFVzZXIob3B0aW9ucywgY29va2llT3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSBkZWZhdWx0czsgfVxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLmlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5kaXNhYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldklkID0gX3RoaXMuaWRlbnRpdHlTdG9yZS5nZXRBbmRTeW5jKF90aGlzLmlkS2V5KTtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaWRlbnRpdHlTdG9yZS5zZXQoX3RoaXMuaWRLZXksIGlkKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdpbmdJZGVudGl0eSA9IGlkICE9PSBwcmV2SWQgJiYgcHJldklkICE9PSBudWxsICYmIGlkICE9PSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2luZ0lkZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFub255bW91c0lkKG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXRJZCA9IF90aGlzLmlkZW50aXR5U3RvcmUuZ2V0QW5kU3luYyhfdGhpcy5pZEtleSk7XG4gICAgICAgICAgICBpZiAocmV0SWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldElkO1xuICAgICAgICAgICAgdmFyIHJldExlZyA9IF90aGlzLmxlZ2FjeVVzZXJTdG9yZS5nZXQoZGVmYXVsdHMuY29va2llLm9sZEtleSk7XG4gICAgICAgICAgICByZXR1cm4gcmV0TGVnID8gKHR5cGVvZiByZXRMZWcgPT09ICdvYmplY3QnID8gcmV0TGVnLmlkIDogcmV0TGVnKSA6IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYW5vbnltb3VzSWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5kaXNhYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSAoX2EgPSBfdGhpcy5pZGVudGl0eVN0b3JlLmdldEFuZFN5bmMoX3RoaXMuYW5vbktleSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChfYiA9IF90aGlzLmxlZ2FjeVNJTygpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbMF07XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmlkZW50aXR5U3RvcmUuc2V0KF90aGlzLmFub25LZXksIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5pZGVudGl0eVN0b3JlLmdldEFuZFN5bmMoX3RoaXMuYW5vbktleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5pZGVudGl0eVN0b3JlLnNldChfdGhpcy5hbm9uS2V5LCBpZCAhPT0gbnVsbCAmJiBpZCAhPT0gdm9pZCAwID8gaWQgOiB1dWlkKCkpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmlkZW50aXR5U3RvcmUuZ2V0QW5kU3luYyhfdGhpcy5hbm9uS2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmFpdHMgPSBmdW5jdGlvbiAodHJhaXRzKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5kaXNhYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYWl0cyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRyYWl0cyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYWl0cykge1xuICAgICAgICAgICAgICAgIF90aGlzLnRyYWl0c1N0b3JlLnNldChfdGhpcy50cmFpdHNLZXksIHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoX2EgPSBfdGhpcy50cmFpdHNTdG9yZS5nZXQoX3RoaXMudHJhaXRzS2V5KSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZWZhdWx0cyksIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNvb2tpZU9wdGlvbnMgPSBjb29raWVPcHRpb25zO1xuICAgICAgICB0aGlzLmlkS2V5ID0gKF9iID0gKF9hID0gb3B0aW9ucy5jb29raWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5rZXkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRlZmF1bHRzLmNvb2tpZS5rZXk7XG4gICAgICAgIHRoaXMudHJhaXRzS2V5ID0gKF9kID0gKF9jID0gb3B0aW9ucy5sb2NhbFN0b3JhZ2UpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5rZXkpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGRlZmF1bHRzLmxvY2FsU3RvcmFnZS5rZXk7XG4gICAgICAgIHRoaXMuYW5vbktleSA9ICdhanNfYW5vbnltb3VzX2lkJztcbiAgICAgICAgdGhpcy5pZGVudGl0eVN0b3JlID0gdGhpcy5jcmVhdGVTdG9yYWdlKHRoaXMub3B0aW9ucywgY29va2llT3B0aW9ucyk7XG4gICAgICAgIC8vIHVzaW5nIG9ubHkgY29va2llcyBmb3IgbGVnYWN5IHVzZXIgc3RvcmVcbiAgICAgICAgdGhpcy5sZWdhY3lVc2VyU3RvcmUgPSB0aGlzLmNyZWF0ZVN0b3JhZ2UodGhpcy5vcHRpb25zLCBjb29raWVPcHRpb25zLCBmdW5jdGlvbiAocykgeyByZXR1cm4gcyA9PT0gU3RvcmVUeXBlLkNvb2tpZTsgfSk7XG4gICAgICAgIC8vIHVzaW5nIG9ubHkgbG9jYWxTdG9yYWdlIC8gbWVtb3J5IGZvciB0cmFpdHMgc3RvcmVcbiAgICAgICAgdGhpcy50cmFpdHNTdG9yZSA9IHRoaXMuY3JlYXRlU3RvcmFnZSh0aGlzLm9wdGlvbnMsIGNvb2tpZU9wdGlvbnMsIGZ1bmN0aW9uIChzKSB7IHJldHVybiBzICE9PSBTdG9yZVR5cGUuQ29va2llOyB9KTtcbiAgICAgICAgdmFyIGxlZ2FjeVVzZXIgPSB0aGlzLmxlZ2FjeVVzZXJTdG9yZS5nZXQoZGVmYXVsdHMuY29va2llLm9sZEtleSk7XG4gICAgICAgIGlmIChsZWdhY3lVc2VyICYmIHR5cGVvZiBsZWdhY3lVc2VyID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgbGVnYWN5VXNlci5pZCAmJiB0aGlzLmlkKGxlZ2FjeVVzZXIuaWQpO1xuICAgICAgICAgICAgbGVnYWN5VXNlci50cmFpdHMgJiYgdGhpcy50cmFpdHMobGVnYWN5VXNlci50cmFpdHMpO1xuICAgICAgICB9XG4gICAgICAgIGF1dG9CaW5kKHRoaXMpO1xuICAgIH1cbiAgICBVc2VyLnByb3RvdHlwZS5sZWdhY3lTSU8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWwgPSB0aGlzLmxlZ2FjeVVzZXJTdG9yZS5nZXQoJ19zaW8nKTtcbiAgICAgICAgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHZhbC5zcGxpdCgnLS0tLScpLCBhbm9uID0gX2FbMF0sIHVzZXIgPSBfYVsxXTtcbiAgICAgICAgcmV0dXJuIFthbm9uLCB1c2VyXTtcbiAgICB9O1xuICAgIFVzZXIucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKGlkLCB0cmFpdHMpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJhaXRzID0gdHJhaXRzICE9PSBudWxsICYmIHRyYWl0cyAhPT0gdm9pZCAwID8gdHJhaXRzIDoge307XG4gICAgICAgIHZhciBjdXJyZW50SWQgPSB0aGlzLmlkKCk7XG4gICAgICAgIGlmIChjdXJyZW50SWQgPT09IG51bGwgfHwgY3VycmVudElkID09PSBpZCkge1xuICAgICAgICAgICAgdHJhaXRzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMudHJhaXRzKCkpLCB0cmFpdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgdGhpcy5pZChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFpdHModHJhaXRzKTtcbiAgICB9O1xuICAgIFVzZXIucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hbm9ueW1vdXNJZChudWxsKTtcbiAgICAgICAgdGhpcy5pZChudWxsKTtcbiAgICAgICAgdGhpcy50cmFpdHMoe30pO1xuICAgIH07XG4gICAgVXNlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHlTdG9yZS5jbGVhcih0aGlzLmlkS2V5KTtcbiAgICAgICAgdGhpcy5pZGVudGl0eVN0b3JlLmNsZWFyKHRoaXMuYW5vbktleSk7XG4gICAgICAgIHRoaXMudHJhaXRzU3RvcmUuY2xlYXIodGhpcy50cmFpdHNLZXkpO1xuICAgIH07XG4gICAgVXNlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyKHRoaXMub3B0aW9ucywgdGhpcy5jb29raWVPcHRpb25zKTtcbiAgICB9O1xuICAgIFVzZXIucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgcmlnaHQgc3RvcmFnZSBzeXN0ZW0gYXBwbHlpbmcgYWxsIHRoZSB1c2VyIG9wdGlvbnMsIGNvb2tpZSBvcHRpb25zIGFuZCBwYXJ0aWN1bGFyIGZpbHRlcnNcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBVc2VyT3B0aW9uc1xuICAgICAqIEBwYXJhbSBjb29raWVPcHRzIENvb2tpZU9wdGlvbnNcbiAgICAgKiBAcGFyYW0gZmlsdGVyU3RvcmVzIGZpbHRlciBmdW5jdGlvbiB0byBhcHBseSB0byBhbnkgU3RvcmVUeXBlcyAoc2tpcHBlZCBpZiBvcHRpb25zIHNwZWNpZnkgdXNpbmcgYSBjdXN0b20gc3RvcmFnZSlcbiAgICAgKiBAcmV0dXJucyBhIFN0b3JhZ2Ugb2JqZWN0XG4gICAgICovXG4gICAgVXNlci5wcm90b3R5cGUuY3JlYXRlU3RvcmFnZSA9IGZ1bmN0aW9uIChvcHRpb25zLCBjb29raWVPcHRzLCBmaWx0ZXJTdG9yZXMpIHtcbiAgICAgICAgdmFyIHN0b3JlcyA9IFtcbiAgICAgICAgICAgIFN0b3JlVHlwZS5Mb2NhbFN0b3JhZ2UsXG4gICAgICAgICAgICBTdG9yZVR5cGUuQ29va2llLFxuICAgICAgICAgICAgU3RvcmVUeXBlLk1lbW9yeSxcbiAgICAgICAgXTtcbiAgICAgICAgLy8gSWYgZGlzYWJsZWQgd2Ugd29uJ3QgaGF2ZSBhbnkgc3RvcmFnZSBmdW5jdGlvbmFsaXR5XG4gICAgICAgIGlmIChvcHRpb25zLmRpc2FibGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW5pdmVyc2FsU3RvcmFnZShbXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgcGVyc2lzdGFuY2UgaXMgZGlzYWJsZWQgd2Ugd2lsbCBhbHdheXMgZmFsbGJhY2sgdG8gTWVtb3J5IFN0b3JhZ2VcbiAgICAgICAgaWYgKCFvcHRpb25zLnBlcnNpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW5pdmVyc2FsU3RvcmFnZShbbmV3IE1lbW9yeVN0b3JhZ2UoKV0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnN0b3JhZ2UgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLnN0b3JhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5T2ZTdG9yZVR5cGUob3B0aW9ucy5zdG9yYWdlKSkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIG9ubHkgc3BlY2lmaWVkIG9yZGVyIG9mIHN0b3JlcyB3ZSB3aWxsIHN0aWxsIGFwcGx5IGZpbHRlcnMgYW5kIHRyYW5zZm9ybWF0aW9ucyBlLmcuIG5vdCB1c2luZyBsb2NhbFN0b3JhZ2UgaWYgbG9jYWxTdG9yYWdlRmFsbGJhY2tEaXNhYmxlZFxuICAgICAgICAgICAgICAgIHN0b3JlcyA9IG9wdGlvbnMuc3RvcmFnZS5zdG9yZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGlzYWJsZSBMb2NhbFN0b3JhZ2VcbiAgICAgICAgaWYgKG9wdGlvbnMubG9jYWxTdG9yYWdlRmFsbGJhY2tEaXNhYmxlZCkge1xuICAgICAgICAgICAgc3RvcmVzID0gc3RvcmVzLmZpbHRlcihmdW5jdGlvbiAocykgeyByZXR1cm4gcyAhPT0gU3RvcmVUeXBlLkxvY2FsU3RvcmFnZTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXBwbHkgQWRkaXRpb25hbCBmaWx0ZXJzXG4gICAgICAgIGlmIChmaWx0ZXJTdG9yZXMpIHtcbiAgICAgICAgICAgIHN0b3JlcyA9IHN0b3Jlcy5maWx0ZXIoZmlsdGVyU3RvcmVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFVuaXZlcnNhbFN0b3JhZ2UoaW5pdGlhbGl6ZVN0b3JhZ2VzKGFwcGx5Q29va2llT3B0aW9ucyhzdG9yZXMsIGNvb2tpZU9wdHMpKSk7XG4gICAgfTtcbiAgICBVc2VyLmRlZmF1bHRzID0gZGVmYXVsdHM7XG4gICAgcmV0dXJuIFVzZXI7XG59KCkpO1xuZXhwb3J0IHsgVXNlciB9O1xudmFyIGdyb3VwRGVmYXVsdHMgPSB7XG4gICAgcGVyc2lzdDogdHJ1ZSxcbiAgICBjb29raWU6IHtcbiAgICAgICAga2V5OiAnYWpzX2dyb3VwX2lkJyxcbiAgICB9LFxuICAgIGxvY2FsU3RvcmFnZToge1xuICAgICAgICBrZXk6ICdhanNfZ3JvdXBfcHJvcGVydGllcycsXG4gICAgfSxcbn07XG52YXIgR3JvdXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdyb3VwLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEdyb3VwKG9wdGlvbnMsIGNvb2tpZSkge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSBncm91cERlZmF1bHRzOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBncm91cERlZmF1bHRzKSwgb3B0aW9ucyksIGNvb2tpZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuYW5vbnltb3VzSWQgPSBmdW5jdGlvbiAoX2lkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBhdXRvQmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEdyb3VwO1xufShVc2VyKSk7XG5leHBvcnQgeyBHcm91cCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/user/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tld: () => (/* binding */ tld)\n/* harmony export */ });\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(ssr)/../node_modules/js-cookie/dist/js.cookie.mjs\");\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {string} url\n * @return {Array}\n * @api public\n */\nfunction levels(url) {\n    var host = url.hostname;\n    var parts = host.split('.');\n    var last = parts[parts.length - 1];\n    var levels = [];\n    // Ip address.\n    if (parts.length === 4 && parseInt(last, 10) > 0) {\n        return levels;\n    }\n    // Localhost.\n    if (parts.length <= 1) {\n        return levels;\n    }\n    // Create levels.\n    for (var i = parts.length - 2; i >= 0; --i) {\n        levels.push(parts.slice(i).join('.'));\n    }\n    return levels;\n}\nfunction parseUrl(url) {\n    try {\n        return new URL(url);\n    }\n    catch (_a) {\n        return;\n    }\n}\nfunction tld(url) {\n    var parsedUrl = parseUrl(url);\n    if (!parsedUrl)\n        return;\n    var lvls = levels(parsedUrl);\n    // Lookup the real top level one.\n    for (var i = 0; i < lvls.length; ++i) {\n        var cname = '__tld__';\n        var domain = lvls[i];\n        var opts = { domain: '.' + domain };\n        try {\n            // cookie access throw an error if the library is ran inside a sandboxed environment (e.g. sandboxed iframe)\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(cname, '1', opts);\n            if (js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(cname)) {\n                js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(cname, opts);\n                return domain;\n            }\n        }\n        catch (_) {\n            return;\n        }\n    }\n}\n//# sourceMappingURL=tld.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2NvcmUvdXNlci90bGQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxRQUFRO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsWUFBWSxpREFBTTtBQUNsQixnQkFBZ0IsaURBQU07QUFDdEIsZ0JBQWdCLGlEQUFNO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9jb3JlL3VzZXIvdGxkLmpzP2Y1MjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvb2tpZSBmcm9tICdqcy1jb29raWUnO1xuLyoqXG4gKiBMZXZlbHMgcmV0dXJucyBhbGwgbGV2ZWxzIG9mIHRoZSBnaXZlbiB1cmwuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBsZXZlbHModXJsKSB7XG4gICAgdmFyIGhvc3QgPSB1cmwuaG9zdG5hbWU7XG4gICAgdmFyIHBhcnRzID0gaG9zdC5zcGxpdCgnLicpO1xuICAgIHZhciBsYXN0ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgdmFyIGxldmVscyA9IFtdO1xuICAgIC8vIElwIGFkZHJlc3MuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gNCAmJiBwYXJzZUludChsYXN0LCAxMCkgPiAwKSB7XG4gICAgICAgIHJldHVybiBsZXZlbHM7XG4gICAgfVxuICAgIC8vIExvY2FsaG9zdC5cbiAgICBpZiAocGFydHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIGxldmVscztcbiAgICB9XG4gICAgLy8gQ3JlYXRlIGxldmVscy5cbiAgICBmb3IgKHZhciBpID0gcGFydHMubGVuZ3RoIC0gMjsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgbGV2ZWxzLnB1c2gocGFydHMuc2xpY2UoaSkuam9pbignLicpKTtcbiAgICB9XG4gICAgcmV0dXJuIGxldmVscztcbn1cbmZ1bmN0aW9uIHBhcnNlVXJsKHVybCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgVVJMKHVybCk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHRsZCh1cmwpIHtcbiAgICB2YXIgcGFyc2VkVXJsID0gcGFyc2VVcmwodXJsKTtcbiAgICBpZiAoIXBhcnNlZFVybClcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBsdmxzID0gbGV2ZWxzKHBhcnNlZFVybCk7XG4gICAgLy8gTG9va3VwIHRoZSByZWFsIHRvcCBsZXZlbCBvbmUuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsdmxzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjbmFtZSA9ICdfX3RsZF9fJztcbiAgICAgICAgdmFyIGRvbWFpbiA9IGx2bHNbaV07XG4gICAgICAgIHZhciBvcHRzID0geyBkb21haW46ICcuJyArIGRvbWFpbiB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gY29va2llIGFjY2VzcyB0aHJvdyBhbiBlcnJvciBpZiB0aGUgbGlicmFyeSBpcyByYW4gaW5zaWRlIGEgc2FuZGJveGVkIGVudmlyb25tZW50IChlLmcuIHNhbmRib3hlZCBpZnJhbWUpXG4gICAgICAgICAgICBjb29raWUuc2V0KGNuYW1lLCAnMScsIG9wdHMpO1xuICAgICAgICAgICAgaWYgKGNvb2tpZS5nZXQoY25hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29va2llLnJlbW92ZShjbmFtZSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbWFpbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGxkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/generated/version.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/generated/version.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n// This file is generated.\nvar version = '1.66.0';\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2dlbmVyYXRlZC92ZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNPO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvZ2VuZXJhdGVkL3ZlcnNpb24uanM/Y2VmZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgZ2VuZXJhdGVkLlxuZXhwb3J0IHZhciB2ZXJzaW9uID0gJzEuNjYuMCc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/generated/version.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js":
/*!************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ bindAll)\n/* harmony export */ });\nfunction bindAll(obj) {\n    var proto = obj.constructor.prototype;\n    for (var _i = 0, _a = Object.getOwnPropertyNames(proto); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key !== 'constructor') {\n            var desc = Object.getOwnPropertyDescriptor(obj.constructor.prototype, key);\n            if (!!desc && typeof desc.value === 'function') {\n                obj[key] = obj[key].bind(obj);\n            }\n        }\n    }\n    return obj;\n}\n//# sourceMappingURL=bind-all.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9iaW5kLWFsbC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQWU7QUFDZjtBQUNBLDZEQUE2RCxnQkFBZ0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvYmluZC1hbGwuanM/OTE0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBiaW5kQWxsKG9iaikge1xuICAgIHZhciBwcm90byA9IG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgaWYgKGtleSAhPT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGtleSk7XG4gICAgICAgICAgICBpZiAoISFkZXNjICYmIHR5cGVvZiBkZXNjLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb2JqW2tleV0gPSBvYmpba2V5XS5iaW5kKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmQtYWxsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientHints: () => (/* binding */ clientHints)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\nfunction clientHints(hints) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var userAgentData;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            userAgentData = navigator.userAgentData;\n            if (!userAgentData)\n                return [2 /*return*/, undefined];\n            if (!hints)\n                return [2 /*return*/, userAgentData.toJSON()];\n            return [2 /*return*/, userAgentData\n                    .getHighEntropyValues(hints)\n                    .catch(function () { return userAgentData.toJSON(); })];\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9jbGllbnQtaGludHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0M7QUFDeEM7QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxnQ0FBZ0M7QUFDekUsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9jbGllbnQtaGludHMvaW5kZXguanM/MTBhYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgZnVuY3Rpb24gY2xpZW50SGludHMoaGludHMpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1c2VyQWdlbnREYXRhO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB1c2VyQWdlbnREYXRhID0gbmF2aWdhdG9yLnVzZXJBZ2VudERhdGE7XG4gICAgICAgICAgICBpZiAoIXVzZXJBZ2VudERhdGEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHVuZGVmaW5lZF07XG4gICAgICAgICAgICBpZiAoIWhpbnRzKVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1c2VyQWdlbnREYXRhLnRvSlNPTigpXTtcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1c2VyQWdlbnREYXRhXG4gICAgICAgICAgICAgICAgICAgIC5nZXRIaWdoRW50cm9weVZhbHVlcyhoaW50cylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVzZXJBZ2VudERhdGEudG9KU09OKCk7IH0pXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   embeddedWriteKey: () => (/* binding */ embeddedWriteKey)\n/* harmony export */ });\n// This variable is used as an optional fallback for when customers\n// host or proxy their own analytics.js.\ntry {\n    window.analyticsWriteKey = '__WRITE_KEY__';\n}\ncatch (_) {\n    // @ eslint-disable-next-line\n}\nfunction embeddedWriteKey() {\n    if (window.analyticsWriteKey === undefined) {\n        return undefined;\n    }\n    // this is done so that we don't accidentally override every reference to __write_key__\n    return window.analyticsWriteKey !== ['__', 'WRITE', '_', 'KEY', '__'].join('')\n        ? window.analyticsWriteKey\n        : undefined;\n}\n//# sourceMappingURL=embedded-write-key.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9lbWJlZGRlZC13cml0ZS1rZXkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvZW1iZWRkZWQtd3JpdGUta2V5LmpzPzhhOTAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyB2YXJpYWJsZSBpcyB1c2VkIGFzIGFuIG9wdGlvbmFsIGZhbGxiYWNrIGZvciB3aGVuIGN1c3RvbWVyc1xuLy8gaG9zdCBvciBwcm94eSB0aGVpciBvd24gYW5hbHl0aWNzLmpzLlxudHJ5IHtcbiAgICB3aW5kb3cuYW5hbHl0aWNzV3JpdGVLZXkgPSAnX19XUklURV9LRVlfXyc7XG59XG5jYXRjaCAoXykge1xuICAgIC8vIEAgZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG59XG5leHBvcnQgZnVuY3Rpb24gZW1iZWRkZWRXcml0ZUtleSgpIHtcbiAgICBpZiAod2luZG93LmFuYWx5dGljc1dyaXRlS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gdGhpcyBpcyBkb25lIHNvIHRoYXQgd2UgZG9uJ3QgYWNjaWRlbnRhbGx5IG92ZXJyaWRlIGV2ZXJ5IHJlZmVyZW5jZSB0byBfX3dyaXRlX2tleV9fXG4gICAgcmV0dXJuIHdpbmRvdy5hbmFseXRpY3NXcml0ZUtleSAhPT0gWydfXycsICdXUklURScsICdfJywgJ0tFWScsICdfXyddLmpvaW4oJycpXG4gICAgICAgID8gd2luZG93LmFuYWx5dGljc1dyaXRlS2V5XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1iZWRkZWQtd3JpdGUta2V5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\n/* harmony import */ var unfetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! unfetch */ \"(ssr)/../node_modules/unfetch/dist/unfetch.module.js\");\n/* harmony import */ var _get_global__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get-global */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\");\n\n\n/**\n * Wrapper around native `fetch` containing `unfetch` fallback.\n */\nvar fetch = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var global = (0,_get_global__WEBPACK_IMPORTED_MODULE_1__.getGlobal)();\n    return ((global && global.fetch) || unfetch__WEBPACK_IMPORTED_MODULE_0__[\"default\"]).apply(void 0, args);\n};\n//# sourceMappingURL=fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9mZXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEI7QUFDVztBQUN6QztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0EsaUJBQWlCLHNEQUFTO0FBQzFCLHdDQUF3QywrQ0FBTztBQUMvQztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9mZXRjaC5qcz8zYTEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1bmZldGNoIGZyb20gJ3VuZmV0Y2gnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsIH0gZnJvbSAnLi9nZXQtZ2xvYmFsJztcbi8qKlxuICogV3JhcHBlciBhcm91bmQgbmF0aXZlIGBmZXRjaGAgY29udGFpbmluZyBgdW5mZXRjaGAgZmFsbGJhY2suXG4gKi9cbmV4cG9ydCB2YXIgZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBnbG9iYWwgPSBnZXRHbG9iYWwoKTtcbiAgICByZXR1cm4gKChnbG9iYWwgJiYgZ2xvYmFsLmZldGNoKSB8fCB1bmZldGNoKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZldGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobal: () => (/* binding */ getGlobal)\n/* harmony export */ });\n// This an imperfect polyfill for globalThis\nvar getGlobal = function () {\n    if (typeof globalThis !== 'undefined') {\n        return globalThis;\n    }\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    return null;\n};\n//# sourceMappingURL=get-global.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9nZXQtZ2xvYmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9nZXQtZ2xvYmFsLmpzP2U3OTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBhbiBpbXBlcmZlY3QgcG9seWZpbGwgZm9yIGdsb2JhbFRoaXNcbmV4cG9ydCB2YXIgZ2V0R2xvYmFsID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LWdsb2JhbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getProcessEnv: () => (/* binding */ getProcessEnv)\n/* harmony export */ });\n/**\n * Returns `process.env` if it is available in the environment.\n * Always returns an object make it similarly easy to use as `process.env`.\n */\nfunction getProcessEnv() {\n    if (typeof process === 'undefined' || !process.env) {\n        return {};\n    }\n    return process.env;\n}\n//# sourceMappingURL=get-process-env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9nZXQtcHJvY2Vzcy1lbnYuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2dldC1wcm9jZXNzLWVudi5qcz8xZWEyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmV0dXJucyBgcHJvY2Vzcy5lbnZgIGlmIGl0IGlzIGF2YWlsYWJsZSBpbiB0aGUgZW52aXJvbm1lbnQuXG4gKiBBbHdheXMgcmV0dXJucyBhbiBvYmplY3QgbWFrZSBpdCBzaW1pbGFybHkgZWFzeSB0byB1c2UgYXMgYHByb2Nlc3MuZW52YC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2Nlc3NFbnYoKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCAhcHJvY2Vzcy5lbnYpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4gcHJvY2Vzcy5lbnY7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtcHJvY2Vzcy1lbnYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalAnalytics: () => (/* binding */ getGlobalAnalytics),\n/* harmony export */   setGlobalAnalytics: () => (/* binding */ setGlobalAnalytics),\n/* harmony export */   setGlobalAnalyticsKey: () => (/* binding */ setGlobalAnalyticsKey)\n/* harmony export */ });\n/**\n * Stores the global window analytics key\n */\nvar _globalAnalyticsKey = 'analytics';\n/**\n * Gets the global analytics/buffer\n * @param key name of the window property where the buffer is stored (default: analytics)\n * @returns AnalyticsSnippet\n */\nfunction getGlobalAnalytics() {\n    return window[_globalAnalyticsKey];\n}\n/**\n * Replaces the global window key for the analytics/buffer object\n * @param key key name\n */\nfunction setGlobalAnalyticsKey(key) {\n    _globalAnalyticsKey = key;\n}\n/**\n * Sets the global analytics object\n * @param analytics analytics snippet\n */\nfunction setGlobalAnalytics(analytics) {\n    ;\n    window[_globalAnalyticsKey] = analytics;\n}\n//# sourceMappingURL=global-analytics-helper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9nbG9iYWwtYW5hbHl0aWNzLWhlbHBlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvZ2xvYmFsLWFuYWx5dGljcy1oZWxwZXIuanM/YjI0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFN0b3JlcyB0aGUgZ2xvYmFsIHdpbmRvdyBhbmFseXRpY3Mga2V5XG4gKi9cbnZhciBfZ2xvYmFsQW5hbHl0aWNzS2V5ID0gJ2FuYWx5dGljcyc7XG4vKipcbiAqIEdldHMgdGhlIGdsb2JhbCBhbmFseXRpY3MvYnVmZmVyXG4gKiBAcGFyYW0ga2V5IG5hbWUgb2YgdGhlIHdpbmRvdyBwcm9wZXJ0eSB3aGVyZSB0aGUgYnVmZmVyIGlzIHN0b3JlZCAoZGVmYXVsdDogYW5hbHl0aWNzKVxuICogQHJldHVybnMgQW5hbHl0aWNzU25pcHBldFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsQW5hbHl0aWNzKCkge1xuICAgIHJldHVybiB3aW5kb3dbX2dsb2JhbEFuYWx5dGljc0tleV07XG59XG4vKipcbiAqIFJlcGxhY2VzIHRoZSBnbG9iYWwgd2luZG93IGtleSBmb3IgdGhlIGFuYWx5dGljcy9idWZmZXIgb2JqZWN0XG4gKiBAcGFyYW0ga2V5IGtleSBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRHbG9iYWxBbmFseXRpY3NLZXkoa2V5KSB7XG4gICAgX2dsb2JhbEFuYWx5dGljc0tleSA9IGtleTtcbn1cbi8qKlxuICogU2V0cyB0aGUgZ2xvYmFsIGFuYWx5dGljcyBvYmplY3RcbiAqIEBwYXJhbSBhbmFseXRpY3MgYW5hbHl0aWNzIHNuaXBwZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEdsb2JhbEFuYWx5dGljcyhhbmFseXRpY3MpIHtcbiAgICA7XG4gICAgd2luZG93W19nbG9iYWxBbmFseXRpY3NLZXldID0gYW5hbHl0aWNzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2xvYmFsLWFuYWx5dGljcy1oZWxwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPlanEventEnabled: () => (/* binding */ isPlanEventEnabled)\n/* harmony export */ });\n/**\n * Determines whether a track event is allowed to be sent based on the\n * user's tracking plan.\n * If the user does not have a tracking plan or the event is allowed based\n * on the tracking plan configuration, returns true.\n */\nfunction isPlanEventEnabled(plan, planEvent) {\n    var _a, _b;\n    // Always prioritize the event's `enabled` status\n    if (typeof (planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) === 'boolean') {\n        return planEvent.enabled;\n    }\n    // Assume absence of a tracking plan means events are enabled\n    return (_b = (_a = plan === null || plan === void 0 ? void 0 : plan.__default) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n}\n//# sourceMappingURL=is-plan-event-enabled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9pcy1wbGFuLWV2ZW50LWVuYWJsZWQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9pcy1wbGFuLWV2ZW50LWVuYWJsZWQuanM/ZjNjYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERldGVybWluZXMgd2hldGhlciBhIHRyYWNrIGV2ZW50IGlzIGFsbG93ZWQgdG8gYmUgc2VudCBiYXNlZCBvbiB0aGVcbiAqIHVzZXIncyB0cmFja2luZyBwbGFuLlxuICogSWYgdGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhIHRyYWNraW5nIHBsYW4gb3IgdGhlIGV2ZW50IGlzIGFsbG93ZWQgYmFzZWRcbiAqIG9uIHRoZSB0cmFja2luZyBwbGFuIGNvbmZpZ3VyYXRpb24sIHJldHVybnMgdHJ1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhbkV2ZW50RW5hYmxlZChwbGFuLCBwbGFuRXZlbnQpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIC8vIEFsd2F5cyBwcmlvcml0aXplIHRoZSBldmVudCdzIGBlbmFibGVkYCBzdGF0dXNcbiAgICBpZiAodHlwZW9mIChwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuZW5hYmxlZCkgPT09ICdib29sZWFuJykge1xuICAgICAgICByZXR1cm4gcGxhbkV2ZW50LmVuYWJsZWQ7XG4gICAgfVxuICAgIC8vIEFzc3VtZSBhYnNlbmNlIG9mIGEgdHJhY2tpbmcgcGxhbiBtZWFucyBldmVudHMgYXJlIGVuYWJsZWRcbiAgICByZXR1cm4gKF9iID0gKF9hID0gcGxhbiA9PT0gbnVsbCB8fCBwbGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuLl9fZGVmYXVsdCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVuYWJsZWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1wbGFuLWV2ZW50LWVuYWJsZWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9pcy10aGVuYWJsZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvaXMtdGhlbmFibGUuanM/NDAxZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqICBDaGVjayBpZiAgdGhlbmFibGVcbiAqICAoaW5zdGFuY2VvZiBQcm9taXNlIGRvZXNuJ3QgcmVzcGVjdCByZWFsbXMpXG4gKi9cbmV4cG9ydCB2YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgICd0aGVuJyBpbiB2YWx1ZSAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy10aGVuYWJsZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadScript: () => (/* binding */ loadScript),\n/* harmony export */   unloadScript: () => (/* binding */ unloadScript)\n/* harmony export */ });\nfunction findScript(src) {\n    var scripts = Array.prototype.slice.call(window.document.querySelectorAll('script'));\n    return scripts.find(function (s) { return s.src === src; });\n}\nfunction loadScript(src, attributes) {\n    var found = findScript(src);\n    if (found !== undefined) {\n        var status_1 = found === null || found === void 0 ? void 0 : found.getAttribute('status');\n        if (status_1 === 'loaded') {\n            return Promise.resolve(found);\n        }\n        if (status_1 === 'loading') {\n            return new Promise(function (resolve, reject) {\n                found.addEventListener('load', function () { return resolve(found); });\n                found.addEventListener('error', function (err) { return reject(err); });\n            });\n        }\n    }\n    return new Promise(function (resolve, reject) {\n        var _a;\n        var script = window.document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = src;\n        script.async = true;\n        script.setAttribute('status', 'loading');\n        for (var _i = 0, _b = Object.entries(attributes !== null && attributes !== void 0 ? attributes : {}); _i < _b.length; _i++) {\n            var _c = _b[_i], k = _c[0], v = _c[1];\n            script.setAttribute(k, v);\n        }\n        script.onload = function () {\n            script.onerror = script.onload = null;\n            script.setAttribute('status', 'loaded');\n            resolve(script);\n        };\n        script.onerror = function () {\n            script.onerror = script.onload = null;\n            script.setAttribute('status', 'error');\n            reject(new Error(\"Failed to load \".concat(src)));\n        };\n        var tag = window.document.getElementsByTagName('script')[0];\n        (_a = tag.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(script, tag);\n    });\n}\nfunction unloadScript(src) {\n    var found = findScript(src);\n    if (found !== undefined) {\n        found.remove();\n    }\n    return Promise.resolve();\n}\n//# sourceMappingURL=load-script.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9sb2FkLXNjcmlwdC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQSx1Q0FBdUMsdUJBQXVCO0FBQzlEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELHdCQUF3QjtBQUNyRixpRUFBaUUscUJBQXFCO0FBQ3RGLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkcsR0FBRyxnQkFBZ0I7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvbG9hZC1zY3JpcHQuanM/ZmQyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBmaW5kU2NyaXB0KHNyYykge1xuICAgIHZhciBzY3JpcHRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpKTtcbiAgICByZXR1cm4gc2NyaXB0cy5maW5kKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnNyYyA9PT0gc3JjOyB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2FkU2NyaXB0KHNyYywgYXR0cmlidXRlcykge1xuICAgIHZhciBmb3VuZCA9IGZpbmRTY3JpcHQoc3JjKTtcbiAgICBpZiAoZm91bmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgc3RhdHVzXzEgPSBmb3VuZCA9PT0gbnVsbCB8fCBmb3VuZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZm91bmQuZ2V0QXR0cmlidXRlKCdzdGF0dXMnKTtcbiAgICAgICAgaWYgKHN0YXR1c18xID09PSAnbG9hZGVkJykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1c18xID09PSAnbG9hZGluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgZm91bmQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUoZm91bmQpOyB9KTtcbiAgICAgICAgICAgICAgICBmb3VuZC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIHNjcmlwdCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3RhdHVzJywgJ2xvYWRpbmcnKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMgIT09IG51bGwgJiYgYXR0cmlidXRlcyAhPT0gdm9pZCAwID8gYXR0cmlidXRlcyA6IHt9KTsgX2kgPCBfYi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBfYyA9IF9iW19pXSwgayA9IF9jWzBdLCB2ID0gX2NbMV07XG4gICAgICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKGssIHYpO1xuICAgICAgICB9XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3RhdHVzJywgJ2xvYWRlZCcpO1xuICAgICAgICAgICAgcmVzb2x2ZShzY3JpcHQpO1xuICAgICAgICB9O1xuICAgICAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG4gICAgICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzdGF0dXMnLCAnZXJyb3InKTtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBcIi5jb25jYXQoc3JjKSkpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgdGFnID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTtcbiAgICAgICAgKF9hID0gdGFnLnBhcmVudEVsZW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbnNlcnRCZWZvcmUoc2NyaXB0LCB0YWcpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVubG9hZFNjcmlwdChzcmMpIHtcbiAgICB2YXIgZm91bmQgPSBmaW5kU2NyaXB0KHNyYyk7XG4gICAgaWYgKGZvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZm91bmQucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvYWQtc2NyaXB0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergedOptions: () => (/* binding */ mergedOptions)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\n/**\n * Merge legacy settings and initialized Integration option overrides.\n *\n * This will merge any options that were passed from initialization into\n * overrides for settings that are returned by the Segment CDN.\n *\n * i.e. this allows for passing options directly into destinations from\n * the Analytics constructor.\n */\nfunction mergedOptions(settings, options) {\n    var _a;\n    var optionOverrides = Object.entries((_a = options.integrations) !== null && _a !== void 0 ? _a : {}).reduce(function (overrides, _a) {\n        var _b, _c;\n        var integration = _a[0], options = _a[1];\n        if (typeof options === 'object') {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, overrides), (_b = {}, _b[integration] = options, _b));\n        }\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, overrides), (_c = {}, _c[integration] = {}, _c));\n    }, {});\n    return Object.entries(settings.integrations).reduce(function (integrationSettings, _a) {\n        var _b;\n        var integration = _a[0], settings = _a[1];\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, integrationSettings), (_b = {}, _b[integration] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, settings), optionOverrides[integration]), _b));\n    }, {});\n}\n//# sourceMappingURL=merged-options.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9tZXJnZWQtb3B0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esd0dBQXdHO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsc0JBQXNCO0FBQzdEO0FBQ0EsZUFBZSwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsc0JBQXNCLHNCQUFzQjtBQUMvRSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxnQ0FBZ0Msb0JBQW9CLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUMzRyxLQUFLLElBQUk7QUFDVDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9tZXJnZWQtb3B0aW9ucy5qcz84Zjk2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG4vKipcbiAqIE1lcmdlIGxlZ2FjeSBzZXR0aW5ncyBhbmQgaW5pdGlhbGl6ZWQgSW50ZWdyYXRpb24gb3B0aW9uIG92ZXJyaWRlcy5cbiAqXG4gKiBUaGlzIHdpbGwgbWVyZ2UgYW55IG9wdGlvbnMgdGhhdCB3ZXJlIHBhc3NlZCBmcm9tIGluaXRpYWxpemF0aW9uIGludG9cbiAqIG92ZXJyaWRlcyBmb3Igc2V0dGluZ3MgdGhhdCBhcmUgcmV0dXJuZWQgYnkgdGhlIFNlZ21lbnQgQ0ROLlxuICpcbiAqIGkuZS4gdGhpcyBhbGxvd3MgZm9yIHBhc3Npbmcgb3B0aW9ucyBkaXJlY3RseSBpbnRvIGRlc3RpbmF0aW9ucyBmcm9tXG4gKiB0aGUgQW5hbHl0aWNzIGNvbnN0cnVjdG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VkT3B0aW9ucyhzZXR0aW5ncywgb3B0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICB2YXIgb3B0aW9uT3ZlcnJpZGVzID0gT2JqZWN0LmVudHJpZXMoKF9hID0gb3B0aW9ucy5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KS5yZWR1Y2UoZnVuY3Rpb24gKG92ZXJyaWRlcywgX2EpIHtcbiAgICAgICAgdmFyIF9iLCBfYztcbiAgICAgICAgdmFyIGludGVncmF0aW9uID0gX2FbMF0sIG9wdGlvbnMgPSBfYVsxXTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvdmVycmlkZXMpLCAoX2IgPSB7fSwgX2JbaW50ZWdyYXRpb25dID0gb3B0aW9ucywgX2IpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG92ZXJyaWRlcyksIChfYyA9IHt9LCBfY1tpbnRlZ3JhdGlvbl0gPSB7fSwgX2MpKTtcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNldHRpbmdzLmludGVncmF0aW9ucykucmVkdWNlKGZ1bmN0aW9uIChpbnRlZ3JhdGlvblNldHRpbmdzLCBfYSkge1xuICAgICAgICB2YXIgX2I7XG4gICAgICAgIHZhciBpbnRlZ3JhdGlvbiA9IF9hWzBdLCBzZXR0aW5ncyA9IF9hWzFdO1xuICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGludGVncmF0aW9uU2V0dGluZ3MpLCAoX2IgPSB7fSwgX2JbaW50ZWdyYXRpb25dID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHNldHRpbmdzKSwgb3B0aW9uT3ZlcnJpZGVzW2ludGVncmF0aW9uXSksIF9iKSk7XG4gICAgfSwge30pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VkLW9wdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onPageChange: () => (/* binding */ onPageChange)\n/* harmony export */ });\n/**\n * Register event listener on document that fires when:\n * * tab change or tab close (in mobile or desktop)\n * * click back / forward button\n * * click any link or perform any other navigation action\n * * soft refresh / hard refresh\n *\n * adapted from https://stackoverflow.com/questions/3239834/window-onbeforeunload-not-working-on-the-ipad/52864508#52864508,\n */\nvar onPageChange = function (cb) {\n    var unloaded = false; // prevents double firing if both are supported\n    window.addEventListener('pagehide', function () {\n        if (unloaded)\n            return;\n        unloaded = true;\n        cb(unloaded);\n    });\n    // using document instead of window because of bug affecting browsers before safari 14 (detail in footnotes https://caniuse.com/?search=visibilitychange)\n    document.addEventListener('visibilitychange', function () {\n        if (document.visibilityState == 'hidden') {\n            if (unloaded)\n                return;\n            unloaded = true;\n        }\n        else {\n            unloaded = false;\n        }\n        cb(unloaded);\n    });\n};\n//# sourceMappingURL=on-page-change.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9vbi1wYWdlLWNoYW5nZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL29uLXBhZ2UtY2hhbmdlLmpzPzk3NTAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZWdpc3RlciBldmVudCBsaXN0ZW5lciBvbiBkb2N1bWVudCB0aGF0IGZpcmVzIHdoZW46XG4gKiAqIHRhYiBjaGFuZ2Ugb3IgdGFiIGNsb3NlIChpbiBtb2JpbGUgb3IgZGVza3RvcClcbiAqICogY2xpY2sgYmFjayAvIGZvcndhcmQgYnV0dG9uXG4gKiAqIGNsaWNrIGFueSBsaW5rIG9yIHBlcmZvcm0gYW55IG90aGVyIG5hdmlnYXRpb24gYWN0aW9uXG4gKiAqIHNvZnQgcmVmcmVzaCAvIGhhcmQgcmVmcmVzaFxuICpcbiAqIGFkYXB0ZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMjM5ODM0L3dpbmRvdy1vbmJlZm9yZXVubG9hZC1ub3Qtd29ya2luZy1vbi10aGUtaXBhZC81Mjg2NDUwOCM1Mjg2NDUwOCxcbiAqL1xuZXhwb3J0IHZhciBvblBhZ2VDaGFuZ2UgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICB2YXIgdW5sb2FkZWQgPSBmYWxzZTsgLy8gcHJldmVudHMgZG91YmxlIGZpcmluZyBpZiBib3RoIGFyZSBzdXBwb3J0ZWRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh1bmxvYWRlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdW5sb2FkZWQgPSB0cnVlO1xuICAgICAgICBjYih1bmxvYWRlZCk7XG4gICAgfSk7XG4gICAgLy8gdXNpbmcgZG9jdW1lbnQgaW5zdGVhZCBvZiB3aW5kb3cgYmVjYXVzZSBvZiBidWcgYWZmZWN0aW5nIGJyb3dzZXJzIGJlZm9yZSBzYWZhcmkgMTQgKGRldGFpbCBpbiBmb290bm90ZXMgaHR0cHM6Ly9jYW5pdXNlLmNvbS8/c2VhcmNoPXZpc2liaWxpdHljaGFuZ2UpXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PSAnaGlkZGVuJykge1xuICAgICAgICAgICAgaWYgKHVubG9hZGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHVubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVubG9hZGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2IodW5sb2FkZWQpO1xuICAgIH0pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9uLXBhZ2UtY2hhbmdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pWhile: () => (/* binding */ pWhile)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\nvar pWhile = function (condition, action) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n    var loop;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n        loop = function (actionResult) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!condition(actionResult)) return [3 /*break*/, 2];\n                        _a = loop;\n                        return [4 /*yield*/, action()];\n                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n                    case 2: return [2 /*return*/];\n                }\n            });\n        }); };\n        return [2 /*return*/, loop(undefined)];\n    });\n}); };\n//# sourceMappingURL=p-while.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9wLXdoaWxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStDO0FBQ3hDLDRDQUE0QyxPQUFPLGdEQUFTO0FBQ25FO0FBQ0EsV0FBVyxrREFBVztBQUN0Qix5Q0FBeUMsT0FBTyxnREFBUztBQUN6RDtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3Atd2hpbGUuanM/YjlhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgdmFyIHBXaGlsZSA9IGZ1bmN0aW9uIChjb25kaXRpb24sIGFjdGlvbikgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbG9vcDtcbiAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIGxvb3AgPSBmdW5jdGlvbiAoYWN0aW9uUmVzdWx0KSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25kaXRpb24oYWN0aW9uUmVzdWx0KSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IGxvb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhY3Rpb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9hLmFwcGx5KHZvaWQgMCwgW19iLnNlbnQoKV0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9O1xuICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbG9vcCh1bmRlZmluZWQpXTtcbiAgICB9KTtcbn0pOyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cC13aGlsZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCDN: () => (/* binding */ getCDN),\n/* harmony export */   getLegacyAJSPath: () => (/* binding */ getLegacyAJSPath),\n/* harmony export */   getNextIntegrationsURL: () => (/* binding */ getNextIntegrationsURL),\n/* harmony export */   setGlobalCDNUrl: () => (/* binding */ setGlobalCDNUrl)\n/* harmony export */ });\n/* harmony import */ var _global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./global-analytics-helper */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js\");\n/* harmony import */ var _embedded_write_key__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./embedded-write-key */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js\");\n\n\nvar analyticsScriptRegex = /(https:\\/\\/.*)\\/analytics\\.js\\/v1\\/(?:.*?)\\/(?:platform|analytics.*)?/;\nvar getCDNUrlFromScriptTag = function () {\n    var cdn;\n    var scripts = Array.prototype.slice.call(document.querySelectorAll('script'));\n    scripts.forEach(function (s) {\n        var _a;\n        var src = (_a = s.getAttribute('src')) !== null && _a !== void 0 ? _a : '';\n        var result = analyticsScriptRegex.exec(src);\n        if (result && result[1]) {\n            cdn = result[1];\n        }\n    });\n    return cdn;\n};\nvar _globalCDN; // set globalCDN as in-memory singleton\nvar getGlobalCDNUrl = function () {\n    var _a;\n    var result = _globalCDN !== null && _globalCDN !== void 0 ? _globalCDN : (_a = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)()) === null || _a === void 0 ? void 0 : _a._cdn;\n    return result;\n};\nvar setGlobalCDNUrl = function (cdn) {\n    var globalAnalytics = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)();\n    if (globalAnalytics) {\n        globalAnalytics._cdn = cdn;\n    }\n    _globalCDN = cdn;\n};\nvar getCDN = function () {\n    var globalCdnUrl = getGlobalCDNUrl();\n    if (globalCdnUrl)\n        return globalCdnUrl;\n    var cdnFromScriptTag = getCDNUrlFromScriptTag();\n    if (cdnFromScriptTag) {\n        return cdnFromScriptTag;\n    }\n    else {\n        // it's possible that the CDN is not found in the page because:\n        // - the script is loaded through a proxy\n        // - the script is removed after execution\n        // in this case, we fall back to the default Segment CDN\n        return \"https://cdn.segment.com\";\n    }\n};\nvar getNextIntegrationsURL = function () {\n    var cdn = getCDN();\n    return \"\".concat(cdn, \"/next-integrations\");\n};\n/**\n * Replaces the CDN URL in the script tag with the one from Analytics.js 1.0\n *\n * @returns the path to Analytics JS 1.0\n **/\nfunction getLegacyAJSPath() {\n    var _a, _b, _c;\n    var writeKey = (_a = (0,_embedded_write_key__WEBPACK_IMPORTED_MODULE_1__.embeddedWriteKey)()) !== null && _a !== void 0 ? _a : (_b = (0,_global_analytics_helper__WEBPACK_IMPORTED_MODULE_0__.getGlobalAnalytics)()) === null || _b === void 0 ? void 0 : _b._writeKey;\n    var scripts = Array.prototype.slice.call(document.querySelectorAll('script'));\n    var path = undefined;\n    for (var _i = 0, scripts_1 = scripts; _i < scripts_1.length; _i++) {\n        var s = scripts_1[_i];\n        var src = (_c = s.getAttribute('src')) !== null && _c !== void 0 ? _c : '';\n        var result = analyticsScriptRegex.exec(src);\n        if (result && result[1]) {\n            path = src;\n            break;\n        }\n    }\n    if (path) {\n        return path.replace('analytics.min.js', 'analytics.classic.js');\n    }\n    return \"https://cdn.segment.com/analytics.js/v1/\".concat(writeKey, \"/analytics.classic.js\");\n}\n//# sourceMappingURL=parse-cdn.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9wYXJzZS1jZG4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStEO0FBQ1A7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxtRkFBbUYsNEVBQWtCO0FBQ3JHO0FBQ0E7QUFDTztBQUNQLDBCQUEwQiw0RUFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHlCQUF5QixxRUFBZ0IsMkNBQTJDLDRFQUFrQjtBQUN0RztBQUNBO0FBQ0EsMENBQTBDLHVCQUF1QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9wYXJzZS1jZG4uanM/NjQwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRHbG9iYWxBbmFseXRpY3MgfSBmcm9tICcuL2dsb2JhbC1hbmFseXRpY3MtaGVscGVyJztcbmltcG9ydCB7IGVtYmVkZGVkV3JpdGVLZXkgfSBmcm9tICcuL2VtYmVkZGVkLXdyaXRlLWtleSc7XG52YXIgYW5hbHl0aWNzU2NyaXB0UmVnZXggPSAvKGh0dHBzOlxcL1xcLy4qKVxcL2FuYWx5dGljc1xcLmpzXFwvdjFcXC8oPzouKj8pXFwvKD86cGxhdGZvcm18YW5hbHl0aWNzLiopPy87XG52YXIgZ2V0Q0ROVXJsRnJvbVNjcmlwdFRhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2RuO1xuICAgIHZhciBzY3JpcHRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0JykpO1xuICAgIHNjcmlwdHMuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBzcmMgPSAoX2EgPSBzLmdldEF0dHJpYnV0ZSgnc3JjJykpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnO1xuICAgICAgICB2YXIgcmVzdWx0ID0gYW5hbHl0aWNzU2NyaXB0UmVnZXguZXhlYyhzcmMpO1xuICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdFsxXSkge1xuICAgICAgICAgICAgY2RuID0gcmVzdWx0WzFdO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNkbjtcbn07XG52YXIgX2dsb2JhbENETjsgLy8gc2V0IGdsb2JhbENETiBhcyBpbi1tZW1vcnkgc2luZ2xldG9uXG52YXIgZ2V0R2xvYmFsQ0ROVXJsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgcmVzdWx0ID0gX2dsb2JhbENETiAhPT0gbnVsbCAmJiBfZ2xvYmFsQ0ROICE9PSB2b2lkIDAgPyBfZ2xvYmFsQ0ROIDogKF9hID0gZ2V0R2xvYmFsQW5hbHl0aWNzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fY2RuO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuZXhwb3J0IHZhciBzZXRHbG9iYWxDRE5VcmwgPSBmdW5jdGlvbiAoY2RuKSB7XG4gICAgdmFyIGdsb2JhbEFuYWx5dGljcyA9IGdldEdsb2JhbEFuYWx5dGljcygpO1xuICAgIGlmIChnbG9iYWxBbmFseXRpY3MpIHtcbiAgICAgICAgZ2xvYmFsQW5hbHl0aWNzLl9jZG4gPSBjZG47XG4gICAgfVxuICAgIF9nbG9iYWxDRE4gPSBjZG47XG59O1xuZXhwb3J0IHZhciBnZXRDRE4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGdsb2JhbENkblVybCA9IGdldEdsb2JhbENETlVybCgpO1xuICAgIGlmIChnbG9iYWxDZG5VcmwpXG4gICAgICAgIHJldHVybiBnbG9iYWxDZG5Vcmw7XG4gICAgdmFyIGNkbkZyb21TY3JpcHRUYWcgPSBnZXRDRE5VcmxGcm9tU2NyaXB0VGFnKCk7XG4gICAgaWYgKGNkbkZyb21TY3JpcHRUYWcpIHtcbiAgICAgICAgcmV0dXJuIGNkbkZyb21TY3JpcHRUYWc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIENETiBpcyBub3QgZm91bmQgaW4gdGhlIHBhZ2UgYmVjYXVzZTpcbiAgICAgICAgLy8gLSB0aGUgc2NyaXB0IGlzIGxvYWRlZCB0aHJvdWdoIGEgcHJveHlcbiAgICAgICAgLy8gLSB0aGUgc2NyaXB0IGlzIHJlbW92ZWQgYWZ0ZXIgZXhlY3V0aW9uXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSwgd2UgZmFsbCBiYWNrIHRvIHRoZSBkZWZhdWx0IFNlZ21lbnQgQ0ROXG4gICAgICAgIHJldHVybiBcImh0dHBzOi8vY2RuLnNlZ21lbnQuY29tXCI7XG4gICAgfVxufTtcbmV4cG9ydCB2YXIgZ2V0TmV4dEludGVncmF0aW9uc1VSTCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2RuID0gZ2V0Q0ROKCk7XG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KGNkbiwgXCIvbmV4dC1pbnRlZ3JhdGlvbnNcIik7XG59O1xuLyoqXG4gKiBSZXBsYWNlcyB0aGUgQ0ROIFVSTCBpbiB0aGUgc2NyaXB0IHRhZyB3aXRoIHRoZSBvbmUgZnJvbSBBbmFseXRpY3MuanMgMS4wXG4gKlxuICogQHJldHVybnMgdGhlIHBhdGggdG8gQW5hbHl0aWNzIEpTIDEuMFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExlZ2FjeUFKU1BhdGgoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgdmFyIHdyaXRlS2V5ID0gKF9hID0gZW1iZWRkZWRXcml0ZUtleSgpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2IgPSBnZXRHbG9iYWxBbmFseXRpY3MoKSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLl93cml0ZUtleTtcbiAgICB2YXIgc2NyaXB0cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpKTtcbiAgICB2YXIgcGF0aCA9IHVuZGVmaW5lZDtcbiAgICBmb3IgKHZhciBfaSA9IDAsIHNjcmlwdHNfMSA9IHNjcmlwdHM7IF9pIDwgc2NyaXB0c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgcyA9IHNjcmlwdHNfMVtfaV07XG4gICAgICAgIHZhciBzcmMgPSAoX2MgPSBzLmdldEF0dHJpYnV0ZSgnc3JjJykpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICcnO1xuICAgICAgICB2YXIgcmVzdWx0ID0gYW5hbHl0aWNzU2NyaXB0UmVnZXguZXhlYyhzcmMpO1xuICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdFsxXSkge1xuICAgICAgICAgICAgcGF0aCA9IHNyYztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChwYXRoKSB7XG4gICAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoJ2FuYWx5dGljcy5taW4uanMnLCAnYW5hbHl0aWNzLmNsYXNzaWMuanMnKTtcbiAgICB9XG4gICAgcmV0dXJuIFwiaHR0cHM6Ly9jZG4uc2VnbWVudC5jb20vYW5hbHl0aWNzLmpzL3YxL1wiLmNvbmNhdCh3cml0ZUtleSwgXCIvYW5hbHl0aWNzLmNsYXNzaWMuanNcIik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZS1jZG4uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/pick.js":
/*!********************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/pick.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pick: () => (/* binding */ pick)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\n/**\n * @example\n * pick({ 'a': 1, 'b': '2', 'c': 3 }, ['a', 'c'])\n * => { 'a': 1, 'c': 3 }\n */\nfunction pick(object, keys) {\n    return Object.assign.apply(Object, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([{}], keys.map(function (key) {\n        var _a;\n        if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n            return _a = {}, _a[key] = object[key], _a;\n        }\n    }), false));\n}\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9waWNrLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXNDO0FBQ3RDO0FBQ0E7QUFDQSxVQUFVLDBCQUEwQjtBQUNwQyxRQUFRO0FBQ1I7QUFDTztBQUNQLHVDQUF1QyxvREFBYSxJQUFJO0FBQ3hEO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvcGljay5qcz9mZTY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbi8qKlxuICogQGV4YW1wbGVcbiAqIHBpY2soeyAnYSc6IDEsICdiJzogJzInLCAnYyc6IDMgfSwgWydhJywgJ2MnXSlcbiAqID0+IHsgJ2EnOiAxLCAnYyc6IDMgfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGljayhvYmplY3QsIGtleXMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbi5hcHBseShPYmplY3QsIF9fc3ByZWFkQXJyYXkoW3t9XSwga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChvYmplY3QgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIF9hID0ge30sIF9hW2tleV0gPSBvYmplY3Rba2V5XSwgX2E7XG4gICAgICAgIH1cbiAgICB9KSwgZmFsc2UpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpY2suanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/pick.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PersistedPriorityQueue: () => (/* binding */ PersistedPriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! . */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/environment */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n\n\n\n\nvar loc = {\n    getItem: function () { },\n    setItem: function () { },\n    removeItem: function () { },\n};\ntry {\n    loc = (0,_core_environment__WEBPACK_IMPORTED_MODULE_0__.isBrowser)() && window.localStorage ? window.localStorage : loc;\n}\ncatch (err) {\n    console.warn('Unable to access localStorage', err);\n}\nfunction persisted(key) {\n    var items = loc.getItem(key);\n    return (items ? JSON.parse(items) : []).map(function (p) { return new _core_context__WEBPACK_IMPORTED_MODULE_1__.Context(p.event, p.id); });\n}\nfunction persistItems(key, items) {\n    var existing = persisted(key);\n    var all = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], items, true), existing, true);\n    var merged = all.reduce(function (acc, item) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, acc), (_a = {}, _a[item.id] = item, _a));\n    }, {});\n    loc.setItem(key, JSON.stringify(Object.values(merged)));\n}\nfunction seen(key) {\n    var stored = loc.getItem(key);\n    return stored ? JSON.parse(stored) : {};\n}\nfunction persistSeen(key, memory) {\n    var stored = seen(key);\n    loc.setItem(key, JSON.stringify((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, stored), memory)));\n}\nfunction remove(key) {\n    loc.removeItem(key);\n}\nvar now = function () { return new Date().getTime(); };\nfunction mutex(key, onUnlock, attempt) {\n    if (attempt === void 0) { attempt = 0; }\n    var lockTimeout = 50;\n    var lockKey = \"persisted-queue:v1:\".concat(key, \":lock\");\n    var expired = function (lock) { return new Date().getTime() > lock; };\n    var rawLock = loc.getItem(lockKey);\n    var lock = rawLock ? JSON.parse(rawLock) : null;\n    var allowed = lock === null || expired(lock);\n    if (allowed) {\n        loc.setItem(lockKey, JSON.stringify(now() + lockTimeout));\n        onUnlock();\n        loc.removeItem(lockKey);\n        return;\n    }\n    if (!allowed && attempt < 3) {\n        setTimeout(function () {\n            mutex(key, onUnlock, attempt + 1);\n        }, lockTimeout);\n    }\n    else {\n        console.error('Unable to retrieve lock');\n    }\n}\nvar PersistedPriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__extends)(PersistedPriorityQueue, _super);\n    function PersistedPriorityQueue(maxAttempts, key) {\n        var _this = _super.call(this, maxAttempts, []) || this;\n        var itemsKey = \"persisted-queue:v1:\".concat(key, \":items\");\n        var seenKey = \"persisted-queue:v1:\".concat(key, \":seen\");\n        var saved = [];\n        var lastSeen = {};\n        mutex(key, function () {\n            try {\n                saved = persisted(itemsKey);\n                lastSeen = seen(seenKey);\n                remove(itemsKey);\n                remove(seenKey);\n                _this.queue = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], saved, true), _this.queue, true);\n                _this.seen = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({}, lastSeen), _this.seen);\n            }\n            catch (err) {\n                console.error(err);\n            }\n        });\n        window.addEventListener('pagehide', function () {\n            // we deliberately want to use the less powerful 'pagehide' API to only persist on events where the analytics instance gets destroyed, and not on tab away.\n            if (_this.todo > 0) {\n                var items_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_2__.__spreadArray)([], _this.queue, true), _this.future, true);\n                try {\n                    mutex(key, function () {\n                        persistItems(itemsKey, items_1);\n                        persistSeen(seenKey, _this.seen);\n                    });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n        });\n        return _this;\n    }\n    return PersistedPriorityQueue;\n}(___WEBPACK_IMPORTED_MODULE_3__.PriorityQueue));\n\n//# sourceMappingURL=persisted.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9wcmlvcml0eS1xdWV1ZS9wZXJzaXN0ZWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkQ7QUFDekI7QUFDVztBQUNNO0FBQ25EO0FBQ0EsNEJBQTRCO0FBQzVCLDRCQUE0QjtBQUM1QiwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBLFVBQVUsNERBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFdBQVcsa0RBQU8sa0JBQWtCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0RBQWEsQ0FBQyxvREFBYTtBQUN6QztBQUNBO0FBQ0EsZUFBZSwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsZ0JBQWdCO0FBQ25ELEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQWEsQ0FBQyxvREFBYTtBQUN6RCw2QkFBNkIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvREFBYSxDQUFDLG9EQUFhO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxDQUFDLDRDQUFhO0FBQ21CO0FBQ2xDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi9wcmlvcml0eS1xdWV1ZS9wZXJzaXN0ZWQuanM/OWYwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19leHRlbmRzLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLic7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IGlzQnJvd3NlciB9IGZyb20gJy4uLy4uL2NvcmUvZW52aXJvbm1lbnQnO1xudmFyIGxvYyA9IHtcbiAgICBnZXRJdGVtOiBmdW5jdGlvbiAoKSB7IH0sXG4gICAgc2V0SXRlbTogZnVuY3Rpb24gKCkgeyB9LFxuICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uICgpIHsgfSxcbn07XG50cnkge1xuICAgIGxvYyA9IGlzQnJvd3NlcigpICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UgPyB3aW5kb3cubG9jYWxTdG9yYWdlIDogbG9jO1xufVxuY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIGFjY2VzcyBsb2NhbFN0b3JhZ2UnLCBlcnIpO1xufVxuZnVuY3Rpb24gcGVyc2lzdGVkKGtleSkge1xuICAgIHZhciBpdGVtcyA9IGxvYy5nZXRJdGVtKGtleSk7XG4gICAgcmV0dXJuIChpdGVtcyA/IEpTT04ucGFyc2UoaXRlbXMpIDogW10pLm1hcChmdW5jdGlvbiAocCkgeyByZXR1cm4gbmV3IENvbnRleHQocC5ldmVudCwgcC5pZCk7IH0pO1xufVxuZnVuY3Rpb24gcGVyc2lzdEl0ZW1zKGtleSwgaXRlbXMpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBwZXJzaXN0ZWQoa2V5KTtcbiAgICB2YXIgYWxsID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBpdGVtcywgdHJ1ZSksIGV4aXN0aW5nLCB0cnVlKTtcbiAgICB2YXIgbWVyZ2VkID0gYWxsLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBpdGVtKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBhY2MpLCAoX2EgPSB7fSwgX2FbaXRlbS5pZF0gPSBpdGVtLCBfYSkpO1xuICAgIH0sIHt9KTtcbiAgICBsb2Muc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KE9iamVjdC52YWx1ZXMobWVyZ2VkKSkpO1xufVxuZnVuY3Rpb24gc2VlbihrZXkpIHtcbiAgICB2YXIgc3RvcmVkID0gbG9jLmdldEl0ZW0oa2V5KTtcbiAgICByZXR1cm4gc3RvcmVkID8gSlNPTi5wYXJzZShzdG9yZWQpIDoge307XG59XG5mdW5jdGlvbiBwZXJzaXN0U2VlbihrZXksIG1lbW9yeSkge1xuICAgIHZhciBzdG9yZWQgPSBzZWVuKGtleSk7XG4gICAgbG9jLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc3RvcmVkKSwgbWVtb3J5KSkpO1xufVxuZnVuY3Rpb24gcmVtb3ZlKGtleSkge1xuICAgIGxvYy5yZW1vdmVJdGVtKGtleSk7XG59XG52YXIgbm93ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7IH07XG5mdW5jdGlvbiBtdXRleChrZXksIG9uVW5sb2NrLCBhdHRlbXB0KSB7XG4gICAgaWYgKGF0dGVtcHQgPT09IHZvaWQgMCkgeyBhdHRlbXB0ID0gMDsgfVxuICAgIHZhciBsb2NrVGltZW91dCA9IDUwO1xuICAgIHZhciBsb2NrS2V5ID0gXCJwZXJzaXN0ZWQtcXVldWU6djE6XCIuY29uY2F0KGtleSwgXCI6bG9ja1wiKTtcbiAgICB2YXIgZXhwaXJlZCA9IGZ1bmN0aW9uIChsb2NrKSB7IHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSA+IGxvY2s7IH07XG4gICAgdmFyIHJhd0xvY2sgPSBsb2MuZ2V0SXRlbShsb2NrS2V5KTtcbiAgICB2YXIgbG9jayA9IHJhd0xvY2sgPyBKU09OLnBhcnNlKHJhd0xvY2spIDogbnVsbDtcbiAgICB2YXIgYWxsb3dlZCA9IGxvY2sgPT09IG51bGwgfHwgZXhwaXJlZChsb2NrKTtcbiAgICBpZiAoYWxsb3dlZCkge1xuICAgICAgICBsb2Muc2V0SXRlbShsb2NrS2V5LCBKU09OLnN0cmluZ2lmeShub3coKSArIGxvY2tUaW1lb3V0KSk7XG4gICAgICAgIG9uVW5sb2NrKCk7XG4gICAgICAgIGxvYy5yZW1vdmVJdGVtKGxvY2tLZXkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghYWxsb3dlZCAmJiBhdHRlbXB0IDwgMykge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG11dGV4KGtleSwgb25VbmxvY2ssIGF0dGVtcHQgKyAxKTtcbiAgICAgICAgfSwgbG9ja1RpbWVvdXQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIHJldHJpZXZlIGxvY2snKTtcbiAgICB9XG59XG52YXIgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKG1heEF0dGVtcHRzLCBrZXkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWF4QXR0ZW1wdHMsIFtdKSB8fCB0aGlzO1xuICAgICAgICB2YXIgaXRlbXNLZXkgPSBcInBlcnNpc3RlZC1xdWV1ZTp2MTpcIi5jb25jYXQoa2V5LCBcIjppdGVtc1wiKTtcbiAgICAgICAgdmFyIHNlZW5LZXkgPSBcInBlcnNpc3RlZC1xdWV1ZTp2MTpcIi5jb25jYXQoa2V5LCBcIjpzZWVuXCIpO1xuICAgICAgICB2YXIgc2F2ZWQgPSBbXTtcbiAgICAgICAgdmFyIGxhc3RTZWVuID0ge307XG4gICAgICAgIG11dGV4KGtleSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzYXZlZCA9IHBlcnNpc3RlZChpdGVtc0tleSk7XG4gICAgICAgICAgICAgICAgbGFzdFNlZW4gPSBzZWVuKHNlZW5LZXkpO1xuICAgICAgICAgICAgICAgIHJlbW92ZShpdGVtc0tleSk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlKHNlZW5LZXkpO1xuICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBzYXZlZCwgdHJ1ZSksIF90aGlzLnF1ZXVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWVuID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxhc3RTZWVuKSwgX3RoaXMuc2Vlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VoaWRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gd2UgZGVsaWJlcmF0ZWx5IHdhbnQgdG8gdXNlIHRoZSBsZXNzIHBvd2VyZnVsICdwYWdlaGlkZScgQVBJIHRvIG9ubHkgcGVyc2lzdCBvbiBldmVudHMgd2hlcmUgdGhlIGFuYWx5dGljcyBpbnN0YW5jZSBnZXRzIGRlc3Ryb3llZCwgYW5kIG5vdCBvbiB0YWIgYXdheS5cbiAgICAgICAgICAgIGlmIChfdGhpcy50b2RvID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtc18xID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBfdGhpcy5xdWV1ZSwgdHJ1ZSksIF90aGlzLmZ1dHVyZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbXV0ZXgoa2V5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0SXRlbXMoaXRlbXNLZXksIGl0ZW1zXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdFNlZW4oc2VlbktleSwgX3RoaXMuc2Vlbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlO1xufShQcmlvcml0eVF1ZXVlKSk7XG5leHBvcnQgeyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wZXJzaXN0ZWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toFacade: () => (/* binding */ toFacade)\n/* harmony export */ });\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/facade */ \"(ssr)/../node_modules/@segment/facade/dist/index.js\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_facade__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction toFacade(evt, options) {\n    var fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Facade(evt, options);\n    if (evt.type === 'track') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track(evt, options);\n    }\n    if (evt.type === 'identify') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify(evt, options);\n    }\n    if (evt.type === 'page') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page(evt, options);\n    }\n    if (evt.type === 'alias') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias(evt, options);\n    }\n    if (evt.type === 'group') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group(evt, options);\n    }\n    if (evt.type === 'screen') {\n        fcd = new _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Screen(evt, options);\n    }\n    Object.defineProperty(fcd, 'obj', {\n        value: evt,\n        writable: true,\n    });\n    return fcd;\n}\n//# sourceMappingURL=to-facade.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi90by1mYWNhZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVGO0FBQ2hGO0FBQ1Asa0JBQWtCLG1EQUFNO0FBQ3hCO0FBQ0Esa0JBQWtCLGtEQUFLO0FBQ3ZCO0FBQ0E7QUFDQSxrQkFBa0IscURBQVE7QUFDMUI7QUFDQTtBQUNBLGtCQUFrQixpREFBSTtBQUN0QjtBQUNBO0FBQ0Esa0JBQWtCLGtEQUFLO0FBQ3ZCO0FBQ0E7QUFDQSxrQkFBa0Isa0RBQUs7QUFDdkI7QUFDQTtBQUNBLGtCQUFrQixtREFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3RvLWZhY2FkZS5qcz8xMDBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFsaWFzLCBGYWNhZGUsIEdyb3VwLCBJZGVudGlmeSwgUGFnZSwgU2NyZWVuLCBUcmFjaywgfSBmcm9tICdAc2VnbWVudC9mYWNhZGUnO1xuZXhwb3J0IGZ1bmN0aW9uIHRvRmFjYWRlKGV2dCwgb3B0aW9ucykge1xuICAgIHZhciBmY2QgPSBuZXcgRmFjYWRlKGV2dCwgb3B0aW9ucyk7XG4gICAgaWYgKGV2dC50eXBlID09PSAndHJhY2snKSB7XG4gICAgICAgIGZjZCA9IG5ldyBUcmFjayhldnQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnR5cGUgPT09ICdpZGVudGlmeScpIHtcbiAgICAgICAgZmNkID0gbmV3IElkZW50aWZ5KGV2dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmIChldnQudHlwZSA9PT0gJ3BhZ2UnKSB7XG4gICAgICAgIGZjZCA9IG5ldyBQYWdlKGV2dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmIChldnQudHlwZSA9PT0gJ2FsaWFzJykge1xuICAgICAgICBmY2QgPSBuZXcgQWxpYXMoZXZ0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKGV2dC50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIGZjZCA9IG5ldyBHcm91cChldnQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnR5cGUgPT09ICdzY3JlZW4nKSB7XG4gICAgICAgIGZjZCA9IG5ldyBTY3JlZW4oZXZ0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZjZCwgJ29iaicsIHtcbiAgICAgICAgdmFsdWU6IGV2dCxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgfSk7XG4gICAgcmV0dXJuIGZjZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvLWZhY2FkZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVersionType: () => (/* binding */ getVersionType),\n/* harmony export */   setVersionType: () => (/* binding */ setVersionType)\n/* harmony export */ });\n// Default value will be updated to 'web' in `bundle-umd.ts` for web build.\nvar _version = 'npm';\nfunction setVersionType(version) {\n    _version = version;\n}\nfunction getVersionType() {\n    return _version;\n}\n//# sourceMappingURL=version-type.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL2xpYi92ZXJzaW9uLXR5cGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL3ZlcnNpb24tdHlwZS5qcz9mODFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERlZmF1bHQgdmFsdWUgd2lsbCBiZSB1cGRhdGVkIHRvICd3ZWInIGluIGBidW5kbGUtdW1kLnRzYCBmb3Igd2ViIGJ1aWxkLlxudmFyIF92ZXJzaW9uID0gJ25wbSc7XG5leHBvcnQgZnVuY3Rpb24gc2V0VmVyc2lvblR5cGUodmVyc2lvbikge1xuICAgIF92ZXJzaW9uID0gdmVyc2lvbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRWZXJzaW9uVHlwZSgpIHtcbiAgICByZXR1cm4gX3ZlcnNpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJzaW9uLXR5cGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LegacyDestination: () => (/* binding */ LegacyDestination),\n/* harmony export */   ajsDestinations: () => (/* binding */ ajsDestinations)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/facade */ \"(ssr)/../node_modules/@segment/facade/dist/index.js\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_facade__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/connection */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../core/environment */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n/* harmony import */ var _lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../lib/is-plan-event-enabled */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\");\n/* harmony import */ var _lib_merged_options__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../lib/merged-options */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\");\n/* harmony import */ var _lib_p_while__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/p-while */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../middleware */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\");\n/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loader */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\");\n/* harmony import */ var _core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/stats/metric-helpers */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction flushQueue(xt, queue) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var failedQueue;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    failedQueue = [];\n                    if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)()) {\n                        return [2 /*return*/, queue];\n                    }\n                    return [4 /*yield*/, (0,_lib_p_while__WEBPACK_IMPORTED_MODULE_3__.pWhile)(function () { return queue.length > 0 && (0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOnline)(); }, function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n                            var ctx, result, success;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        ctx = queue.pop();\n                                        if (!ctx) {\n                                            return [2 /*return*/];\n                                        }\n                                        return [4 /*yield*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__.attempt)(ctx, xt)];\n                                    case 1:\n                                        result = _a.sent();\n                                        success = result instanceof _core_context__WEBPACK_IMPORTED_MODULE_5__.Context;\n                                        if (!success) {\n                                            failedQueue.push(ctx);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                        // re-add failed tasks\n                    ];\n                case 1:\n                    _a.sent();\n                    // re-add failed tasks\n                    failedQueue.map(function (failed) { return queue.pushWithBackoff(failed); });\n                    return [2 /*return*/, queue];\n            }\n        });\n    });\n}\nvar LegacyDestination = /** @class */ (function () {\n    function LegacyDestination(name, version, writeKey, settings, options, integrationSource) {\n        if (settings === void 0) { settings = {}; }\n        var _this = this;\n        this.options = {};\n        this.type = 'destination';\n        this.middleware = [];\n        this.initializePromise = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.createDeferred)();\n        this.flushing = false;\n        this.name = name;\n        this.version = version;\n        this.settings = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, settings);\n        this.disableAutoISOConversion = options.disableAutoISOConversion || false;\n        this.integrationSource = integrationSource;\n        // AJS-Renderer sets an extraneous `type` setting that clobbers\n        // existing type defaults. We need to remove it if it's present\n        if (this.settings['type'] && this.settings['type'] === 'browser') {\n            delete this.settings['type'];\n        }\n        this.initializePromise.promise.then(function (isInitialized) { return (_this._initialized = isInitialized); }, function () { });\n        this.options = options;\n        this.buffer = options.disableClientPersistence\n            ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__.PriorityQueue(4, [])\n            : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__.PersistedPriorityQueue(4, \"\".concat(writeKey, \":dest-\").concat(name));\n        this.scheduleFlush();\n    }\n    LegacyDestination.prototype.isLoaded = function () {\n        return !!this._ready;\n    };\n    LegacyDestination.prototype.ready = function () {\n        var _this = this;\n        return this.initializePromise.promise.then(function () { var _a; return (_a = _this.onReady) !== null && _a !== void 0 ? _a : Promise.resolve(); });\n    };\n    LegacyDestination.prototype.load = function (ctx, analyticsInstance) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var integrationSource, _b;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this._ready || this.onReady !== undefined) {\n                            return [2 /*return*/];\n                        }\n                        if (!((_a = this.integrationSource) !== null && _a !== void 0)) return [3 /*break*/, 1];\n                        _b = _a;\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, (0,_loader__WEBPACK_IMPORTED_MODULE_9__.loadIntegration)(ctx, this.name, this.version, this.options.obfuscate)];\n                    case 2:\n                        _b = (_c.sent());\n                        _c.label = 3;\n                    case 3:\n                        integrationSource = _b;\n                        this.integration = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.buildIntegration)(integrationSource, this.settings, analyticsInstance);\n                        this.onReady = new Promise(function (resolve) {\n                            var onReadyFn = function () {\n                                _this._ready = true;\n                                resolve(true);\n                            };\n                            _this.integration.once('ready', onReadyFn);\n                        });\n                        this.integration.on('initialize', function () {\n                            _this.initializePromise.resolve(true);\n                        });\n                        try {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                            });\n                            this.integration.initialize();\n                        }\n                        catch (error) {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                                didError: true,\n                            });\n                            this.initializePromise.resolve(false);\n                            throw error;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.unload = function (_ctx, _analyticsInstance) {\n        return (0,_loader__WEBPACK_IMPORTED_MODULE_9__.unloadIntegration)(this.name, this.version, this.options.obfuscate);\n    };\n    LegacyDestination.prototype.addMiddleware = function () {\n        var _a;\n        var fn = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            fn[_i] = arguments[_i];\n        }\n        this.middleware = (_a = this.middleware).concat.apply(_a, fn);\n    };\n    LegacyDestination.prototype.shouldBuffer = function (ctx) {\n        return (\n        // page events can't be buffered because of destinations that automatically add page views\n        ctx.event.type !== 'page' &&\n            ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)() || this._ready === false || this._initialized === false));\n    };\n    LegacyDestination.prototype.send = function (ctx, clz, eventType) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var plan, ev, planEvent, afterMiddleware, event, err_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.shouldBuffer(ctx)) {\n                            this.buffer.push(ctx);\n                            this.scheduleFlush();\n                            return [2 /*return*/, ctx];\n                        }\n                        plan = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.plan) === null || _b === void 0 ? void 0 : _b.track;\n                        ev = ctx.event.event;\n                        if (plan && ev && this.name !== 'Segment.io') {\n                            planEvent = plan[ev];\n                            if (!(0,_lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__.isPlanEventEnabled)(plan, planEvent)) {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), { All: false, 'Segment.io': true }));\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                                return [2 /*return*/, ctx];\n                            }\n                            else {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations));\n                            }\n                            if ((planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) && (planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations[this.name]) === false) {\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                                return [2 /*return*/, ctx];\n                            }\n                        }\n                        return [4 /*yield*/, (0,_middleware__WEBPACK_IMPORTED_MODULE_13__.applyDestinationMiddleware)(this.name, ctx.event, this.middleware)];\n                    case 1:\n                        afterMiddleware = _c.sent();\n                        if (afterMiddleware === null) {\n                            return [2 /*return*/, ctx];\n                        }\n                        event = new clz(afterMiddleware, {\n                            traverse: !this.disableAutoISOConversion,\n                        });\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                        });\n                        _c.label = 2;\n                    case 2:\n                        _c.trys.push([2, 5, , 6]);\n                        if (!this.integration) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.integration.invoke.call(this.integration, eventType, event)];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _c.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                            didError: true,\n                        });\n                        throw err_1;\n                    case 6: return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.track = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track, 'track')];\n            });\n        });\n    };\n    LegacyDestination.prototype.page = function (ctx) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (((_a = this.integration) === null || _a === void 0 ? void 0 : _a._assumesPageview) && !this._initialized) {\n                            this.integration.initialize();\n                        }\n                        return [4 /*yield*/, this.initializePromise.promise];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page, 'page')];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.identify = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify, 'identify')];\n            });\n        });\n    };\n    LegacyDestination.prototype.alias = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias, 'alias')];\n            });\n        });\n    };\n    LegacyDestination.prototype.group = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group, 'group')];\n            });\n        });\n    };\n    LegacyDestination.prototype.scheduleFlush = function () {\n        var _this = this;\n        if (this.flushing) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        setTimeout(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.flushing = true;\n                        _a = this;\n                        return [4 /*yield*/, flushQueue(this, this.buffer)];\n                    case 1:\n                        _a.buffer = _b.sent();\n                        this.flushing = false;\n                        if (this.buffer.todo > 0) {\n                            this.scheduleFlush();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); }, Math.random() * 5000);\n    };\n    return LegacyDestination;\n}());\n\nfunction ajsDestinations(writeKey, settings, globalIntegrations, options, routingMiddleware, legacyIntegrationSources) {\n    var _a, _b;\n    if (globalIntegrations === void 0) { globalIntegrations = {}; }\n    if (options === void 0) { options = {}; }\n    if ((0,_core_environment__WEBPACK_IMPORTED_MODULE_14__.isServer)()) {\n        return [];\n    }\n    if (settings.plan) {\n        options = options !== null && options !== void 0 ? options : {};\n        options.plan = settings.plan;\n    }\n    var routingRules = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) !== null && _b !== void 0 ? _b : [];\n    var remoteIntegrationsConfig = settings.integrations;\n    var localIntegrationsConfig = options.integrations;\n    // merged remote CDN settings with user provided options\n    var integrationOptions = (0,_lib_merged_options__WEBPACK_IMPORTED_MODULE_15__.mergedOptions)(settings, options !== null && options !== void 0 ? options : {});\n    var adhocIntegrationSources = legacyIntegrationSources === null || legacyIntegrationSources === void 0 ? void 0 : legacyIntegrationSources.reduce(function (acc, integrationSource) {\n        var _a;\n        return ((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, acc), (_a = {}, _a[(0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveIntegrationNameFromSource)(integrationSource)] = integrationSource, _a)));\n    }, {});\n    var installableIntegrations = new Set((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)([], Object.keys(remoteIntegrationsConfig).filter(function (name) {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_16__.isInstallableIntegration)(name, remoteIntegrationsConfig[name]);\n    }), true), Object.keys(adhocIntegrationSources || {}).filter(function (name) {\n        return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(remoteIntegrationsConfig[name]) ||\n            (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(localIntegrationsConfig === null || localIntegrationsConfig === void 0 ? void 0 : localIntegrationsConfig[name]);\n    }), true));\n    return Array.from(installableIntegrations)\n        .filter(function (name) { return !(0,_utils__WEBPACK_IMPORTED_MODULE_16__.isDisabledIntegration)(name, globalIntegrations); })\n        .map(function (name) {\n        var integrationSettings = remoteIntegrationsConfig[name];\n        var version = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveVersion)(integrationSettings);\n        var destination = new LegacyDestination(name, version, writeKey, integrationOptions[name], options, adhocIntegrationSources === null || adhocIntegrationSources === void 0 ? void 0 : adhocIntegrationSources[name]);\n        var routing = routingRules.filter(function (rule) { return rule.destinationName === name; });\n        if (routing.length > 0 && routingMiddleware) {\n            destination.addMiddleware(routingMiddleware);\n        }\n        return destination;\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RTtBQUNGO0FBQ1Y7QUFDSztBQUNmO0FBQ0E7QUFDbUI7QUFDWjtBQUNkO0FBQ2M7QUFDbUI7QUFDaEI7QUFDdUU7QUFDM0U7QUFDNEM7QUFDMUI7QUFDUjtBQUNsRTtBQUNBLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQTtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJEQUFTO0FBQ2pDO0FBQ0E7QUFDQSx5Q0FBeUMsb0RBQU0sZUFBZSwyQkFBMkIsMERBQVEsS0FBSyxnQkFBZ0IsT0FBTyxnREFBUztBQUN0STtBQUNBLG1DQUFtQyxrREFBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsZ0VBQU87QUFDcEU7QUFDQTtBQUNBLG9FQUFvRSxrREFBTztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsdUNBQXVDO0FBQy9GO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnRkFBYztBQUMvQztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0NBQVEsR0FBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSw4Q0FBOEMsaUJBQWlCO0FBQ3RJO0FBQ0E7QUFDQSxrQkFBa0IsOERBQWE7QUFDL0Isa0JBQWtCLGlGQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxRQUFRLGlGQUFpRjtBQUMxSjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCx3REFBZTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHlEQUFnQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDRCQUE0QixvRkFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixvRkFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsMERBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwyREFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsK0VBQWtCO0FBQ25ELGdFQUFnRSwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsNkJBQTZCLGdDQUFnQztBQUNqSiwrQ0FBK0MsOERBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ3BGO0FBQ0E7QUFDQSwrQ0FBK0MsOERBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsd0VBQTBCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHdCQUF3QixvRkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0ZBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHFEQUFxRCxrREFBSztBQUMxRCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsaURBQUk7QUFDakU7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QixxREFBcUQscURBQVE7QUFDN0QsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUIscURBQXFELGtEQUFLO0FBQzFELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHFEQUFxRCxrREFBSztBQUMxRCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLE9BQU8sZ0RBQVM7QUFDakQ7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBLENBQUM7QUFDNEI7QUFDdEI7QUFDUDtBQUNBLHlDQUF5QztBQUN6Qyw4QkFBOEI7QUFDOUIsUUFBUSw0REFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtRUFBYSxnRUFBZ0U7QUFDMUc7QUFDQTtBQUNBLGdCQUFnQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsZ0JBQWdCLEtBQUsseUVBQWdDO0FBQ3pGLEtBQUssSUFBSTtBQUNULDBDQUEwQyxvREFBYSxDQUFDLG9EQUFhO0FBQ3JFLGVBQWUsaUVBQXdCO0FBQ3ZDLEtBQUssbURBQW1EO0FBQ3hELGVBQWUsdUVBQWE7QUFDNUIsWUFBWSx1RUFBYTtBQUN6QixLQUFLO0FBQ0w7QUFDQSxrQ0FBa0MsUUFBUSw4REFBcUIsNkJBQTZCO0FBQzVGO0FBQ0E7QUFDQSxzQkFBc0IsdURBQWM7QUFDcEM7QUFDQSw0REFBNEQsdUNBQXVDO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vaW5kZXguanM/NTBmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQWxpYXMsIEdyb3VwLCBJZGVudGlmeSwgUGFnZSwgVHJhY2sgfSBmcm9tICdAc2VnbWVudC9mYWNhZGUnO1xuaW1wb3J0IHsgaXNPZmZsaW5lLCBpc09ubGluZSB9IGZyb20gJy4uLy4uL2NvcmUvY29ubmVjdGlvbic7XG5pbXBvcnQgeyBDb250ZXh0LCBDb250ZXh0Q2FuY2VsYXRpb24gfSBmcm9tICcuLi8uLi9jb3JlL2NvbnRleHQnO1xuaW1wb3J0IHsgaXNTZXJ2ZXIgfSBmcm9tICcuLi8uLi9jb3JlL2Vudmlyb25tZW50JztcbmltcG9ydCB7IGF0dGVtcHQgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyBpc1BsYW5FdmVudEVuYWJsZWQgfSBmcm9tICcuLi8uLi9saWIvaXMtcGxhbi1ldmVudC1lbmFibGVkJztcbmltcG9ydCB7IG1lcmdlZE9wdGlvbnMgfSBmcm9tICcuLi8uLi9saWIvbWVyZ2VkLW9wdGlvbnMnO1xuaW1wb3J0IHsgcFdoaWxlIH0gZnJvbSAnLi4vLi4vbGliL3Atd2hpbGUnO1xuaW1wb3J0IHsgUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4uLy4uL2xpYi9wcmlvcml0eS1xdWV1ZSc7XG5pbXBvcnQgeyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlL3BlcnNpc3RlZCc7XG5pbXBvcnQgeyBhcHBseURlc3RpbmF0aW9uTWlkZGxld2FyZSwgfSBmcm9tICcuLi9taWRkbGV3YXJlJztcbmltcG9ydCB7IGJ1aWxkSW50ZWdyYXRpb24sIGxvYWRJbnRlZ3JhdGlvbiwgcmVzb2x2ZUludGVncmF0aW9uTmFtZUZyb21Tb3VyY2UsIHJlc29sdmVWZXJzaW9uLCB1bmxvYWRJbnRlZ3JhdGlvbiwgfSBmcm9tICcuL2xvYWRlcic7XG5pbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgaXNEaXNhYmxlZEludGVncmF0aW9uIGFzIHNob3VsZFNraXBJbnRlZ3JhdGlvbiwgaXNJbnN0YWxsYWJsZUludGVncmF0aW9uLCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMgfSBmcm9tICcuLi8uLi9jb3JlL3N0YXRzL21ldHJpYy1oZWxwZXJzJztcbmltcG9ydCB7IGNyZWF0ZURlZmVycmVkIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuZnVuY3Rpb24gZmx1c2hRdWV1ZSh4dCwgcXVldWUpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmYWlsZWRRdWV1ZTtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkUXVldWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzT2ZmbGluZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcXVldWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBXaGlsZShmdW5jdGlvbiAoKSB7IHJldHVybiBxdWV1ZS5sZW5ndGggPiAwICYmIGlzT25saW5lKCk7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4LCByZXN1bHQsIHN1Y2Nlc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gcXVldWUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhdHRlbXB0KGN0eCwgeHQpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IHJlc3VsdCBpbnN0YW5jZW9mIENvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlLWFkZCBmYWlsZWQgdGFza3NcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmUtYWRkIGZhaWxlZCB0YXNrc1xuICAgICAgICAgICAgICAgICAgICBmYWlsZWRRdWV1ZS5tYXAoZnVuY3Rpb24gKGZhaWxlZCkgeyByZXR1cm4gcXVldWUucHVzaFdpdGhCYWNrb2ZmKGZhaWxlZCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcXVldWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbnZhciBMZWdhY3lEZXN0aW5hdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMZWdhY3lEZXN0aW5hdGlvbihuYW1lLCB2ZXJzaW9uLCB3cml0ZUtleSwgc2V0dGluZ3MsIG9wdGlvbnMsIGludGVncmF0aW9uU291cmNlKSB7XG4gICAgICAgIGlmIChzZXR0aW5ncyA9PT0gdm9pZCAwKSB7IHNldHRpbmdzID0ge307IH1cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgICAgIHRoaXMudHlwZSA9ICdkZXN0aW5hdGlvbic7XG4gICAgICAgIHRoaXMubWlkZGxld2FyZSA9IFtdO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVQcm9taXNlID0gY3JlYXRlRGVmZXJyZWQoKTtcbiAgICAgICAgdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gX19hc3NpZ24oe30sIHNldHRpbmdzKTtcbiAgICAgICAgdGhpcy5kaXNhYmxlQXV0b0lTT0NvbnZlcnNpb24gPSBvcHRpb25zLmRpc2FibGVBdXRvSVNPQ29udmVyc2lvbiB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvblNvdXJjZSA9IGludGVncmF0aW9uU291cmNlO1xuICAgICAgICAvLyBBSlMtUmVuZGVyZXIgc2V0cyBhbiBleHRyYW5lb3VzIGB0eXBlYCBzZXR0aW5nIHRoYXQgY2xvYmJlcnNcbiAgICAgICAgLy8gZXhpc3RpbmcgdHlwZSBkZWZhdWx0cy4gV2UgbmVlZCB0byByZW1vdmUgaXQgaWYgaXQncyBwcmVzZW50XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzWyd0eXBlJ10gJiYgdGhpcy5zZXR0aW5nc1sndHlwZSddID09PSAnYnJvd3NlcicpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNldHRpbmdzWyd0eXBlJ107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbml0aWFsaXplUHJvbWlzZS5wcm9taXNlLnRoZW4oZnVuY3Rpb24gKGlzSW5pdGlhbGl6ZWQpIHsgcmV0dXJuIChfdGhpcy5faW5pdGlhbGl6ZWQgPSBpc0luaXRpYWxpemVkKTsgfSwgZnVuY3Rpb24gKCkgeyB9KTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5idWZmZXIgPSBvcHRpb25zLmRpc2FibGVDbGllbnRQZXJzaXN0ZW5jZVxuICAgICAgICAgICAgPyBuZXcgUHJpb3JpdHlRdWV1ZSg0LCBbXSlcbiAgICAgICAgICAgIDogbmV3IFBlcnNpc3RlZFByaW9yaXR5UXVldWUoNCwgXCJcIi5jb25jYXQod3JpdGVLZXksIFwiOmRlc3QtXCIpLmNvbmNhdChuYW1lKSk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX3JlYWR5O1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsaXplUHJvbWlzZS5wcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgeyB2YXIgX2E7IHJldHVybiAoX2EgPSBfdGhpcy5vblJlYWR5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBQcm9taXNlLnJlc29sdmUoKTsgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChjdHgsIGFuYWx5dGljc0luc3RhbmNlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGludGVncmF0aW9uU291cmNlLCBfYjtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVhZHkgfHwgdGhpcy5vblJlYWR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgoX2EgPSB0aGlzLmludGVncmF0aW9uU291cmNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFs0IC8qeWllbGQqLywgbG9hZEludGVncmF0aW9uKGN0eCwgdGhpcy5uYW1lLCB0aGlzLnZlcnNpb24sIHRoaXMub3B0aW9ucy5vYmZ1c2NhdGUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSAoX2Muc2VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25Tb3VyY2UgPSBfYjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZWdyYXRpb24gPSBidWlsZEludGVncmF0aW9uKGludGVncmF0aW9uU291cmNlLCB0aGlzLnNldHRpbmdzLCBhbmFseXRpY3NJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVhZHkgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvblJlYWR5Rm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9yZWFkeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbnRlZ3JhdGlvbi5vbmNlKCdyZWFkeScsIG9uUmVhZHlGbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZWdyYXRpb24ub24oJ2luaXRpYWxpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdGlhbGl6ZVByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZE5hbWU6ICdpbml0aWFsaXplJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZWdyYXRpb24uaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnaW5pdGlhbGl6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzc2ljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlkRXJyb3I6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUudW5sb2FkID0gZnVuY3Rpb24gKF9jdHgsIF9hbmFseXRpY3NJbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gdW5sb2FkSW50ZWdyYXRpb24odGhpcy5uYW1lLCB0aGlzLnZlcnNpb24sIHRoaXMub3B0aW9ucy5vYmZ1c2NhdGUpO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmFkZE1pZGRsZXdhcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGZuID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBmbltfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWlkZGxld2FyZSA9IChfYSA9IHRoaXMubWlkZGxld2FyZSkuY29uY2F0LmFwcGx5KF9hLCBmbik7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuc2hvdWxkQnVmZmVyID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAvLyBwYWdlIGV2ZW50cyBjYW4ndCBiZSBidWZmZXJlZCBiZWNhdXNlIG9mIGRlc3RpbmF0aW9ucyB0aGF0IGF1dG9tYXRpY2FsbHkgYWRkIHBhZ2Ugdmlld3NcbiAgICAgICAgY3R4LmV2ZW50LnR5cGUgIT09ICdwYWdlJyAmJlxuICAgICAgICAgICAgKGlzT2ZmbGluZSgpIHx8IHRoaXMuX3JlYWR5ID09PSBmYWxzZSB8fCB0aGlzLl9pbml0aWFsaXplZCA9PT0gZmFsc2UpKTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKGN0eCwgY2x6LCBldmVudFR5cGUpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBsYW4sIGV2LCBwbGFuRXZlbnQsIGFmdGVyTWlkZGxld2FyZSwgZXZlbnQsIGVycl8xO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkQnVmZmVyKGN0eCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFuID0gKF9iID0gKF9hID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGxhbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRyYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXYgPSBjdHguZXZlbnQuZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxhbiAmJiBldiAmJiB0aGlzLm5hbWUgIT09ICdTZWdtZW50LmlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYW5FdmVudCA9IHBsYW5bZXZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNQbGFuRXZlbnRFbmFibGVkKHBsYW4sIHBsYW5FdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnVwZGF0ZUV2ZW50KCdpbnRlZ3JhdGlvbnMnLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4LmV2ZW50LmludGVncmF0aW9ucyksIHsgQWxsOiBmYWxzZSwgJ1NlZ21lbnQuaW8nOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbmNlbChuZXcgQ29udGV4dENhbmNlbGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJFdmVudCBcIi5jb25jYXQoZXYsIFwiIGRpc2FibGVkIGZvciBpbnRlZ3JhdGlvbiBcIikuY29uY2F0KHRoaXMubmFtZSwgXCIgaW4gdHJhY2tpbmcgcGxhblwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdEcm9wcGVkIGJ5IHBsYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnVwZGF0ZUV2ZW50KCdpbnRlZ3JhdGlvbnMnLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4LmV2ZW50LmludGVncmF0aW9ucyksIHBsYW5FdmVudCA9PT0gbnVsbCB8fCBwbGFuRXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYW5FdmVudC5pbnRlZ3JhdGlvbnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuZW5hYmxlZCkgJiYgKHBsYW5FdmVudCA9PT0gbnVsbCB8fCBwbGFuRXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYW5FdmVudC5pbnRlZ3JhdGlvbnNbdGhpcy5uYW1lXSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jYW5jZWwobmV3IENvbnRleHRDYW5jZWxhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRyeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiRXZlbnQgXCIuY29uY2F0KGV2LCBcIiBkaXNhYmxlZCBmb3IgaW50ZWdyYXRpb24gXCIpLmNvbmNhdCh0aGlzLm5hbWUsIFwiIGluIHRyYWNraW5nIHBsYW5cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRHJvcHBlZCBieSBwbGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhcHBseURlc3RpbmF0aW9uTWlkZGxld2FyZSh0aGlzLm5hbWUsIGN0eC5ldmVudCwgdGhpcy5taWRkbGV3YXJlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyTWlkZGxld2FyZSA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZnRlck1pZGRsZXdhcmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gbmV3IGNseihhZnRlck1pZGRsZXdhcmUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZTogIXRoaXMuZGlzYWJsZUF1dG9JU09Db252ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW50ZWdyYXRpb24pIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbnRlZ3JhdGlvbi5pbnZva2UuY2FsbCh0aGlzLmludGVncmF0aW9uLCBldmVudFR5cGUsIGV2ZW50KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZEVycm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kKGN0eCwgVHJhY2ssICd0cmFjaycpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5pbnRlZ3JhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9hc3N1bWVzUGFnZXZpZXcpICYmICF0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZWdyYXRpb24uaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbml0aWFsaXplUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIFBhZ2UsICdwYWdlJyldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmQoY3R4LCBJZGVudGlmeSwgJ2lkZW50aWZ5JyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIEFsaWFzLCAnYWxpYXMnKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuZ3JvdXAgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kKGN0eCwgR3JvdXAsICdncm91cCcpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5zY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5mbHVzaGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbWlzdXNlZC1wcm9taXNlc1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmx1c2hRdWV1ZSh0aGlzLCB0aGlzLmJ1ZmZlcildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5idWZmZXIgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdXNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idWZmZXIudG9kbyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH0sIE1hdGgucmFuZG9tKCkgKiA1MDAwKTtcbiAgICB9O1xuICAgIHJldHVybiBMZWdhY3lEZXN0aW5hdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBMZWdhY3lEZXN0aW5hdGlvbiB9O1xuZXhwb3J0IGZ1bmN0aW9uIGFqc0Rlc3RpbmF0aW9ucyh3cml0ZUtleSwgc2V0dGluZ3MsIGdsb2JhbEludGVncmF0aW9ucywgb3B0aW9ucywgcm91dGluZ01pZGRsZXdhcmUsIGxlZ2FjeUludGVncmF0aW9uU291cmNlcykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKGdsb2JhbEludGVncmF0aW9ucyA9PT0gdm9pZCAwKSB7IGdsb2JhbEludGVncmF0aW9ucyA9IHt9OyB9XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICBpZiAoaXNTZXJ2ZXIoKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGlmIChzZXR0aW5ncy5wbGFuKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fTtcbiAgICAgICAgb3B0aW9ucy5wbGFuID0gc2V0dGluZ3MucGxhbjtcbiAgICB9XG4gICAgdmFyIHJvdXRpbmdSdWxlcyA9IChfYiA9IChfYSA9IHNldHRpbmdzLm1pZGRsZXdhcmVTZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJvdXRpbmdSdWxlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgdmFyIHJlbW90ZUludGVncmF0aW9uc0NvbmZpZyA9IHNldHRpbmdzLmludGVncmF0aW9ucztcbiAgICB2YXIgbG9jYWxJbnRlZ3JhdGlvbnNDb25maWcgPSBvcHRpb25zLmludGVncmF0aW9ucztcbiAgICAvLyBtZXJnZWQgcmVtb3RlIENETiBzZXR0aW5ncyB3aXRoIHVzZXIgcHJvdmlkZWQgb3B0aW9uc1xuICAgIHZhciBpbnRlZ3JhdGlvbk9wdGlvbnMgPSBtZXJnZWRPcHRpb25zKHNldHRpbmdzLCBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSk7XG4gICAgdmFyIGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzID0gbGVnYWN5SW50ZWdyYXRpb25Tb3VyY2VzID09PSBudWxsIHx8IGxlZ2FjeUludGVncmF0aW9uU291cmNlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGVnYWN5SW50ZWdyYXRpb25Tb3VyY2VzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIGFjYyksIChfYSA9IHt9LCBfYVtyZXNvbHZlSW50ZWdyYXRpb25OYW1lRnJvbVNvdXJjZShpbnRlZ3JhdGlvblNvdXJjZSldID0gaW50ZWdyYXRpb25Tb3VyY2UsIF9hKSkpO1xuICAgIH0sIHt9KTtcbiAgICB2YXIgaW5zdGFsbGFibGVJbnRlZ3JhdGlvbnMgPSBuZXcgU2V0KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgT2JqZWN0LmtleXMocmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnKS5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGlzSW5zdGFsbGFibGVJbnRlZ3JhdGlvbihuYW1lLCByZW1vdGVJbnRlZ3JhdGlvbnNDb25maWdbbmFtZV0pO1xuICAgIH0pLCB0cnVlKSwgT2JqZWN0LmtleXMoYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgfHwge30pLmZpbHRlcihmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gaXNQbGFpbk9iamVjdChyZW1vdGVJbnRlZ3JhdGlvbnNDb25maWdbbmFtZV0pIHx8XG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KGxvY2FsSW50ZWdyYXRpb25zQ29uZmlnID09PSBudWxsIHx8IGxvY2FsSW50ZWdyYXRpb25zQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2NhbEludGVncmF0aW9uc0NvbmZpZ1tuYW1lXSk7XG4gICAgfSksIHRydWUpKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShpbnN0YWxsYWJsZUludGVncmF0aW9ucylcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gIXNob3VsZFNraXBJbnRlZ3JhdGlvbihuYW1lLCBnbG9iYWxJbnRlZ3JhdGlvbnMpOyB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBpbnRlZ3JhdGlvblNldHRpbmdzID0gcmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnW25hbWVdO1xuICAgICAgICB2YXIgdmVyc2lvbiA9IHJlc29sdmVWZXJzaW9uKGludGVncmF0aW9uU2V0dGluZ3MpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSBuZXcgTGVnYWN5RGVzdGluYXRpb24obmFtZSwgdmVyc2lvbiwgd3JpdGVLZXksIGludGVncmF0aW9uT3B0aW9uc1tuYW1lXSwgb3B0aW9ucywgYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgPT09IG51bGwgfHwgYWRob2NJbnRlZ3JhdGlvblNvdXJjZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzW25hbWVdKTtcbiAgICAgICAgdmFyIHJvdXRpbmcgPSByb3V0aW5nUnVsZXMuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7IHJldHVybiBydWxlLmRlc3RpbmF0aW9uTmFtZSA9PT0gbmFtZTsgfSk7XG4gICAgICAgIGlmIChyb3V0aW5nLmxlbmd0aCA+IDAgJiYgcm91dGluZ01pZGRsZXdhcmUpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZE1pZGRsZXdhcmUocm91dGluZ01pZGRsZXdhcmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js":
/*!******************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildIntegration: () => (/* binding */ buildIntegration),\n/* harmony export */   loadIntegration: () => (/* binding */ loadIntegration),\n/* harmony export */   resolveIntegrationNameFromSource: () => (/* binding */ resolveIntegrationNameFromSource),\n/* harmony export */   resolveVersion: () => (/* binding */ resolveVersion),\n/* harmony export */   unloadIntegration: () => (/* binding */ unloadIntegration)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/load-script */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n\n\n\nfunction normalizeName(name) {\n    return name.toLowerCase().replace('.', '').replace(/\\s+/g, '-');\n}\nfunction obfuscatePathName(pathName, obfuscate) {\n    if (obfuscate === void 0) { obfuscate = false; }\n    return obfuscate ? btoa(pathName).replace(/=/g, '') : undefined;\n}\nfunction resolveIntegrationNameFromSource(integrationSource) {\n    return ('Integration' in integrationSource\n        ? integrationSource.Integration\n        : integrationSource).prototype.name;\n}\nfunction recordLoadMetrics(fullPath, ctx, name) {\n    var _a, _b;\n    try {\n        var metric = ((_b = (_a = window === null || window === void 0 ? void 0 : window.performance) === null || _a === void 0 ? void 0 : _a.getEntriesByName(fullPath, 'resource')) !== null && _b !== void 0 ? _b : [])[0];\n        // we assume everything that took under 100ms is cached\n        metric &&\n            ctx.stats.gauge('legacy_destination_time', Math.round(metric.duration), (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([\n                name\n            ], (metric.duration < 100 ? ['cached'] : []), true));\n    }\n    catch (_) {\n        // not available\n    }\n}\nfunction buildIntegration(integrationSource, integrationSettings, analyticsInstance) {\n    var integrationCtr;\n    // GA and Appcues use a different interface to instantiating integrations\n    if ('Integration' in integrationSource) {\n        var analyticsStub = {\n            user: function () { return analyticsInstance.user(); },\n            addIntegration: function () { },\n        };\n        integrationSource(analyticsStub);\n        integrationCtr = integrationSource.Integration;\n    }\n    else {\n        integrationCtr = integrationSource;\n    }\n    var integration = new integrationCtr(integrationSettings);\n    integration.analytics = analyticsInstance;\n    return integration;\n}\nfunction loadIntegration(ctx, name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var pathName, obfuscatedPathName, path, fullPath, err_1, deps;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    pathName = normalizeName(name);\n                    obfuscatedPathName = obfuscatePathName(pathName, obfuscate);\n                    path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n                    fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(fullPath)];\n                case 2:\n                    _a.sent();\n                    recordLoadMetrics(fullPath, ctx, name);\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    ctx.stats.gauge('legacy_destination_time', -1, [\"plugin:\".concat(name), \"failed\"]);\n                    throw err_1;\n                case 4:\n                    deps = window[\"\".concat(pathName, \"Deps\")];\n                    return [4 /*yield*/, Promise.all(deps.map(function (dep) { return (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(path + dep + '.gz'); }))\n                        // @ts-ignore\n                    ];\n                case 5:\n                    _a.sent();\n                    // @ts-ignore\n                    window[\"\".concat(pathName, \"Loader\")]();\n                    return [2 /*return*/, window[\n                        // @ts-ignore\n                        \"\".concat(pathName, \"Integration\")]];\n            }\n        });\n    });\n}\nfunction unloadIntegration(name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var path, pathName, obfuscatedPathName, fullPath;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n            pathName = normalizeName(name);\n            obfuscatedPathName = obfuscatePathName(name, obfuscate);\n            fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n            return [2 /*return*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.unloadScript)(fullPath)];\n        });\n    });\n}\nfunction resolveVersion(settings) {\n    var _a, _b, _c, _d;\n    return ((_d = (_b = (_a = settings === null || settings === void 0 ? void 0 : settings.versionSettings) === null || _a === void 0 ? void 0 : _a.override) !== null && _b !== void 0 ? _b : (_c = settings === null || settings === void 0 ? void 0 : settings.versionSettings) === null || _c === void 0 ? void 0 : _c.version) !== null && _d !== void 0 ? _d : 'latest');\n}\n//# sourceMappingURL=loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL2xvYWRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE4RDtBQUNEO0FBQ0k7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRkFBb0Ysb0RBQWE7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGtDQUFrQztBQUNsRSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0VBQXNCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDREQUFVO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLE9BQU8sNERBQVUsdUJBQXVCO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1AsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUIsbUJBQW1CLHNFQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsOERBQVk7QUFDOUMsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vbG9hZGVyLmpzPzJhNzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgZ2V0TmV4dEludGVncmF0aW9uc1VSTCB9IGZyb20gJy4uLy4uL2xpYi9wYXJzZS1jZG4nO1xuaW1wb3J0IHsgbG9hZFNjcmlwdCwgdW5sb2FkU2NyaXB0IH0gZnJvbSAnLi4vLi4vbGliL2xvYWQtc2NyaXB0JztcbmZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnLicsICcnKS5yZXBsYWNlKC9cXHMrL2csICctJyk7XG59XG5mdW5jdGlvbiBvYmZ1c2NhdGVQYXRoTmFtZShwYXRoTmFtZSwgb2JmdXNjYXRlKSB7XG4gICAgaWYgKG9iZnVzY2F0ZSA9PT0gdm9pZCAwKSB7IG9iZnVzY2F0ZSA9IGZhbHNlOyB9XG4gICAgcmV0dXJuIG9iZnVzY2F0ZSA/IGJ0b2EocGF0aE5hbWUpLnJlcGxhY2UoLz0vZywgJycpIDogdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVJbnRlZ3JhdGlvbk5hbWVGcm9tU291cmNlKGludGVncmF0aW9uU291cmNlKSB7XG4gICAgcmV0dXJuICgnSW50ZWdyYXRpb24nIGluIGludGVncmF0aW9uU291cmNlXG4gICAgICAgID8gaW50ZWdyYXRpb25Tb3VyY2UuSW50ZWdyYXRpb25cbiAgICAgICAgOiBpbnRlZ3JhdGlvblNvdXJjZSkucHJvdG90eXBlLm5hbWU7XG59XG5mdW5jdGlvbiByZWNvcmRMb2FkTWV0cmljcyhmdWxsUGF0aCwgY3R4LCBuYW1lKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICB0cnkge1xuICAgICAgICB2YXIgbWV0cmljID0gKChfYiA9IChfYSA9IHdpbmRvdyA9PT0gbnVsbCB8fCB3aW5kb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbmRvdy5wZXJmb3JtYW5jZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEVudHJpZXNCeU5hbWUoZnVsbFBhdGgsICdyZXNvdXJjZScpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXSlbMF07XG4gICAgICAgIC8vIHdlIGFzc3VtZSBldmVyeXRoaW5nIHRoYXQgdG9vayB1bmRlciAxMDBtcyBpcyBjYWNoZWRcbiAgICAgICAgbWV0cmljICYmXG4gICAgICAgICAgICBjdHguc3RhdHMuZ2F1Z2UoJ2xlZ2FjeV9kZXN0aW5hdGlvbl90aW1lJywgTWF0aC5yb3VuZChtZXRyaWMuZHVyYXRpb24pLCBfX3NwcmVhZEFycmF5KFtcbiAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICBdLCAobWV0cmljLmR1cmF0aW9uIDwgMTAwID8gWydjYWNoZWQnXSA6IFtdKSwgdHJ1ZSkpO1xuICAgIH1cbiAgICBjYXRjaCAoXykge1xuICAgICAgICAvLyBub3QgYXZhaWxhYmxlXG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkSW50ZWdyYXRpb24oaW50ZWdyYXRpb25Tb3VyY2UsIGludGVncmF0aW9uU2V0dGluZ3MsIGFuYWx5dGljc0luc3RhbmNlKSB7XG4gICAgdmFyIGludGVncmF0aW9uQ3RyO1xuICAgIC8vIEdBIGFuZCBBcHBjdWVzIHVzZSBhIGRpZmZlcmVudCBpbnRlcmZhY2UgdG8gaW5zdGFudGlhdGluZyBpbnRlZ3JhdGlvbnNcbiAgICBpZiAoJ0ludGVncmF0aW9uJyBpbiBpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgICAgICB2YXIgYW5hbHl0aWNzU3R1YiA9IHtcbiAgICAgICAgICAgIHVzZXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFuYWx5dGljc0luc3RhbmNlLnVzZXIoKTsgfSxcbiAgICAgICAgICAgIGFkZEludGVncmF0aW9uOiBmdW5jdGlvbiAoKSB7IH0sXG4gICAgICAgIH07XG4gICAgICAgIGludGVncmF0aW9uU291cmNlKGFuYWx5dGljc1N0dWIpO1xuICAgICAgICBpbnRlZ3JhdGlvbkN0ciA9IGludGVncmF0aW9uU291cmNlLkludGVncmF0aW9uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaW50ZWdyYXRpb25DdHIgPSBpbnRlZ3JhdGlvblNvdXJjZTtcbiAgICB9XG4gICAgdmFyIGludGVncmF0aW9uID0gbmV3IGludGVncmF0aW9uQ3RyKGludGVncmF0aW9uU2V0dGluZ3MpO1xuICAgIGludGVncmF0aW9uLmFuYWx5dGljcyA9IGFuYWx5dGljc0luc3RhbmNlO1xuICAgIHJldHVybiBpbnRlZ3JhdGlvbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2FkSW50ZWdyYXRpb24oY3R4LCBuYW1lLCB2ZXJzaW9uLCBvYmZ1c2NhdGUpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXRoTmFtZSwgb2JmdXNjYXRlZFBhdGhOYW1lLCBwYXRoLCBmdWxsUGF0aCwgZXJyXzEsIGRlcHM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHBhdGhOYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgb2JmdXNjYXRlZFBhdGhOYW1lID0gb2JmdXNjYXRlUGF0aE5hbWUocGF0aE5hbWUsIG9iZnVzY2F0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBnZXROZXh0SW50ZWdyYXRpb25zVVJMKCk7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGxQYXRoID0gXCJcIi5jb25jYXQocGF0aCwgXCIvaW50ZWdyYXRpb25zL1wiKS5jb25jYXQob2JmdXNjYXRlZFBhdGhOYW1lICE9PSBudWxsICYmIG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gdm9pZCAwID8gb2JmdXNjYXRlZFBhdGhOYW1lIDogcGF0aE5hbWUsIFwiL1wiKS5jb25jYXQodmVyc2lvbiwgXCIvXCIpLmNvbmNhdChvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IG51bGwgJiYgb2JmdXNjYXRlZFBhdGhOYW1lICE9PSB2b2lkIDAgPyBvYmZ1c2NhdGVkUGF0aE5hbWUgOiBwYXRoTmFtZSwgXCIuZHluYW1pYy5qcy5nelwiKTtcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbG9hZFNjcmlwdChmdWxsUGF0aCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZWNvcmRMb2FkTWV0cmljcyhmdWxsUGF0aCwgY3R4LCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnN0YXRzLmdhdWdlKCdsZWdhY3lfZGVzdGluYXRpb25fdGltZScsIC0xLCBbXCJwbHVnaW46XCIuY29uY2F0KG5hbWUpLCBcImZhaWxlZFwiXSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycl8xO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgZGVwcyA9IHdpbmRvd1tcIlwiLmNvbmNhdChwYXRoTmFtZSwgXCJEZXBzXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoZGVwcy5tYXAoZnVuY3Rpb24gKGRlcCkgeyByZXR1cm4gbG9hZFNjcmlwdChwYXRoICsgZGVwICsgJy5neicpOyB9KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3dbXCJcIi5jb25jYXQocGF0aE5hbWUsIFwiTG9hZGVyXCIpXSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgd2luZG93W1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcIi5jb25jYXQocGF0aE5hbWUsIFwiSW50ZWdyYXRpb25cIildXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5sb2FkSW50ZWdyYXRpb24obmFtZSwgdmVyc2lvbiwgb2JmdXNjYXRlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aCwgcGF0aE5hbWUsIG9iZnVzY2F0ZWRQYXRoTmFtZSwgZnVsbFBhdGg7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHBhdGggPSBnZXROZXh0SW50ZWdyYXRpb25zVVJMKCk7XG4gICAgICAgICAgICBwYXRoTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICBvYmZ1c2NhdGVkUGF0aE5hbWUgPSBvYmZ1c2NhdGVQYXRoTmFtZShuYW1lLCBvYmZ1c2NhdGUpO1xuICAgICAgICAgICAgZnVsbFBhdGggPSBcIlwiLmNvbmNhdChwYXRoLCBcIi9pbnRlZ3JhdGlvbnMvXCIpLmNvbmNhdChvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IG51bGwgJiYgb2JmdXNjYXRlZFBhdGhOYW1lICE9PSB2b2lkIDAgPyBvYmZ1c2NhdGVkUGF0aE5hbWUgOiBwYXRoTmFtZSwgXCIvXCIpLmNvbmNhdCh2ZXJzaW9uLCBcIi9cIikuY29uY2F0KG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gbnVsbCAmJiBvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IHZvaWQgMCA/IG9iZnVzY2F0ZWRQYXRoTmFtZSA6IHBhdGhOYW1lLCBcIi5keW5hbWljLmpzLmd6XCIpO1xuICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHVubG9hZFNjcmlwdChmdWxsUGF0aCldO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlVmVyc2lvbihzZXR0aW5ncykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICByZXR1cm4gKChfZCA9IChfYiA9IChfYSA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy52ZXJzaW9uU2V0dGluZ3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vdmVycmlkZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogKF9jID0gc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLnZlcnNpb25TZXR0aW5ncykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnZlcnNpb24pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6ICdsYXRlc3QnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvYWRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDisabledIntegration: () => (/* binding */ isDisabledIntegration),\n/* harmony export */   isInstallableIntegration: () => (/* binding */ isInstallableIntegration)\n/* harmony export */ });\nvar isInstallableIntegration = function (name, integrationSettings) {\n    var _a;\n    var type = integrationSettings.type, bundlingStatus = integrationSettings.bundlingStatus, versionSettings = integrationSettings.versionSettings;\n    // We use `!== 'unbundled'` (versus `=== 'bundled'`) to be inclusive of\n    // destinations without a defined value for `bundlingStatus`\n    var deviceMode = bundlingStatus !== 'unbundled' &&\n        (type === 'browser' || ((_a = versionSettings === null || versionSettings === void 0 ? void 0 : versionSettings.componentTypes) === null || _a === void 0 ? void 0 : _a.includes('browser')));\n    // checking for iterable is a quick fix we need in place to prevent\n    // errors showing Iterable as a failed destiantion. Ideally, we should\n    // fix the Iterable metadata instead, but that's a longer process.\n    return !name.startsWith('Segment') && name !== 'Iterable' && deviceMode;\n};\nvar isDisabledIntegration = function (integrationName, globalIntegrations) {\n    var allDisableAndNotDefined = globalIntegrations.All === false &&\n        globalIntegrations[integrationName] === undefined;\n    return (globalIntegrations[integrationName] === false || allDisableAndNotDefined);\n};\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL3V0aWxzLmpzP2YyNTAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBpc0luc3RhbGxhYmxlSW50ZWdyYXRpb24gPSBmdW5jdGlvbiAobmFtZSwgaW50ZWdyYXRpb25TZXR0aW5ncykge1xuICAgIHZhciBfYTtcbiAgICB2YXIgdHlwZSA9IGludGVncmF0aW9uU2V0dGluZ3MudHlwZSwgYnVuZGxpbmdTdGF0dXMgPSBpbnRlZ3JhdGlvblNldHRpbmdzLmJ1bmRsaW5nU3RhdHVzLCB2ZXJzaW9uU2V0dGluZ3MgPSBpbnRlZ3JhdGlvblNldHRpbmdzLnZlcnNpb25TZXR0aW5ncztcbiAgICAvLyBXZSB1c2UgYCE9PSAndW5idW5kbGVkJ2AgKHZlcnN1cyBgPT09ICdidW5kbGVkJ2ApIHRvIGJlIGluY2x1c2l2ZSBvZlxuICAgIC8vIGRlc3RpbmF0aW9ucyB3aXRob3V0IGEgZGVmaW5lZCB2YWx1ZSBmb3IgYGJ1bmRsaW5nU3RhdHVzYFxuICAgIHZhciBkZXZpY2VNb2RlID0gYnVuZGxpbmdTdGF0dXMgIT09ICd1bmJ1bmRsZWQnICYmXG4gICAgICAgICh0eXBlID09PSAnYnJvd3NlcicgfHwgKChfYSA9IHZlcnNpb25TZXR0aW5ncyA9PT0gbnVsbCB8fCB2ZXJzaW9uU2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZlcnNpb25TZXR0aW5ncy5jb21wb25lbnRUeXBlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCdicm93c2VyJykpKTtcbiAgICAvLyBjaGVja2luZyBmb3IgaXRlcmFibGUgaXMgYSBxdWljayBmaXggd2UgbmVlZCBpbiBwbGFjZSB0byBwcmV2ZW50XG4gICAgLy8gZXJyb3JzIHNob3dpbmcgSXRlcmFibGUgYXMgYSBmYWlsZWQgZGVzdGlhbnRpb24uIElkZWFsbHksIHdlIHNob3VsZFxuICAgIC8vIGZpeCB0aGUgSXRlcmFibGUgbWV0YWRhdGEgaW5zdGVhZCwgYnV0IHRoYXQncyBhIGxvbmdlciBwcm9jZXNzLlxuICAgIHJldHVybiAhbmFtZS5zdGFydHNXaXRoKCdTZWdtZW50JykgJiYgbmFtZSAhPT0gJ0l0ZXJhYmxlJyAmJiBkZXZpY2VNb2RlO1xufTtcbmV4cG9ydCB2YXIgaXNEaXNhYmxlZEludGVncmF0aW9uID0gZnVuY3Rpb24gKGludGVncmF0aW9uTmFtZSwgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgdmFyIGFsbERpc2FibGVBbmROb3REZWZpbmVkID0gZ2xvYmFsSW50ZWdyYXRpb25zLkFsbCA9PT0gZmFsc2UgJiZcbiAgICAgICAgZ2xvYmFsSW50ZWdyYXRpb25zW2ludGVncmF0aW9uTmFtZV0gPT09IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gKGdsb2JhbEludGVncmF0aW9uc1tpbnRlZ3JhdGlvbk5hbWVdID09PSBmYWxzZSB8fCBhbGxEaXNhYmxlQW5kTm90RGVmaW5lZCk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ampId: () => (/* binding */ ampId),\n/* harmony export */   envEnrichment: () => (/* binding */ envEnrichment),\n/* harmony export */   utm: () => (/* binding */ utm)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(ssr)/../node_modules/js-cookie/dist/js.cookie.mjs\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/generated/version.js\");\n/* harmony import */ var _lib_version_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/version-type */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js\");\n/* harmony import */ var _core_user_tld__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/user/tld */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js\");\n/* harmony import */ var _core_query_string_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/query-string/gracefulDecodeURIComponent */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js\");\n/* harmony import */ var _core_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js\");\n/* harmony import */ var _core_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/storage */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js\");\n/* harmony import */ var _lib_client_hints__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/client-hints */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js\");\n\n\n\n\n\n\n\n\nvar cookieOptions;\nfunction getCookieOptions() {\n    if (cookieOptions) {\n        return cookieOptions;\n    }\n    var domain = (0,_core_user_tld__WEBPACK_IMPORTED_MODULE_1__.tld)(window.location.href);\n    cookieOptions = {\n        expires: 31536000000,\n        secure: false,\n        path: '/',\n    };\n    if (domain) {\n        cookieOptions.domain = domain;\n    }\n    return cookieOptions;\n}\nfunction ads(query) {\n    var queryIds = {\n        btid: 'dataxu',\n        urid: 'millennial-media',\n    };\n    if (query.startsWith('?')) {\n        query = query.substring(1);\n    }\n    query = query.replace(/\\?/g, '&');\n    var parts = query.split('&');\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        var _a = part.split('='), k = _a[0], v = _a[1];\n        if (queryIds[k]) {\n            return {\n                id: v,\n                type: queryIds[k],\n            };\n        }\n    }\n}\nfunction utm(query) {\n    if (query.startsWith('?')) {\n        query = query.substring(1);\n    }\n    query = query.replace(/\\?/g, '&');\n    return query.split('&').reduce(function (acc, str) {\n        var _a = str.split('='), k = _a[0], _b = _a[1], v = _b === void 0 ? '' : _b;\n        if (k.includes('utm_') && k.length > 4) {\n            var utmParam = k.slice(4);\n            if (utmParam === 'campaign') {\n                utmParam = 'name';\n            }\n            acc[utmParam] = (0,_core_query_string_gracefulDecodeURIComponent__WEBPACK_IMPORTED_MODULE_2__.gracefulDecodeURIComponent)(v);\n        }\n        return acc;\n    }, {});\n}\nfunction ampId() {\n    var ampId = js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get('_ga');\n    if (ampId && ampId.startsWith('amp')) {\n        return ampId;\n    }\n}\nfunction referrerId(query, ctx, disablePersistance) {\n    var _a;\n    var storage = new _core_storage__WEBPACK_IMPORTED_MODULE_3__.UniversalStorage(disablePersistance ? [] : [new _core_storage__WEBPACK_IMPORTED_MODULE_4__.CookieStorage(getCookieOptions())]);\n    var stored = storage.get('s:context.referrer');\n    var ad = (_a = ads(query)) !== null && _a !== void 0 ? _a : stored;\n    if (!ad) {\n        return;\n    }\n    if (ctx) {\n        ctx.referrer = (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.__assign)({}, ctx.referrer), ad);\n    }\n    storage.set('s:context.referrer', ad);\n}\n/**\n *\n * @param obj e.g. { foo: 'b', bar: 'd', baz: ['123', '456']}\n * @returns e.g. 'foo=b&bar=d&baz=123&baz=456'\n */\nvar objectToQueryString = function (obj) {\n    try {\n        var searchParams_1 = new URLSearchParams();\n        Object.entries(obj).forEach(function (_a) {\n            var k = _a[0], v = _a[1];\n            if (Array.isArray(v)) {\n                v.forEach(function (value) { return searchParams_1.append(k, value); });\n            }\n            else {\n                searchParams_1.append(k, v);\n            }\n        });\n        return searchParams_1.toString();\n    }\n    catch (_a) {\n        return '';\n    }\n};\nvar EnvironmentEnrichmentPlugin = /** @class */ (function () {\n    function EnvironmentEnrichmentPlugin() {\n        var _this = this;\n        this.name = 'Page Enrichment';\n        this.type = 'before';\n        this.version = '0.1.0';\n        this.isLoaded = function () { return true; };\n        this.load = function (_ctx, instance) { return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(_this, void 0, void 0, function () {\n            var _a, _1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.instance = instance;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, , 4]);\n                        _a = this;\n                        return [4 /*yield*/, (0,_lib_client_hints__WEBPACK_IMPORTED_MODULE_6__.clientHints)(this.instance.options.highEntropyValuesClientHints)];\n                    case 2:\n                        _a.userAgentData = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        _1 = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/, Promise.resolve()];\n                }\n            });\n        }); };\n        this.enrich = function (ctx) {\n            var _a, _b;\n            // Note: Types are off - context should never be undefined here, since it is set as part of event creation.\n            var evtCtx = ctx.event.context;\n            var search = evtCtx.page.search || '';\n            var query = typeof search === 'object' ? objectToQueryString(search) : search;\n            evtCtx.userAgent = navigator.userAgent;\n            evtCtx.userAgentData = _this.userAgentData;\n            // @ts-ignore\n            var locale = navigator.userLanguage || navigator.language;\n            if (typeof evtCtx.locale === 'undefined' && typeof locale !== 'undefined') {\n                evtCtx.locale = locale;\n            }\n            (_a = evtCtx.library) !== null && _a !== void 0 ? _a : (evtCtx.library = {\n                name: 'analytics.js',\n                version: \"\".concat((0,_lib_version_type__WEBPACK_IMPORTED_MODULE_7__.getVersionType)() === 'web' ? 'next' : 'npm:next', \"-\").concat(_generated_version__WEBPACK_IMPORTED_MODULE_8__.version),\n            });\n            if (query && !evtCtx.campaign) {\n                evtCtx.campaign = utm(query);\n            }\n            var amp = ampId();\n            if (amp) {\n                evtCtx.amp = { id: amp };\n            }\n            referrerId(query, evtCtx, (_b = _this.instance.options.disableClientPersistence) !== null && _b !== void 0 ? _b : false);\n            try {\n                evtCtx.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n            }\n            catch (_) {\n                // If browser doesn't have support leave timezone undefined\n            }\n            return ctx;\n        };\n        this.track = this.enrich;\n        this.identify = this.enrich;\n        this.page = this.enrich;\n        this.group = this.enrich;\n        this.alias = this.enrich;\n        this.screen = this.enrich;\n    }\n    return EnvironmentEnrichmentPlugin;\n}());\nvar envEnrichment = new EnvironmentEnrichmentPlugin();\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvZW52LWVucmljaG1lbnQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQzdCO0FBQ3NCO0FBQ007QUFDZDtBQUNzRDtBQUMzQjtBQUNoQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1EQUFHO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUJBQXFCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlHQUEwQjtBQUN0RDtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDTztBQUNQLGdCQUFnQixpREFBRztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMkRBQWdCLGdDQUFnQyx3REFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx5Q0FBeUM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLGdEQUFnRCxPQUFPLGdEQUFTO0FBQ2hFO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDhEQUFXO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxpRUFBYyxnREFBZ0QsdURBQU87QUFDeEcsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNNO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9lbnYtZW5yaWNobWVudC9pbmRleC5qcz83Y2JjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgamFyIGZyb20gJ2pzLWNvb2tpZSc7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi4vLi4vZ2VuZXJhdGVkL3ZlcnNpb24nO1xuaW1wb3J0IHsgZ2V0VmVyc2lvblR5cGUgfSBmcm9tICcuLi8uLi9saWIvdmVyc2lvbi10eXBlJztcbmltcG9ydCB7IHRsZCB9IGZyb20gJy4uLy4uL2NvcmUvdXNlci90bGQnO1xuaW1wb3J0IHsgZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL3F1ZXJ5LXN0cmluZy9ncmFjZWZ1bERlY29kZVVSSUNvbXBvbmVudCc7XG5pbXBvcnQgeyBDb29raWVTdG9yYWdlLCBVbml2ZXJzYWxTdG9yYWdlIH0gZnJvbSAnLi4vLi4vY29yZS9zdG9yYWdlJztcbmltcG9ydCB7IGNsaWVudEhpbnRzIH0gZnJvbSAnLi4vLi4vbGliL2NsaWVudC1oaW50cyc7XG52YXIgY29va2llT3B0aW9ucztcbmZ1bmN0aW9uIGdldENvb2tpZU9wdGlvbnMoKSB7XG4gICAgaWYgKGNvb2tpZU9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGNvb2tpZU9wdGlvbnM7XG4gICAgfVxuICAgIHZhciBkb21haW4gPSB0bGQod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgIGNvb2tpZU9wdGlvbnMgPSB7XG4gICAgICAgIGV4cGlyZXM6IDMxNTM2MDAwMDAwLFxuICAgICAgICBzZWN1cmU6IGZhbHNlLFxuICAgICAgICBwYXRoOiAnLycsXG4gICAgfTtcbiAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgIGNvb2tpZU9wdGlvbnMuZG9tYWluID0gZG9tYWluO1xuICAgIH1cbiAgICByZXR1cm4gY29va2llT3B0aW9ucztcbn1cbmZ1bmN0aW9uIGFkcyhxdWVyeSkge1xuICAgIHZhciBxdWVyeUlkcyA9IHtcbiAgICAgICAgYnRpZDogJ2RhdGF4dScsXG4gICAgICAgIHVyaWQ6ICdtaWxsZW5uaWFsLW1lZGlhJyxcbiAgICB9O1xuICAgIGlmIChxdWVyeS5zdGFydHNXaXRoKCc/JykpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuICAgIHF1ZXJ5ID0gcXVlcnkucmVwbGFjZSgvXFw/L2csICcmJyk7XG4gICAgdmFyIHBhcnRzID0gcXVlcnkuc3BsaXQoJyYnKTtcbiAgICBmb3IgKHZhciBfaSA9IDAsIHBhcnRzXzEgPSBwYXJ0czsgX2kgPCBwYXJ0c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgcGFydCA9IHBhcnRzXzFbX2ldO1xuICAgICAgICB2YXIgX2EgPSBwYXJ0LnNwbGl0KCc9JyksIGsgPSBfYVswXSwgdiA9IF9hWzFdO1xuICAgICAgICBpZiAocXVlcnlJZHNba10pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IHYsXG4gICAgICAgICAgICAgICAgdHlwZTogcXVlcnlJZHNba10sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHV0bShxdWVyeSkge1xuICAgIGlmIChxdWVyeS5zdGFydHNXaXRoKCc/JykpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuICAgIHF1ZXJ5ID0gcXVlcnkucmVwbGFjZSgvXFw/L2csICcmJyk7XG4gICAgcmV0dXJuIHF1ZXJ5LnNwbGl0KCcmJykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHN0cikge1xuICAgICAgICB2YXIgX2EgPSBzdHIuc3BsaXQoJz0nKSwgayA9IF9hWzBdLCBfYiA9IF9hWzFdLCB2ID0gX2IgPT09IHZvaWQgMCA/ICcnIDogX2I7XG4gICAgICAgIGlmIChrLmluY2x1ZGVzKCd1dG1fJykgJiYgay5sZW5ndGggPiA0KSB7XG4gICAgICAgICAgICB2YXIgdXRtUGFyYW0gPSBrLnNsaWNlKDQpO1xuICAgICAgICAgICAgaWYgKHV0bVBhcmFtID09PSAnY2FtcGFpZ24nKSB7XG4gICAgICAgICAgICAgICAgdXRtUGFyYW0gPSAnbmFtZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY2NbdXRtUGFyYW1dID0gZ3JhY2VmdWxEZWNvZGVVUklDb21wb25lbnQodik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYW1wSWQoKSB7XG4gICAgdmFyIGFtcElkID0gamFyLmdldCgnX2dhJyk7XG4gICAgaWYgKGFtcElkICYmIGFtcElkLnN0YXJ0c1dpdGgoJ2FtcCcpKSB7XG4gICAgICAgIHJldHVybiBhbXBJZDtcbiAgICB9XG59XG5mdW5jdGlvbiByZWZlcnJlcklkKHF1ZXJ5LCBjdHgsIGRpc2FibGVQZXJzaXN0YW5jZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgc3RvcmFnZSA9IG5ldyBVbml2ZXJzYWxTdG9yYWdlKGRpc2FibGVQZXJzaXN0YW5jZSA/IFtdIDogW25ldyBDb29raWVTdG9yYWdlKGdldENvb2tpZU9wdGlvbnMoKSldKTtcbiAgICB2YXIgc3RvcmVkID0gc3RvcmFnZS5nZXQoJ3M6Y29udGV4dC5yZWZlcnJlcicpO1xuICAgIHZhciBhZCA9IChfYSA9IGFkcyhxdWVyeSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHN0b3JlZDtcbiAgICBpZiAoIWFkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGN0eCkge1xuICAgICAgICBjdHgucmVmZXJyZXIgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4LnJlZmVycmVyKSwgYWQpO1xuICAgIH1cbiAgICBzdG9yYWdlLnNldCgnczpjb250ZXh0LnJlZmVycmVyJywgYWQpO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIG9iaiBlLmcuIHsgZm9vOiAnYicsIGJhcjogJ2QnLCBiYXo6IFsnMTIzJywgJzQ1NiddfVxuICogQHJldHVybnMgZS5nLiAnZm9vPWImYmFyPWQmYmF6PTEyMyZiYXo9NDU2J1xuICovXG52YXIgb2JqZWN0VG9RdWVyeVN0cmluZyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgc2VhcmNoUGFyYW1zXzEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBrID0gX2FbMF0sIHYgPSBfYVsxXTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgICAgICAgICAgICAgdi5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gc2VhcmNoUGFyYW1zXzEuYXBwZW5kKGssIHZhbHVlKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hQYXJhbXNfMS5hcHBlbmQoaywgdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2VhcmNoUGFyYW1zXzEudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59O1xudmFyIEVudmlyb25tZW50RW5yaWNobWVudFBsdWdpbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbnZpcm9ubWVudEVucmljaG1lbnRQbHVnaW4oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubmFtZSA9ICdQYWdlIEVucmljaG1lbnQnO1xuICAgICAgICB0aGlzLnR5cGUgPSAnYmVmb3JlJztcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gJzAuMS4wJztcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07XG4gICAgICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uIChfY3R4LCBpbnN0YW5jZSkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNsaWVudEhpbnRzKHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oaWdoRW50cm9weVZhbHVlc0NsaWVudEhpbnRzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnVzZXJBZ2VudERhdGEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgXzEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgdGhpcy5lbnJpY2ggPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgLy8gTm90ZTogVHlwZXMgYXJlIG9mZiAtIGNvbnRleHQgc2hvdWxkIG5ldmVyIGJlIHVuZGVmaW5lZCBoZXJlLCBzaW5jZSBpdCBpcyBzZXQgYXMgcGFydCBvZiBldmVudCBjcmVhdGlvbi5cbiAgICAgICAgICAgIHZhciBldnRDdHggPSBjdHguZXZlbnQuY29udGV4dDtcbiAgICAgICAgICAgIHZhciBzZWFyY2ggPSBldnRDdHgucGFnZS5zZWFyY2ggfHwgJyc7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB0eXBlb2Ygc2VhcmNoID09PSAnb2JqZWN0JyA/IG9iamVjdFRvUXVlcnlTdHJpbmcoc2VhcmNoKSA6IHNlYXJjaDtcbiAgICAgICAgICAgIGV2dEN0eC51c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgICAgICAgZXZ0Q3R4LnVzZXJBZ2VudERhdGEgPSBfdGhpcy51c2VyQWdlbnREYXRhO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdmFyIGxvY2FsZSA9IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLmxhbmd1YWdlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBldnRDdHgubG9jYWxlID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbG9jYWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGV2dEN0eC5sb2NhbGUgPSBsb2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoX2EgPSBldnRDdHgubGlicmFyeSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKGV2dEN0eC5saWJyYXJ5ID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdhbmFseXRpY3MuanMnLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IFwiXCIuY29uY2F0KGdldFZlcnNpb25UeXBlKCkgPT09ICd3ZWInID8gJ25leHQnIDogJ25wbTpuZXh0JywgXCItXCIpLmNvbmNhdCh2ZXJzaW9uKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5ICYmICFldnRDdHguY2FtcGFpZ24pIHtcbiAgICAgICAgICAgICAgICBldnRDdHguY2FtcGFpZ24gPSB1dG0ocXVlcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFtcCA9IGFtcElkKCk7XG4gICAgICAgICAgICBpZiAoYW1wKSB7XG4gICAgICAgICAgICAgICAgZXZ0Q3R4LmFtcCA9IHsgaWQ6IGFtcCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVmZXJyZXJJZChxdWVyeSwgZXZ0Q3R4LCAoX2IgPSBfdGhpcy5pbnN0YW5jZS5vcHRpb25zLmRpc2FibGVDbGllbnRQZXJzaXN0ZW5jZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZmFsc2UpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBldnRDdHgudGltZXpvbmUgPSBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoXykge1xuICAgICAgICAgICAgICAgIC8vIElmIGJyb3dzZXIgZG9lc24ndCBoYXZlIHN1cHBvcnQgbGVhdmUgdGltZXpvbmUgdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRyYWNrID0gdGhpcy5lbnJpY2g7XG4gICAgICAgIHRoaXMuaWRlbnRpZnkgPSB0aGlzLmVucmljaDtcbiAgICAgICAgdGhpcy5wYWdlID0gdGhpcy5lbnJpY2g7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSB0aGlzLmVucmljaDtcbiAgICAgICAgdGhpcy5hbGlhcyA9IHRoaXMuZW5yaWNoO1xuICAgICAgICB0aGlzLnNjcmVlbiA9IHRoaXMuZW5yaWNoO1xuICAgIH1cbiAgICByZXR1cm4gRW52aXJvbm1lbnRFbnJpY2htZW50UGx1Z2luO1xufSgpKTtcbmV4cG9ydCB2YXIgZW52RW5yaWNobWVudCA9IG5ldyBFbnZpcm9ubWVudEVucmljaG1lbnRQbHVnaW4oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js":
/*!**********************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadLegacyVideoPlugins: () => (/* binding */ loadLegacyVideoPlugins)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\nfunction loadLegacyVideoPlugins(analytics) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var plugins;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, __webpack_require__.e(/*! import() */ \"vendor-chunks/@segment\").then(__webpack_require__.t.bind(__webpack_require__, /*! @segment/analytics.js-video-plugins/dist/index.umd.js */ \"(ssr)/../node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js\", 23))\n                    // This is super gross, but we need to support the `window.analytics.plugins` namespace\n                    // that is linked in the segment docs in order to be backwards compatible with ajs-classic\n                    // @ts-expect-error\n                ];\n                case 1:\n                    plugins = _a.sent();\n                    // This is super gross, but we need to support the `window.analytics.plugins` namespace\n                    // that is linked in the segment docs in order to be backwards compatible with ajs-classic\n                    // @ts-expect-error\n                    analytics._plugins = plugins;\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvbGVnYWN5LXZpZGVvLXBsdWdpbnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0M7QUFDeEM7QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBLDZDQUE2QyxxUUFFK0I7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvbGVnYWN5LXZpZGVvLXBsdWdpbnMvaW5kZXguanM/NzlmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgZnVuY3Rpb24gbG9hZExlZ2FjeVZpZGVvUGx1Z2lucyhhbmFseXRpY3MpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwbHVnaW5zO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBpbXBvcnQoXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgJ0BzZWdtZW50L2FuYWx5dGljcy5qcy12aWRlby1wbHVnaW5zL2Rpc3QvaW5kZXgudW1kLmpzJylcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBzdXBlciBncm9zcywgYnV0IHdlIG5lZWQgdG8gc3VwcG9ydCB0aGUgYHdpbmRvdy5hbmFseXRpY3MucGx1Z2luc2AgbmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgaXMgbGlua2VkIGluIHRoZSBzZWdtZW50IGRvY3MgaW4gb3JkZXIgdG8gYmUgYmFja3dhcmRzIGNvbXBhdGlibGUgd2l0aCBhanMtY2xhc3NpY1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbnMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgc3VwZXIgZ3Jvc3MsIGJ1dCB3ZSBuZWVkIHRvIHN1cHBvcnQgdGhlIGB3aW5kb3cuYW5hbHl0aWNzLnBsdWdpbnNgIG5hbWVzcGFjZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IGlzIGxpbmtlZCBpbiB0aGUgc2VnbWVudCBkb2NzIGluIG9yZGVyIHRvIGJlIGJhY2t3YXJkcyBjb21wYXRpYmxlIHdpdGggYWpzLWNsYXNzaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MuX3BsdWdpbnMgPSBwbHVnaW5zO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/legacy-video-plugins/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyDestinationMiddleware: () => (/* binding */ applyDestinationMiddleware),\n/* harmony export */   sourceMiddlewarePlugin: () => (/* binding */ sourceMiddlewarePlugin)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _lib_to_facade__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/to-facade */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\");\n\n\n\nfunction applyDestinationMiddleware(destination, evt, middleware) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        function applyMiddleware(event, fn) {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n                var nextCalled, returnedEvent;\n                var _a;\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            nextCalled = false;\n                            returnedEvent = null;\n                            return [4 /*yield*/, fn({\n                                    payload: (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(event, {\n                                        clone: true,\n                                        traverse: false,\n                                    }),\n                                    integration: destination,\n                                    next: function (evt) {\n                                        nextCalled = true;\n                                        if (evt === null) {\n                                            returnedEvent = null;\n                                        }\n                                        if (evt) {\n                                            returnedEvent = evt.obj;\n                                        }\n                                    },\n                                })];\n                        case 1:\n                            _b.sent();\n                            if (!nextCalled && returnedEvent !== null) {\n                                returnedEvent = returnedEvent;\n                                returnedEvent.integrations = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, event.integrations), (_a = {}, _a[destination] = false, _a));\n                            }\n                            return [2 /*return*/, returnedEvent];\n                    }\n                });\n            });\n        }\n        var modifiedEvent, _i, middleware_1, md, result;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    modifiedEvent = (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(evt, {\n                        clone: true,\n                        traverse: false,\n                    }).rawEvent();\n                    _i = 0, middleware_1 = middleware;\n                    _a.label = 1;\n                case 1:\n                    if (!(_i < middleware_1.length)) return [3 /*break*/, 4];\n                    md = middleware_1[_i];\n                    return [4 /*yield*/, applyMiddleware(modifiedEvent, md)];\n                case 2:\n                    result = _a.sent();\n                    if (result === null) {\n                        return [2 /*return*/, null];\n                    }\n                    modifiedEvent = result;\n                    _a.label = 3;\n                case 3:\n                    _i++;\n                    return [3 /*break*/, 1];\n                case 4: return [2 /*return*/, modifiedEvent];\n            }\n        });\n    });\n}\nfunction sourceMiddlewarePlugin(fn, integrations) {\n    function apply(ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var nextCalled;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        nextCalled = false;\n                        return [4 /*yield*/, fn({\n                                payload: (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_1__.toFacade)(ctx.event, {\n                                    clone: true,\n                                    traverse: false,\n                                }),\n                                integrations: integrations !== null && integrations !== void 0 ? integrations : {},\n                                next: function (evt) {\n                                    nextCalled = true;\n                                    if (evt) {\n                                        ctx.event = evt.obj;\n                                    }\n                                },\n                            })];\n                    case 1:\n                        _a.sent();\n                        if (!nextCalled) {\n                            throw new _core_context__WEBPACK_IMPORTED_MODULE_2__.ContextCancelation({\n                                retry: false,\n                                type: 'middleware_cancellation',\n                                reason: 'Middleware `next` function skipped',\n                            });\n                        }\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    }\n    return {\n        name: \"Source Middleware \".concat(fn.name),\n        type: 'before',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function (ctx) { return Promise.resolve(ctx); },\n        track: apply,\n        page: apply,\n        identify: apply,\n        alias: apply,\n        group: apply,\n    };\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvbWlkZGxld2FyZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5RDtBQUNEO0FBQ1Q7QUFDeEM7QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsbUJBQW1CLGdEQUFTO0FBQzVCO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx3REFBUTtBQUNyRDtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLCtCQUErQjtBQUNoSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlLGtEQUFXO0FBQzFCO0FBQ0E7QUFDQSxvQ0FBb0Msd0RBQVE7QUFDNUM7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsd0RBQVE7QUFDakQ7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyxrSEFBa0g7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZEQUFrQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGNBQWM7QUFDOUMsK0JBQStCLDhCQUE4QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvbWlkZGxld2FyZS9pbmRleC5qcz9lOGQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb250ZXh0Q2FuY2VsYXRpb24gfSBmcm9tICcuLi8uLi9jb3JlL2NvbnRleHQnO1xuaW1wb3J0IHsgdG9GYWNhZGUgfSBmcm9tICcuLi8uLi9saWIvdG8tZmFjYWRlJztcbmV4cG9ydCBmdW5jdGlvbiBhcHBseURlc3RpbmF0aW9uTWlkZGxld2FyZShkZXN0aW5hdGlvbiwgZXZ0LCBtaWRkbGV3YXJlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBhcHBseU1pZGRsZXdhcmUoZXZlbnQsIGZuKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRDYWxsZWQsIHJldHVybmVkRXZlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5lZEV2ZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiB0b0ZhY2FkZShldmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb246IGRlc3RpbmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWRFdmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWRFdmVudCA9IGV2dC5vYmo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5leHRDYWxsZWQgJiYgcmV0dXJuZWRFdmVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5lZEV2ZW50ID0gcmV0dXJuZWRFdmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWRFdmVudC5pbnRlZ3JhdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZXZlbnQuaW50ZWdyYXRpb25zKSwgKF9hID0ge30sIF9hW2Rlc3RpbmF0aW9uXSA9IGZhbHNlLCBfYSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmV0dXJuZWRFdmVudF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtb2RpZmllZEV2ZW50LCBfaSwgbWlkZGxld2FyZV8xLCBtZCwgcmVzdWx0O1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBtb2RpZmllZEV2ZW50ID0gdG9GYWNhZGUoZXZ0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSkucmF3RXZlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCBtaWRkbGV3YXJlXzEgPSBtaWRkbGV3YXJlO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShfaSA8IG1pZGRsZXdhcmVfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgbWQgPSBtaWRkbGV3YXJlXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhcHBseU1pZGRsZXdhcmUobW9kaWZpZWRFdmVudCwgbWQpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG51bGxdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkRXZlbnQgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIF9pKys7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG1vZGlmaWVkRXZlbnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzb3VyY2VNaWRkbGV3YXJlUGx1Z2luKGZuLCBpbnRlZ3JhdGlvbnMpIHtcbiAgICBmdW5jdGlvbiBhcHBseShjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG5leHRDYWxsZWQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IHRvRmFjYWRlKGN0eC5ldmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IGludGVncmF0aW9ucyAhPT0gbnVsbCAmJiBpbnRlZ3JhdGlvbnMgIT09IHZvaWQgMCA/IGludGVncmF0aW9ucyA6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZXZlbnQgPSBldnQub2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0Q2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbnRleHRDYW5jZWxhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21pZGRsZXdhcmVfY2FuY2VsbGF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAnTWlkZGxld2FyZSBgbmV4dGAgZnVuY3Rpb24gc2tpcHBlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IFwiU291cmNlIE1pZGRsZXdhcmUgXCIuY29uY2F0KGZuLm5hbWUpLFxuICAgICAgICB0eXBlOiAnYmVmb3JlJyxcbiAgICAgICAgdmVyc2lvbjogJzAuMS4wJyxcbiAgICAgICAgaXNMb2FkZWQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uIChjdHgpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjdHgpOyB9LFxuICAgICAgICB0cmFjazogYXBwbHksXG4gICAgICAgIHBhZ2U6IGFwcGx5LFxuICAgICAgICBpZGVudGlmeTogYXBwbHksXG4gICAgICAgIGFsaWFzOiBhcHBseSxcbiAgICAgICAgZ3JvdXA6IGFwcGx5LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionDestination: () => (/* binding */ ActionDestination),\n/* harmony export */   remoteLoader: () => (/* binding */ remoteLoader)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/load-script */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/stats/metric-helpers */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/../node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n\n\n\n\n\n\n\nvar ActionDestination = /** @class */ (function () {\n    function ActionDestination(name, action) {\n        this.version = '1.0.0';\n        this.alternativeNames = [];\n        this.loadPromise = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__.createDeferred)();\n        this.middleware = [];\n        this.alias = this._createMethod('alias');\n        this.group = this._createMethod('group');\n        this.identify = this._createMethod('identify');\n        this.page = this._createMethod('page');\n        this.screen = this._createMethod('screen');\n        this.track = this._createMethod('track');\n        this.action = action;\n        this.name = name;\n        this.type = action.type;\n        this.alternativeNames.push(action.name);\n    }\n    ActionDestination.prototype.addMiddleware = function () {\n        var _a;\n        var fn = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            fn[_i] = arguments[_i];\n        }\n        if (this.type === 'destination') {\n            (_a = this.middleware).push.apply(_a, fn);\n        }\n    };\n    ActionDestination.prototype.transform = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var modifiedEvent;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, (0,_middleware__WEBPACK_IMPORTED_MODULE_2__.applyDestinationMiddleware)(this.name, ctx.event, this.middleware)];\n                    case 1:\n                        modifiedEvent = _a.sent();\n                        if (modifiedEvent === null) {\n                            ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation({\n                                retry: false,\n                                reason: 'dropped by destination middleware',\n                            }));\n                        }\n                        return [2 /*return*/, new _core_context__WEBPACK_IMPORTED_MODULE_4__.Context(modifiedEvent)];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype._createMethod = function (methodName) {\n        var _this = this;\n        return function (ctx) { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n            var transformedContext, error_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.action[methodName])\n                            return [2 /*return*/, ctx];\n                        transformedContext = ctx;\n                        if (!(this.type === 'destination')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.transform(ctx)];\n                    case 1:\n                        transformedContext = _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 5, , 6]);\n                        return [4 /*yield*/, this.ready()];\n                    case 3:\n                        if (!(_a.sent())) {\n                            throw new Error('Something prevented the destination from getting ready');\n                        }\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: methodName,\n                            type: 'action',\n                        });\n                        return [4 /*yield*/, this.action[methodName](transformedContext)];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _a.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: methodName,\n                            type: 'action',\n                            didError: true,\n                        });\n                        throw error_1;\n                    case 6: return [2 /*return*/, ctx];\n                }\n            });\n        }); };\n    };\n    /* --- PASSTHROUGH METHODS --- */\n    ActionDestination.prototype.isLoaded = function () {\n        return this.action.isLoaded();\n    };\n    ActionDestination.prototype.ready = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.loadPromise.promise];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, true];\n                    case 2:\n                        _a = _b.sent();\n                        return [2 /*return*/, false];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype.load = function (ctx, analytics) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var loadP, _a, _b, error_2;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.loadPromise.isSettled()) {\n                            return [2 /*return*/, this.loadPromise.promise];\n                        }\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 3, , 4]);\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: 'load',\n                            type: 'action',\n                        });\n                        loadP = this.action.load(ctx, analytics);\n                        _b = (_a = this.loadPromise).resolve;\n                        return [4 /*yield*/, loadP];\n                    case 2:\n                        _b.apply(_a, [_c.sent()]);\n                        return [2 /*return*/, loadP];\n                    case 3:\n                        error_2 = _c.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_5__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.action.name,\n                            methodName: 'load',\n                            type: 'action',\n                            didError: true,\n                        });\n                        this.loadPromise.reject(error_2);\n                        throw error_2;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ActionDestination.prototype.unload = function (ctx, analytics) {\n        var _a, _b;\n        return (_b = (_a = this.action).unload) === null || _b === void 0 ? void 0 : _b.call(_a, ctx, analytics);\n    };\n    return ActionDestination;\n}());\n\nfunction validate(pluginLike) {\n    if (!Array.isArray(pluginLike)) {\n        throw new Error('Not a valid list of plugins');\n    }\n    var required = ['load', 'isLoaded', 'name', 'version', 'type'];\n    pluginLike.forEach(function (plugin) {\n        required.forEach(function (method) {\n            var _a;\n            if (plugin[method] === undefined) {\n                throw new Error(\"Plugin: \".concat((_a = plugin.name) !== null && _a !== void 0 ? _a : 'unknown', \" missing required function \").concat(method));\n            }\n        });\n    });\n    return true;\n}\nfunction isPluginDisabled(userIntegrations, remotePlugin) {\n    var creationNameEnabled = userIntegrations[remotePlugin.creationName];\n    var currentNameEnabled = userIntegrations[remotePlugin.name];\n    // Check that the plugin isn't explicitly enabled when All: false\n    if (userIntegrations.All === false &&\n        !creationNameEnabled &&\n        !currentNameEnabled) {\n        return true;\n    }\n    // Check that the plugin isn't explicitly disabled\n    if (creationNameEnabled === false || currentNameEnabled === false) {\n        return true;\n    }\n    return false;\n}\nfunction loadPluginFactory(remotePlugin, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var defaultCdn, cdn, urlSplit, name_1, obfuscatedURL, error_3;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    defaultCdn = new RegExp('https://cdn.segment.(com|build)');\n                    cdn = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_6__.getCDN)();\n                    if (!obfuscate) return [3 /*break*/, 6];\n                    urlSplit = remotePlugin.url.split('/');\n                    name_1 = urlSplit[urlSplit.length - 2];\n                    obfuscatedURL = remotePlugin.url.replace(name_1, btoa(name_1).replace(/=/g, ''));\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 5]);\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(obfuscatedURL.replace(defaultCdn, cdn))];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 3:\n                    error_3 = _a.sent();\n                    // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n                    // We should use the unobfuscated version as a fallback.\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(remotePlugin.url.replace(defaultCdn, cdn))];\n                case 4:\n                    // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n                    // We should use the unobfuscated version as a fallback.\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 5: return [3 /*break*/, 8];\n                case 6: return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_7__.loadScript)(remotePlugin.url.replace(defaultCdn, cdn))];\n                case 7:\n                    _a.sent();\n                    _a.label = 8;\n                case 8:\n                    // @ts-expect-error\n                    if (typeof window[remotePlugin.libraryName] === 'function') {\n                        // @ts-expect-error\n                        return [2 /*return*/, window[remotePlugin.libraryName]];\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction remoteLoader(settings, userIntegrations, mergedIntegrations, options, routingMiddleware, pluginSources) {\n    var _a, _b, _c;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var allPlugins, routingRules, pluginPromises;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    allPlugins = [];\n                    routingRules = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) !== null && _b !== void 0 ? _b : [];\n                    pluginPromises = ((_c = settings.remotePlugins) !== null && _c !== void 0 ? _c : []).map(function (remotePlugin) { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n                        var pluginFactory, _a, plugin, plugins, routing_1, error_4;\n                        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    if (isPluginDisabled(userIntegrations, remotePlugin))\n                                        return [2 /*return*/];\n                                    _b.label = 1;\n                                case 1:\n                                    _b.trys.push([1, 6, , 7]);\n                                    _a = (pluginSources === null || pluginSources === void 0 ? void 0 : pluginSources.find(function (_a) {\n                                        var pluginName = _a.pluginName;\n                                        return pluginName === remotePlugin.name;\n                                    }));\n                                    if (_a) return [3 /*break*/, 3];\n                                    return [4 /*yield*/, loadPluginFactory(remotePlugin, options === null || options === void 0 ? void 0 : options.obfuscate)];\n                                case 2:\n                                    _a = (_b.sent());\n                                    _b.label = 3;\n                                case 3:\n                                    pluginFactory = _a;\n                                    if (!pluginFactory) return [3 /*break*/, 5];\n                                    return [4 /*yield*/, pluginFactory((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, remotePlugin.settings), mergedIntegrations[remotePlugin.name]))];\n                                case 4:\n                                    plugin = _b.sent();\n                                    plugins = Array.isArray(plugin) ? plugin : [plugin];\n                                    validate(plugins);\n                                    routing_1 = routingRules.filter(function (rule) { return rule.destinationName === remotePlugin.creationName; });\n                                    plugins.forEach(function (plugin) {\n                                        var wrapper = new ActionDestination(remotePlugin.creationName, plugin);\n                                        /** Make sure we only apply destination filters to actions of the \"destination\" type to avoid causing issues for hybrid destinations */\n                                        if (routing_1.length &&\n                                            routingMiddleware &&\n                                            plugin.type === 'destination') {\n                                            wrapper.addMiddleware(routingMiddleware);\n                                        }\n                                        allPlugins.push(wrapper);\n                                    });\n                                    _b.label = 5;\n                                case 5: return [3 /*break*/, 7];\n                                case 6:\n                                    error_4 = _b.sent();\n                                    console.warn('Failed to load Remote Plugin', error_4);\n                                    return [3 /*break*/, 7];\n                                case 7: return [2 /*return*/];\n                            }\n                        });\n                    }); });\n                    return [4 /*yield*/, Promise.all(pluginPromises)];\n                case 1:\n                    _d.sent();\n                    return [2 /*return*/, allPlugins.filter(Boolean)];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvcmVtb3RlLWxvYWRlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQ047QUFDTjtBQUNlO0FBQ0s7QUFDUztBQUNSO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGdGQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0EsaURBQWlELHVFQUEwQjtBQUMzRTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsNkRBQWtCO0FBQzdEO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxrREFBa0Qsa0RBQU87QUFDekQ7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxPQUFPLGdEQUFTO0FBQ2hEO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUZBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUZBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUZBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUM0QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQU07QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDREQUFVO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQTtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SUFBdUksT0FBTyxnREFBUztBQUN2SjtBQUNBLCtCQUErQixrREFBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNGQUFzRiw0REFBNEQ7QUFDbEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCLElBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3JlbW90ZS1sb2FkZXIvaW5kZXguanM/N2U2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgbG9hZFNjcmlwdCB9IGZyb20gJy4uLy4uL2xpYi9sb2FkLXNjcmlwdCc7XG5pbXBvcnQgeyBnZXRDRE4gfSBmcm9tICcuLi8uLi9saWIvcGFyc2UtY2RuJztcbmltcG9ydCB7IGFwcGx5RGVzdGluYXRpb25NaWRkbGV3YXJlLCB9IGZyb20gJy4uL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IHJlY29yZEludGVncmF0aW9uTWV0cmljIH0gZnJvbSAnLi4vLi4vY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbnZhciBBY3Rpb25EZXN0aW5hdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBY3Rpb25EZXN0aW5hdGlvbihuYW1lLCBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gJzEuMC4wJztcbiAgICAgICAgdGhpcy5hbHRlcm5hdGl2ZU5hbWVzID0gW107XG4gICAgICAgIHRoaXMubG9hZFByb21pc2UgPSBjcmVhdGVEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnYWxpYXMnKTtcbiAgICAgICAgdGhpcy5ncm91cCA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnZ3JvdXAnKTtcbiAgICAgICAgdGhpcy5pZGVudGlmeSA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgnaWRlbnRpZnknKTtcbiAgICAgICAgdGhpcy5wYWdlID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdwYWdlJyk7XG4gICAgICAgIHRoaXMuc2NyZWVuID0gdGhpcy5fY3JlYXRlTWV0aG9kKCdzY3JlZW4nKTtcbiAgICAgICAgdGhpcy50cmFjayA9IHRoaXMuX2NyZWF0ZU1ldGhvZCgndHJhY2snKTtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudHlwZSA9IGFjdGlvbi50eXBlO1xuICAgICAgICB0aGlzLmFsdGVybmF0aXZlTmFtZXMucHVzaChhY3Rpb24ubmFtZSk7XG4gICAgfVxuICAgIEFjdGlvbkRlc3RpbmF0aW9uLnByb3RvdHlwZS5hZGRNaWRkbGV3YXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBmbiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgZm5bX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50eXBlID09PSAnZGVzdGluYXRpb24nKSB7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLm1pZGRsZXdhcmUpLnB1c2guYXBwbHkoX2EsIGZuKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZGlmaWVkRXZlbnQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGFwcGx5RGVzdGluYXRpb25NaWRkbGV3YXJlKHRoaXMubmFtZSwgY3R4LmV2ZW50LCB0aGlzLm1pZGRsZXdhcmUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWRFdmVudCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RpZmllZEV2ZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbmNlbChuZXcgQ29udGV4dENhbmNlbGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdkcm9wcGVkIGJ5IGRlc3RpbmF0aW9uIG1pZGRsZXdhcmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgQ29udGV4dChtb2RpZmllZEV2ZW50KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLl9jcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN0eCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybWVkQ29udGV4dCwgZXJyb3JfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5hY3Rpb25bbWV0aG9kTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZENvbnRleHQgPSBjdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnR5cGUgPT09ICdkZXN0aW5hdGlvbicpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudHJhbnNmb3JtKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZENvbnRleHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlYWR5KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfYS5zZW50KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb21ldGhpbmcgcHJldmVudGVkIHRoZSBkZXN0aW5hdGlvbiBmcm9tIGdldHRpbmcgcmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5hY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiBtZXRob2ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmFjdGlvblttZXRob2ROYW1lXSh0cmFuc2Zvcm1lZENvbnRleHQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRJbnRlZ3JhdGlvbk1ldHJpYyhjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMuYWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogbWV0aG9kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JfMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgfTtcbiAgICAvKiAtLS0gUEFTU1RIUk9VR0ggTUVUSE9EUyAtLS0gKi9cbiAgICBBY3Rpb25EZXN0aW5hdGlvbi5wcm90b3R5cGUuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi5pc0xvYWRlZCgpO1xuICAgIH07XG4gICAgQWN0aW9uRGVzdGluYXRpb24ucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2FkUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmYWxzZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFjdGlvbkRlc3RpbmF0aW9uLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGN0eCwgYW5hbHl0aWNzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsb2FkUCwgX2EsIF9iLCBlcnJvcl8yO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZFByb21pc2UuaXNTZXR0bGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5sb2FkUHJvbWlzZS5wcm9taXNlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5hY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQID0gdGhpcy5hY3Rpb24ubG9hZChjdHgsIGFuYWx5dGljcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IChfYSA9IHRoaXMubG9hZFByb21pc2UpLnJlc29sdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkUF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmFwcGx5KF9hLCBbX2Muc2VudCgpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbG9hZFBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLmFjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZE5hbWU6ICdsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkUHJvbWlzZS5yZWplY3QoZXJyb3JfMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcl8yO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBY3Rpb25EZXN0aW5hdGlvbi5wcm90b3R5cGUudW5sb2FkID0gZnVuY3Rpb24gKGN0eCwgYW5hbHl0aWNzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLmFjdGlvbikudW5sb2FkKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgY3R4LCBhbmFseXRpY3MpO1xuICAgIH07XG4gICAgcmV0dXJuIEFjdGlvbkRlc3RpbmF0aW9uO1xufSgpKTtcbmV4cG9ydCB7IEFjdGlvbkRlc3RpbmF0aW9uIH07XG5mdW5jdGlvbiB2YWxpZGF0ZShwbHVnaW5MaWtlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBsdWdpbkxpa2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgdmFsaWQgbGlzdCBvZiBwbHVnaW5zJyk7XG4gICAgfVxuICAgIHZhciByZXF1aXJlZCA9IFsnbG9hZCcsICdpc0xvYWRlZCcsICduYW1lJywgJ3ZlcnNpb24nLCAndHlwZSddO1xuICAgIHBsdWdpbkxpa2UuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgIHJlcXVpcmVkLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKHBsdWdpblttZXRob2RdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbHVnaW46IFwiLmNvbmNhdCgoX2EgPSBwbHVnaW4ubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ3Vua25vd24nLCBcIiBtaXNzaW5nIHJlcXVpcmVkIGZ1bmN0aW9uIFwiKS5jb25jYXQobWV0aG9kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNQbHVnaW5EaXNhYmxlZCh1c2VySW50ZWdyYXRpb25zLCByZW1vdGVQbHVnaW4pIHtcbiAgICB2YXIgY3JlYXRpb25OYW1lRW5hYmxlZCA9IHVzZXJJbnRlZ3JhdGlvbnNbcmVtb3RlUGx1Z2luLmNyZWF0aW9uTmFtZV07XG4gICAgdmFyIGN1cnJlbnROYW1lRW5hYmxlZCA9IHVzZXJJbnRlZ3JhdGlvbnNbcmVtb3RlUGx1Z2luLm5hbWVdO1xuICAgIC8vIENoZWNrIHRoYXQgdGhlIHBsdWdpbiBpc24ndCBleHBsaWNpdGx5IGVuYWJsZWQgd2hlbiBBbGw6IGZhbHNlXG4gICAgaWYgKHVzZXJJbnRlZ3JhdGlvbnMuQWxsID09PSBmYWxzZSAmJlxuICAgICAgICAhY3JlYXRpb25OYW1lRW5hYmxlZCAmJlxuICAgICAgICAhY3VycmVudE5hbWVFbmFibGVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBDaGVjayB0aGF0IHRoZSBwbHVnaW4gaXNuJ3QgZXhwbGljaXRseSBkaXNhYmxlZFxuICAgIGlmIChjcmVhdGlvbk5hbWVFbmFibGVkID09PSBmYWxzZSB8fCBjdXJyZW50TmFtZUVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBsb2FkUGx1Z2luRmFjdG9yeShyZW1vdGVQbHVnaW4sIG9iZnVzY2F0ZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRDZG4sIGNkbiwgdXJsU3BsaXQsIG5hbWVfMSwgb2JmdXNjYXRlZFVSTCwgZXJyb3JfMztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENkbiA9IG5ldyBSZWdFeHAoJ2h0dHBzOi8vY2RuLnNlZ21lbnQuKGNvbXxidWlsZCknKTtcbiAgICAgICAgICAgICAgICAgICAgY2RuID0gZ2V0Q0ROKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghb2JmdXNjYXRlKSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgdXJsU3BsaXQgPSByZW1vdGVQbHVnaW4udXJsLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVfMSA9IHVybFNwbGl0W3VybFNwbGl0Lmxlbmd0aCAtIDJdO1xuICAgICAgICAgICAgICAgICAgICBvYmZ1c2NhdGVkVVJMID0gcmVtb3RlUGx1Z2luLnVybC5yZXBsYWNlKG5hbWVfMSwgYnRvYShuYW1lXzEpLnJlcGxhY2UoLz0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDVdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbG9hZFNjcmlwdChvYmZ1c2NhdGVkVVJMLnJlcGxhY2UoZGVmYXVsdENkbiwgY2RuKSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIER1ZSB0byBzeW5jaW5nIGNvbmNlcm5zIGl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIG9iZnVzY2F0ZWQgYWN0aW9uIGRlc3RpbmF0aW9uIChvciByZXF1ZXN0ZWQgdmVyc2lvbikgbWlnaHQgbm90IGV4aXN0LlxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGQgdXNlIHRoZSB1bm9iZnVzY2F0ZWQgdmVyc2lvbiBhcyBhIGZhbGxiYWNrLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkU2NyaXB0KHJlbW90ZVBsdWdpbi51cmwucmVwbGFjZShkZWZhdWx0Q2RuLCBjZG4pKV07XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAvLyBEdWUgdG8gc3luY2luZyBjb25jZXJucyBpdCBpcyBwb3NzaWJsZSB0aGF0IHRoZSBvYmZ1c2NhdGVkIGFjdGlvbiBkZXN0aW5hdGlvbiAob3IgcmVxdWVzdGVkIHZlcnNpb24pIG1pZ2h0IG5vdCBleGlzdC5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIHVzZSB0aGUgdW5vYmZ1c2NhdGVkIHZlcnNpb24gYXMgYSBmYWxsYmFjay5cbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFs0IC8qeWllbGQqLywgbG9hZFNjcmlwdChyZW1vdGVQbHVnaW4udXJsLnJlcGxhY2UoZGVmYXVsdENkbiwgY2RuKSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDg7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93W3JlbW90ZVBsdWdpbi5saWJyYXJ5TmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB3aW5kb3dbcmVtb3RlUGx1Z2luLmxpYnJhcnlOYW1lXV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdGVMb2FkZXIoc2V0dGluZ3MsIHVzZXJJbnRlZ3JhdGlvbnMsIG1lcmdlZEludGVncmF0aW9ucywgb3B0aW9ucywgcm91dGluZ01pZGRsZXdhcmUsIHBsdWdpblNvdXJjZXMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhbGxQbHVnaW5zLCByb3V0aW5nUnVsZXMsIHBsdWdpblByb21pc2VzO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9kKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9kLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBhbGxQbHVnaW5zID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJvdXRpbmdSdWxlcyA9IChfYiA9IChfYSA9IHNldHRpbmdzLm1pZGRsZXdhcmVTZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJvdXRpbmdSdWxlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpblByb21pc2VzID0gKChfYyA9IHNldHRpbmdzLnJlbW90ZVBsdWdpbnMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFtdKS5tYXAoZnVuY3Rpb24gKHJlbW90ZVBsdWdpbikgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbkZhY3RvcnksIF9hLCBwbHVnaW4sIHBsdWdpbnMsIHJvdXRpbmdfMSwgZXJyb3JfNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1BsdWdpbkRpc2FibGVkKHVzZXJJbnRlZ3JhdGlvbnMsIHJlbW90ZVBsdWdpbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzEsIDYsICwgN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAocGx1Z2luU291cmNlcyA9PT0gbnVsbCB8fCBwbHVnaW5Tb3VyY2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW5Tb3VyY2VzLmZpbmQoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbk5hbWUgPSBfYS5wbHVnaW5OYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW5OYW1lID09PSByZW1vdGVQbHVnaW4ubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkUGx1Z2luRmFjdG9yeShyZW1vdGVQbHVnaW4sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vYmZ1c2NhdGUpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAoX2Iuc2VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luRmFjdG9yeSA9IF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwbHVnaW5GYWN0b3J5KSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbkZhY3RvcnkoX19hc3NpZ24oX19hc3NpZ24oe30sIHJlbW90ZVBsdWdpbi5zZXR0aW5ncyksIG1lcmdlZEludGVncmF0aW9uc1tyZW1vdGVQbHVnaW4ubmFtZV0pKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbiA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbnMgPSBBcnJheS5pc0FycmF5KHBsdWdpbikgPyBwbHVnaW4gOiBbcGx1Z2luXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlKHBsdWdpbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGluZ18xID0gcm91dGluZ1J1bGVzLmZpbHRlcihmdW5jdGlvbiAocnVsZSkgeyByZXR1cm4gcnVsZS5kZXN0aW5hdGlvbk5hbWUgPT09IHJlbW90ZVBsdWdpbi5jcmVhdGlvbk5hbWU7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IG5ldyBBY3Rpb25EZXN0aW5hdGlvbihyZW1vdGVQbHVnaW4uY3JlYXRpb25OYW1lLCBwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBNYWtlIHN1cmUgd2Ugb25seSBhcHBseSBkZXN0aW5hdGlvbiBmaWx0ZXJzIHRvIGFjdGlvbnMgb2YgdGhlIFwiZGVzdGluYXRpb25cIiB0eXBlIHRvIGF2b2lkIGNhdXNpbmcgaXNzdWVzIGZvciBoeWJyaWQgZGVzdGluYXRpb25zICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdXRpbmdfMS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGluZ01pZGRsZXdhcmUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnR5cGUgPT09ICdkZXN0aW5hdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5hZGRNaWRkbGV3YXJlKHJvdXRpbmdNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsUGx1Z2lucy5wdXNoKHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFszIC8qYnJlYWsqLywgN107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzQgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIFJlbW90ZSBQbHVnaW4nLCBlcnJvcl80KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChwbHVnaW5Qcm9taXNlcyldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgX2Quc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYWxsUGx1Z2lucy5maWx0ZXIoQm9vbGVhbildO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js":
/*!*******************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   remoteMiddlewares: () => (/* binding */ remoteMiddlewares)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/environment */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/load-script */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n\n\n\n\nfunction remoteMiddlewares(ctx, settings, obfuscate) {\n    var _a;\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var path, remoteMiddleware, names, scripts, middleware;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if ((0,_core_environment__WEBPACK_IMPORTED_MODULE_1__.isServer)()) {\n                        return [2 /*return*/, []];\n                    }\n                    path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_2__.getNextIntegrationsURL)();\n                    remoteMiddleware = (_a = settings.enabledMiddleware) !== null && _a !== void 0 ? _a : {};\n                    names = Object.entries(remoteMiddleware)\n                        .filter(function (_a) {\n                        var _ = _a[0], enabled = _a[1];\n                        return enabled;\n                    })\n                        .map(function (_a) {\n                        var name = _a[0];\n                        return name;\n                    });\n                    scripts = names.map(function (name) { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n                        var nonNamespaced, bundleName, fullPath, error_1;\n                        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    nonNamespaced = name.replace('@segment/', '');\n                                    bundleName = nonNamespaced;\n                                    if (obfuscate) {\n                                        bundleName = btoa(nonNamespaced).replace(/=/g, '');\n                                    }\n                                    fullPath = \"\".concat(path, \"/middleware/\").concat(bundleName, \"/latest/\").concat(bundleName, \".js.gz\");\n                                    _a.label = 1;\n                                case 1:\n                                    _a.trys.push([1, 3, , 4]);\n                                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_3__.loadScript)(fullPath)\n                                        // @ts-ignore\n                                    ];\n                                case 2:\n                                    _a.sent();\n                                    // @ts-ignore\n                                    return [2 /*return*/, window[\"\".concat(nonNamespaced, \"Middleware\")]];\n                                case 3:\n                                    error_1 = _a.sent();\n                                    ctx.log('error', error_1);\n                                    ctx.stats.increment('failed_remote_middleware');\n                                    return [3 /*break*/, 4];\n                                case 4: return [2 /*return*/];\n                            }\n                        });\n                    }); });\n                    return [4 /*yield*/, Promise.all(scripts)];\n                case 1:\n                    middleware = _b.sent();\n                    middleware = middleware.filter(Boolean);\n                    return [2 /*return*/, middleware];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvcmVtb3RlLW1pZGRsZXdhcmUvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0M7QUFDRztBQUNDO0FBQ1U7QUFDdEQ7QUFDUDtBQUNBLFdBQVcsZ0RBQVM7QUFDcEI7QUFDQTtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBLHdCQUF3QiwyREFBUTtBQUNoQztBQUNBO0FBQ0EsMkJBQTJCLHNFQUFzQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQiwwREFBMEQsT0FBTyxnREFBUztBQUMxRTtBQUNBLCtCQUErQixrREFBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELDREQUFVO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQixJQUFJO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3JlbW90ZS1taWRkbGV3YXJlL2luZGV4LmpzPzYwMDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNTZXJ2ZXIgfSBmcm9tICcuLi8uLi9jb3JlL2Vudmlyb25tZW50JztcbmltcG9ydCB7IGxvYWRTY3JpcHQgfSBmcm9tICcuLi8uLi9saWIvbG9hZC1zY3JpcHQnO1xuaW1wb3J0IHsgZ2V0TmV4dEludGVncmF0aW9uc1VSTCB9IGZyb20gJy4uLy4uL2xpYi9wYXJzZS1jZG4nO1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW90ZU1pZGRsZXdhcmVzKGN0eCwgc2V0dGluZ3MsIG9iZnVzY2F0ZSkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXRoLCByZW1vdGVNaWRkbGV3YXJlLCBuYW1lcywgc2NyaXB0cywgbWlkZGxld2FyZTtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2VydmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IGdldE5leHRJbnRlZ3JhdGlvbnNVUkwoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlTWlkZGxld2FyZSA9IChfYSA9IHNldHRpbmdzLmVuYWJsZWRNaWRkbGV3YXJlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMgPSBPYmplY3QuZW50cmllcyhyZW1vdGVNaWRkbGV3YXJlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfID0gX2FbMF0sIGVuYWJsZWQgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gX2FbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdHMgPSBuYW1lcy5tYXAoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub25OYW1lc3BhY2VkLCBidW5kbGVOYW1lLCBmdWxsUGF0aCwgZXJyb3JfMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbk5hbWVzcGFjZWQgPSBuYW1lLnJlcGxhY2UoJ0BzZWdtZW50LycsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZU5hbWUgPSBub25OYW1lc3BhY2VkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iZnVzY2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZU5hbWUgPSBidG9hKG5vbk5hbWVzcGFjZWQpLnJlcGxhY2UoLz0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbFBhdGggPSBcIlwiLmNvbmNhdChwYXRoLCBcIi9taWRkbGV3YXJlL1wiKS5jb25jYXQoYnVuZGxlTmFtZSwgXCIvbGF0ZXN0L1wiKS5jb25jYXQoYnVuZGxlTmFtZSwgXCIuanMuZ3pcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkU2NyaXB0KGZ1bGxQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB3aW5kb3dbXCJcIi5jb25jYXQobm9uTmFtZXNwYWNlZCwgXCJNaWRkbGV3YXJlXCIpXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCdlcnJvcicsIGVycm9yXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0YXRzLmluY3JlbWVudCgnZmFpbGVkX3JlbW90ZV9taWRkbGV3YXJlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoc2NyaXB0cyldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWlkZGxld2FyZSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgbWlkZGxld2FyZSA9IG1pZGRsZXdhcmUuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbWlkZGxld2FyZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tsubMiddleware: () => (/* binding */ tsubMiddleware)\n/* harmony export */ });\n/* harmony import */ var _segment_tsub__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/tsub */ \"(ssr)/../node_modules/@segment/tsub/dist/index.js\");\n/* harmony import */ var _segment_tsub__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_tsub__WEBPACK_IMPORTED_MODULE_0__);\n\nvar tsubMiddleware = function (rules) {\n    return function (_a) {\n        var payload = _a.payload, integration = _a.integration, next = _a.next;\n        var store = new _segment_tsub__WEBPACK_IMPORTED_MODULE_0__.Store(rules);\n        var rulesToApply = store.getRulesByDestinationName(integration);\n        rulesToApply.forEach(function (rule) {\n            var matchers = rule.matchers, transformers = rule.transformers;\n            for (var i = 0; i < matchers.length; i++) {\n                if (_segment_tsub__WEBPACK_IMPORTED_MODULE_0__.matches(payload.obj, matchers[i])) {\n                    payload.obj = _segment_tsub__WEBPACK_IMPORTED_MODULE_0__.transform(payload.obj, transformers[i]);\n                    if (payload.obj === null) {\n                        return next(null);\n                    }\n                }\n            }\n        });\n        next(payload);\n    };\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvcm91dGluZy1taWRkbGV3YXJlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzQztBQUMvQjtBQUNQO0FBQ0E7QUFDQSx3QkFBd0IsZ0RBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFCQUFxQjtBQUNqRCxvQkFBb0Isa0RBQVk7QUFDaEMsa0NBQWtDLG9EQUFjO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9yb3V0aW5nLW1pZGRsZXdhcmUvaW5kZXguanM/ZDVjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB0c3ViIGZyb20gJ0BzZWdtZW50L3RzdWInO1xuZXhwb3J0IHZhciB0c3ViTWlkZGxld2FyZSA9IGZ1bmN0aW9uIChydWxlcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSBfYS5wYXlsb2FkLCBpbnRlZ3JhdGlvbiA9IF9hLmludGVncmF0aW9uLCBuZXh0ID0gX2EubmV4dDtcbiAgICAgICAgdmFyIHN0b3JlID0gbmV3IHRzdWIuU3RvcmUocnVsZXMpO1xuICAgICAgICB2YXIgcnVsZXNUb0FwcGx5ID0gc3RvcmUuZ2V0UnVsZXNCeURlc3RpbmF0aW9uTmFtZShpbnRlZ3JhdGlvbik7XG4gICAgICAgIHJ1bGVzVG9BcHBseS5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlcnMgPSBydWxlLm1hdGNoZXJzLCB0cmFuc2Zvcm1lcnMgPSBydWxlLnRyYW5zZm9ybWVycztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodHN1Yi5tYXRjaGVzKHBheWxvYWQub2JqLCBtYXRjaGVyc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5vYmogPSB0c3ViLnRyYW5zZm9ybShwYXlsb2FkLm9iaiwgdHJhbnNmb3JtZXJzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQub2JqID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG5leHQocGF5bG9hZCk7XG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/routing-middleware/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schemaFilter: () => (/* binding */ schemaFilter)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/is-plan-event-enabled */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\");\n\n\nfunction disabledActionDestinations(plan, settings) {\n    var _a, _b;\n    if (!plan || !Object.keys(plan)) {\n        return {};\n    }\n    var disabledIntegrations = plan.integrations\n        ? Object.keys(plan.integrations).filter(function (i) { return plan.integrations[i] === false; })\n        : [];\n    // This accounts for cases like Fullstory, where the settings.integrations\n    // contains a \"Fullstory\" object but settings.remotePlugins contains \"Fullstory (Actions)\"\n    var disabledRemotePlugins = [];\n    ((_a = settings.remotePlugins) !== null && _a !== void 0 ? _a : []).forEach(function (p) {\n        disabledIntegrations.forEach(function (int) {\n            if (p.creationName == int) {\n                disabledRemotePlugins.push(p.name);\n            }\n        });\n    });\n    return ((_b = settings.remotePlugins) !== null && _b !== void 0 ? _b : []).reduce(function (acc, p) {\n        if (p.settings['subscriptions']) {\n            if (disabledRemotePlugins.includes(p.name)) {\n                // @ts-expect-error element implicitly has an 'any' type because p.settings is a JSONObject\n                p.settings['subscriptions'].forEach(\n                // @ts-expect-error parameter 'sub' implicitly has an 'any' type\n                function (sub) { return (acc[\"\".concat(p.name, \" \").concat(sub.partnerAction)] = false); });\n            }\n        }\n        return acc;\n    }, {});\n}\nfunction schemaFilter(track, settings) {\n    function filter(ctx) {\n        var plan = track;\n        var ev = ctx.event.event;\n        if (plan && ev) {\n            var planEvent = plan[ev];\n            if (!(0,_lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_0__.isPlanEventEnabled)(plan, planEvent)) {\n                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), { All: false, 'Segment.io': true }));\n                return ctx;\n            }\n            else {\n                var disabledActions = disabledActionDestinations(planEvent, settings);\n                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations), disabledActions));\n            }\n        }\n        return ctx;\n    }\n    return {\n        name: 'Schema Filter',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function () { return Promise.resolve(); },\n        type: 'before',\n        page: filter,\n        alias: filter,\n        track: filter,\n        identify: filter,\n        group: filter,\n    };\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2NoZW1hLWZpbHRlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUM7QUFDb0M7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELHdDQUF3QztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx5RUFBeUU7QUFDMUc7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOEVBQWtCO0FBQ25DLGdEQUFnRCwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsNkJBQTZCLGdDQUFnQztBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxjQUFjO0FBQzlDLDRCQUE0QiwyQkFBMkI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2NoZW1hLWZpbHRlci9pbmRleC5qcz8wNTA5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc1BsYW5FdmVudEVuYWJsZWQgfSBmcm9tICcuLi8uLi9saWIvaXMtcGxhbi1ldmVudC1lbmFibGVkJztcbmZ1bmN0aW9uIGRpc2FibGVkQWN0aW9uRGVzdGluYXRpb25zKHBsYW4sIHNldHRpbmdzKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAoIXBsYW4gfHwgIU9iamVjdC5rZXlzKHBsYW4pKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgdmFyIGRpc2FibGVkSW50ZWdyYXRpb25zID0gcGxhbi5pbnRlZ3JhdGlvbnNcbiAgICAgICAgPyBPYmplY3Qua2V5cyhwbGFuLmludGVncmF0aW9ucykuZmlsdGVyKGZ1bmN0aW9uIChpKSB7IHJldHVybiBwbGFuLmludGVncmF0aW9uc1tpXSA9PT0gZmFsc2U7IH0pXG4gICAgICAgIDogW107XG4gICAgLy8gVGhpcyBhY2NvdW50cyBmb3IgY2FzZXMgbGlrZSBGdWxsc3RvcnksIHdoZXJlIHRoZSBzZXR0aW5ncy5pbnRlZ3JhdGlvbnNcbiAgICAvLyBjb250YWlucyBhIFwiRnVsbHN0b3J5XCIgb2JqZWN0IGJ1dCBzZXR0aW5ncy5yZW1vdGVQbHVnaW5zIGNvbnRhaW5zIFwiRnVsbHN0b3J5IChBY3Rpb25zKVwiXG4gICAgdmFyIGRpc2FibGVkUmVtb3RlUGx1Z2lucyA9IFtdO1xuICAgICgoX2EgPSBzZXR0aW5ncy5yZW1vdGVQbHVnaW5zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSkuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICBkaXNhYmxlZEludGVncmF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpbnQpIHtcbiAgICAgICAgICAgIGlmIChwLmNyZWF0aW9uTmFtZSA9PSBpbnQpIHtcbiAgICAgICAgICAgICAgICBkaXNhYmxlZFJlbW90ZVBsdWdpbnMucHVzaChwLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gKChfYiA9IHNldHRpbmdzLnJlbW90ZVBsdWdpbnMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcCkge1xuICAgICAgICBpZiAocC5zZXR0aW5nc1snc3Vic2NyaXB0aW9ucyddKSB7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWRSZW1vdGVQbHVnaW5zLmluY2x1ZGVzKHAubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgYW4gJ2FueScgdHlwZSBiZWNhdXNlIHAuc2V0dGluZ3MgaXMgYSBKU09OT2JqZWN0XG4gICAgICAgICAgICAgICAgcC5zZXR0aW5nc1snc3Vic2NyaXB0aW9ucyddLmZvckVhY2goXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBwYXJhbWV0ZXIgJ3N1YicgaW1wbGljaXRseSBoYXMgYW4gJ2FueScgdHlwZVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChzdWIpIHsgcmV0dXJuIChhY2NbXCJcIi5jb25jYXQocC5uYW1lLCBcIiBcIikuY29uY2F0KHN1Yi5wYXJ0bmVyQWN0aW9uKV0gPSBmYWxzZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNjaGVtYUZpbHRlcih0cmFjaywgc2V0dGluZ3MpIHtcbiAgICBmdW5jdGlvbiBmaWx0ZXIoY3R4KSB7XG4gICAgICAgIHZhciBwbGFuID0gdHJhY2s7XG4gICAgICAgIHZhciBldiA9IGN0eC5ldmVudC5ldmVudDtcbiAgICAgICAgaWYgKHBsYW4gJiYgZXYpIHtcbiAgICAgICAgICAgIHZhciBwbGFuRXZlbnQgPSBwbGFuW2V2XTtcbiAgICAgICAgICAgIGlmICghaXNQbGFuRXZlbnRFbmFibGVkKHBsYW4sIHBsYW5FdmVudCkpIHtcbiAgICAgICAgICAgICAgICBjdHgudXBkYXRlRXZlbnQoJ2ludGVncmF0aW9ucycsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSwgeyBBbGw6IGZhbHNlLCAnU2VnbWVudC5pbyc6IHRydWUgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlzYWJsZWRBY3Rpb25zID0gZGlzYWJsZWRBY3Rpb25EZXN0aW5hdGlvbnMocGxhbkV2ZW50LCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgY3R4LnVwZGF0ZUV2ZW50KCdpbnRlZ3JhdGlvbnMnLCBfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4LmV2ZW50LmludGVncmF0aW9ucyksIHBsYW5FdmVudCA9PT0gbnVsbCB8fCBwbGFuRXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYW5FdmVudC5pbnRlZ3JhdGlvbnMpLCBkaXNhYmxlZEFjdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3R4O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiAnU2NoZW1hIEZpbHRlcicsXG4gICAgICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgICAgIGlzTG9hZGVkOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfSxcbiAgICAgICAgdHlwZTogJ2JlZm9yZScsXG4gICAgICAgIHBhZ2U6IGZpbHRlcixcbiAgICAgICAgYWxpYXM6IGZpbHRlcixcbiAgICAgICAgdHJhY2s6IGZpbHRlcixcbiAgICAgICAgaWRlbnRpZnk6IGZpbHRlcixcbiAgICAgICAgZ3JvdXA6IGZpbHRlcixcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js":
/*!************************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ batch)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/fetch */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n/* harmony import */ var _lib_on_page_change__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/on-page-change */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js\");\n\n\n\nvar MAX_PAYLOAD_SIZE = 500;\nfunction kilobytes(buffer) {\n    var size = encodeURI(JSON.stringify(buffer)).split(/%..|./).length - 1;\n    return size / 1024;\n}\n/**\n * Checks if the payload is over or close to\n * the maximum payload size allowed by tracking\n * API.\n */\nfunction approachingTrackingAPILimit(buffer) {\n    return kilobytes(buffer) >= MAX_PAYLOAD_SIZE - 50;\n}\nfunction chunks(batch) {\n    var result = [];\n    var index = 0;\n    batch.forEach(function (item) {\n        var size = kilobytes(result[index]);\n        if (size >= 64) {\n            index++;\n        }\n        if (result[index]) {\n            result[index].push(item);\n        }\n        else {\n            result[index] = [item];\n        }\n    });\n    return result;\n}\nfunction batch(apiHost, config) {\n    var _a, _b;\n    var buffer = [];\n    var pageUnloaded = false;\n    var limit = (_a = config === null || config === void 0 ? void 0 : config.size) !== null && _a !== void 0 ? _a : 10;\n    var timeout = (_b = config === null || config === void 0 ? void 0 : config.timeout) !== null && _b !== void 0 ? _b : 5000;\n    function sendBatch(batch) {\n        var _a;\n        if (batch.length === 0) {\n            return;\n        }\n        var writeKey = (_a = batch[0]) === null || _a === void 0 ? void 0 : _a.writeKey;\n        // Remove sentAt from every event as batching only needs a single timestamp\n        var updatedBatch = batch.map(function (event) {\n            var _a = event, sentAt = _a.sentAt, newEvent = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"sentAt\"]);\n            return newEvent;\n        });\n        return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_1__.fetch)(\"https://\".concat(apiHost, \"/b\"), {\n            keepalive: pageUnloaded,\n            headers: {\n                'Content-Type': 'text/plain',\n            },\n            method: 'post',\n            body: JSON.stringify({\n                writeKey: writeKey,\n                batch: updatedBatch,\n                sentAt: new Date().toISOString(),\n            }),\n        });\n    }\n    function flush() {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var batch_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                if (buffer.length) {\n                    batch_1 = buffer;\n                    buffer = [];\n                    return [2 /*return*/, sendBatch(batch_1)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    }\n    var schedule;\n    function scheduleFlush() {\n        if (schedule) {\n            return;\n        }\n        schedule = setTimeout(function () {\n            schedule = undefined;\n            flush().catch(console.error);\n        }, timeout);\n    }\n    (0,_lib_on_page_change__WEBPACK_IMPORTED_MODULE_2__.onPageChange)(function (unloaded) {\n        pageUnloaded = unloaded;\n        if (pageUnloaded && buffer.length) {\n            var reqs = chunks(buffer).map(sendBatch);\n            Promise.all(reqs).catch(console.error);\n        }\n    });\n    function dispatch(_url, body) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var bufferOverflow;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                buffer.push(body);\n                bufferOverflow = buffer.length >= limit || approachingTrackingAPILimit(buffer);\n                return [2 /*return*/, bufferOverflow || pageUnloaded ? flush() : scheduleFlush()];\n            });\n        });\n    }\n    return {\n        dispatch: dispatch,\n    };\n}\n//# sourceMappingURL=batched-dispatcher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL2JhdGNoZWQtZGlzcGF0Y2hlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ2Y7QUFDZ0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELDZDQUFNO0FBQ2pFO0FBQ0EsU0FBUztBQUNULGVBQWUsaURBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsSUFBSSxpRUFBWTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3NlZ21lbnRpby9iYXRjaGVkLWRpc3BhdGNoZXIuanM/MjJlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX3Jlc3QgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGZldGNoIH0gZnJvbSAnLi4vLi4vbGliL2ZldGNoJztcbmltcG9ydCB7IG9uUGFnZUNoYW5nZSB9IGZyb20gJy4uLy4uL2xpYi9vbi1wYWdlLWNoYW5nZSc7XG52YXIgTUFYX1BBWUxPQURfU0laRSA9IDUwMDtcbmZ1bmN0aW9uIGtpbG9ieXRlcyhidWZmZXIpIHtcbiAgICB2YXIgc2l6ZSA9IGVuY29kZVVSSShKU09OLnN0cmluZ2lmeShidWZmZXIpKS5zcGxpdCgvJS4ufC4vKS5sZW5ndGggLSAxO1xuICAgIHJldHVybiBzaXplIC8gMTAyNDtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBwYXlsb2FkIGlzIG92ZXIgb3IgY2xvc2UgdG9cbiAqIHRoZSBtYXhpbXVtIHBheWxvYWQgc2l6ZSBhbGxvd2VkIGJ5IHRyYWNraW5nXG4gKiBBUEkuXG4gKi9cbmZ1bmN0aW9uIGFwcHJvYWNoaW5nVHJhY2tpbmdBUElMaW1pdChidWZmZXIpIHtcbiAgICByZXR1cm4ga2lsb2J5dGVzKGJ1ZmZlcikgPj0gTUFYX1BBWUxPQURfU0laRSAtIDUwO1xufVxuZnVuY3Rpb24gY2h1bmtzKGJhdGNoKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgYmF0Y2guZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgc2l6ZSA9IGtpbG9ieXRlcyhyZXN1bHRbaW5kZXhdKTtcbiAgICAgICAgaWYgKHNpemUgPj0gNjQpIHtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdFtpbmRleF0pIHtcbiAgICAgICAgICAgIHJlc3VsdFtpbmRleF0ucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBbaXRlbV07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmF0Y2goYXBpSG9zdCwgY29uZmlnKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICB2YXIgYnVmZmVyID0gW107XG4gICAgdmFyIHBhZ2VVbmxvYWRlZCA9IGZhbHNlO1xuICAgIHZhciBsaW1pdCA9IChfYSA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy5zaXplKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAxMDtcbiAgICB2YXIgdGltZW91dCA9IChfYiA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy50aW1lb3V0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiA1MDAwO1xuICAgIGZ1bmN0aW9uIHNlbmRCYXRjaChiYXRjaCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChiYXRjaC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd3JpdGVLZXkgPSAoX2EgPSBiYXRjaFswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLndyaXRlS2V5O1xuICAgICAgICAvLyBSZW1vdmUgc2VudEF0IGZyb20gZXZlcnkgZXZlbnQgYXMgYmF0Y2hpbmcgb25seSBuZWVkcyBhIHNpbmdsZSB0aW1lc3RhbXBcbiAgICAgICAgdmFyIHVwZGF0ZWRCYXRjaCA9IGJhdGNoLm1hcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IGV2ZW50LCBzZW50QXQgPSBfYS5zZW50QXQsIG5ld0V2ZW50ID0gX19yZXN0KF9hLCBbXCJzZW50QXRcIl0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ld0V2ZW50O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9cIi5jb25jYXQoYXBpSG9zdCwgXCIvYlwiKSwge1xuICAgICAgICAgICAga2VlcGFsaXZlOiBwYWdlVW5sb2FkZWQsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB3cml0ZUtleTogd3JpdGVLZXksXG4gICAgICAgICAgICAgICAgYmF0Y2g6IHVwZGF0ZWRCYXRjaCxcbiAgICAgICAgICAgICAgICBzZW50QXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBiYXRjaF8xO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhdGNoXzEgPSBidWZmZXI7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc2VuZEJhdGNoKGJhdGNoXzEpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YXIgc2NoZWR1bGU7XG4gICAgZnVuY3Rpb24gc2NoZWR1bGVGbHVzaCgpIHtcbiAgICAgICAgaWYgKHNjaGVkdWxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2NoZWR1bGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNjaGVkdWxlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZmx1c2goKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgfVxuICAgIG9uUGFnZUNoYW5nZShmdW5jdGlvbiAodW5sb2FkZWQpIHtcbiAgICAgICAgcGFnZVVubG9hZGVkID0gdW5sb2FkZWQ7XG4gICAgICAgIGlmIChwYWdlVW5sb2FkZWQgJiYgYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHJlcXMgPSBjaHVua3MoYnVmZmVyKS5tYXAoc2VuZEJhdGNoKTtcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHJlcXMpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gZGlzcGF0Y2goX3VybCwgYm9keSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyT3ZlcmZsb3c7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyLnB1c2goYm9keSk7XG4gICAgICAgICAgICAgICAgYnVmZmVyT3ZlcmZsb3cgPSBidWZmZXIubGVuZ3RoID49IGxpbWl0IHx8IGFwcHJvYWNoaW5nVHJhY2tpbmdBUElMaW1pdChidWZmZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBidWZmZXJPdmVyZmxvdyB8fCBwYWdlVW5sb2FkZWQgPyBmbHVzaCgpIDogc2NoZWR1bGVGbHVzaCgpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGlzcGF0Y2g6IGRpc3BhdGNoLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXRjaGVkLWRpc3BhdGNoZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js":
/*!**********************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/fetch */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js\");\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(config) {\n    function dispatch(url, body) {\n        return (0,_lib_fetch__WEBPACK_IMPORTED_MODULE_0__.fetch)(url, {\n            keepalive: config === null || config === void 0 ? void 0 : config.keepalive,\n            headers: { 'Content-Type': 'text/plain' },\n            method: 'post',\n            body: JSON.stringify(body),\n        });\n    }\n    return {\n        dispatch: dispatch,\n    };\n}\n//# sourceMappingURL=fetch-dispatcher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL2ZldGNoLWRpc3BhdGNoZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDeEMsNkJBQWUsb0NBQVU7QUFDekI7QUFDQSxlQUFlLGlEQUFLO0FBQ3BCO0FBQ0EsdUJBQXVCLDhCQUE4QjtBQUNyRDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3NlZ21lbnRpby9mZXRjaC1kaXNwYXRjaGVyLmpzPzMzNmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICcuLi8uLi9saWIvZmV0Y2gnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIGZ1bmN0aW9uIGRpc3BhdGNoKHVybCwgYm9keSkge1xuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgICAgICBrZWVwYWxpdmU6IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy5rZWVwYWxpdmUsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbicgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNwYXRjaDogZGlzcGF0Y2gsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZldGNoLWRpc3BhdGNoZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   segmentio: () => (/* binding */ segmentio)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/connection */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _lib_to_facade__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/to-facade */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js\");\n/* harmony import */ var _batched_dispatcher__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./batched-dispatcher */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js\");\n/* harmony import */ var _fetch_dispatcher__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fetch-dispatcher */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js\");\n/* harmony import */ var _normalize__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./normalize */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js\");\n/* harmony import */ var _schedule_flush__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./schedule-flush */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js\");\n/* harmony import */ var _core_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/constants */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js\");\n\n\n\n\n\n\n\n\n\n\nfunction onAlias(analytics, json) {\n    var _a, _b, _c, _d;\n    var user = analytics.user();\n    json.previousId =\n        (_c = (_b = (_a = json.previousId) !== null && _a !== void 0 ? _a : json.from) !== null && _b !== void 0 ? _b : user.id()) !== null && _c !== void 0 ? _c : user.anonymousId();\n    json.userId = (_d = json.userId) !== null && _d !== void 0 ? _d : json.to;\n    delete json.from;\n    delete json.to;\n    return json;\n}\nfunction segmentio(analytics, settings, integrations) {\n    var _a, _b, _c;\n    // Attach `pagehide` before buffer is created so that inflight events are added\n    // to the buffer before the buffer persists events in its own `pagehide` handler.\n    window.addEventListener('pagehide', function () {\n        buffer.push.apply(buffer, Array.from(inflightEvents));\n        inflightEvents.clear();\n    });\n    var writeKey = (_a = settings === null || settings === void 0 ? void 0 : settings.apiKey) !== null && _a !== void 0 ? _a : '';\n    var buffer = analytics.options.disableClientPersistence\n        ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_0__.PriorityQueue(analytics.queue.queue.maxAttempts, [])\n        : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_1__.PersistedPriorityQueue(analytics.queue.queue.maxAttempts, \"\".concat(writeKey, \":dest-Segment.io\"));\n    var inflightEvents = new Set();\n    var flushing = false;\n    var apiHost = (_b = settings === null || settings === void 0 ? void 0 : settings.apiHost) !== null && _b !== void 0 ? _b : _core_constants__WEBPACK_IMPORTED_MODULE_2__.SEGMENT_API_HOST;\n    var protocol = (_c = settings === null || settings === void 0 ? void 0 : settings.protocol) !== null && _c !== void 0 ? _c : 'https';\n    var remote = \"\".concat(protocol, \"://\").concat(apiHost);\n    var deliveryStrategy = settings === null || settings === void 0 ? void 0 : settings.deliveryStrategy;\n    var client = (deliveryStrategy === null || deliveryStrategy === void 0 ? void 0 : deliveryStrategy.strategy) === 'batching'\n        ? (0,_batched_dispatcher__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(apiHost, deliveryStrategy.config)\n        : (0,_fetch_dispatcher__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(deliveryStrategy === null || deliveryStrategy === void 0 ? void 0 : deliveryStrategy.config);\n    function send(ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function () {\n            var path, json;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__generator)(this, function (_a) {\n                if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_6__.isOffline)()) {\n                    buffer.push(ctx);\n                    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                    (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n                    return [2 /*return*/, ctx];\n                }\n                inflightEvents.add(ctx);\n                path = ctx.event.type.charAt(0);\n                json = (0,_lib_to_facade__WEBPACK_IMPORTED_MODULE_8__.toFacade)(ctx.event).json();\n                if (ctx.event.type === 'track') {\n                    delete json.traits;\n                }\n                if (ctx.event.type === 'alias') {\n                    json = onAlias(analytics, json);\n                }\n                return [2 /*return*/, client\n                        .dispatch(\"\".concat(remote, \"/\").concat(path), (0,_normalize__WEBPACK_IMPORTED_MODULE_9__.normalize)(analytics, json, settings, integrations))\n                        .then(function () { return ctx; })\n                        .catch(function () {\n                        buffer.pushWithBackoff(ctx);\n                        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                        (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n                        return ctx;\n                    })\n                        .finally(function () {\n                        inflightEvents.delete(ctx);\n                    })];\n            });\n        });\n    }\n    var segmentio = {\n        name: 'Segment.io',\n        type: 'destination',\n        version: '0.1.0',\n        isLoaded: function () { return true; },\n        load: function () { return Promise.resolve(); },\n        track: send,\n        identify: send,\n        page: send,\n        alias: send,\n        group: send,\n        screen: send,\n    };\n    // Buffer may already have items if they were previously stored in localStorage.\n    // Start flushing them immediately.\n    if (buffer.todo) {\n        (0,_schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush)(flushing, buffer, segmentio, _schedule_flush__WEBPACK_IMPORTED_MODULE_7__.scheduleFlush);\n    }\n    return segmentio;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ0c7QUFDTztBQUNtQjtBQUM3QjtBQUNOO0FBQ0M7QUFDRjtBQUNTO0FBQ087QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw4REFBYTtBQUMzQixjQUFjLGlGQUFzQjtBQUNwQztBQUNBO0FBQ0EsK0hBQStILDZEQUFnQjtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0RBQUs7QUFDZixVQUFVLDZEQUFRO0FBQ2xCO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QixvQkFBb0IsMkRBQVM7QUFDN0I7QUFDQTtBQUNBLG9CQUFvQiw4REFBYSw4QkFBOEIsMERBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUscURBQVM7QUFDaEYsNENBQTRDLGFBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDhEQUFhLDhCQUE4QiwwREFBYTtBQUNoRjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxjQUFjO0FBQzlDLDRCQUE0QiwyQkFBMkI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFhLDhCQUE4QiwwREFBYTtBQUNoRTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3NlZ21lbnRpby9pbmRleC5qcz8wN2U0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzT2ZmbGluZSB9IGZyb20gJy4uLy4uL2NvcmUvY29ubmVjdGlvbic7XG5pbXBvcnQgeyBQcmlvcml0eVF1ZXVlIH0gZnJvbSAnLi4vLi4vbGliL3ByaW9yaXR5LXF1ZXVlJztcbmltcG9ydCB7IFBlcnNpc3RlZFByaW9yaXR5UXVldWUgfSBmcm9tICcuLi8uLi9saWIvcHJpb3JpdHktcXVldWUvcGVyc2lzdGVkJztcbmltcG9ydCB7IHRvRmFjYWRlIH0gZnJvbSAnLi4vLi4vbGliL3RvLWZhY2FkZSc7XG5pbXBvcnQgYmF0Y2ggZnJvbSAnLi9iYXRjaGVkLWRpc3BhdGNoZXInO1xuaW1wb3J0IHN0YW5kYXJkIGZyb20gJy4vZmV0Y2gtZGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBub3JtYWxpemUgfSBmcm9tICcuL25vcm1hbGl6ZSc7XG5pbXBvcnQgeyBzY2hlZHVsZUZsdXNoIH0gZnJvbSAnLi9zY2hlZHVsZS1mbHVzaCc7XG5pbXBvcnQgeyBTRUdNRU5UX0FQSV9IT1NUIH0gZnJvbSAnLi4vLi4vY29yZS9jb25zdGFudHMnO1xuZnVuY3Rpb24gb25BbGlhcyhhbmFseXRpY3MsIGpzb24pIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgdmFyIHVzZXIgPSBhbmFseXRpY3MudXNlcigpO1xuICAgIGpzb24ucHJldmlvdXNJZCA9XG4gICAgICAgIChfYyA9IChfYiA9IChfYSA9IGpzb24ucHJldmlvdXNJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoganNvbi5mcm9tKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB1c2VyLmlkKCkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHVzZXIuYW5vbnltb3VzSWQoKTtcbiAgICBqc29uLnVzZXJJZCA9IChfZCA9IGpzb24udXNlcklkKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBqc29uLnRvO1xuICAgIGRlbGV0ZSBqc29uLmZyb207XG4gICAgZGVsZXRlIGpzb24udG87XG4gICAgcmV0dXJuIGpzb247XG59XG5leHBvcnQgZnVuY3Rpb24gc2VnbWVudGlvKGFuYWx5dGljcywgc2V0dGluZ3MsIGludGVncmF0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIC8vIEF0dGFjaCBgcGFnZWhpZGVgIGJlZm9yZSBidWZmZXIgaXMgY3JlYXRlZCBzbyB0aGF0IGluZmxpZ2h0IGV2ZW50cyBhcmUgYWRkZWRcbiAgICAvLyB0byB0aGUgYnVmZmVyIGJlZm9yZSB0aGUgYnVmZmVyIHBlcnNpc3RzIGV2ZW50cyBpbiBpdHMgb3duIGBwYWdlaGlkZWAgaGFuZGxlci5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoLmFwcGx5KGJ1ZmZlciwgQXJyYXkuZnJvbShpbmZsaWdodEV2ZW50cykpO1xuICAgICAgICBpbmZsaWdodEV2ZW50cy5jbGVhcigpO1xuICAgIH0pO1xuICAgIHZhciB3cml0ZUtleSA9IChfYSA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy5hcGlLZXkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnO1xuICAgIHZhciBidWZmZXIgPSBhbmFseXRpY3Mub3B0aW9ucy5kaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2VcbiAgICAgICAgPyBuZXcgUHJpb3JpdHlRdWV1ZShhbmFseXRpY3MucXVldWUucXVldWUubWF4QXR0ZW1wdHMsIFtdKVxuICAgICAgICA6IG5ldyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKGFuYWx5dGljcy5xdWV1ZS5xdWV1ZS5tYXhBdHRlbXB0cywgXCJcIi5jb25jYXQod3JpdGVLZXksIFwiOmRlc3QtU2VnbWVudC5pb1wiKSk7XG4gICAgdmFyIGluZmxpZ2h0RXZlbnRzID0gbmV3IFNldCgpO1xuICAgIHZhciBmbHVzaGluZyA9IGZhbHNlO1xuICAgIHZhciBhcGlIb3N0ID0gKF9iID0gc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLmFwaUhvc3QpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFNFR01FTlRfQVBJX0hPU1Q7XG4gICAgdmFyIHByb3RvY29sID0gKF9jID0gc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLnByb3RvY29sKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnaHR0cHMnO1xuICAgIHZhciByZW1vdGUgPSBcIlwiLmNvbmNhdChwcm90b2NvbCwgXCI6Ly9cIikuY29uY2F0KGFwaUhvc3QpO1xuICAgIHZhciBkZWxpdmVyeVN0cmF0ZWd5ID0gc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLmRlbGl2ZXJ5U3RyYXRlZ3k7XG4gICAgdmFyIGNsaWVudCA9IChkZWxpdmVyeVN0cmF0ZWd5ID09PSBudWxsIHx8IGRlbGl2ZXJ5U3RyYXRlZ3kgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlbGl2ZXJ5U3RyYXRlZ3kuc3RyYXRlZ3kpID09PSAnYmF0Y2hpbmcnXG4gICAgICAgID8gYmF0Y2goYXBpSG9zdCwgZGVsaXZlcnlTdHJhdGVneS5jb25maWcpXG4gICAgICAgIDogc3RhbmRhcmQoZGVsaXZlcnlTdHJhdGVneSA9PT0gbnVsbCB8fCBkZWxpdmVyeVN0cmF0ZWd5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWxpdmVyeVN0cmF0ZWd5LmNvbmZpZyk7XG4gICAgZnVuY3Rpb24gc2VuZChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhdGgsIGpzb247XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzT2ZmbGluZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVGbHVzaChmbHVzaGluZywgYnVmZmVyLCBzZWdtZW50aW8sIHNjaGVkdWxlRmx1c2gpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5mbGlnaHRFdmVudHMuYWRkKGN0eCk7XG4gICAgICAgICAgICAgICAgcGF0aCA9IGN0eC5ldmVudC50eXBlLmNoYXJBdCgwKTtcbiAgICAgICAgICAgICAgICBqc29uID0gdG9GYWNhZGUoY3R4LmV2ZW50KS5qc29uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5ldmVudC50eXBlID09PSAndHJhY2snKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLnRyYWl0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5ldmVudC50eXBlID09PSAnYWxpYXMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb24gPSBvbkFsaWFzKGFuYWx5dGljcywganNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjbGllbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kaXNwYXRjaChcIlwiLmNvbmNhdChyZW1vdGUsIFwiL1wiKS5jb25jYXQocGF0aCksIG5vcm1hbGl6ZShhbmFseXRpY3MsIGpzb24sIHNldHRpbmdzLCBpbnRlZ3JhdGlvbnMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY3R4OyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoV2l0aEJhY2tvZmYoY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlRmx1c2goZmx1c2hpbmcsIGJ1ZmZlciwgc2VnbWVudGlvLCBzY2hlZHVsZUZsdXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZsaWdodEV2ZW50cy5kZWxldGUoY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YXIgc2VnbWVudGlvID0ge1xuICAgICAgICBuYW1lOiAnU2VnbWVudC5pbycsXG4gICAgICAgIHR5cGU6ICdkZXN0aW5hdGlvbicsXG4gICAgICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgICAgIGlzTG9hZGVkOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfSxcbiAgICAgICAgdHJhY2s6IHNlbmQsXG4gICAgICAgIGlkZW50aWZ5OiBzZW5kLFxuICAgICAgICBwYWdlOiBzZW5kLFxuICAgICAgICBhbGlhczogc2VuZCxcbiAgICAgICAgZ3JvdXA6IHNlbmQsXG4gICAgICAgIHNjcmVlbjogc2VuZCxcbiAgICB9O1xuICAgIC8vIEJ1ZmZlciBtYXkgYWxyZWFkeSBoYXZlIGl0ZW1zIGlmIHRoZXkgd2VyZSBwcmV2aW91c2x5IHN0b3JlZCBpbiBsb2NhbFN0b3JhZ2UuXG4gICAgLy8gU3RhcnQgZmx1c2hpbmcgdGhlbSBpbW1lZGlhdGVseS5cbiAgICBpZiAoYnVmZmVyLnRvZG8pIHtcbiAgICAgICAgc2NoZWR1bGVGbHVzaChmbHVzaGluZywgYnVmZmVyLCBzZWdtZW50aW8sIHNjaGVkdWxlRmx1c2gpO1xuICAgIH1cbiAgICByZXR1cm4gc2VnbWVudGlvO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalize: () => (/* binding */ normalize)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n\nfunction normalize(analytics, json, settings, integrations) {\n    var _a;\n    var user = analytics.user();\n    delete json.options;\n    json.writeKey = settings === null || settings === void 0 ? void 0 : settings.apiKey;\n    json.userId = json.userId || user.id();\n    json.anonymousId = json.anonymousId || user.anonymousId();\n    json.sentAt = new Date();\n    var failed = analytics.queue.failedInitializations || [];\n    if (failed.length > 0) {\n        json._metadata = { failedInitializations: failed };\n    }\n    var bundled = [];\n    var unbundled = [];\n    for (var key in integrations) {\n        var integration = integrations[key];\n        if (key === 'Segment.io') {\n            bundled.push(key);\n        }\n        if (integration.bundlingStatus === 'bundled') {\n            bundled.push(key);\n        }\n        if (integration.bundlingStatus === 'unbundled') {\n            unbundled.push(key);\n        }\n    }\n    // This will make sure that the disabled cloud mode destinations will be\n    // included in the unbundled list.\n    for (var _i = 0, _b = (settings === null || settings === void 0 ? void 0 : settings.unbundledIntegrations) || []; _i < _b.length; _i++) {\n        var settingsUnbundled = _b[_i];\n        if (!unbundled.includes(settingsUnbundled)) {\n            unbundled.push(settingsUnbundled);\n        }\n    }\n    var configIds = (_a = settings === null || settings === void 0 ? void 0 : settings.maybeBundledConfigIds) !== null && _a !== void 0 ? _a : {};\n    var bundledConfigIds = [];\n    bundled.sort().forEach(function (name) {\n        var _a;\n        ;\n        ((_a = configIds[name]) !== null && _a !== void 0 ? _a : []).forEach(function (id) {\n            bundledConfigIds.push(id);\n        });\n    });\n    if ((settings === null || settings === void 0 ? void 0 : settings.addBundledMetadata) !== false) {\n        json._metadata = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, json._metadata), { bundled: bundled.sort(), unbundled: unbundled.sort(), bundledIds: bundledConfigIds });\n    }\n    return json;\n}\n//# sourceMappingURL=normalize.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL25vcm1hbGl6ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpQztBQUMxQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0hBQXNILGdCQUFnQjtBQUN0STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EseUJBQXlCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxxQkFBcUIsb0ZBQW9GO0FBQ3RKO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL25vcm1hbGl6ZS5qcz9iZmUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKGFuYWx5dGljcywganNvbiwgc2V0dGluZ3MsIGludGVncmF0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICB2YXIgdXNlciA9IGFuYWx5dGljcy51c2VyKCk7XG4gICAgZGVsZXRlIGpzb24ub3B0aW9ucztcbiAgICBqc29uLndyaXRlS2V5ID0gc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLmFwaUtleTtcbiAgICBqc29uLnVzZXJJZCA9IGpzb24udXNlcklkIHx8IHVzZXIuaWQoKTtcbiAgICBqc29uLmFub255bW91c0lkID0ganNvbi5hbm9ueW1vdXNJZCB8fCB1c2VyLmFub255bW91c0lkKCk7XG4gICAganNvbi5zZW50QXQgPSBuZXcgRGF0ZSgpO1xuICAgIHZhciBmYWlsZWQgPSBhbmFseXRpY3MucXVldWUuZmFpbGVkSW5pdGlhbGl6YXRpb25zIHx8IFtdO1xuICAgIGlmIChmYWlsZWQubGVuZ3RoID4gMCkge1xuICAgICAgICBqc29uLl9tZXRhZGF0YSA9IHsgZmFpbGVkSW5pdGlhbGl6YXRpb25zOiBmYWlsZWQgfTtcbiAgICB9XG4gICAgdmFyIGJ1bmRsZWQgPSBbXTtcbiAgICB2YXIgdW5idW5kbGVkID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIGludGVncmF0aW9ucykge1xuICAgICAgICB2YXIgaW50ZWdyYXRpb24gPSBpbnRlZ3JhdGlvbnNba2V5XTtcbiAgICAgICAgaWYgKGtleSA9PT0gJ1NlZ21lbnQuaW8nKSB7XG4gICAgICAgICAgICBidW5kbGVkLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZWdyYXRpb24uYnVuZGxpbmdTdGF0dXMgPT09ICdidW5kbGVkJykge1xuICAgICAgICAgICAgYnVuZGxlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVncmF0aW9uLmJ1bmRsaW5nU3RhdHVzID09PSAndW5idW5kbGVkJykge1xuICAgICAgICAgICAgdW5idW5kbGVkLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBUaGlzIHdpbGwgbWFrZSBzdXJlIHRoYXQgdGhlIGRpc2FibGVkIGNsb3VkIG1vZGUgZGVzdGluYXRpb25zIHdpbGwgYmVcbiAgICAvLyBpbmNsdWRlZCBpbiB0aGUgdW5idW5kbGVkIGxpc3QuXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IChzZXR0aW5ncyA9PT0gbnVsbCB8fCBzZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2V0dGluZ3MudW5idW5kbGVkSW50ZWdyYXRpb25zKSB8fCBbXTsgX2kgPCBfYi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIHNldHRpbmdzVW5idW5kbGVkID0gX2JbX2ldO1xuICAgICAgICBpZiAoIXVuYnVuZGxlZC5pbmNsdWRlcyhzZXR0aW5nc1VuYnVuZGxlZCkpIHtcbiAgICAgICAgICAgIHVuYnVuZGxlZC5wdXNoKHNldHRpbmdzVW5idW5kbGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgY29uZmlnSWRzID0gKF9hID0gc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLm1heWJlQnVuZGxlZENvbmZpZ0lkcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgdmFyIGJ1bmRsZWRDb25maWdJZHMgPSBbXTtcbiAgICBidW5kbGVkLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgO1xuICAgICAgICAoKF9hID0gY29uZmlnSWRzW25hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSkuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIGJ1bmRsZWRDb25maWdJZHMucHVzaChpZCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGlmICgoc2V0dGluZ3MgPT09IG51bGwgfHwgc2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNldHRpbmdzLmFkZEJ1bmRsZWRNZXRhZGF0YSkgIT09IGZhbHNlKSB7XG4gICAgICAgIGpzb24uX21ldGFkYXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGpzb24uX21ldGFkYXRhKSwgeyBidW5kbGVkOiBidW5kbGVkLnNvcnQoKSwgdW5idW5kbGVkOiB1bmJ1bmRsZWQuc29ydCgpLCBidW5kbGVkSWRzOiBidW5kbGVkQ29uZmlnSWRzIH0pO1xuICAgIH1cbiAgICByZXR1cm4ganNvbjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vcm1hbGl6ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scheduleFlush: () => (/* binding */ scheduleFlush)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/connection */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/context */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n/* harmony import */ var _lib_p_while__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/p-while */ \"(ssr)/../node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\");\n\n\n\n\n\nfunction flushQueue(xt, queue) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var failedQueue;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    failedQueue = [];\n                    if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_1__.isOffline)()) {\n                        return [2 /*return*/, queue];\n                    }\n                    return [4 /*yield*/, (0,_lib_p_while__WEBPACK_IMPORTED_MODULE_2__.pWhile)(function () { return queue.length > 0 && !(0,_core_connection__WEBPACK_IMPORTED_MODULE_1__.isOffline)(); }, function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n                            var ctx, result, success;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        ctx = queue.pop();\n                                        if (!ctx) {\n                                            return [2 /*return*/];\n                                        }\n                                        return [4 /*yield*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.attempt)(ctx, xt)];\n                                    case 1:\n                                        result = _a.sent();\n                                        success = result instanceof _core_context__WEBPACK_IMPORTED_MODULE_4__.Context;\n                                        if (!success) {\n                                            failedQueue.push(ctx);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                        // re-add failed tasks\n                    ];\n                case 1:\n                    _a.sent();\n                    // re-add failed tasks\n                    failedQueue.map(function (failed) { return queue.pushWithBackoff(failed); });\n                    return [2 /*return*/, queue];\n            }\n        });\n    });\n}\nfunction scheduleFlush(flushing, buffer, xt, scheduleFlush) {\n    var _this = this;\n    if (flushing) {\n        return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    setTimeout(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this, void 0, void 0, function () {\n        var isFlushing, newBuffer;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    isFlushing = true;\n                    return [4 /*yield*/, flushQueue(xt, buffer)];\n                case 1:\n                    newBuffer = _a.sent();\n                    isFlushing = false;\n                    if (buffer.todo > 0) {\n                        scheduleFlush(isFlushing, newBuffer, xt, scheduleFlush);\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    }); }, Math.random() * 5000);\n}\n//# sourceMappingURL=schedule-flush.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvc2VnbWVudGlvL3NjaGVkdWxlLWZsdXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErQztBQUNHO0FBQ0w7QUFDSztBQUNQO0FBQzNDO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkRBQVM7QUFDakM7QUFDQTtBQUNBLHlDQUF5QyxvREFBTSxlQUFlLDRCQUE0QiwyREFBUyxLQUFLLGdCQUFnQixPQUFPLGdEQUFTO0FBQ3hJO0FBQ0EsbUNBQW1DLGtEQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnRUFBTztBQUNwRTtBQUNBO0FBQ0Esb0VBQW9FLGtEQUFPO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCLElBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCx1Q0FBdUM7QUFDL0Y7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsT0FBTyxnREFBUztBQUM3QztBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUssSUFBSTtBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9zZWdtZW50aW8vc2NoZWR1bGUtZmx1c2guanM/MjliZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc09mZmxpbmUgfSBmcm9tICcuLi8uLi9jb3JlL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4uLy4uL2NvcmUvY29udGV4dCc7XG5pbXBvcnQgeyBhdHRlbXB0IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgcFdoaWxlIH0gZnJvbSAnLi4vLi4vbGliL3Atd2hpbGUnO1xuZnVuY3Rpb24gZmx1c2hRdWV1ZSh4dCwgcXVldWUpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmYWlsZWRRdWV1ZTtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkUXVldWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzT2ZmbGluZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcXVldWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBXaGlsZShmdW5jdGlvbiAoKSB7IHJldHVybiBxdWV1ZS5sZW5ndGggPiAwICYmICFpc09mZmxpbmUoKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHgsIHJlc3VsdCwgc3VjY2VzcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF0dGVtcHQoY3R4LCB4dCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gcmVzdWx0IGluc3RhbmNlb2YgQ29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkUXVldWUucHVzaChjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtYWRkIGZhaWxlZCB0YXNrc1xuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyByZS1hZGQgZmFpbGVkIHRhc2tzXG4gICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlLm1hcChmdW5jdGlvbiAoZmFpbGVkKSB7IHJldHVybiBxdWV1ZS5wdXNoV2l0aEJhY2tvZmYoZmFpbGVkKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBxdWV1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNjaGVkdWxlRmx1c2goZmx1c2hpbmcsIGJ1ZmZlciwgeHQsIHNjaGVkdWxlRmx1c2gpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGlmIChmbHVzaGluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbWlzdXNlZC1wcm9taXNlc1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXNGbHVzaGluZywgbmV3QnVmZmVyO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBpc0ZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmx1c2hRdWV1ZSh4dCwgYnVmZmVyKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBuZXdCdWZmZXIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlci50b2RvID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVGbHVzaChpc0ZsdXNoaW5nLCBuZXdCdWZmZXIsIHh0LCBzY2hlZHVsZUZsdXNoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pOyB9LCBNYXRoLnJhbmRvbSgpICogNTAwMCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlZHVsZS1mbHVzaC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/validation/index.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/validation/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validation: () => (/* binding */ validation)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/../node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n\nfunction validate(ctx) {\n    var _a;\n    var event = ctx.event;\n    (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.assertEventExists)(event);\n    (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.assertEventType)(event);\n    if (event.type === 'track') {\n        (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.assertTrackEventName)(event);\n    }\n    var props = (_a = event.properties) !== null && _a !== void 0 ? _a : event.traits;\n    if (event.type !== 'alias' && !(0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.isPlainObject)(props)) {\n        throw new _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.ValidationError('.properties', 'is not an object');\n    }\n    (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.assertUserIdentity)(event);\n    return ctx;\n}\nvar validation = {\n    name: 'Event Validation',\n    type: 'before',\n    version: '1.0.0',\n    isLoaded: function () { return true; },\n    load: function () { return Promise.resolve(); },\n    track: validate,\n    identify: validate,\n    page: validate,\n    alias: validate,\n    group: validate,\n    screen: validate,\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvdmFsaWRhdGlvbi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdKO0FBQ3hKO0FBQ0E7QUFDQTtBQUNBLElBQUksMEVBQWlCO0FBQ3JCLElBQUksd0VBQWU7QUFDbkI7QUFDQSxRQUFRLDZFQUFvQjtBQUM1QjtBQUNBO0FBQ0EsbUNBQW1DLHNFQUFhO0FBQ2hELGtCQUFrQixvRUFBZTtBQUNqQztBQUNBLElBQUksMkVBQWtCO0FBQ3RCO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjO0FBQzFDLHdCQUF3QiwyQkFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL3ZhbGlkYXRpb24vaW5kZXguanM/NjQ3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NlcnRVc2VySWRlbnRpdHksIGlzUGxhaW5PYmplY3QsIFZhbGlkYXRpb25FcnJvciwgYXNzZXJ0RXZlbnRFeGlzdHMsIGFzc2VydEV2ZW50VHlwZSwgYXNzZXJ0VHJhY2tFdmVudE5hbWUsIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuZnVuY3Rpb24gdmFsaWRhdGUoY3R4KSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBldmVudCA9IGN0eC5ldmVudDtcbiAgICBhc3NlcnRFdmVudEV4aXN0cyhldmVudCk7XG4gICAgYXNzZXJ0RXZlbnRUeXBlKGV2ZW50KTtcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RyYWNrJykge1xuICAgICAgICBhc3NlcnRUcmFja0V2ZW50TmFtZShldmVudCk7XG4gICAgfVxuICAgIHZhciBwcm9wcyA9IChfYSA9IGV2ZW50LnByb3BlcnRpZXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV2ZW50LnRyYWl0cztcbiAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ2FsaWFzJyAmJiAhaXNQbGFpbk9iamVjdChwcm9wcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLnByb3BlcnRpZXMnLCAnaXMgbm90IGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBhc3NlcnRVc2VySWRlbnRpdHkoZXZlbnQpO1xuICAgIHJldHVybiBjdHg7XG59XG5leHBvcnQgdmFyIHZhbGlkYXRpb24gPSB7XG4gICAgbmFtZTogJ0V2ZW50IFZhbGlkYXRpb24nLFxuICAgIHR5cGU6ICdiZWZvcmUnLFxuICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgaXNMb2FkZWQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgbG9hZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IH0sXG4gICAgdHJhY2s6IHZhbGlkYXRlLFxuICAgIGlkZW50aWZ5OiB2YWxpZGF0ZSxcbiAgICBwYWdlOiB2YWxpZGF0ZSxcbiAgICBhbGlhczogdmFsaWRhdGUsXG4gICAgZ3JvdXA6IHZhbGlkYXRlLFxuICAgIHNjcmVlbjogdmFsaWRhdGUsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics-next/dist/pkg/plugins/validation/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js ***!
  \*****************************************************************************/
/***/ ((module) => {

eval("!function(e,t){ true?module.exports=t():0}(window,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=2)}([function(e,t,a){\"use strict\";a.r(t);var n=\"function\"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise((function(a,n){var i=new XMLHttpRequest;for(var r in i.open(t.method||\"get\",e,!0),t.headers)i.setRequestHeader(r,t.headers[r]);function o(){var e,t=[],a=[],n={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,(function(i,r,o){t.push(r=r.toLowerCase()),a.push([r,o]),e=n[r],n[r]=e?e+\",\"+o:o})),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:o,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return a},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}i.withCredentials=\"include\"==t.credentials,i.onload=function(){a(o())},i.onerror=n,i.send(t.body)}))};t.default=n},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.pluginName=t}return n(e,[{key:\"track\",value:function(e,t){window.analytics.track(e,t,{integration:{name:this.pluginName}})}}]),e}();t.default=i},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.YouTubeAnalytics=t.VimeoAnalytics=void 0;var n=r(a(3)),i=r(a(4));function r(e){return e&&e.__esModule?e:{default:e}}t.VimeoAnalytics=n.default,t.YouTubeAnalytics=i.default},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=r(a(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"VimeoAnalytics\"));return n.authToken=a,n.player=e,n.metadata={content:{},playback:{videoPlayer:\"Vimeo\"}},n.mostRecentHeartbeat=0,n.isPaused=!1,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){var e=this,t={loaded:this.retrieveMetadata,play:this.trackPlay,pause:this.trackPause,ended:this.trackEnded,timeupdate:this.trackHeartbeat};for(var a in t)this.registerHandler(a,t[a]);this.player.getVideoId().then((function(t){e.retrieveMetadata({id:t})})).catch(console.error)}},{key:\"registerHandler\",value:function(e,t){var a=this;this.player.on(e,(function(e){a.updateMetadata(e),t.call(a,e)}))}},{key:\"trackPlay\",value:function(){this.isPaused?(this.track(\"Video Playback Resumed\",this.metadata.playback),this.isPaused=!1):(this.track(\"Video Playback Started\",this.metadata.playback),this.track(\"Video Content Started\",this.metadata.content))}},{key:\"trackEnded\",value:function(){this.track(\"Video Playback Completed\",this.metadata.playback),this.track(\"Video Content Completed\",this.metadata.content)}},{key:\"trackHeartbeat\",value:function(){var e=this.mostRecentHeartbeat,t=this.metadata.playback.position;t!==e&&t-e>=10&&(this.track(\"Video Content Playing\",this.metadata.content),this.mostRecentHeartbeat=Math.floor(t))}},{key:\"trackPause\",value:function(){this.isPaused=!0,this.track(\"Video Playback Paused\",this.metadata.playback)}},{key:\"retrieveMetadata\",value:function(e){var t=this;return new Promise((function(a,n){var r=e.id;(0,i.default)(\"https://api.vimeo.com/videos/\"+r,{headers:{Authorization:\"Bearer \"+t.authToken}}).then((function(e){return e.ok?e.json():n(e)})).then((function(e){t.metadata.content.title=e.name,t.metadata.content.description=e.description,t.metadata.content.publisher=e.user.name,t.metadata.playback.position=0,t.metadata.playback.totalLength=e.duration})).catch((function(e){return console.error(\"Request to Vimeo API Failed with: \",e),n(e)}))}))}},{key:\"updateMetadata\",value:function(e){var t=this;return new Promise((function(a,n){t.player.getVolume().then((function(n){n&&(t.metadata.playback.sound=100*n),t.metadata.playback.position=e.seconds,a()})).catch(n)}))}}]),t}(r(a(1)).default);t.default=o},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=o(a(0)),r=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"YoutubeAnalytics\"));return n.player=e,n.apiKey=a,n.playerLoaded=!1,n.playbackStarted=!1,n.contentStarted=!1,n.isPaused=!1,n.isBuffering=!1,n.isSeeking=!1,n.lastRecordedTime={timeReported:Date.now(),timeElapsed:0},n.metadata=[{playback:{video_player:\"youtube\"},content:{}}],n.playlistIndex=0,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){window.segmentYoutubeOnStateChange=this.onPlayerStateChange.bind(this),window.segmentYoutubeOnReady=this.onPlayerReady.bind(this),this.player.addEventListener(\"onReady\",\"segmentYoutubeOnReady\"),this.player.addEventListener(\"onStateChange\",\"segmentYoutubeOnStateChange\")}},{key:\"onPlayerReady\",value:function(e){this.retrieveMetadata()}},{key:\"onPlayerStateChange\",value:function(e){var t=this.player.getCurrentTime();switch(this.metadata[this.playlistIndex]&&(this.metadata[this.playlistIndex].playback.position=this.metadata[this.playlistIndex].content.position=t,this.metadata[this.playlistIndex].playback.quality=this.player.getPlaybackQuality(),this.metadata[this.playlistIndex].playback.sound=this.player.isMuted()?0:this.player.getVolume()),e.data){case-1:if(this.playerLoaded)break;this.retrieveMetadata(),this.playerLoaded=!0;break;case YT.PlayerState.BUFFERING:this.handleBuffer();break;case YT.PlayerState.PLAYING:this.handlePlay();break;case YT.PlayerState.PAUSED:this.handlePause();break;case YT.PlayerState.ENDED:this.handleEnd()}this.lastRecordedTime={timeReported:Date.now(),timeElapsed:1e3*this.player.getCurrentTime()}}},{key:\"retrieveMetadata\",value:function(){var e=this;return new Promise((function(t,a){var n=e.player.getVideoData(),r=e.player.getPlaylist()||[n.video_id],o=r.join();(0,i.default)(\"https://www.googleapis.com/youtube/v3/videos?id=\"+o+\"&part=snippet,contentDetails&key=\"+e.apiKey).then((function(e){if(!e.ok){var t=new Error(\"Segment request to Youtube API failed (likely due to a bad API Key. Events will still be sent but will not contain video metadata)\");throw t.response=e,t}return e.json()})).then((function(a){e.metadata=[];for(var n=0,i=0;i<r.length;i++){var o=a.items[i];e.metadata.push({content:{title:o.snippet.title,description:o.snippet.description,keywords:o.snippet.tags,channel:o.snippet.channelTitle,airdate:o.snippet.publishedAt}}),n+=l(o.contentDetails.duration)}for(i=0;i<r.length;i++)e.metadata[i].playback={total_length:n,video_player:\"youtube\"};t()})).catch((function(t){e.metadata=r.map((function(e){return{playback:{video_player:\"youtube\"},content:{}}})),a(t)}))}))}},{key:\"handleBuffer\",value:function(){var e=this.determineSeek();this.playbackStarted||(this.playbackStarted=!0,this.track(\"Video Playback Started\",this.metadata[this.playlistIndex].playback)),e&&!this.isSeeking&&(this.isSeeking=!0,this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback)),this.isSeeking&&(this.track(\"Video Playback Seek Completed\",this.metadata[this.playlistIndex].playback),this.isSeeking=!1);var t=this.player.getPlaylist();t&&0===this.player.getCurrentTime()&&this.player.getPlaylistIndex()!==this.playlistIndex&&(this.contentStarted=!1,this.playlistIndex===t.length-1&&0===this.player.getPlaylistIndex()&&(this.track(\"Video Playback Completed\",this.metadata[this.player.getPlaylistIndex()].playback),this.track(\"Video Playback Started\",this.metadata[this.player.getPlaylistIndex()].playback))),this.track(\"Video Playback Buffer Started\",this.metadata[this.playlistIndex].playback),this.isBuffering=!0}},{key:\"handlePlay\",value:function(){this.contentStarted||(this.playlistIndex=this.player.getPlaylistIndex(),-1===this.playlistIndex&&(this.playlistIndex=0),this.track(\"Video Content Started\",this.metadata[this.playlistIndex].content),this.contentStarted=!0),this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused&&(this.track(\"Video Playback Resumed\",this.metadata[this.playlistIndex].playback),this.isPaused=!1)}},{key:\"handlePause\",value:function(){var e=this.determineSeek();this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused||(e?(this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback),this.isSeeking=!0):(this.track(\"Video Playback Paused\",this.metadata[this.playlistIndex].playback),this.isPaused=!0))}},{key:\"handleEnd\",value:function(){this.track(\"Video Content Completed\",this.metadata[this.playlistIndex].content),this.contentStarted=!1;var e=this.player.getPlaylistIndex(),t=this.player.getPlaylist();(t&&e===t.length-1||-1===e)&&(this.track(\"Video Playback Completed\",this.metadata[this.playlistIndex].playback),this.playbackStarted=!1)}},{key:\"determineSeek\",value:function(){var e=this.isPaused||this.isBuffering?0:Date.now()-this.lastRecordedTime.timeReported,t=1e3*this.player.getCurrentTime()-this.lastRecordedTime.timeElapsed;return Math.abs(e-t)>2e3}}]),t}(r.default);function l(e){var t=e.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);return t=t.slice(1).map((function(e){if(null!=e)return e.replace(/\\D/,\"\")})),3600*(parseInt(t[0])||0)+60*(parseInt(t[1])||0)+(parseInt(t[2])||0)}t.default=s}])}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy5qcy12aWRlby1wbHVnaW5zL2Rpc3QvaW5kZXgudW1kLmpzIiwibWFwcGluZ3MiOiJBQUFBLGVBQWUsS0FBaUQsb0JBQW9CLENBQXlJLENBQUMsb0JBQW9CLG1CQUFtQixTQUFTLGNBQWMsNEJBQTRCLFlBQVkscUJBQXFCLDJEQUEyRCx1Q0FBdUMscUNBQXFDLG9CQUFvQixFQUFFLGlCQUFpQiw0RkFBNEYsZUFBZSx3Q0FBd0MsU0FBUyxFQUFFLG1CQUFtQiw4QkFBOEIscURBQXFELDBCQUEwQiw2Q0FBNkMsc0JBQXNCLDZEQUE2RCxZQUFZLGVBQWUsU0FBUyxpQkFBaUIsaUNBQWlDLGlCQUFpQixZQUFZLFVBQVUsc0JBQXNCLG1CQUFtQixpREFBaUQsaUJBQWlCLGtCQUFrQixhQUFhLE9BQU8sMERBQTBELGNBQWMsNEJBQTRCLHlCQUF5Qix1RkFBdUYsYUFBYSxxQkFBcUIseUZBQXlGLGdFQUFnRSxJQUFJLHlHQUF5Ryx1Q0FBdUMsaUJBQWlCLHdEQUF3RCxpQkFBaUIsK0NBQStDLFVBQVUsZ0JBQWdCLFNBQVMsb0JBQW9CLFNBQVMsaUJBQWlCLDBCQUEwQixpQkFBaUIsOEJBQThCLCtEQUErRCxPQUFPLDRCQUE0QixJQUFJLFlBQVksaUJBQWlCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxpQkFBaUIsZ0JBQWdCLFlBQVksV0FBVyxLQUFLLFdBQVcsK0dBQStHLHVCQUF1Qix3Q0FBd0MsR0FBRyxpQkFBaUIsZ0JBQWdCLGVBQWUsOEVBQThFLDJCQUEyQixhQUFhLGdDQUFnQyw0QkFBNEIsYUFBYSxzQkFBc0IsR0FBRyxLQUFLLEdBQUcsWUFBWSxpQkFBaUIsYUFBYSxzQ0FBc0MsU0FBUyw2Q0FBNkMsd0JBQXdCLGNBQWMsMEJBQTBCLFdBQVcsd0RBQXdELGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLEVBQUUsaUJBQWlCLGdCQUFnQixZQUFZLFdBQVcsS0FBSyxXQUFXLCtHQUErRyx1QkFBdUIsd0NBQXdDLGFBQWEsY0FBYywwQkFBMEIsV0FBVyxrQkFBa0IsZ0JBQWdCLGVBQWUsOEVBQThFLFNBQVMsb0JBQW9CLDRGQUE0Rix1REFBdUQsMkVBQTJFLDRDQUE0QyxVQUFVLFdBQVcscUJBQXFCLHlDQUF5QyxxQkFBcUIsMkhBQTJILDBDQUEwQyxhQUFhLG1EQUFtRCxzRUFBc0UsWUFBWSxrQ0FBa0MsY0FBYyw2SEFBNkgsNENBQTRDLDJDQUEyQyxvQkFBb0IsS0FBSyxFQUFFLHlCQUF5QixFQUFFLDBDQUEwQyxXQUFXLDhCQUE4QixnQ0FBZ0MsSUFBSSxFQUFFLGlDQUFpQyxzTkFBc04sRUFBRSxrQ0FBa0MsMkhBQTJILEVBQUUsc0NBQXNDLGlFQUFpRSxvSEFBb0gsRUFBRSxrQ0FBa0MsNkVBQTZFLEVBQUUseUNBQXlDLFdBQVcsa0NBQWtDLFdBQVcsaURBQWlELFNBQVMscUNBQXFDLG9CQUFvQiwwQkFBMEIscUJBQXFCLGdNQUFnTSxzQkFBc0Isa0VBQWtFLEdBQUcsSUFBSSxFQUFFLHVDQUF1QyxXQUFXLGtDQUFrQyx1Q0FBdUMsZ0ZBQWdGLFlBQVksSUFBSSxLQUFLLGtCQUFrQixZQUFZLGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLEVBQUUsaUJBQWlCLGdCQUFnQixZQUFZLFdBQVcsS0FBSyxXQUFXLCtHQUErRyx1QkFBdUIsd0NBQXdDLHVCQUF1QixjQUFjLDBCQUEwQixXQUFXLGtCQUFrQixnQkFBZ0IsZUFBZSw4RUFBOEUsU0FBUyxvQkFBb0IsNEZBQTRGLHVEQUF1RCw2RUFBNkUsMEpBQTBKLHNDQUFzQyxjQUFjLFVBQVUsdUJBQXVCLFlBQVksc0JBQXNCLHFCQUFxQiwySEFBMkgsMENBQTBDLGFBQWEsbURBQW1ELHNFQUFzRSxZQUFZLGtDQUFrQywrUUFBK1EsRUFBRSxzQ0FBc0MseUJBQXlCLEVBQUUsNENBQTRDLG1DQUFtQyxrVkFBa1Ysa0NBQWtDLDZDQUE2QyxNQUFNLGtEQUFrRCxNQUFNLDhDQUE4QyxNQUFNLDhDQUE4QyxNQUFNLDJDQUEyQyx1QkFBdUIsdUVBQXVFLEVBQUUsd0NBQXdDLFdBQVcsa0NBQWtDLGdGQUFnRixtSUFBbUksVUFBVSxzSkFBc0oscUJBQXFCLGdCQUFnQixxQkFBcUIsY0FBYyxnQkFBZ0IsV0FBVyxLQUFLLGlCQUFpQixpQkFBaUIsU0FBUyw4SUFBOEksa0NBQWtDLFFBQVEsV0FBVyw0QkFBNEIsdUNBQXVDLElBQUksc0JBQXNCLDhCQUE4QixPQUFPLFVBQVUsdUJBQXVCLGFBQWEsUUFBUSxHQUFHLElBQUksRUFBRSxvQ0FBb0MsMkJBQTJCLHdYQUF3WCxnQ0FBZ0MsZ2VBQWdlLEVBQUUsa0NBQWtDLGtkQUFrZCxFQUFFLG1DQUFtQywyQkFBMkIsZ1dBQWdXLEVBQUUsaUNBQWlDLHVHQUF1RyxpRUFBaUUsMElBQTBJLEVBQUUscUNBQXFDLDJKQUEySiwwQkFBMEIsS0FBSyxZQUFZLGNBQWMseUNBQXlDLHFDQUFxQyxxQ0FBcUMsdUVBQXVFLFlBQVksR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MuanMtdmlkZW8tcGx1Z2lucy9kaXN0L2luZGV4LnVtZC5qcz9kNTE0Il0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuYW5hbHl0aWNzVmlkZW9QbHVnaW5zPXQoKTplLmFuYWx5dGljc1ZpZGVvUGx1Z2lucz10KCl9KHdpbmRvdywoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9e307ZnVuY3Rpb24gYShuKXtpZih0W25dKXJldHVybiB0W25dLmV4cG9ydHM7dmFyIGk9dFtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbbl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsYSksaS5sPSEwLGkuZXhwb3J0c31yZXR1cm4gYS5tPWUsYS5jPXQsYS5kPWZ1bmN0aW9uKGUsdCxuKXthLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6bn0pfSxhLnI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sYS50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1hKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoYS5yKG4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJlwic3RyaW5nXCIhPXR5cGVvZiBlKWZvcih2YXIgaSBpbiBlKWEuZChuLGksZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxpKSk7cmV0dXJuIG59LGEubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gYS5kKHQsXCJhXCIsdCksdH0sYS5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxhLnA9XCJcIixhKGEucz0yKX0oW2Z1bmN0aW9uKGUsdCxhKXtcInVzZSBzdHJpY3RcIjthLnIodCk7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgZmV0Y2g/ZmV0Y2guYmluZCgpOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8e30sbmV3IFByb21pc2UoKGZ1bmN0aW9uKGEsbil7dmFyIGk9bmV3IFhNTEh0dHBSZXF1ZXN0O2Zvcih2YXIgciBpbiBpLm9wZW4odC5tZXRob2R8fFwiZ2V0XCIsZSwhMCksdC5oZWFkZXJzKWkuc2V0UmVxdWVzdEhlYWRlcihyLHQuaGVhZGVyc1tyXSk7ZnVuY3Rpb24gbygpe3ZhciBlLHQ9W10sYT1bXSxuPXt9O3JldHVybiBpLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnJlcGxhY2UoL14oLio/KTpbXlxcU1xcbl0qKFtcXHNcXFNdKj8pJC9nbSwoZnVuY3Rpb24oaSxyLG8pe3QucHVzaChyPXIudG9Mb3dlckNhc2UoKSksYS5wdXNoKFtyLG9dKSxlPW5bcl0sbltyXT1lP2UrXCIsXCIrbzpvfSkpLHtvazoyPT0oaS5zdGF0dXMvMTAwfDApLHN0YXR1czppLnN0YXR1cyxzdGF0dXNUZXh0Omkuc3RhdHVzVGV4dCx1cmw6aS5yZXNwb25zZVVSTCxjbG9uZTpvLHRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGkucmVzcG9uc2VUZXh0KX0sanNvbjpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoaS5yZXNwb25zZVRleHQpLnRoZW4oSlNPTi5wYXJzZSl9LGJsb2I6ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFtpLnJlc3BvbnNlXSkpfSxoZWFkZXJzOntrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIHR9LGVudHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiBuW2UudG9Mb3dlckNhc2UoKV19LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZS50b0xvd2VyQ2FzZSgpaW4gbn19fX1pLndpdGhDcmVkZW50aWFscz1cImluY2x1ZGVcIj09dC5jcmVkZW50aWFscyxpLm9ubG9hZD1mdW5jdGlvbigpe2EobygpKX0saS5vbmVycm9yPW4saS5zZW5kKHQuYm9keSl9KSl9O3QuZGVmYXVsdD1ufSxmdW5jdGlvbihlLHQsYSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBhPTA7YTx0Lmxlbmd0aDthKyspe3ZhciBuPXRbYV07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxhLG4pe3JldHVybiBhJiZlKHQucHJvdG90eXBlLGEpLG4mJmUodCxuKSx0fX0oKTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxhKXshZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLGUpLHRoaXMucGx1Z2luTmFtZT10fXJldHVybiBuKGUsW3trZXk6XCJ0cmFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7d2luZG93LmFuYWx5dGljcy50cmFjayhlLHQse2ludGVncmF0aW9uOntuYW1lOnRoaXMucGx1Z2luTmFtZX19KX19XSksZX0oKTt0LmRlZmF1bHQ9aX0sZnVuY3Rpb24oZSx0LGEpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuWW91VHViZUFuYWx5dGljcz10LlZpbWVvQW5hbHl0aWNzPXZvaWQgMDt2YXIgbj1yKGEoMykpLGk9cihhKDQpKTtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10LlZpbWVvQW5hbHl0aWNzPW4uZGVmYXVsdCx0LllvdVR1YmVBbmFseXRpY3M9aS5kZWZhdWx0fSxmdW5jdGlvbihlLHQsYSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBhPTA7YTx0Lmxlbmd0aDthKyspe3ZhciBuPXRbYV07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxhLG4pe3JldHVybiBhJiZlKHQucHJvdG90eXBlLGEpLG4mJmUodCxuKSx0fX0oKSxpPXIoYSgwKSk7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dmFyIG89ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLGEpeyFmdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsdCk7dmFyIG49ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXR8fFwib2JqZWN0XCIhPXR5cGVvZiB0JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P2U6dH0odGhpcywodC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSkuY2FsbCh0aGlzLFwiVmltZW9BbmFseXRpY3NcIikpO3JldHVybiBuLmF1dGhUb2tlbj1hLG4ucGxheWVyPWUsbi5tZXRhZGF0YT17Y29udGVudDp7fSxwbGF5YmFjazp7dmlkZW9QbGF5ZXI6XCJWaW1lb1wifX0sbi5tb3N0UmVjZW50SGVhcnRiZWF0PTAsbi5pc1BhdXNlZD0hMSxufXJldHVybiBmdW5jdGlvbihlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfSh0LGUpLG4odCxbe2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17bG9hZGVkOnRoaXMucmV0cmlldmVNZXRhZGF0YSxwbGF5OnRoaXMudHJhY2tQbGF5LHBhdXNlOnRoaXMudHJhY2tQYXVzZSxlbmRlZDp0aGlzLnRyYWNrRW5kZWQsdGltZXVwZGF0ZTp0aGlzLnRyYWNrSGVhcnRiZWF0fTtmb3IodmFyIGEgaW4gdCl0aGlzLnJlZ2lzdGVySGFuZGxlcihhLHRbYV0pO3RoaXMucGxheWVyLmdldFZpZGVvSWQoKS50aGVuKChmdW5jdGlvbih0KXtlLnJldHJpZXZlTWV0YWRhdGEoe2lkOnR9KX0pKS5jYXRjaChjb25zb2xlLmVycm9yKX19LHtrZXk6XCJyZWdpc3RlckhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBhPXRoaXM7dGhpcy5wbGF5ZXIub24oZSwoZnVuY3Rpb24oZSl7YS51cGRhdGVNZXRhZGF0YShlKSx0LmNhbGwoYSxlKX0pKX19LHtrZXk6XCJ0cmFja1BsYXlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaXNQYXVzZWQ/KHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBSZXN1bWVkXCIsdGhpcy5tZXRhZGF0YS5wbGF5YmFjayksdGhpcy5pc1BhdXNlZD0hMSk6KHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBTdGFydGVkXCIsdGhpcy5tZXRhZGF0YS5wbGF5YmFjayksdGhpcy50cmFjayhcIlZpZGVvIENvbnRlbnQgU3RhcnRlZFwiLHRoaXMubWV0YWRhdGEuY29udGVudCkpfX0se2tleTpcInRyYWNrRW5kZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBDb21wbGV0ZWRcIix0aGlzLm1ldGFkYXRhLnBsYXliYWNrKSx0aGlzLnRyYWNrKFwiVmlkZW8gQ29udGVudCBDb21wbGV0ZWRcIix0aGlzLm1ldGFkYXRhLmNvbnRlbnQpfX0se2tleTpcInRyYWNrSGVhcnRiZWF0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1vc3RSZWNlbnRIZWFydGJlYXQsdD10aGlzLm1ldGFkYXRhLnBsYXliYWNrLnBvc2l0aW9uO3QhPT1lJiZ0LWU+PTEwJiYodGhpcy50cmFjayhcIlZpZGVvIENvbnRlbnQgUGxheWluZ1wiLHRoaXMubWV0YWRhdGEuY29udGVudCksdGhpcy5tb3N0UmVjZW50SGVhcnRiZWF0PU1hdGguZmxvb3IodCkpfX0se2tleTpcInRyYWNrUGF1c2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaXNQYXVzZWQ9ITAsdGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFBhdXNlZFwiLHRoaXMubWV0YWRhdGEucGxheWJhY2spfX0se2tleTpcInJldHJpZXZlTWV0YWRhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSxuKXt2YXIgcj1lLmlkOygwLGkuZGVmYXVsdCkoXCJodHRwczovL2FwaS52aW1lby5jb20vdmlkZW9zL1wiK3Ise2hlYWRlcnM6e0F1dGhvcml6YXRpb246XCJCZWFyZXIgXCIrdC5hdXRoVG9rZW59fSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUub2s/ZS5qc29uKCk6bihlKX0pKS50aGVuKChmdW5jdGlvbihlKXt0Lm1ldGFkYXRhLmNvbnRlbnQudGl0bGU9ZS5uYW1lLHQubWV0YWRhdGEuY29udGVudC5kZXNjcmlwdGlvbj1lLmRlc2NyaXB0aW9uLHQubWV0YWRhdGEuY29udGVudC5wdWJsaXNoZXI9ZS51c2VyLm5hbWUsdC5tZXRhZGF0YS5wbGF5YmFjay5wb3NpdGlvbj0wLHQubWV0YWRhdGEucGxheWJhY2sudG90YWxMZW5ndGg9ZS5kdXJhdGlvbn0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJSZXF1ZXN0IHRvIFZpbWVvIEFQSSBGYWlsZWQgd2l0aDogXCIsZSksbihlKX0pKX0pKX19LHtrZXk6XCJ1cGRhdGVNZXRhZGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihhLG4pe3QucGxheWVyLmdldFZvbHVtZSgpLnRoZW4oKGZ1bmN0aW9uKG4pe24mJih0Lm1ldGFkYXRhLnBsYXliYWNrLnNvdW5kPTEwMCpuKSx0Lm1ldGFkYXRhLnBsYXliYWNrLnBvc2l0aW9uPWUuc2Vjb25kcyxhKCl9KSkuY2F0Y2gobil9KSl9fV0pLHR9KHIoYSgxKSkuZGVmYXVsdCk7dC5kZWZhdWx0PW99LGZ1bmN0aW9uKGUsdCxhKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIG49dFthXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LGEsbil7cmV0dXJuIGEmJmUodC5wcm90b3R5cGUsYSksbiYmZSh0LG4pLHR9fSgpLGk9byhhKDApKSxyPW8oYSgxKSk7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dmFyIHM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLGEpeyFmdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsdCk7dmFyIG49ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXR8fFwib2JqZWN0XCIhPXR5cGVvZiB0JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P2U6dH0odGhpcywodC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSkuY2FsbCh0aGlzLFwiWW91dHViZUFuYWx5dGljc1wiKSk7cmV0dXJuIG4ucGxheWVyPWUsbi5hcGlLZXk9YSxuLnBsYXllckxvYWRlZD0hMSxuLnBsYXliYWNrU3RhcnRlZD0hMSxuLmNvbnRlbnRTdGFydGVkPSExLG4uaXNQYXVzZWQ9ITEsbi5pc0J1ZmZlcmluZz0hMSxuLmlzU2Vla2luZz0hMSxuLmxhc3RSZWNvcmRlZFRpbWU9e3RpbWVSZXBvcnRlZDpEYXRlLm5vdygpLHRpbWVFbGFwc2VkOjB9LG4ubWV0YWRhdGE9W3twbGF5YmFjazp7dmlkZW9fcGxheWVyOlwieW91dHViZVwifSxjb250ZW50Ont9fV0sbi5wbGF5bGlzdEluZGV4PTAsbn1yZXR1cm4gZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX0odCxlKSxuKHQsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt3aW5kb3cuc2VnbWVudFlvdXR1YmVPblN0YXRlQ2hhbmdlPXRoaXMub25QbGF5ZXJTdGF0ZUNoYW5nZS5iaW5kKHRoaXMpLHdpbmRvdy5zZWdtZW50WW91dHViZU9uUmVhZHk9dGhpcy5vblBsYXllclJlYWR5LmJpbmQodGhpcyksdGhpcy5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm9uUmVhZHlcIixcInNlZ21lbnRZb3V0dWJlT25SZWFkeVwiKSx0aGlzLnBsYXllci5hZGRFdmVudExpc3RlbmVyKFwib25TdGF0ZUNoYW5nZVwiLFwic2VnbWVudFlvdXR1YmVPblN0YXRlQ2hhbmdlXCIpfX0se2tleTpcIm9uUGxheWVyUmVhZHlcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnJldHJpZXZlTWV0YWRhdGEoKX19LHtrZXk6XCJvblBsYXllclN0YXRlQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtzd2l0Y2godGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdJiYodGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrLnBvc2l0aW9uPXRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5jb250ZW50LnBvc2l0aW9uPXQsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrLnF1YWxpdHk9dGhpcy5wbGF5ZXIuZ2V0UGxheWJhY2tRdWFsaXR5KCksdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrLnNvdW5kPXRoaXMucGxheWVyLmlzTXV0ZWQoKT8wOnRoaXMucGxheWVyLmdldFZvbHVtZSgpKSxlLmRhdGEpe2Nhc2UtMTppZih0aGlzLnBsYXllckxvYWRlZClicmVhazt0aGlzLnJldHJpZXZlTWV0YWRhdGEoKSx0aGlzLnBsYXllckxvYWRlZD0hMDticmVhaztjYXNlIFlULlBsYXllclN0YXRlLkJVRkZFUklORzp0aGlzLmhhbmRsZUJ1ZmZlcigpO2JyZWFrO2Nhc2UgWVQuUGxheWVyU3RhdGUuUExBWUlORzp0aGlzLmhhbmRsZVBsYXkoKTticmVhaztjYXNlIFlULlBsYXllclN0YXRlLlBBVVNFRDp0aGlzLmhhbmRsZVBhdXNlKCk7YnJlYWs7Y2FzZSBZVC5QbGF5ZXJTdGF0ZS5FTkRFRDp0aGlzLmhhbmRsZUVuZCgpfXRoaXMubGFzdFJlY29yZGVkVGltZT17dGltZVJlcG9ydGVkOkRhdGUubm93KCksdGltZUVsYXBzZWQ6MWUzKnRoaXMucGxheWVyLmdldEN1cnJlbnRUaW1lKCl9fX0se2tleTpcInJldHJpZXZlTWV0YWRhdGFcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LGEpe3ZhciBuPWUucGxheWVyLmdldFZpZGVvRGF0YSgpLHI9ZS5wbGF5ZXIuZ2V0UGxheWxpc3QoKXx8W24udmlkZW9faWRdLG89ci5qb2luKCk7KDAsaS5kZWZhdWx0KShcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvdmlkZW9zP2lkPVwiK28rXCImcGFydD1zbmlwcGV0LGNvbnRlbnREZXRhaWxzJmtleT1cIitlLmFwaUtleSkudGhlbigoZnVuY3Rpb24oZSl7aWYoIWUub2spe3ZhciB0PW5ldyBFcnJvcihcIlNlZ21lbnQgcmVxdWVzdCB0byBZb3V0dWJlIEFQSSBmYWlsZWQgKGxpa2VseSBkdWUgdG8gYSBiYWQgQVBJIEtleS4gRXZlbnRzIHdpbGwgc3RpbGwgYmUgc2VudCBidXQgd2lsbCBub3QgY29udGFpbiB2aWRlbyBtZXRhZGF0YSlcIik7dGhyb3cgdC5yZXNwb25zZT1lLHR9cmV0dXJuIGUuanNvbigpfSkpLnRoZW4oKGZ1bmN0aW9uKGEpe2UubWV0YWRhdGE9W107Zm9yKHZhciBuPTAsaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgbz1hLml0ZW1zW2ldO2UubWV0YWRhdGEucHVzaCh7Y29udGVudDp7dGl0bGU6by5zbmlwcGV0LnRpdGxlLGRlc2NyaXB0aW9uOm8uc25pcHBldC5kZXNjcmlwdGlvbixrZXl3b3JkczpvLnNuaXBwZXQudGFncyxjaGFubmVsOm8uc25pcHBldC5jaGFubmVsVGl0bGUsYWlyZGF0ZTpvLnNuaXBwZXQucHVibGlzaGVkQXR9fSksbis9bChvLmNvbnRlbnREZXRhaWxzLmR1cmF0aW9uKX1mb3IoaT0wO2k8ci5sZW5ndGg7aSsrKWUubWV0YWRhdGFbaV0ucGxheWJhY2s9e3RvdGFsX2xlbmd0aDpuLHZpZGVvX3BsYXllcjpcInlvdXR1YmVcIn07dCgpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtlLm1ldGFkYXRhPXIubWFwKChmdW5jdGlvbihlKXtyZXR1cm57cGxheWJhY2s6e3ZpZGVvX3BsYXllcjpcInlvdXR1YmVcIn0sY29udGVudDp7fX19KSksYSh0KX0pKX0pKX19LHtrZXk6XCJoYW5kbGVCdWZmZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGV0ZXJtaW5lU2VlaygpO3RoaXMucGxheWJhY2tTdGFydGVkfHwodGhpcy5wbGF5YmFja1N0YXJ0ZWQ9ITAsdGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spKSxlJiYhdGhpcy5pc1NlZWtpbmcmJih0aGlzLmlzU2Vla2luZz0hMCx0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgU2VlayBTdGFydGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSksdGhpcy5pc1NlZWtpbmcmJih0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgU2VlayBDb21wbGV0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNTZWVraW5nPSExKTt2YXIgdD10aGlzLnBsYXllci5nZXRQbGF5bGlzdCgpO3QmJjA9PT10aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpJiZ0aGlzLnBsYXllci5nZXRQbGF5bGlzdEluZGV4KCkhPT10aGlzLnBsYXlsaXN0SW5kZXgmJih0aGlzLmNvbnRlbnRTdGFydGVkPSExLHRoaXMucGxheWxpc3RJbmRleD09PXQubGVuZ3RoLTEmJjA9PT10aGlzLnBsYXllci5nZXRQbGF5bGlzdEluZGV4KCkmJih0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXllci5nZXRQbGF5bGlzdEluZGV4KCldLnBsYXliYWNrKSx0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgU3RhcnRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpXS5wbGF5YmFjaykpKSx0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgQnVmZmVyIFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNCdWZmZXJpbmc9ITB9fSx7a2V5OlwiaGFuZGxlUGxheVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50U3RhcnRlZHx8KHRoaXMucGxheWxpc3RJbmRleD10aGlzLnBsYXllci5nZXRQbGF5bGlzdEluZGV4KCksLTE9PT10aGlzLnBsYXlsaXN0SW5kZXgmJih0aGlzLnBsYXlsaXN0SW5kZXg9MCksdGhpcy50cmFjayhcIlZpZGVvIENvbnRlbnQgU3RhcnRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5jb250ZW50KSx0aGlzLmNvbnRlbnRTdGFydGVkPSEwKSx0aGlzLmlzQnVmZmVyaW5nJiYodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIEJ1ZmZlciBDb21wbGV0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNCdWZmZXJpbmc9ITEpLHRoaXMuaXNQYXVzZWQmJih0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgUmVzdW1lZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjayksdGhpcy5pc1BhdXNlZD0hMSl9fSx7a2V5OlwiaGFuZGxlUGF1c2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGV0ZXJtaW5lU2VlaygpO3RoaXMuaXNCdWZmZXJpbmcmJih0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgQnVmZmVyIENvbXBsZXRlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjayksdGhpcy5pc0J1ZmZlcmluZz0hMSksdGhpcy5pc1BhdXNlZHx8KGU/KHRoaXMudHJhY2soXCJWaWRlbyBQbGF5YmFjayBTZWVrIFN0YXJ0ZWRcIix0aGlzLm1ldGFkYXRhW3RoaXMucGxheWxpc3RJbmRleF0ucGxheWJhY2spLHRoaXMuaXNTZWVraW5nPSEwKToodGhpcy50cmFjayhcIlZpZGVvIFBsYXliYWNrIFBhdXNlZFwiLHRoaXMubWV0YWRhdGFbdGhpcy5wbGF5bGlzdEluZGV4XS5wbGF5YmFjayksdGhpcy5pc1BhdXNlZD0hMCkpfX0se2tleTpcImhhbmRsZUVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50cmFjayhcIlZpZGVvIENvbnRlbnQgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLmNvbnRlbnQpLHRoaXMuY29udGVudFN0YXJ0ZWQ9ITE7dmFyIGU9dGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3RJbmRleCgpLHQ9dGhpcy5wbGF5ZXIuZ2V0UGxheWxpc3QoKTsodCYmZT09PXQubGVuZ3RoLTF8fC0xPT09ZSkmJih0aGlzLnRyYWNrKFwiVmlkZW8gUGxheWJhY2sgQ29tcGxldGVkXCIsdGhpcy5tZXRhZGF0YVt0aGlzLnBsYXlsaXN0SW5kZXhdLnBsYXliYWNrKSx0aGlzLnBsYXliYWNrU3RhcnRlZD0hMSl9fSx7a2V5OlwiZGV0ZXJtaW5lU2Vla1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pc1BhdXNlZHx8dGhpcy5pc0J1ZmZlcmluZz8wOkRhdGUubm93KCktdGhpcy5sYXN0UmVjb3JkZWRUaW1lLnRpbWVSZXBvcnRlZCx0PTFlMyp0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpLXRoaXMubGFzdFJlY29yZGVkVGltZS50aW1lRWxhcHNlZDtyZXR1cm4gTWF0aC5hYnMoZS10KT4yZTN9fV0pLHR9KHIuZGVmYXVsdCk7ZnVuY3Rpb24gbChlKXt2YXIgdD1lLm1hdGNoKC9QVChcXGQrSCk/KFxcZCtNKT8oXFxkK1MpPy8pO3JldHVybiB0PXQuc2xpY2UoMSkubWFwKChmdW5jdGlvbihlKXtpZihudWxsIT1lKXJldHVybiBlLnJlcGxhY2UoL1xcRC8sXCJcIil9KSksMzYwMCoocGFyc2VJbnQodFswXSl8fDApKzYwKihwYXJzZUludCh0WzFdKXx8MCkrKHBhcnNlSW50KHRbMl0pfHwwKX10LmRlZmF1bHQ9c31dKX0pKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/address.js":
/*!*******************************************************!*\
  !*** ../node_modules/@segment/facade/dist/address.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(ssr)/../node_modules/obj-case/index.js\"));\nfunction trait(a, b) {\n    return function () {\n        var traits = this.traits();\n        var props = this.properties ? this.properties() : {};\n        return (obj_case_1.default(traits, \"address.\" + a) ||\n            obj_case_1.default(traits, a) ||\n            (b ? obj_case_1.default(traits, \"address.\" + b) : null) ||\n            (b ? obj_case_1.default(traits, b) : null) ||\n            obj_case_1.default(props, \"address.\" + a) ||\n            obj_case_1.default(props, a) ||\n            (b ? obj_case_1.default(props, \"address.\" + b) : null) ||\n            (b ? obj_case_1.default(props, b) : null));\n    };\n}\nfunction default_1(proto) {\n    proto.zip = trait(\"postalCode\", \"zip\");\n    proto.country = trait(\"country\");\n    proto.street = trait(\"street\");\n    proto.state = trait(\"state\");\n    proto.city = trait(\"city\");\n    proto.region = trait(\"region\");\n}\nexports[\"default\"] = default_1;\n//# sourceMappingURL=address.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2FkZHJlc3MuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxpQ0FBaUMsbUJBQU8sQ0FBQyx5REFBVTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvYWRkcmVzcy5qcz82ZjlkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIG9ial9jYXNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm9iai1jYXNlXCIpKTtcbmZ1bmN0aW9uIHRyYWl0KGEsIGIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdHJhaXRzID0gdGhpcy50cmFpdHMoKTtcbiAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wZXJ0aWVzID8gdGhpcy5wcm9wZXJ0aWVzKCkgOiB7fTtcbiAgICAgICAgcmV0dXJuIChvYmpfY2FzZV8xLmRlZmF1bHQodHJhaXRzLCBcImFkZHJlc3MuXCIgKyBhKSB8fFxuICAgICAgICAgICAgb2JqX2Nhc2VfMS5kZWZhdWx0KHRyYWl0cywgYSkgfHxcbiAgICAgICAgICAgIChiID8gb2JqX2Nhc2VfMS5kZWZhdWx0KHRyYWl0cywgXCJhZGRyZXNzLlwiICsgYikgOiBudWxsKSB8fFxuICAgICAgICAgICAgKGIgPyBvYmpfY2FzZV8xLmRlZmF1bHQodHJhaXRzLCBiKSA6IG51bGwpIHx8XG4gICAgICAgICAgICBvYmpfY2FzZV8xLmRlZmF1bHQocHJvcHMsIFwiYWRkcmVzcy5cIiArIGEpIHx8XG4gICAgICAgICAgICBvYmpfY2FzZV8xLmRlZmF1bHQocHJvcHMsIGEpIHx8XG4gICAgICAgICAgICAoYiA/IG9ial9jYXNlXzEuZGVmYXVsdChwcm9wcywgXCJhZGRyZXNzLlwiICsgYikgOiBudWxsKSB8fFxuICAgICAgICAgICAgKGIgPyBvYmpfY2FzZV8xLmRlZmF1bHQocHJvcHMsIGIpIDogbnVsbCkpO1xuICAgIH07XG59XG5mdW5jdGlvbiBkZWZhdWx0XzEocHJvdG8pIHtcbiAgICBwcm90by56aXAgPSB0cmFpdChcInBvc3RhbENvZGVcIiwgXCJ6aXBcIik7XG4gICAgcHJvdG8uY291bnRyeSA9IHRyYWl0KFwiY291bnRyeVwiKTtcbiAgICBwcm90by5zdHJlZXQgPSB0cmFpdChcInN0cmVldFwiKTtcbiAgICBwcm90by5zdGF0ZSA9IHRyYWl0KFwic3RhdGVcIik7XG4gICAgcHJvdG8uY2l0eSA9IHRyYWl0KFwiY2l0eVwiKTtcbiAgICBwcm90by5yZWdpb24gPSB0cmFpdChcInJlZ2lvblwiKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IGRlZmF1bHRfMTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkZHJlc3MuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/address.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/alias.js":
/*!*****************************************************!*\
  !*** ../node_modules/@segment/facade/dist/alias.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Alias = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/../node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/../node_modules/@segment/facade/dist/facade.js\");\nfunction Alias(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Alias = Alias;\ninherits_1.default(Alias, facade_1.Facade);\nAlias.prototype.action = function () {\n    return \"alias\";\n};\nAlias.prototype.type = Alias.prototype.action;\nAlias.prototype.previousId = function () {\n    return this.field(\"previousId\") || this.field(\"from\");\n};\nAlias.prototype.from = Alias.prototype.previousId;\nAlias.prototype.userId = function () {\n    return this.field(\"userId\") || this.field(\"to\");\n};\nAlias.prototype.to = Alias.prototype.userId;\n//# sourceMappingURL=alias.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2FsaWFzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsYUFBYTtBQUNiLGlDQUFpQyxtQkFBTyxDQUFDLDREQUFVO0FBQ25ELGVBQWUsbUJBQU8sQ0FBQyxzRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9hbGlhcy5qcz8wY2Q0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BbGlhcyA9IHZvaWQgMDtcbnZhciBpbmhlcml0c18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJpbmhlcml0c1wiKSk7XG52YXIgZmFjYWRlXzEgPSByZXF1aXJlKFwiLi9mYWNhZGVcIik7XG5mdW5jdGlvbiBBbGlhcyhkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgZmFjYWRlXzEuRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLkFsaWFzID0gQWxpYXM7XG5pbmhlcml0c18xLmRlZmF1bHQoQWxpYXMsIGZhY2FkZV8xLkZhY2FkZSk7XG5BbGlhcy5wcm90b3R5cGUuYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcImFsaWFzXCI7XG59O1xuQWxpYXMucHJvdG90eXBlLnR5cGUgPSBBbGlhcy5wcm90b3R5cGUuYWN0aW9uO1xuQWxpYXMucHJvdG90eXBlLnByZXZpb3VzSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmllbGQoXCJwcmV2aW91c0lkXCIpIHx8IHRoaXMuZmllbGQoXCJmcm9tXCIpO1xufTtcbkFsaWFzLnByb3RvdHlwZS5mcm9tID0gQWxpYXMucHJvdG90eXBlLnByZXZpb3VzSWQ7XG5BbGlhcy5wcm90b3R5cGUudXNlcklkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmZpZWxkKFwidXNlcklkXCIpIHx8IHRoaXMuZmllbGQoXCJ0b1wiKTtcbn07XG5BbGlhcy5wcm90b3R5cGUudG8gPSBBbGlhcy5wcm90b3R5cGUudXNlcklkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWxpYXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/alias.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/clone.js":
/*!*****************************************************!*\
  !*** ../node_modules/@segment/facade/dist/clone.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.clone = void 0;\nfunction clone(properties) {\n    if (typeof properties !== 'object')\n        return properties;\n    if (Object.prototype.toString.call(properties) === '[object Object]') {\n        var temp = {};\n        for (var key in properties) {\n            if (Object.prototype.hasOwnProperty.call(properties, key)) {\n                temp[key] = clone(properties[key]);\n            }\n        }\n        return temp;\n    }\n    else if (Array.isArray(properties)) {\n        return properties.map(clone);\n    }\n    else {\n        return properties;\n    }\n}\nexports.clone = clone;\n//# sourceMappingURL=clone.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2Nsb25lLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9jbG9uZS5qcz84YTBkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jbG9uZSA9IHZvaWQgMDtcbmZ1bmN0aW9uIGNsb25lKHByb3BlcnRpZXMpIHtcbiAgICBpZiAodHlwZW9mIHByb3BlcnRpZXMgIT09ICdvYmplY3QnKVxuICAgICAgICByZXR1cm4gcHJvcGVydGllcztcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb3BlcnRpZXMpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICB2YXIgdGVtcCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGVtcFtrZXldID0gY2xvbmUocHJvcGVydGllc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShwcm9wZXJ0aWVzKSkge1xuICAgICAgICByZXR1cm4gcHJvcGVydGllcy5tYXAoY2xvbmUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgfVxufVxuZXhwb3J0cy5jbG9uZSA9IGNsb25lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvbmUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/clone.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/delete.js":
/*!******************************************************!*\
  !*** ../node_modules/@segment/facade/dist/delete.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Delete = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/../node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/../node_modules/@segment/facade/dist/facade.js\");\nfunction Delete(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Delete = Delete;\ninherits_1.default(Delete, facade_1.Facade);\nDelete.prototype.type = function () {\n    return \"delete\";\n};\n//# sourceMappingURL=delete.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2RlbGV0ZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGNBQWM7QUFDZCxpQ0FBaUMsbUJBQU8sQ0FBQyw0REFBVTtBQUNuRCxlQUFlLG1CQUFPLENBQUMsc0VBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvZGVsZXRlLmpzPzFhNzIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRlbGV0ZSA9IHZvaWQgMDtcbnZhciBpbmhlcml0c18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJpbmhlcml0c1wiKSk7XG52YXIgZmFjYWRlXzEgPSByZXF1aXJlKFwiLi9mYWNhZGVcIik7XG5mdW5jdGlvbiBEZWxldGUoZGljdGlvbmFyeSwgb3B0cykge1xuICAgIGZhY2FkZV8xLkZhY2FkZS5jYWxsKHRoaXMsIGRpY3Rpb25hcnksIG9wdHMpO1xufVxuZXhwb3J0cy5EZWxldGUgPSBEZWxldGU7XG5pbmhlcml0c18xLmRlZmF1bHQoRGVsZXRlLCBmYWNhZGVfMS5GYWNhZGUpO1xuRGVsZXRlLnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcImRlbGV0ZVwiO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGV0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/delete.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/facade.js":
/*!******************************************************!*\
  !*** ../node_modules/@segment/facade/dist/facade.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Facade = void 0;\nvar address_1 = __importDefault(__webpack_require__(/*! ./address */ \"(ssr)/../node_modules/@segment/facade/dist/address.js\"));\nvar clone_1 = __webpack_require__(/*! ./clone */ \"(ssr)/../node_modules/@segment/facade/dist/clone.js\");\nvar is_enabled_1 = __importDefault(__webpack_require__(/*! ./is-enabled */ \"(ssr)/../node_modules/@segment/facade/dist/is-enabled.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(ssr)/../node_modules/new-date/lib/index.js\"));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(ssr)/../node_modules/obj-case/index.js\"));\nvar isodate_traverse_1 = __importDefault(__webpack_require__(/*! @segment/isodate-traverse */ \"(ssr)/../node_modules/@segment/isodate-traverse/lib/index.js\"));\nfunction Facade(obj, opts) {\n    opts = opts || {};\n    this.raw = clone_1.clone(obj);\n    if (!(\"clone\" in opts))\n        opts.clone = true;\n    if (opts.clone)\n        obj = clone_1.clone(obj);\n    if (!(\"traverse\" in opts))\n        opts.traverse = true;\n    if (!(\"timestamp\" in obj))\n        obj.timestamp = new Date();\n    else\n        obj.timestamp = new_date_1.default(obj.timestamp);\n    if (opts.traverse)\n        isodate_traverse_1.default(obj);\n    this.opts = opts;\n    this.obj = obj;\n}\nexports.Facade = Facade;\nvar f = Facade.prototype;\nf.proxy = function (field) {\n    var fields = field.split(\".\");\n    field = fields.shift();\n    var obj = this[field] || this.obj[field];\n    if (!obj)\n        return obj;\n    if (typeof obj === \"function\")\n        obj = obj.call(this) || {};\n    if (fields.length === 0)\n        return this.opts.clone ? transform(obj) : obj;\n    obj = obj_case_1.default(obj, fields.join(\".\"));\n    return this.opts.clone ? transform(obj) : obj;\n};\nf.field = function (field) {\n    var obj = this.obj[field];\n    return this.opts.clone ? transform(obj) : obj;\n};\nFacade.proxy = function (field) {\n    return function () {\n        return this.proxy(field);\n    };\n};\nFacade.field = function (field) {\n    return function () {\n        return this.field(field);\n    };\n};\nFacade.multi = function (path) {\n    return function () {\n        var multi = this.proxy(path + \"s\");\n        if (Array.isArray(multi))\n            return multi;\n        var one = this.proxy(path);\n        if (one)\n            one = [this.opts.clone ? clone_1.clone(one) : one];\n        return one || [];\n    };\n};\nFacade.one = function (path) {\n    return function () {\n        var one = this.proxy(path);\n        if (one)\n            return one;\n        var multi = this.proxy(path + \"s\");\n        if (Array.isArray(multi))\n            return multi[0];\n    };\n};\nf.json = function () {\n    var ret = this.opts.clone ? clone_1.clone(this.obj) : this.obj;\n    if (this.type)\n        ret.type = this.type();\n    return ret;\n};\nf.rawEvent = function () {\n    return this.raw;\n};\nf.options = function (integration) {\n    var obj = this.obj.options || this.obj.context || {};\n    var options = this.opts.clone ? clone_1.clone(obj) : obj;\n    if (!integration)\n        return options;\n    if (!this.enabled(integration))\n        return;\n    var integrations = this.integrations();\n    var value = integrations[integration] || obj_case_1.default(integrations, integration);\n    if (typeof value !== \"object\")\n        value = obj_case_1.default(this.options(), integration);\n    return typeof value === \"object\" ? value : {};\n};\nf.context = f.options;\nf.enabled = function (integration) {\n    var allEnabled = this.proxy(\"options.providers.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = this.proxy(\"options.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = this.proxy(\"integrations.all\");\n    if (typeof allEnabled !== \"boolean\")\n        allEnabled = true;\n    var enabled = allEnabled && is_enabled_1.default(integration);\n    var options = this.integrations();\n    if (options.providers && options.providers.hasOwnProperty(integration)) {\n        enabled = options.providers[integration];\n    }\n    if (options.hasOwnProperty(integration)) {\n        var settings = options[integration];\n        if (typeof settings === \"boolean\") {\n            enabled = settings;\n        }\n        else {\n            enabled = true;\n        }\n    }\n    return !!enabled;\n};\nf.integrations = function () {\n    return (this.obj.integrations || this.proxy(\"options.providers\") || this.options());\n};\nf.active = function () {\n    var active = this.proxy(\"options.active\");\n    if (active === null || active === undefined)\n        active = true;\n    return active;\n};\nf.anonymousId = function () {\n    return this.field(\"anonymousId\") || this.field(\"sessionId\");\n};\nf.sessionId = f.anonymousId;\nf.groupId = Facade.proxy(\"options.groupId\");\nf.traits = function (aliases) {\n    var ret = this.proxy(\"options.traits\") || {};\n    var id = this.userId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"options.traits.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\nf.library = function () {\n    var library = this.proxy(\"options.library\");\n    if (!library)\n        return { name: \"unknown\", version: null };\n    if (typeof library === \"string\")\n        return { name: library, version: null };\n    return library;\n};\nf.device = function () {\n    var device = this.proxy(\"context.device\");\n    if (typeof device !== \"object\" || device === null) {\n        device = {};\n    }\n    var library = this.library().name;\n    if (device.type)\n        return device;\n    if (library.indexOf(\"ios\") > -1)\n        device.type = \"ios\";\n    if (library.indexOf(\"android\") > -1)\n        device.type = \"android\";\n    return device;\n};\nf.userAgent = Facade.proxy(\"context.userAgent\");\nf.timezone = Facade.proxy(\"context.timezone\");\nf.timestamp = Facade.field(\"timestamp\");\nf.channel = Facade.field(\"channel\");\nf.ip = Facade.proxy(\"context.ip\");\nf.userId = Facade.field(\"userId\");\naddress_1.default(f);\nfunction transform(obj) {\n    return clone_1.clone(obj);\n}\n//# sourceMappingURL=facade.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2ZhY2FkZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGNBQWM7QUFDZCxnQ0FBZ0MsbUJBQU8sQ0FBQyx3RUFBVztBQUNuRCxjQUFjLG1CQUFPLENBQUMsb0VBQVM7QUFDL0IsbUNBQW1DLG1CQUFPLENBQUMsOEVBQWM7QUFDekQsaUNBQWlDLG1CQUFPLENBQUMsNkRBQVU7QUFDbkQsaUNBQWlDLG1CQUFPLENBQUMseURBQVU7QUFDbkQseUNBQXlDLG1CQUFPLENBQUMsK0ZBQTJCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2ZhY2FkZS5qcz83YTNhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GYWNhZGUgPSB2b2lkIDA7XG52YXIgYWRkcmVzc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2FkZHJlc3NcIikpO1xudmFyIGNsb25lXzEgPSByZXF1aXJlKFwiLi9jbG9uZVwiKTtcbnZhciBpc19lbmFibGVkXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vaXMtZW5hYmxlZFwiKSk7XG52YXIgbmV3X2RhdGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibmV3LWRhdGVcIikpO1xudmFyIG9ial9jYXNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm9iai1jYXNlXCIpKTtcbnZhciBpc29kYXRlX3RyYXZlcnNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIkBzZWdtZW50L2lzb2RhdGUtdHJhdmVyc2VcIikpO1xuZnVuY3Rpb24gRmFjYWRlKG9iaiwgb3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHRoaXMucmF3ID0gY2xvbmVfMS5jbG9uZShvYmopO1xuICAgIGlmICghKFwiY2xvbmVcIiBpbiBvcHRzKSlcbiAgICAgICAgb3B0cy5jbG9uZSA9IHRydWU7XG4gICAgaWYgKG9wdHMuY2xvbmUpXG4gICAgICAgIG9iaiA9IGNsb25lXzEuY2xvbmUob2JqKTtcbiAgICBpZiAoIShcInRyYXZlcnNlXCIgaW4gb3B0cykpXG4gICAgICAgIG9wdHMudHJhdmVyc2UgPSB0cnVlO1xuICAgIGlmICghKFwidGltZXN0YW1wXCIgaW4gb2JqKSlcbiAgICAgICAgb2JqLnRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XG4gICAgZWxzZVxuICAgICAgICBvYmoudGltZXN0YW1wID0gbmV3X2RhdGVfMS5kZWZhdWx0KG9iai50aW1lc3RhbXApO1xuICAgIGlmIChvcHRzLnRyYXZlcnNlKVxuICAgICAgICBpc29kYXRlX3RyYXZlcnNlXzEuZGVmYXVsdChvYmopO1xuICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgdGhpcy5vYmogPSBvYmo7XG59XG5leHBvcnRzLkZhY2FkZSA9IEZhY2FkZTtcbnZhciBmID0gRmFjYWRlLnByb3RvdHlwZTtcbmYucHJveHkgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICB2YXIgZmllbGRzID0gZmllbGQuc3BsaXQoXCIuXCIpO1xuICAgIGZpZWxkID0gZmllbGRzLnNoaWZ0KCk7XG4gICAgdmFyIG9iaiA9IHRoaXNbZmllbGRdIHx8IHRoaXMub2JqW2ZpZWxkXTtcbiAgICBpZiAoIW9iailcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBvYmogPSBvYmouY2FsbCh0aGlzKSB8fCB7fTtcbiAgICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0cy5jbG9uZSA/IHRyYW5zZm9ybShvYmopIDogb2JqO1xuICAgIG9iaiA9IG9ial9jYXNlXzEuZGVmYXVsdChvYmosIGZpZWxkcy5qb2luKFwiLlwiKSk7XG4gICAgcmV0dXJuIHRoaXMub3B0cy5jbG9uZSA/IHRyYW5zZm9ybShvYmopIDogb2JqO1xufTtcbmYuZmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICB2YXIgb2JqID0gdGhpcy5vYmpbZmllbGRdO1xuICAgIHJldHVybiB0aGlzLm9wdHMuY2xvbmUgPyB0cmFuc2Zvcm0ob2JqKSA6IG9iajtcbn07XG5GYWNhZGUucHJveHkgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm94eShmaWVsZCk7XG4gICAgfTtcbn07XG5GYWNhZGUuZmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZChmaWVsZCk7XG4gICAgfTtcbn07XG5GYWNhZGUubXVsdGkgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtdWx0aSA9IHRoaXMucHJveHkocGF0aCArIFwic1wiKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobXVsdGkpKVxuICAgICAgICAgICAgcmV0dXJuIG11bHRpO1xuICAgICAgICB2YXIgb25lID0gdGhpcy5wcm94eShwYXRoKTtcbiAgICAgICAgaWYgKG9uZSlcbiAgICAgICAgICAgIG9uZSA9IFt0aGlzLm9wdHMuY2xvbmUgPyBjbG9uZV8xLmNsb25lKG9uZSkgOiBvbmVdO1xuICAgICAgICByZXR1cm4gb25lIHx8IFtdO1xuICAgIH07XG59O1xuRmFjYWRlLm9uZSA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9uZSA9IHRoaXMucHJveHkocGF0aCk7XG4gICAgICAgIGlmIChvbmUpXG4gICAgICAgICAgICByZXR1cm4gb25lO1xuICAgICAgICB2YXIgbXVsdGkgPSB0aGlzLnByb3h5KHBhdGggKyBcInNcIik7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG11bHRpKSlcbiAgICAgICAgICAgIHJldHVybiBtdWx0aVswXTtcbiAgICB9O1xufTtcbmYuanNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5vcHRzLmNsb25lID8gY2xvbmVfMS5jbG9uZSh0aGlzLm9iaikgOiB0aGlzLm9iajtcbiAgICBpZiAodGhpcy50eXBlKVxuICAgICAgICByZXQudHlwZSA9IHRoaXMudHlwZSgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuZi5yYXdFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5yYXc7XG59O1xuZi5vcHRpb25zID0gZnVuY3Rpb24gKGludGVncmF0aW9uKSB7XG4gICAgdmFyIG9iaiA9IHRoaXMub2JqLm9wdGlvbnMgfHwgdGhpcy5vYmouY29udGV4dCB8fCB7fTtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0cy5jbG9uZSA/IGNsb25lXzEuY2xvbmUob2JqKSA6IG9iajtcbiAgICBpZiAoIWludGVncmF0aW9uKVxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChpbnRlZ3JhdGlvbikpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgaW50ZWdyYXRpb25zID0gdGhpcy5pbnRlZ3JhdGlvbnMoKTtcbiAgICB2YXIgdmFsdWUgPSBpbnRlZ3JhdGlvbnNbaW50ZWdyYXRpb25dIHx8IG9ial9jYXNlXzEuZGVmYXVsdChpbnRlZ3JhdGlvbnMsIGludGVncmF0aW9uKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKVxuICAgICAgICB2YWx1ZSA9IG9ial9jYXNlXzEuZGVmYXVsdCh0aGlzLm9wdGlvbnMoKSwgaW50ZWdyYXRpb24pO1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgPyB2YWx1ZSA6IHt9O1xufTtcbmYuY29udGV4dCA9IGYub3B0aW9ucztcbmYuZW5hYmxlZCA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbikge1xuICAgIHZhciBhbGxFbmFibGVkID0gdGhpcy5wcm94eShcIm9wdGlvbnMucHJvdmlkZXJzLmFsbFwiKTtcbiAgICBpZiAodHlwZW9mIGFsbEVuYWJsZWQgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICBhbGxFbmFibGVkID0gdGhpcy5wcm94eShcIm9wdGlvbnMuYWxsXCIpO1xuICAgIGlmICh0eXBlb2YgYWxsRW5hYmxlZCAhPT0gXCJib29sZWFuXCIpXG4gICAgICAgIGFsbEVuYWJsZWQgPSB0aGlzLnByb3h5KFwiaW50ZWdyYXRpb25zLmFsbFwiKTtcbiAgICBpZiAodHlwZW9mIGFsbEVuYWJsZWQgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICBhbGxFbmFibGVkID0gdHJ1ZTtcbiAgICB2YXIgZW5hYmxlZCA9IGFsbEVuYWJsZWQgJiYgaXNfZW5hYmxlZF8xLmRlZmF1bHQoaW50ZWdyYXRpb24pO1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5pbnRlZ3JhdGlvbnMoKTtcbiAgICBpZiAob3B0aW9ucy5wcm92aWRlcnMgJiYgb3B0aW9ucy5wcm92aWRlcnMuaGFzT3duUHJvcGVydHkoaW50ZWdyYXRpb24pKSB7XG4gICAgICAgIGVuYWJsZWQgPSBvcHRpb25zLnByb3ZpZGVyc1tpbnRlZ3JhdGlvbl07XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KGludGVncmF0aW9uKSkge1xuICAgICAgICB2YXIgc2V0dGluZ3MgPSBvcHRpb25zW2ludGVncmF0aW9uXTtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXR0aW5ncyA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgIGVuYWJsZWQgPSBzZXR0aW5ncztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVuYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhIWVuYWJsZWQ7XG59O1xuZi5pbnRlZ3JhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLm9iai5pbnRlZ3JhdGlvbnMgfHwgdGhpcy5wcm94eShcIm9wdGlvbnMucHJvdmlkZXJzXCIpIHx8IHRoaXMub3B0aW9ucygpKTtcbn07XG5mLmFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWN0aXZlID0gdGhpcy5wcm94eShcIm9wdGlvbnMuYWN0aXZlXCIpO1xuICAgIGlmIChhY3RpdmUgPT09IG51bGwgfHwgYWN0aXZlID09PSB1bmRlZmluZWQpXG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgcmV0dXJuIGFjdGl2ZTtcbn07XG5mLmFub255bW91c0lkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmZpZWxkKFwiYW5vbnltb3VzSWRcIikgfHwgdGhpcy5maWVsZChcInNlc3Npb25JZFwiKTtcbn07XG5mLnNlc3Npb25JZCA9IGYuYW5vbnltb3VzSWQ7XG5mLmdyb3VwSWQgPSBGYWNhZGUucHJveHkoXCJvcHRpb25zLmdyb3VwSWRcIik7XG5mLnRyYWl0cyA9IGZ1bmN0aW9uIChhbGlhc2VzKSB7XG4gICAgdmFyIHJldCA9IHRoaXMucHJveHkoXCJvcHRpb25zLnRyYWl0c1wiKSB8fCB7fTtcbiAgICB2YXIgaWQgPSB0aGlzLnVzZXJJZCgpO1xuICAgIGFsaWFzZXMgPSBhbGlhc2VzIHx8IHt9O1xuICAgIGlmIChpZClcbiAgICAgICAgcmV0LmlkID0gaWQ7XG4gICAgZm9yICh2YXIgYWxpYXMgaW4gYWxpYXNlcykge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFsaWFzZXMsIGFsaWFzKSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpc1thbGlhc10gPT0gbnVsbFxuICAgICAgICAgICAgICAgID8gdGhpcy5wcm94eShcIm9wdGlvbnMudHJhaXRzLlwiICsgYWxpYXMpXG4gICAgICAgICAgICAgICAgOiB0aGlzW2FsaWFzXSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICByZXRbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgICAgICAgICBkZWxldGUgcmV0W2FsaWFzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcbmYubGlicmFyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGlicmFyeSA9IHRoaXMucHJveHkoXCJvcHRpb25zLmxpYnJhcnlcIik7XG4gICAgaWYgKCFsaWJyYXJ5KVxuICAgICAgICByZXR1cm4geyBuYW1lOiBcInVua25vd25cIiwgdmVyc2lvbjogbnVsbCB9O1xuICAgIGlmICh0eXBlb2YgbGlicmFyeSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIHsgbmFtZTogbGlicmFyeSwgdmVyc2lvbjogbnVsbCB9O1xuICAgIHJldHVybiBsaWJyYXJ5O1xufTtcbmYuZGV2aWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkZXZpY2UgPSB0aGlzLnByb3h5KFwiY29udGV4dC5kZXZpY2VcIik7XG4gICAgaWYgKHR5cGVvZiBkZXZpY2UgIT09IFwib2JqZWN0XCIgfHwgZGV2aWNlID09PSBudWxsKSB7XG4gICAgICAgIGRldmljZSA9IHt9O1xuICAgIH1cbiAgICB2YXIgbGlicmFyeSA9IHRoaXMubGlicmFyeSgpLm5hbWU7XG4gICAgaWYgKGRldmljZS50eXBlKVxuICAgICAgICByZXR1cm4gZGV2aWNlO1xuICAgIGlmIChsaWJyYXJ5LmluZGV4T2YoXCJpb3NcIikgPiAtMSlcbiAgICAgICAgZGV2aWNlLnR5cGUgPSBcImlvc1wiO1xuICAgIGlmIChsaWJyYXJ5LmluZGV4T2YoXCJhbmRyb2lkXCIpID4gLTEpXG4gICAgICAgIGRldmljZS50eXBlID0gXCJhbmRyb2lkXCI7XG4gICAgcmV0dXJuIGRldmljZTtcbn07XG5mLnVzZXJBZ2VudCA9IEZhY2FkZS5wcm94eShcImNvbnRleHQudXNlckFnZW50XCIpO1xuZi50aW1lem9uZSA9IEZhY2FkZS5wcm94eShcImNvbnRleHQudGltZXpvbmVcIik7XG5mLnRpbWVzdGFtcCA9IEZhY2FkZS5maWVsZChcInRpbWVzdGFtcFwiKTtcbmYuY2hhbm5lbCA9IEZhY2FkZS5maWVsZChcImNoYW5uZWxcIik7XG5mLmlwID0gRmFjYWRlLnByb3h5KFwiY29udGV4dC5pcFwiKTtcbmYudXNlcklkID0gRmFjYWRlLmZpZWxkKFwidXNlcklkXCIpO1xuYWRkcmVzc18xLmRlZmF1bHQoZik7XG5mdW5jdGlvbiB0cmFuc2Zvcm0ob2JqKSB7XG4gICAgcmV0dXJuIGNsb25lXzEuY2xvbmUob2JqKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZhY2FkZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/facade.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/group.js":
/*!*****************************************************!*\
  !*** ../node_modules/@segment/facade/dist/group.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Group = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/../node_modules/inherits/inherits.js\"));\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(ssr)/../node_modules/@segment/facade/dist/is-email.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(ssr)/../node_modules/new-date/lib/index.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/../node_modules/@segment/facade/dist/facade.js\");\nfunction Group(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Group = Group;\ninherits_1.default(Group, facade_1.Facade);\nvar g = Group.prototype;\ng.action = function () {\n    return \"group\";\n};\ng.type = g.action;\ng.groupId = facade_1.Facade.field(\"groupId\");\ng.created = function () {\n    var created = this.proxy(\"traits.createdAt\") ||\n        this.proxy(\"traits.created\") ||\n        this.proxy(\"properties.createdAt\") ||\n        this.proxy(\"properties.created\");\n    if (created)\n        return new_date_1.default(created);\n};\ng.email = function () {\n    var email = this.proxy(\"traits.email\");\n    if (email)\n        return email;\n    var groupId = this.groupId();\n    if (is_email_1.default(groupId))\n        return groupId;\n};\ng.traits = function (aliases) {\n    var ret = this.properties();\n    var id = this.groupId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"traits.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\ng.name = facade_1.Facade.proxy(\"traits.name\");\ng.industry = facade_1.Facade.proxy(\"traits.industry\");\ng.employees = facade_1.Facade.proxy(\"traits.employees\");\ng.properties = function () {\n    return this.field(\"traits\") || this.field(\"properties\") || {};\n};\n//# sourceMappingURL=group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2dyb3VwLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsYUFBYTtBQUNiLGlDQUFpQyxtQkFBTyxDQUFDLDREQUFVO0FBQ25ELGlDQUFpQyxtQkFBTyxDQUFDLDBFQUFZO0FBQ3JELGlDQUFpQyxtQkFBTyxDQUFDLDZEQUFVO0FBQ25ELGVBQWUsbUJBQU8sQ0FBQyxzRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvZ3JvdXAuanM/Yzg0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR3JvdXAgPSB2b2lkIDA7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGlzX2VtYWlsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vaXMtZW1haWxcIikpO1xudmFyIG5ld19kYXRlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm5ldy1kYXRlXCIpKTtcbnZhciBmYWNhZGVfMSA9IHJlcXVpcmUoXCIuL2ZhY2FkZVwiKTtcbmZ1bmN0aW9uIEdyb3VwKGRpY3Rpb25hcnksIG9wdHMpIHtcbiAgICBmYWNhZGVfMS5GYWNhZGUuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5LCBvcHRzKTtcbn1cbmV4cG9ydHMuR3JvdXAgPSBHcm91cDtcbmluaGVyaXRzXzEuZGVmYXVsdChHcm91cCwgZmFjYWRlXzEuRmFjYWRlKTtcbnZhciBnID0gR3JvdXAucHJvdG90eXBlO1xuZy5hY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiZ3JvdXBcIjtcbn07XG5nLnR5cGUgPSBnLmFjdGlvbjtcbmcuZ3JvdXBJZCA9IGZhY2FkZV8xLkZhY2FkZS5maWVsZChcImdyb3VwSWRcIik7XG5nLmNyZWF0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNyZWF0ZWQgPSB0aGlzLnByb3h5KFwidHJhaXRzLmNyZWF0ZWRBdFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwidHJhaXRzLmNyZWF0ZWRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMuY3JlYXRlZEF0XCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmNyZWF0ZWRcIik7XG4gICAgaWYgKGNyZWF0ZWQpXG4gICAgICAgIHJldHVybiBuZXdfZGF0ZV8xLmRlZmF1bHQoY3JlYXRlZCk7XG59O1xuZy5lbWFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW1haWwgPSB0aGlzLnByb3h5KFwidHJhaXRzLmVtYWlsXCIpO1xuICAgIGlmIChlbWFpbClcbiAgICAgICAgcmV0dXJuIGVtYWlsO1xuICAgIHZhciBncm91cElkID0gdGhpcy5ncm91cElkKCk7XG4gICAgaWYgKGlzX2VtYWlsXzEuZGVmYXVsdChncm91cElkKSlcbiAgICAgICAgcmV0dXJuIGdyb3VwSWQ7XG59O1xuZy50cmFpdHMgPSBmdW5jdGlvbiAoYWxpYXNlcykge1xuICAgIHZhciByZXQgPSB0aGlzLnByb3BlcnRpZXMoKTtcbiAgICB2YXIgaWQgPSB0aGlzLmdyb3VwSWQoKTtcbiAgICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcbiAgICBpZiAoaWQpXG4gICAgICAgIHJldC5pZCA9IGlkO1xuICAgIGZvciAodmFyIGFsaWFzIGluIGFsaWFzZXMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhbGlhc2VzLCBhbGlhcykpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXNbYWxpYXNdID09IG51bGxcbiAgICAgICAgICAgICAgICA/IHRoaXMucHJveHkoXCJ0cmFpdHMuXCIgKyBhbGlhcylcbiAgICAgICAgICAgICAgICA6IHRoaXNbYWxpYXNdKCk7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHJldFthbGlhc2VzW2FsaWFzXV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGRlbGV0ZSByZXRbYWxpYXNdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuZy5uYW1lID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwidHJhaXRzLm5hbWVcIik7XG5nLmluZHVzdHJ5ID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwidHJhaXRzLmluZHVzdHJ5XCIpO1xuZy5lbXBsb3llZXMgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJ0cmFpdHMuZW1wbG95ZWVzXCIpO1xuZy5wcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmZpZWxkKFwidHJhaXRzXCIpIHx8IHRoaXMuZmllbGQoXCJwcm9wZXJ0aWVzXCIpIHx8IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3VwLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/group.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/identify.js":
/*!********************************************************!*\
  !*** ../node_modules/@segment/facade/dist/identify.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Identify = void 0;\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/../node_modules/@segment/facade/dist/facade.js\");\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(ssr)/../node_modules/obj-case/index.js\"));\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/../node_modules/inherits/inherits.js\"));\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(ssr)/../node_modules/@segment/facade/dist/is-email.js\"));\nvar new_date_1 = __importDefault(__webpack_require__(/*! new-date */ \"(ssr)/../node_modules/new-date/lib/index.js\"));\nvar trim = function (str) { return str.trim(); };\nfunction Identify(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Identify = Identify;\ninherits_1.default(Identify, facade_1.Facade);\nvar i = Identify.prototype;\ni.action = function () {\n    return \"identify\";\n};\ni.type = i.action;\ni.traits = function (aliases) {\n    var ret = this.field(\"traits\") || {};\n    var id = this.userId();\n    aliases = aliases || {};\n    if (id)\n        ret.id = id;\n    for (var alias in aliases) {\n        var value = this[alias] == null ? this.proxy(\"traits.\" + alias) : this[alias]();\n        if (value == null)\n            continue;\n        ret[aliases[alias]] = value;\n        if (alias !== aliases[alias])\n            delete ret[alias];\n    }\n    return ret;\n};\ni.email = function () {\n    var email = this.proxy(\"traits.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\ni.created = function () {\n    var created = this.proxy(\"traits.created\") || this.proxy(\"traits.createdAt\");\n    if (created)\n        return new_date_1.default(created);\n};\ni.companyCreated = function () {\n    var created = this.proxy(\"traits.company.created\") ||\n        this.proxy(\"traits.company.createdAt\");\n    if (created) {\n        return new_date_1.default(created);\n    }\n};\ni.companyName = function () {\n    return this.proxy(\"traits.company.name\");\n};\ni.name = function () {\n    var name = this.proxy(\"traits.name\");\n    if (typeof name === \"string\") {\n        return trim(name);\n    }\n    var firstName = this.firstName();\n    var lastName = this.lastName();\n    if (firstName && lastName) {\n        return trim(firstName + \" \" + lastName);\n    }\n};\ni.firstName = function () {\n    var firstName = this.proxy(\"traits.firstName\");\n    if (typeof firstName === \"string\") {\n        return trim(firstName);\n    }\n    var name = this.proxy(\"traits.name\");\n    if (typeof name === \"string\") {\n        return trim(name).split(\" \")[0];\n    }\n};\ni.lastName = function () {\n    var lastName = this.proxy(\"traits.lastName\");\n    if (typeof lastName === \"string\") {\n        return trim(lastName);\n    }\n    var name = this.proxy(\"traits.name\");\n    if (typeof name !== \"string\") {\n        return;\n    }\n    var space = trim(name).indexOf(\" \");\n    if (space === -1) {\n        return;\n    }\n    return trim(name.substr(space + 1));\n};\ni.uid = function () {\n    return this.userId() || this.username() || this.email();\n};\ni.description = function () {\n    return this.proxy(\"traits.description\") || this.proxy(\"traits.background\");\n};\ni.age = function () {\n    var date = this.birthday();\n    var age = obj_case_1.default(this.traits(), \"age\");\n    if (age != null)\n        return age;\n    if (!(date instanceof Date))\n        return;\n    var now = new Date();\n    return now.getFullYear() - date.getFullYear();\n};\ni.avatar = function () {\n    var traits = this.traits();\n    return (obj_case_1.default(traits, \"avatar\") || obj_case_1.default(traits, \"photoUrl\") || obj_case_1.default(traits, \"avatarUrl\"));\n};\ni.position = function () {\n    var traits = this.traits();\n    return obj_case_1.default(traits, \"position\") || obj_case_1.default(traits, \"jobTitle\");\n};\ni.username = facade_1.Facade.proxy(\"traits.username\");\ni.website = facade_1.Facade.one(\"traits.website\");\ni.websites = facade_1.Facade.multi(\"traits.website\");\ni.phone = facade_1.Facade.one(\"traits.phone\");\ni.phones = facade_1.Facade.multi(\"traits.phone\");\ni.address = facade_1.Facade.proxy(\"traits.address\");\ni.gender = facade_1.Facade.proxy(\"traits.gender\");\ni.birthday = facade_1.Facade.proxy(\"traits.birthday\");\n//# sourceMappingURL=identify.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2lkZW50aWZ5LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsZ0JBQWdCO0FBQ2hCLGVBQWUsbUJBQU8sQ0FBQyxzRUFBVTtBQUNqQyxpQ0FBaUMsbUJBQU8sQ0FBQyx5REFBVTtBQUNuRCxpQ0FBaUMsbUJBQU8sQ0FBQyw0REFBVTtBQUNuRCxpQ0FBaUMsbUJBQU8sQ0FBQywwRUFBWTtBQUNyRCxpQ0FBaUMsbUJBQU8sQ0FBQyw2REFBVTtBQUNuRCw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9pZGVudGlmeS5qcz8yMGExIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JZGVudGlmeSA9IHZvaWQgMDtcbnZhciBmYWNhZGVfMSA9IHJlcXVpcmUoXCIuL2ZhY2FkZVwiKTtcbnZhciBvYmpfY2FzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJvYmotY2FzZVwiKSk7XG52YXIgaW5oZXJpdHNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaW5oZXJpdHNcIikpO1xudmFyIGlzX2VtYWlsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vaXMtZW1haWxcIikpO1xudmFyIG5ld19kYXRlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm5ldy1kYXRlXCIpKTtcbnZhciB0cmltID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyLnRyaW0oKTsgfTtcbmZ1bmN0aW9uIElkZW50aWZ5KGRpY3Rpb25hcnksIG9wdHMpIHtcbiAgICBmYWNhZGVfMS5GYWNhZGUuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5LCBvcHRzKTtcbn1cbmV4cG9ydHMuSWRlbnRpZnkgPSBJZGVudGlmeTtcbmluaGVyaXRzXzEuZGVmYXVsdChJZGVudGlmeSwgZmFjYWRlXzEuRmFjYWRlKTtcbnZhciBpID0gSWRlbnRpZnkucHJvdG90eXBlO1xuaS5hY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiaWRlbnRpZnlcIjtcbn07XG5pLnR5cGUgPSBpLmFjdGlvbjtcbmkudHJhaXRzID0gZnVuY3Rpb24gKGFsaWFzZXMpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5maWVsZChcInRyYWl0c1wiKSB8fCB7fTtcbiAgICB2YXIgaWQgPSB0aGlzLnVzZXJJZCgpO1xuICAgIGFsaWFzZXMgPSBhbGlhc2VzIHx8IHt9O1xuICAgIGlmIChpZClcbiAgICAgICAgcmV0LmlkID0gaWQ7XG4gICAgZm9yICh2YXIgYWxpYXMgaW4gYWxpYXNlcykge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzW2FsaWFzXSA9PSBudWxsID8gdGhpcy5wcm94eShcInRyYWl0cy5cIiArIGFsaWFzKSA6IHRoaXNbYWxpYXNdKCk7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIHJldFthbGlhc2VzW2FsaWFzXV0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKGFsaWFzICE9PSBhbGlhc2VzW2FsaWFzXSlcbiAgICAgICAgICAgIGRlbGV0ZSByZXRbYWxpYXNdO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcbmkuZW1haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtYWlsID0gdGhpcy5wcm94eShcInRyYWl0cy5lbWFpbFwiKTtcbiAgICBpZiAoZW1haWwpXG4gICAgICAgIHJldHVybiBlbWFpbDtcbiAgICB2YXIgdXNlcklkID0gdGhpcy51c2VySWQoKTtcbiAgICBpZiAoaXNfZW1haWxfMS5kZWZhdWx0KHVzZXJJZCkpXG4gICAgICAgIHJldHVybiB1c2VySWQ7XG59O1xuaS5jcmVhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjcmVhdGVkID0gdGhpcy5wcm94eShcInRyYWl0cy5jcmVhdGVkXCIpIHx8IHRoaXMucHJveHkoXCJ0cmFpdHMuY3JlYXRlZEF0XCIpO1xuICAgIGlmIChjcmVhdGVkKVxuICAgICAgICByZXR1cm4gbmV3X2RhdGVfMS5kZWZhdWx0KGNyZWF0ZWQpO1xufTtcbmkuY29tcGFueUNyZWF0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNyZWF0ZWQgPSB0aGlzLnByb3h5KFwidHJhaXRzLmNvbXBhbnkuY3JlYXRlZFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwidHJhaXRzLmNvbXBhbnkuY3JlYXRlZEF0XCIpO1xuICAgIGlmIChjcmVhdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXdfZGF0ZV8xLmRlZmF1bHQoY3JlYXRlZCk7XG4gICAgfVxufTtcbmkuY29tcGFueU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJveHkoXCJ0cmFpdHMuY29tcGFueS5uYW1lXCIpO1xufTtcbmkubmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmFtZSA9IHRoaXMucHJveHkoXCJ0cmFpdHMubmFtZVwiKTtcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHRyaW0obmFtZSk7XG4gICAgfVxuICAgIHZhciBmaXJzdE5hbWUgPSB0aGlzLmZpcnN0TmFtZSgpO1xuICAgIHZhciBsYXN0TmFtZSA9IHRoaXMubGFzdE5hbWUoKTtcbiAgICBpZiAoZmlyc3ROYW1lICYmIGxhc3ROYW1lKSB7XG4gICAgICAgIHJldHVybiB0cmltKGZpcnN0TmFtZSArIFwiIFwiICsgbGFzdE5hbWUpO1xuICAgIH1cbn07XG5pLmZpcnN0TmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlyc3ROYW1lID0gdGhpcy5wcm94eShcInRyYWl0cy5maXJzdE5hbWVcIik7XG4gICAgaWYgKHR5cGVvZiBmaXJzdE5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHRyaW0oZmlyc3ROYW1lKTtcbiAgICB9XG4gICAgdmFyIG5hbWUgPSB0aGlzLnByb3h5KFwidHJhaXRzLm5hbWVcIik7XG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB0cmltKG5hbWUpLnNwbGl0KFwiIFwiKVswXTtcbiAgICB9XG59O1xuaS5sYXN0TmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGFzdE5hbWUgPSB0aGlzLnByb3h5KFwidHJhaXRzLmxhc3ROYW1lXCIpO1xuICAgIGlmICh0eXBlb2YgbGFzdE5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHRyaW0obGFzdE5hbWUpO1xuICAgIH1cbiAgICB2YXIgbmFtZSA9IHRoaXMucHJveHkoXCJ0cmFpdHMubmFtZVwiKTtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3BhY2UgPSB0cmltKG5hbWUpLmluZGV4T2YoXCIgXCIpO1xuICAgIGlmIChzcGFjZSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gdHJpbShuYW1lLnN1YnN0cihzcGFjZSArIDEpKTtcbn07XG5pLnVpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VySWQoKSB8fCB0aGlzLnVzZXJuYW1lKCkgfHwgdGhpcy5lbWFpbCgpO1xufTtcbmkuZGVzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJveHkoXCJ0cmFpdHMuZGVzY3JpcHRpb25cIikgfHwgdGhpcy5wcm94eShcInRyYWl0cy5iYWNrZ3JvdW5kXCIpO1xufTtcbmkuYWdlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRlID0gdGhpcy5iaXJ0aGRheSgpO1xuICAgIHZhciBhZ2UgPSBvYmpfY2FzZV8xLmRlZmF1bHQodGhpcy50cmFpdHMoKSwgXCJhZ2VcIik7XG4gICAgaWYgKGFnZSAhPSBudWxsKVxuICAgICAgICByZXR1cm4gYWdlO1xuICAgIGlmICghKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIHJldHVybiBub3cuZ2V0RnVsbFllYXIoKSAtIGRhdGUuZ2V0RnVsbFllYXIoKTtcbn07XG5pLmF2YXRhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdHJhaXRzID0gdGhpcy50cmFpdHMoKTtcbiAgICByZXR1cm4gKG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwiYXZhdGFyXCIpIHx8IG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwicGhvdG9VcmxcIikgfHwgb2JqX2Nhc2VfMS5kZWZhdWx0KHRyYWl0cywgXCJhdmF0YXJVcmxcIikpO1xufTtcbmkucG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRyYWl0cyA9IHRoaXMudHJhaXRzKCk7XG4gICAgcmV0dXJuIG9ial9jYXNlXzEuZGVmYXVsdCh0cmFpdHMsIFwicG9zaXRpb25cIikgfHwgb2JqX2Nhc2VfMS5kZWZhdWx0KHRyYWl0cywgXCJqb2JUaXRsZVwiKTtcbn07XG5pLnVzZXJuYW1lID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwidHJhaXRzLnVzZXJuYW1lXCIpO1xuaS53ZWJzaXRlID0gZmFjYWRlXzEuRmFjYWRlLm9uZShcInRyYWl0cy53ZWJzaXRlXCIpO1xuaS53ZWJzaXRlcyA9IGZhY2FkZV8xLkZhY2FkZS5tdWx0aShcInRyYWl0cy53ZWJzaXRlXCIpO1xuaS5waG9uZSA9IGZhY2FkZV8xLkZhY2FkZS5vbmUoXCJ0cmFpdHMucGhvbmVcIik7XG5pLnBob25lcyA9IGZhY2FkZV8xLkZhY2FkZS5tdWx0aShcInRyYWl0cy5waG9uZVwiKTtcbmkuYWRkcmVzcyA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInRyYWl0cy5hZGRyZXNzXCIpO1xuaS5nZW5kZXIgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJ0cmFpdHMuZ2VuZGVyXCIpO1xuaS5iaXJ0aGRheSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInRyYWl0cy5iaXJ0aGRheVwiKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlkZW50aWZ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/identify.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/index.js":
/*!*****************************************************!*\
  !*** ../node_modules/@segment/facade/dist/index.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Delete = exports.Screen = exports.Page = exports.Track = exports.Identify = exports.Group = exports.Alias = exports.Facade = void 0;\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/../node_modules/@segment/facade/dist/facade.js\");\nObject.defineProperty(exports, \"Facade\", ({ enumerable: true, get: function () { return facade_1.Facade; } }));\nvar alias_1 = __webpack_require__(/*! ./alias */ \"(ssr)/../node_modules/@segment/facade/dist/alias.js\");\nObject.defineProperty(exports, \"Alias\", ({ enumerable: true, get: function () { return alias_1.Alias; } }));\nvar group_1 = __webpack_require__(/*! ./group */ \"(ssr)/../node_modules/@segment/facade/dist/group.js\");\nObject.defineProperty(exports, \"Group\", ({ enumerable: true, get: function () { return group_1.Group; } }));\nvar identify_1 = __webpack_require__(/*! ./identify */ \"(ssr)/../node_modules/@segment/facade/dist/identify.js\");\nObject.defineProperty(exports, \"Identify\", ({ enumerable: true, get: function () { return identify_1.Identify; } }));\nvar track_1 = __webpack_require__(/*! ./track */ \"(ssr)/../node_modules/@segment/facade/dist/track.js\");\nObject.defineProperty(exports, \"Track\", ({ enumerable: true, get: function () { return track_1.Track; } }));\nvar page_1 = __webpack_require__(/*! ./page */ \"(ssr)/../node_modules/@segment/facade/dist/page.js\");\nObject.defineProperty(exports, \"Page\", ({ enumerable: true, get: function () { return page_1.Page; } }));\nvar screen_1 = __webpack_require__(/*! ./screen */ \"(ssr)/../node_modules/@segment/facade/dist/screen.js\");\nObject.defineProperty(exports, \"Screen\", ({ enumerable: true, get: function () { return screen_1.Screen; } }));\nvar delete_1 = __webpack_require__(/*! ./delete */ \"(ssr)/../node_modules/@segment/facade/dist/delete.js\");\nObject.defineProperty(exports, \"Delete\", ({ enumerable: true, get: function () { return delete_1.Delete; } }));\nexports[\"default\"] = __assign(__assign({}, facade_1.Facade), { Alias: alias_1.Alias,\n    Group: group_1.Group,\n    Identify: identify_1.Identify,\n    Track: track_1.Track,\n    Page: page_1.Page,\n    Screen: screen_1.Screen,\n    Delete: delete_1.Delete });\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsY0FBYyxHQUFHLGNBQWMsR0FBRyxZQUFZLEdBQUcsYUFBYSxHQUFHLGdCQUFnQixHQUFHLGFBQWEsR0FBRyxhQUFhLEdBQUcsY0FBYztBQUNsSSxlQUFlLG1CQUFPLENBQUMsc0VBQVU7QUFDakMsMENBQXlDLEVBQUUscUNBQXFDLDJCQUEyQixFQUFDO0FBQzVHLGNBQWMsbUJBQU8sQ0FBQyxvRUFBUztBQUMvQix5Q0FBd0MsRUFBRSxxQ0FBcUMseUJBQXlCLEVBQUM7QUFDekcsY0FBYyxtQkFBTyxDQUFDLG9FQUFTO0FBQy9CLHlDQUF3QyxFQUFFLHFDQUFxQyx5QkFBeUIsRUFBQztBQUN6RyxpQkFBaUIsbUJBQU8sQ0FBQywwRUFBWTtBQUNyQyw0Q0FBMkMsRUFBRSxxQ0FBcUMsK0JBQStCLEVBQUM7QUFDbEgsY0FBYyxtQkFBTyxDQUFDLG9FQUFTO0FBQy9CLHlDQUF3QyxFQUFFLHFDQUFxQyx5QkFBeUIsRUFBQztBQUN6RyxhQUFhLG1CQUFPLENBQUMsa0VBQVE7QUFDN0Isd0NBQXVDLEVBQUUscUNBQXFDLHVCQUF1QixFQUFDO0FBQ3RHLGVBQWUsbUJBQU8sQ0FBQyxzRUFBVTtBQUNqQywwQ0FBeUMsRUFBRSxxQ0FBcUMsMkJBQTJCLEVBQUM7QUFDNUcsZUFBZSxtQkFBTyxDQUFDLHNFQUFVO0FBQ2pDLDBDQUF5QyxFQUFFLHFDQUFxQywyQkFBMkIsRUFBQztBQUM1RyxrQkFBZSx1QkFBdUIsc0JBQXNCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvZmFjYWRlL2Rpc3QvaW5kZXguanM/OTZkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRlbGV0ZSA9IGV4cG9ydHMuU2NyZWVuID0gZXhwb3J0cy5QYWdlID0gZXhwb3J0cy5UcmFjayA9IGV4cG9ydHMuSWRlbnRpZnkgPSBleHBvcnRzLkdyb3VwID0gZXhwb3J0cy5BbGlhcyA9IGV4cG9ydHMuRmFjYWRlID0gdm9pZCAwO1xudmFyIGZhY2FkZV8xID0gcmVxdWlyZShcIi4vZmFjYWRlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRmFjYWRlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWNhZGVfMS5GYWNhZGU7IH0gfSk7XG52YXIgYWxpYXNfMSA9IHJlcXVpcmUoXCIuL2FsaWFzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQWxpYXNcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFsaWFzXzEuQWxpYXM7IH0gfSk7XG52YXIgZ3JvdXBfMSA9IHJlcXVpcmUoXCIuL2dyb3VwXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR3JvdXBcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdyb3VwXzEuR3JvdXA7IH0gfSk7XG52YXIgaWRlbnRpZnlfMSA9IHJlcXVpcmUoXCIuL2lkZW50aWZ5XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSWRlbnRpZnlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlkZW50aWZ5XzEuSWRlbnRpZnk7IH0gfSk7XG52YXIgdHJhY2tfMSA9IHJlcXVpcmUoXCIuL3RyYWNrXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVHJhY2tcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRyYWNrXzEuVHJhY2s7IH0gfSk7XG52YXIgcGFnZV8xID0gcmVxdWlyZShcIi4vcGFnZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBhZ2VcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhZ2VfMS5QYWdlOyB9IH0pO1xudmFyIHNjcmVlbl8xID0gcmVxdWlyZShcIi4vc2NyZWVuXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2NyZWVuXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzY3JlZW5fMS5TY3JlZW47IH0gfSk7XG52YXIgZGVsZXRlXzEgPSByZXF1aXJlKFwiLi9kZWxldGVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJEZWxldGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlbGV0ZV8xLkRlbGV0ZTsgfSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBmYWNhZGVfMS5GYWNhZGUpLCB7IEFsaWFzOiBhbGlhc18xLkFsaWFzLFxuICAgIEdyb3VwOiBncm91cF8xLkdyb3VwLFxuICAgIElkZW50aWZ5OiBpZGVudGlmeV8xLklkZW50aWZ5LFxuICAgIFRyYWNrOiB0cmFja18xLlRyYWNrLFxuICAgIFBhZ2U6IHBhZ2VfMS5QYWdlLFxuICAgIFNjcmVlbjogc2NyZWVuXzEuU2NyZWVuLFxuICAgIERlbGV0ZTogZGVsZXRlXzEuRGVsZXRlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/is-email.js":
/*!********************************************************!*\
  !*** ../node_modules/@segment/facade/dist/is-email.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar matcher = /.+\\@.+\\..+/;\nfunction isEmail(string) {\n    return matcher.test(string);\n}\nexports[\"default\"] = isEmail;\n//# sourceMappingURL=is-email.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2lzLWVtYWlsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9pcy1lbWFpbC5qcz9iY2NhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIG1hdGNoZXIgPSAvLitcXEAuK1xcLi4rLztcbmZ1bmN0aW9uIGlzRW1haWwoc3RyaW5nKSB7XG4gICAgcmV0dXJuIG1hdGNoZXIudGVzdChzdHJpbmcpO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gaXNFbWFpbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLWVtYWlsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/is-email.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/is-enabled.js":
/*!**********************************************************!*\
  !*** ../node_modules/@segment/facade/dist/is-enabled.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar disabled = {\n    Salesforce: true,\n};\nfunction default_1(integration) {\n    return !disabled[integration];\n}\nexports[\"default\"] = default_1;\n//# sourceMappingURL=is-enabled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L2lzLWVuYWJsZWQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9pcy1lbmFibGVkLmpzP2FiOTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgZGlzYWJsZWQgPSB7XG4gICAgU2FsZXNmb3JjZTogdHJ1ZSxcbn07XG5mdW5jdGlvbiBkZWZhdWx0XzEoaW50ZWdyYXRpb24pIHtcbiAgICByZXR1cm4gIWRpc2FibGVkW2ludGVncmF0aW9uXTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IGRlZmF1bHRfMTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLWVuYWJsZWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/is-enabled.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/page.js":
/*!****************************************************!*\
  !*** ../node_modules/@segment/facade/dist/page.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Page = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/../node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/../node_modules/@segment/facade/dist/facade.js\");\nvar track_1 = __webpack_require__(/*! ./track */ \"(ssr)/../node_modules/@segment/facade/dist/track.js\");\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(ssr)/../node_modules/@segment/facade/dist/is-email.js\"));\nfunction Page(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Page = Page;\ninherits_1.default(Page, facade_1.Facade);\nvar p = Page.prototype;\np.action = function () {\n    return \"page\";\n};\np.type = p.action;\np.category = facade_1.Facade.field(\"category\");\np.name = facade_1.Facade.field(\"name\");\np.title = facade_1.Facade.proxy(\"properties.title\");\np.path = facade_1.Facade.proxy(\"properties.path\");\np.url = facade_1.Facade.proxy(\"properties.url\");\np.referrer = function () {\n    return (this.proxy(\"context.referrer.url\") ||\n        this.proxy(\"context.page.referrer\") ||\n        this.proxy(\"properties.referrer\"));\n};\np.properties = function (aliases) {\n    var props = this.field(\"properties\") || {};\n    var category = this.category();\n    var name = this.name();\n    aliases = aliases || {};\n    if (category)\n        props.category = category;\n    if (name)\n        props.name = name;\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"properties.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            props[aliases[alias]] = value;\n            if (alias !== aliases[alias])\n                delete props[alias];\n        }\n    }\n    return props;\n};\np.email = function () {\n    var email = this.proxy(\"context.traits.email\") || this.proxy(\"properties.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\np.fullName = function () {\n    var category = this.category();\n    var name = this.name();\n    return name && category ? category + \" \" + name : name;\n};\np.event = function (name) {\n    return name ? \"Viewed \" + name + \" Page\" : \"Loaded a Page\";\n};\np.track = function (name) {\n    var json = this.json();\n    json.event = this.event(name);\n    json.timestamp = this.timestamp();\n    json.properties = this.properties();\n    return new track_1.Track(json, this.opts);\n};\n//# sourceMappingURL=page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L3BhZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxZQUFZO0FBQ1osaUNBQWlDLG1CQUFPLENBQUMsNERBQVU7QUFDbkQsZUFBZSxtQkFBTyxDQUFDLHNFQUFVO0FBQ2pDLGNBQWMsbUJBQU8sQ0FBQyxvRUFBUztBQUMvQixpQ0FBaUMsbUJBQU8sQ0FBQywwRUFBWTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L3BhZ2UuanM/MDU0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUGFnZSA9IHZvaWQgMDtcbnZhciBpbmhlcml0c18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJpbmhlcml0c1wiKSk7XG52YXIgZmFjYWRlXzEgPSByZXF1aXJlKFwiLi9mYWNhZGVcIik7XG52YXIgdHJhY2tfMSA9IHJlcXVpcmUoXCIuL3RyYWNrXCIpO1xudmFyIGlzX2VtYWlsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vaXMtZW1haWxcIikpO1xuZnVuY3Rpb24gUGFnZShkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgZmFjYWRlXzEuRmFjYWRlLmNhbGwodGhpcywgZGljdGlvbmFyeSwgb3B0cyk7XG59XG5leHBvcnRzLlBhZ2UgPSBQYWdlO1xuaW5oZXJpdHNfMS5kZWZhdWx0KFBhZ2UsIGZhY2FkZV8xLkZhY2FkZSk7XG52YXIgcCA9IFBhZ2UucHJvdG90eXBlO1xucC5hY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwicGFnZVwiO1xufTtcbnAudHlwZSA9IHAuYWN0aW9uO1xucC5jYXRlZ29yeSA9IGZhY2FkZV8xLkZhY2FkZS5maWVsZChcImNhdGVnb3J5XCIpO1xucC5uYW1lID0gZmFjYWRlXzEuRmFjYWRlLmZpZWxkKFwibmFtZVwiKTtcbnAudGl0bGUgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnRpdGxlXCIpO1xucC5wYXRoID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5wYXRoXCIpO1xucC51cmwgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnVybFwiKTtcbnAucmVmZXJyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwiY29udGV4dC5yZWZlcnJlci51cmxcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcImNvbnRleHQucGFnZS5yZWZlcnJlclwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5yZWZlcnJlclwiKSk7XG59O1xucC5wcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGFsaWFzZXMpIHtcbiAgICB2YXIgcHJvcHMgPSB0aGlzLmZpZWxkKFwicHJvcGVydGllc1wiKSB8fCB7fTtcbiAgICB2YXIgY2F0ZWdvcnkgPSB0aGlzLmNhdGVnb3J5KCk7XG4gICAgdmFyIG5hbWUgPSB0aGlzLm5hbWUoKTtcbiAgICBhbGlhc2VzID0gYWxpYXNlcyB8fCB7fTtcbiAgICBpZiAoY2F0ZWdvcnkpXG4gICAgICAgIHByb3BzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgaWYgKG5hbWUpXG4gICAgICAgIHByb3BzLm5hbWUgPSBuYW1lO1xuICAgIGZvciAodmFyIGFsaWFzIGluIGFsaWFzZXMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhbGlhc2VzLCBhbGlhcykpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXNbYWxpYXNdID09IG51bGxcbiAgICAgICAgICAgICAgICA/IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLlwiICsgYWxpYXMpXG4gICAgICAgICAgICAgICAgOiB0aGlzW2FsaWFzXSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBwcm9wc1thbGlhc2VzW2FsaWFzXV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChhbGlhcyAhPT0gYWxpYXNlc1thbGlhc10pXG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3BzW2FsaWFzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHJvcHM7XG59O1xucC5lbWFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW1haWwgPSB0aGlzLnByb3h5KFwiY29udGV4dC50cmFpdHMuZW1haWxcIikgfHwgdGhpcy5wcm94eShcInByb3BlcnRpZXMuZW1haWxcIik7XG4gICAgaWYgKGVtYWlsKVxuICAgICAgICByZXR1cm4gZW1haWw7XG4gICAgdmFyIHVzZXJJZCA9IHRoaXMudXNlcklkKCk7XG4gICAgaWYgKGlzX2VtYWlsXzEuZGVmYXVsdCh1c2VySWQpKVxuICAgICAgICByZXR1cm4gdXNlcklkO1xufTtcbnAuZnVsbE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yeSgpO1xuICAgIHZhciBuYW1lID0gdGhpcy5uYW1lKCk7XG4gICAgcmV0dXJuIG5hbWUgJiYgY2F0ZWdvcnkgPyBjYXRlZ29yeSArIFwiIFwiICsgbmFtZSA6IG5hbWU7XG59O1xucC5ldmVudCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUgPyBcIlZpZXdlZCBcIiArIG5hbWUgKyBcIiBQYWdlXCIgOiBcIkxvYWRlZCBhIFBhZ2VcIjtcbn07XG5wLnRyYWNrID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIganNvbiA9IHRoaXMuanNvbigpO1xuICAgIGpzb24uZXZlbnQgPSB0aGlzLmV2ZW50KG5hbWUpO1xuICAgIGpzb24udGltZXN0YW1wID0gdGhpcy50aW1lc3RhbXAoKTtcbiAgICBqc29uLnByb3BlcnRpZXMgPSB0aGlzLnByb3BlcnRpZXMoKTtcbiAgICByZXR1cm4gbmV3IHRyYWNrXzEuVHJhY2soanNvbiwgdGhpcy5vcHRzKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/page.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/screen.js":
/*!******************************************************!*\
  !*** ../node_modules/@segment/facade/dist/screen.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Screen = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/../node_modules/inherits/inherits.js\"));\nvar page_1 = __webpack_require__(/*! ./page */ \"(ssr)/../node_modules/@segment/facade/dist/page.js\");\nvar track_1 = __webpack_require__(/*! ./track */ \"(ssr)/../node_modules/@segment/facade/dist/track.js\");\nfunction Screen(dictionary, opts) {\n    page_1.Page.call(this, dictionary, opts);\n}\nexports.Screen = Screen;\ninherits_1.default(Screen, page_1.Page);\nScreen.prototype.action = function () {\n    return \"screen\";\n};\nScreen.prototype.type = Screen.prototype.action;\nScreen.prototype.event = function (name) {\n    return name ? \"Viewed \" + name + \" Screen\" : \"Loaded a Screen\";\n};\nScreen.prototype.track = function (name) {\n    var json = this.json();\n    json.event = this.event(name);\n    json.timestamp = this.timestamp();\n    json.properties = this.properties();\n    return new track_1.Track(json, this.opts);\n};\n//# sourceMappingURL=screen.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L3NjcmVlbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGNBQWM7QUFDZCxpQ0FBaUMsbUJBQU8sQ0FBQyw0REFBVTtBQUNuRCxhQUFhLG1CQUFPLENBQUMsa0VBQVE7QUFDN0IsY0FBYyxtQkFBTyxDQUFDLG9FQUFTO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC9zY3JlZW4uanM/NmQwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2NyZWVuID0gdm9pZCAwO1xudmFyIGluaGVyaXRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImluaGVyaXRzXCIpKTtcbnZhciBwYWdlXzEgPSByZXF1aXJlKFwiLi9wYWdlXCIpO1xudmFyIHRyYWNrXzEgPSByZXF1aXJlKFwiLi90cmFja1wiKTtcbmZ1bmN0aW9uIFNjcmVlbihkaWN0aW9uYXJ5LCBvcHRzKSB7XG4gICAgcGFnZV8xLlBhZ2UuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5LCBvcHRzKTtcbn1cbmV4cG9ydHMuU2NyZWVuID0gU2NyZWVuO1xuaW5oZXJpdHNfMS5kZWZhdWx0KFNjcmVlbiwgcGFnZV8xLlBhZ2UpO1xuU2NyZWVuLnByb3RvdHlwZS5hY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwic2NyZWVuXCI7XG59O1xuU2NyZWVuLnByb3RvdHlwZS50eXBlID0gU2NyZWVuLnByb3RvdHlwZS5hY3Rpb247XG5TY3JlZW4ucHJvdG90eXBlLmV2ZW50ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZSA/IFwiVmlld2VkIFwiICsgbmFtZSArIFwiIFNjcmVlblwiIDogXCJMb2FkZWQgYSBTY3JlZW5cIjtcbn07XG5TY3JlZW4ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIganNvbiA9IHRoaXMuanNvbigpO1xuICAgIGpzb24uZXZlbnQgPSB0aGlzLmV2ZW50KG5hbWUpO1xuICAgIGpzb24udGltZXN0YW1wID0gdGhpcy50aW1lc3RhbXAoKTtcbiAgICBqc29uLnByb3BlcnRpZXMgPSB0aGlzLnByb3BlcnRpZXMoKTtcbiAgICByZXR1cm4gbmV3IHRyYWNrXzEuVHJhY2soanNvbiwgdGhpcy5vcHRzKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY3JlZW4uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/screen.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/facade/dist/track.js":
/*!*****************************************************!*\
  !*** ../node_modules/@segment/facade/dist/track.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Track = void 0;\nvar inherits_1 = __importDefault(__webpack_require__(/*! inherits */ \"(ssr)/../node_modules/inherits/inherits.js\"));\nvar facade_1 = __webpack_require__(/*! ./facade */ \"(ssr)/../node_modules/@segment/facade/dist/facade.js\");\nvar identify_1 = __webpack_require__(/*! ./identify */ \"(ssr)/../node_modules/@segment/facade/dist/identify.js\");\nvar is_email_1 = __importDefault(__webpack_require__(/*! ./is-email */ \"(ssr)/../node_modules/@segment/facade/dist/is-email.js\"));\nvar obj_case_1 = __importDefault(__webpack_require__(/*! obj-case */ \"(ssr)/../node_modules/obj-case/index.js\"));\nfunction Track(dictionary, opts) {\n    facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Track = Track;\ninherits_1.default(Track, facade_1.Facade);\nvar t = Track.prototype;\nt.action = function () {\n    return \"track\";\n};\nt.type = t.action;\nt.event = facade_1.Facade.field(\"event\");\nt.value = facade_1.Facade.proxy(\"properties.value\");\nt.category = facade_1.Facade.proxy(\"properties.category\");\nt.id = facade_1.Facade.proxy(\"properties.id\");\nt.productId = function () {\n    return (this.proxy(\"properties.product_id\") || this.proxy(\"properties.productId\"));\n};\nt.promotionId = function () {\n    return (this.proxy(\"properties.promotion_id\") ||\n        this.proxy(\"properties.promotionId\"));\n};\nt.cartId = function () {\n    return this.proxy(\"properties.cart_id\") || this.proxy(\"properties.cartId\");\n};\nt.checkoutId = function () {\n    return (this.proxy(\"properties.checkout_id\") || this.proxy(\"properties.checkoutId\"));\n};\nt.paymentId = function () {\n    return (this.proxy(\"properties.payment_id\") || this.proxy(\"properties.paymentId\"));\n};\nt.couponId = function () {\n    return (this.proxy(\"properties.coupon_id\") || this.proxy(\"properties.couponId\"));\n};\nt.wishlistId = function () {\n    return (this.proxy(\"properties.wishlist_id\") || this.proxy(\"properties.wishlistId\"));\n};\nt.reviewId = function () {\n    return (this.proxy(\"properties.review_id\") || this.proxy(\"properties.reviewId\"));\n};\nt.orderId = function () {\n    return (this.proxy(\"properties.id\") ||\n        this.proxy(\"properties.order_id\") ||\n        this.proxy(\"properties.orderId\"));\n};\nt.sku = facade_1.Facade.proxy(\"properties.sku\");\nt.tax = facade_1.Facade.proxy(\"properties.tax\");\nt.name = facade_1.Facade.proxy(\"properties.name\");\nt.price = facade_1.Facade.proxy(\"properties.price\");\nt.total = facade_1.Facade.proxy(\"properties.total\");\nt.repeat = facade_1.Facade.proxy(\"properties.repeat\");\nt.coupon = facade_1.Facade.proxy(\"properties.coupon\");\nt.shipping = facade_1.Facade.proxy(\"properties.shipping\");\nt.discount = facade_1.Facade.proxy(\"properties.discount\");\nt.shippingMethod = function () {\n    return (this.proxy(\"properties.shipping_method\") ||\n        this.proxy(\"properties.shippingMethod\"));\n};\nt.paymentMethod = function () {\n    return (this.proxy(\"properties.payment_method\") ||\n        this.proxy(\"properties.paymentMethod\"));\n};\nt.description = facade_1.Facade.proxy(\"properties.description\");\nt.plan = facade_1.Facade.proxy(\"properties.plan\");\nt.subtotal = function () {\n    var subtotal = obj_case_1.default(this.properties(), \"subtotal\");\n    var total = this.total() || this.revenue();\n    if (subtotal)\n        return subtotal;\n    if (!total)\n        return 0;\n    if (this.total()) {\n        var n = this.tax();\n        if (n)\n            total -= n;\n        n = this.shipping();\n        if (n)\n            total -= n;\n        n = this.discount();\n        if (n)\n            total += n;\n    }\n    return total;\n};\nt.products = function () {\n    var props = this.properties();\n    var products = obj_case_1.default(props, \"products\");\n    if (Array.isArray(products)) {\n        return products.filter(function (item) { return item !== null; });\n    }\n    return [];\n};\nt.quantity = function () {\n    var props = this.obj.properties || {};\n    return props.quantity || 1;\n};\nt.currency = function () {\n    var props = this.obj.properties || {};\n    return props.currency || \"USD\";\n};\nt.referrer = function () {\n    return (this.proxy(\"context.referrer.url\") ||\n        this.proxy(\"context.page.referrer\") ||\n        this.proxy(\"properties.referrer\"));\n};\nt.query = facade_1.Facade.proxy(\"options.query\");\nt.properties = function (aliases) {\n    var ret = this.field(\"properties\") || {};\n    aliases = aliases || {};\n    for (var alias in aliases) {\n        if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n            var value = this[alias] == null\n                ? this.proxy(\"properties.\" + alias)\n                : this[alias]();\n            if (value == null)\n                continue;\n            ret[aliases[alias]] = value;\n            delete ret[alias];\n        }\n    }\n    return ret;\n};\nt.username = function () {\n    return (this.proxy(\"traits.username\") ||\n        this.proxy(\"properties.username\") ||\n        this.userId() ||\n        this.sessionId());\n};\nt.email = function () {\n    var email = this.proxy(\"traits.email\") ||\n        this.proxy(\"properties.email\") ||\n        this.proxy(\"options.traits.email\");\n    if (email)\n        return email;\n    var userId = this.userId();\n    if (is_email_1.default(userId))\n        return userId;\n};\nt.revenue = function () {\n    var revenue = this.proxy(\"properties.revenue\");\n    var event = this.event();\n    var orderCompletedRegExp = /^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;\n    if (!revenue && event && event.match(orderCompletedRegExp)) {\n        revenue = this.proxy(\"properties.total\");\n    }\n    return currency(revenue);\n};\nt.cents = function () {\n    var revenue = this.revenue();\n    return typeof revenue !== \"number\" ? this.value() || 0 : revenue * 100;\n};\nt.identify = function () {\n    var json = this.json();\n    json.traits = this.traits();\n    return new identify_1.Identify(json, this.opts);\n};\nfunction currency(val) {\n    if (!val)\n        return;\n    if (typeof val === \"number\") {\n        return val;\n    }\n    if (typeof val !== \"string\") {\n        return;\n    }\n    val = val.replace(/\\$/g, \"\");\n    val = parseFloat(val);\n    if (!isNaN(val)) {\n        return val;\n    }\n}\n//# sourceMappingURL=track.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2ZhY2FkZS9kaXN0L3RyYWNrLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsYUFBYTtBQUNiLGlDQUFpQyxtQkFBTyxDQUFDLDREQUFVO0FBQ25ELGVBQWUsbUJBQU8sQ0FBQyxzRUFBVTtBQUNqQyxpQkFBaUIsbUJBQU8sQ0FBQywwRUFBWTtBQUNyQyxpQ0FBaUMsbUJBQU8sQ0FBQywwRUFBWTtBQUNyRCxpQ0FBaUMsbUJBQU8sQ0FBQyx5REFBVTtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCx1QkFBdUI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9mYWNhZGUvZGlzdC90cmFjay5qcz84MmYwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5UcmFjayA9IHZvaWQgMDtcbnZhciBpbmhlcml0c18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJpbmhlcml0c1wiKSk7XG52YXIgZmFjYWRlXzEgPSByZXF1aXJlKFwiLi9mYWNhZGVcIik7XG52YXIgaWRlbnRpZnlfMSA9IHJlcXVpcmUoXCIuL2lkZW50aWZ5XCIpO1xudmFyIGlzX2VtYWlsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vaXMtZW1haWxcIikpO1xudmFyIG9ial9jYXNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm9iai1jYXNlXCIpKTtcbmZ1bmN0aW9uIFRyYWNrKGRpY3Rpb25hcnksIG9wdHMpIHtcbiAgICBmYWNhZGVfMS5GYWNhZGUuY2FsbCh0aGlzLCBkaWN0aW9uYXJ5LCBvcHRzKTtcbn1cbmV4cG9ydHMuVHJhY2sgPSBUcmFjaztcbmluaGVyaXRzXzEuZGVmYXVsdChUcmFjaywgZmFjYWRlXzEuRmFjYWRlKTtcbnZhciB0ID0gVHJhY2sucHJvdG90eXBlO1xudC5hY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwidHJhY2tcIjtcbn07XG50LnR5cGUgPSB0LmFjdGlvbjtcbnQuZXZlbnQgPSBmYWNhZGVfMS5GYWNhZGUuZmllbGQoXCJldmVudFwiKTtcbnQudmFsdWUgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnZhbHVlXCIpO1xudC5jYXRlZ29yeSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMuY2F0ZWdvcnlcIik7XG50LmlkID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5pZFwiKTtcbnQucHJvZHVjdElkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMucHJvZHVjdF9pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy5wcm9kdWN0SWRcIikpO1xufTtcbnQucHJvbW90aW9uSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwicHJvcGVydGllcy5wcm9tb3Rpb25faWRcIikgfHxcbiAgICAgICAgdGhpcy5wcm94eShcInByb3BlcnRpZXMucHJvbW90aW9uSWRcIikpO1xufTtcbnQuY2FydElkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb3h5KFwicHJvcGVydGllcy5jYXJ0X2lkXCIpIHx8IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmNhcnRJZFwiKTtcbn07XG50LmNoZWNrb3V0SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwicHJvcGVydGllcy5jaGVja291dF9pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy5jaGVja291dElkXCIpKTtcbn07XG50LnBheW1lbnRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnBheW1lbnRfaWRcIikgfHwgdGhpcy5wcm94eShcInByb3BlcnRpZXMucGF5bWVudElkXCIpKTtcbn07XG50LmNvdXBvbklkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMuY291cG9uX2lkXCIpIHx8IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmNvdXBvbklkXCIpKTtcbn07XG50Lndpc2hsaXN0SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwicHJvcGVydGllcy53aXNobGlzdF9pZFwiKSB8fCB0aGlzLnByb3h5KFwicHJvcGVydGllcy53aXNobGlzdElkXCIpKTtcbn07XG50LnJldmlld0lkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMucmV2aWV3X2lkXCIpIHx8IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnJldmlld0lkXCIpKTtcbn07XG50Lm9yZGVySWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwicHJvcGVydGllcy5pZFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5vcmRlcl9pZFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5vcmRlcklkXCIpKTtcbn07XG50LnNrdSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMuc2t1XCIpO1xudC50YXggPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnRheFwiKTtcbnQubmFtZSA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMubmFtZVwiKTtcbnQucHJpY2UgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnByaWNlXCIpO1xudC50b3RhbCA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMudG90YWxcIik7XG50LnJlcGVhdCA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMucmVwZWF0XCIpO1xudC5jb3Vwb24gPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLmNvdXBvblwiKTtcbnQuc2hpcHBpbmcgPSBmYWNhZGVfMS5GYWNhZGUucHJveHkoXCJwcm9wZXJ0aWVzLnNoaXBwaW5nXCIpO1xudC5kaXNjb3VudCA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMuZGlzY291bnRcIik7XG50LnNoaXBwaW5nTWV0aG9kID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5wcm94eShcInByb3BlcnRpZXMuc2hpcHBpbmdfbWV0aG9kXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnNoaXBwaW5nTWV0aG9kXCIpKTtcbn07XG50LnBheW1lbnRNZXRob2QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwicHJvcGVydGllcy5wYXltZW50X21ldGhvZFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwicHJvcGVydGllcy5wYXltZW50TWV0aG9kXCIpKTtcbn07XG50LmRlc2NyaXB0aW9uID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwicHJvcGVydGllcy5kZXNjcmlwdGlvblwiKTtcbnQucGxhbiA9IGZhY2FkZV8xLkZhY2FkZS5wcm94eShcInByb3BlcnRpZXMucGxhblwiKTtcbnQuc3VidG90YWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN1YnRvdGFsID0gb2JqX2Nhc2VfMS5kZWZhdWx0KHRoaXMucHJvcGVydGllcygpLCBcInN1YnRvdGFsXCIpO1xuICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWwoKSB8fCB0aGlzLnJldmVudWUoKTtcbiAgICBpZiAoc3VidG90YWwpXG4gICAgICAgIHJldHVybiBzdWJ0b3RhbDtcbiAgICBpZiAoIXRvdGFsKVxuICAgICAgICByZXR1cm4gMDtcbiAgICBpZiAodGhpcy50b3RhbCgpKSB7XG4gICAgICAgIHZhciBuID0gdGhpcy50YXgoKTtcbiAgICAgICAgaWYgKG4pXG4gICAgICAgICAgICB0b3RhbCAtPSBuO1xuICAgICAgICBuID0gdGhpcy5zaGlwcGluZygpO1xuICAgICAgICBpZiAobilcbiAgICAgICAgICAgIHRvdGFsIC09IG47XG4gICAgICAgIG4gPSB0aGlzLmRpc2NvdW50KCk7XG4gICAgICAgIGlmIChuKVxuICAgICAgICAgICAgdG90YWwgKz0gbjtcbiAgICB9XG4gICAgcmV0dXJuIHRvdGFsO1xufTtcbnQucHJvZHVjdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb3BzID0gdGhpcy5wcm9wZXJ0aWVzKCk7XG4gICAgdmFyIHByb2R1Y3RzID0gb2JqX2Nhc2VfMS5kZWZhdWx0KHByb3BzLCBcInByb2R1Y3RzXCIpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHByb2R1Y3RzKSkge1xuICAgICAgICByZXR1cm4gcHJvZHVjdHMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtICE9PSBudWxsOyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xufTtcbnQucXVhbnRpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb3BzID0gdGhpcy5vYmoucHJvcGVydGllcyB8fCB7fTtcbiAgICByZXR1cm4gcHJvcHMucXVhbnRpdHkgfHwgMTtcbn07XG50LmN1cnJlbmN5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wcyA9IHRoaXMub2JqLnByb3BlcnRpZXMgfHwge307XG4gICAgcmV0dXJuIHByb3BzLmN1cnJlbmN5IHx8IFwiVVNEXCI7XG59O1xudC5yZWZlcnJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMucHJveHkoXCJjb250ZXh0LnJlZmVycmVyLnVybFwiKSB8fFxuICAgICAgICB0aGlzLnByb3h5KFwiY29udGV4dC5wYWdlLnJlZmVycmVyXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnJlZmVycmVyXCIpKTtcbn07XG50LnF1ZXJ5ID0gZmFjYWRlXzEuRmFjYWRlLnByb3h5KFwib3B0aW9ucy5xdWVyeVwiKTtcbnQucHJvcGVydGllcyA9IGZ1bmN0aW9uIChhbGlhc2VzKSB7XG4gICAgdmFyIHJldCA9IHRoaXMuZmllbGQoXCJwcm9wZXJ0aWVzXCIpIHx8IHt9O1xuICAgIGFsaWFzZXMgPSBhbGlhc2VzIHx8IHt9O1xuICAgIGZvciAodmFyIGFsaWFzIGluIGFsaWFzZXMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhbGlhc2VzLCBhbGlhcykpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXNbYWxpYXNdID09IG51bGxcbiAgICAgICAgICAgICAgICA/IHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLlwiICsgYWxpYXMpXG4gICAgICAgICAgICAgICAgOiB0aGlzW2FsaWFzXSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICByZXRbYWxpYXNlc1thbGlhc11dID0gdmFsdWU7XG4gICAgICAgICAgICBkZWxldGUgcmV0W2FsaWFzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcbnQudXNlcm5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLnByb3h5KFwidHJhaXRzLnVzZXJuYW1lXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLnVzZXJuYW1lXCIpIHx8XG4gICAgICAgIHRoaXMudXNlcklkKCkgfHxcbiAgICAgICAgdGhpcy5zZXNzaW9uSWQoKSk7XG59O1xudC5lbWFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW1haWwgPSB0aGlzLnByb3h5KFwidHJhaXRzLmVtYWlsXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJwcm9wZXJ0aWVzLmVtYWlsXCIpIHx8XG4gICAgICAgIHRoaXMucHJveHkoXCJvcHRpb25zLnRyYWl0cy5lbWFpbFwiKTtcbiAgICBpZiAoZW1haWwpXG4gICAgICAgIHJldHVybiBlbWFpbDtcbiAgICB2YXIgdXNlcklkID0gdGhpcy51c2VySWQoKTtcbiAgICBpZiAoaXNfZW1haWxfMS5kZWZhdWx0KHVzZXJJZCkpXG4gICAgICAgIHJldHVybiB1c2VySWQ7XG59O1xudC5yZXZlbnVlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXZlbnVlID0gdGhpcy5wcm94eShcInByb3BlcnRpZXMucmV2ZW51ZVwiKTtcbiAgICB2YXIgZXZlbnQgPSB0aGlzLmV2ZW50KCk7XG4gICAgdmFyIG9yZGVyQ29tcGxldGVkUmVnRXhwID0gL15bIF9dP2NvbXBsZXRlZFsgX10/b3JkZXJbIF9dP3xeWyBfXT9vcmRlclsgX10/Y29tcGxldGVkWyBfXT8kL2k7XG4gICAgaWYgKCFyZXZlbnVlICYmIGV2ZW50ICYmIGV2ZW50Lm1hdGNoKG9yZGVyQ29tcGxldGVkUmVnRXhwKSkge1xuICAgICAgICByZXZlbnVlID0gdGhpcy5wcm94eShcInByb3BlcnRpZXMudG90YWxcIik7XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW5jeShyZXZlbnVlKTtcbn07XG50LmNlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXZlbnVlID0gdGhpcy5yZXZlbnVlKCk7XG4gICAgcmV0dXJuIHR5cGVvZiByZXZlbnVlICE9PSBcIm51bWJlclwiID8gdGhpcy52YWx1ZSgpIHx8IDAgOiByZXZlbnVlICogMTAwO1xufTtcbnQuaWRlbnRpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGpzb24gPSB0aGlzLmpzb24oKTtcbiAgICBqc29uLnRyYWl0cyA9IHRoaXMudHJhaXRzKCk7XG4gICAgcmV0dXJuIG5ldyBpZGVudGlmeV8xLklkZW50aWZ5KGpzb24sIHRoaXMub3B0cyk7XG59O1xuZnVuY3Rpb24gY3VycmVuY3kodmFsKSB7XG4gICAgaWYgKCF2YWwpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhbCA9IHZhbC5yZXBsYWNlKC9cXCQvZywgXCJcIik7XG4gICAgdmFsID0gcGFyc2VGbG9hdCh2YWwpO1xuICAgIGlmICghaXNOYU4odmFsKSkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYWNrLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/facade/dist/track.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/isodate-traverse/lib/index.js":
/*!**************************************************************!*\
  !*** ../node_modules/@segment/isodate-traverse/lib/index.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar isodate = __webpack_require__(/*! @segment/isodate */ \"(ssr)/../node_modules/@segment/isodate/lib/index.js\");\n\n/**\n * Expose `traverse`.\n */\nmodule.exports = traverse;\n\n/**\n * Recursively traverse an object or array, and convert\n * all ISO date strings parse into Date objects.\n *\n * @param {Object} input - object, array, or string to convert\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverse(input, strict) {\n  if (strict === undefined) strict = true;\n  if (input && typeof input === 'object') {\n    return traverseObject(input, strict);\n  } else if (Array.isArray(input)) {\n    return traverseArray(input, strict);\n  } else if (isodate.is(input, strict)) {\n    return isodate.parse(input);\n  }\n  return input;\n}\n\n/**\n * Object traverser helper function.\n *\n * @param {Object} obj - object to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverseObject(obj, strict) {\n  Object.keys(obj).forEach(function(key) {\n    obj[key] = traverse(obj[key], strict);\n  });\n  return obj;\n}\n\n/**\n * Array traverser helper function\n *\n * @param {Array} arr - array to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Array}\n */\nfunction traverseArray(arr, strict) {\n  arr.forEach(function(value, index) {\n    arr[index] = traverse(value, strict);\n  });\n  return arr;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2lzb2RhdGUtdHJhdmVyc2UvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGNBQWMsbUJBQU8sQ0FBQyw2RUFBa0I7O0FBRXhDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvaXNvZGF0ZS10cmF2ZXJzZS9saWIvaW5kZXguanM/ZGUzZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBpc29kYXRlID0gcmVxdWlyZSgnQHNlZ21lbnQvaXNvZGF0ZScpO1xuXG4vKipcbiAqIEV4cG9zZSBgdHJhdmVyc2VgLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHRyYXZlcnNlO1xuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCBvciBhcnJheSwgYW5kIGNvbnZlcnRcbiAqIGFsbCBJU08gZGF0ZSBzdHJpbmdzIHBhcnNlIGludG8gRGF0ZSBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dCAtIG9iamVjdCwgYXJyYXksIG9yIHN0cmluZyB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHN0cmljdCAtIG9ubHkgY29udmVydCBzdHJpbmdzIHdpdGggeWVhciwgbW9udGgsIGFuZCBkYXRlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlKGlucHV0LCBzdHJpY3QpIHtcbiAgaWYgKHN0cmljdCA9PT0gdW5kZWZpbmVkKSBzdHJpY3QgPSB0cnVlO1xuICBpZiAoaW5wdXQgJiYgdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiB0cmF2ZXJzZU9iamVjdChpbnB1dCwgc3RyaWN0KTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIHJldHVybiB0cmF2ZXJzZUFycmF5KGlucHV0LCBzdHJpY3QpO1xuICB9IGVsc2UgaWYgKGlzb2RhdGUuaXMoaW5wdXQsIHN0cmljdCkpIHtcbiAgICByZXR1cm4gaXNvZGF0ZS5wYXJzZShpbnB1dCk7XG4gIH1cbiAgcmV0dXJuIGlucHV0O1xufVxuXG4vKipcbiAqIE9iamVjdCB0cmF2ZXJzZXIgaGVscGVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBvYmplY3QgdG8gdHJhdmVyc2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RyaWN0IC0gb25seSBjb252ZXJ0IHN0cmluZ3Mgd2l0aCB5ZWFyLCBtb250aCwgYW5kIGRhdGVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VPYmplY3Qob2JqLCBzdHJpY3QpIHtcbiAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIG9ialtrZXldID0gdHJhdmVyc2Uob2JqW2tleV0sIHN0cmljdCk7XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIEFycmF5IHRyYXZlcnNlciBoZWxwZXIgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnIgLSBhcnJheSB0byB0cmF2ZXJzZVxuICogQHBhcmFtIHtCb29sZWFufSBzdHJpY3QgLSBvbmx5IGNvbnZlcnQgc3RyaW5ncyB3aXRoIHllYXIsIG1vbnRoLCBhbmQgZGF0ZVxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHRyYXZlcnNlQXJyYXkoYXJyLCBzdHJpY3QpIHtcbiAgYXJyLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgYXJyW2luZGV4XSA9IHRyYXZlcnNlKHZhbHVlLCBzdHJpY3QpO1xuICB9KTtcbiAgcmV0dXJuIGFycjtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/isodate-traverse/lib/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/isodate/lib/index.js":
/*!*****************************************************!*\
  !*** ../node_modules/@segment/isodate/lib/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\n/**\n * Matcher, slightly modified from:\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n */\n\nvar matcher = /^(\\d{4})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:([ T])(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\n\n/**\n * Convert an ISO date string to a date. Fallback to native `Date.parse`.\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n *\n * @param {String} iso\n * @return {Date}\n */\n\nexports.parse = function(iso) {\n  var numericKeys = [1, 5, 6, 7, 11, 12];\n  var arr = matcher.exec(iso);\n  var offset = 0;\n\n  // fallback to native parsing\n  if (!arr) {\n    return new Date(iso);\n  }\n\n  /* eslint-disable no-cond-assign */\n  // remove undefined values\n  for (var i = 0, val; val = numericKeys[i]; i++) {\n    arr[val] = parseInt(arr[val], 10) || 0;\n  }\n  /* eslint-enable no-cond-assign */\n\n  // allow undefined days and months\n  arr[2] = parseInt(arr[2], 10) || 1;\n  arr[3] = parseInt(arr[3], 10) || 1;\n\n  // month is 0-11\n  arr[2]--;\n\n  // allow abitrary sub-second precision\n  arr[8] = arr[8] ? (arr[8] + '00').substring(0, 3) : 0;\n\n  // apply timezone if one exists\n  if (arr[4] === ' ') {\n    offset = new Date().getTimezoneOffset();\n  } else if (arr[9] !== 'Z' && arr[10]) {\n    offset = arr[11] * 60 + arr[12];\n    if (arr[10] === '+') {\n      offset = 0 - offset;\n    }\n  }\n\n  var millis = Date.UTC(arr[1], arr[2], arr[3], arr[5], arr[6] + offset, arr[7], arr[8]);\n  return new Date(millis);\n};\n\n\n/**\n * Checks whether a `string` is an ISO date string. `strict` mode requires that\n * the date string at least have a year, month and date.\n *\n * @param {String} string\n * @param {Boolean} strict\n * @return {Boolean}\n */\n\nexports.is = function(string, strict) {\n  if (typeof string !== 'string') {\n    return false;\n  }\n  if (strict && (/^\\d{4}-\\d{2}-\\d{2}/).test(string) === false) {\n    return false;\n  }\n  return matcher.test(string);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2lzb2RhdGUvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxrQkFBa0IsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLGFBQWEsR0FBRyx1QkFBdUIsRUFBRSxVQUFVLEVBQUU7O0FBRTVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaOztBQUVBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsWUFBWTtBQUNaOztBQUVBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwb2xsb3Nwcm9qZWN0L21pY3JvLXNlcnZpY2UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2lzb2RhdGUvbGliL2luZGV4LmpzP2RiYzciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIE1hdGNoZXIsIHNsaWdodGx5IG1vZGlmaWVkIGZyb206XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2Nzbm92ZXIvanMtaXNvODYwMS9ibG9iL2xheC9pc284NjAxLmpzXG4gKi9cblxudmFyIG1hdGNoZXIgPSAvXihcXGR7NH0pKD86LT8oXFxkezJ9KSg/Oi0/KFxcZHsyfSkpPyk/KD86KFsgVF0pKFxcZHsyfSk6PyhcXGR7Mn0pKD86Oj8oXFxkezJ9KSg/OlssXFwuXShcXGR7MSx9KSk/KT8oPzooWil8KFsrXFwtXSkoXFxkezJ9KSg/Ojo/KFxcZHsyfSkpPyk/KT8kLztcblxuLyoqXG4gKiBDb252ZXJ0IGFuIElTTyBkYXRlIHN0cmluZyB0byBhIGRhdGUuIEZhbGxiYWNrIHRvIG5hdGl2ZSBgRGF0ZS5wYXJzZWAuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2Nzbm92ZXIvanMtaXNvODYwMS9ibG9iL2xheC9pc284NjAxLmpzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlzb1xuICogQHJldHVybiB7RGF0ZX1cbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24oaXNvKSB7XG4gIHZhciBudW1lcmljS2V5cyA9IFsxLCA1LCA2LCA3LCAxMSwgMTJdO1xuICB2YXIgYXJyID0gbWF0Y2hlci5leGVjKGlzbyk7XG4gIHZhciBvZmZzZXQgPSAwO1xuXG4gIC8vIGZhbGxiYWNrIHRvIG5hdGl2ZSBwYXJzaW5nXG4gIGlmICghYXJyKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGlzbyk7XG4gIH1cblxuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAvLyByZW1vdmUgdW5kZWZpbmVkIHZhbHVlc1xuICBmb3IgKHZhciBpID0gMCwgdmFsOyB2YWwgPSBudW1lcmljS2V5c1tpXTsgaSsrKSB7XG4gICAgYXJyW3ZhbF0gPSBwYXJzZUludChhcnJbdmFsXSwgMTApIHx8IDA7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXG4gIC8vIGFsbG93IHVuZGVmaW5lZCBkYXlzIGFuZCBtb250aHNcbiAgYXJyWzJdID0gcGFyc2VJbnQoYXJyWzJdLCAxMCkgfHwgMTtcbiAgYXJyWzNdID0gcGFyc2VJbnQoYXJyWzNdLCAxMCkgfHwgMTtcblxuICAvLyBtb250aCBpcyAwLTExXG4gIGFyclsyXS0tO1xuXG4gIC8vIGFsbG93IGFiaXRyYXJ5IHN1Yi1zZWNvbmQgcHJlY2lzaW9uXG4gIGFycls4XSA9IGFycls4XSA/IChhcnJbOF0gKyAnMDAnKS5zdWJzdHJpbmcoMCwgMykgOiAwO1xuXG4gIC8vIGFwcGx5IHRpbWV6b25lIGlmIG9uZSBleGlzdHNcbiAgaWYgKGFycls0XSA9PT0gJyAnKSB7XG4gICAgb2Zmc2V0ID0gbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICB9IGVsc2UgaWYgKGFycls5XSAhPT0gJ1onICYmIGFyclsxMF0pIHtcbiAgICBvZmZzZXQgPSBhcnJbMTFdICogNjAgKyBhcnJbMTJdO1xuICAgIGlmIChhcnJbMTBdID09PSAnKycpIHtcbiAgICAgIG9mZnNldCA9IDAgLSBvZmZzZXQ7XG4gICAgfVxuICB9XG5cbiAgdmFyIG1pbGxpcyA9IERhdGUuVVRDKGFyclsxXSwgYXJyWzJdLCBhcnJbM10sIGFycls1XSwgYXJyWzZdICsgb2Zmc2V0LCBhcnJbN10sIGFycls4XSk7XG4gIHJldHVybiBuZXcgRGF0ZShtaWxsaXMpO1xufTtcblxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGEgYHN0cmluZ2AgaXMgYW4gSVNPIGRhdGUgc3RyaW5nLiBgc3RyaWN0YCBtb2RlIHJlcXVpcmVzIHRoYXRcbiAqIHRoZSBkYXRlIHN0cmluZyBhdCBsZWFzdCBoYXZlIGEgeWVhciwgbW9udGggYW5kIGRhdGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtCb29sZWFufSBzdHJpY3RcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZXhwb3J0cy5pcyA9IGZ1bmN0aW9uKHN0cmluZywgc3RyaWN0KSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoc3RyaWN0ICYmICgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9LykudGVzdChzdHJpbmcpID09PSBmYWxzZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gbWF0Y2hlci50ZXN0KHN0cmluZyk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/isodate/lib/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/tsub/dist/index.js":
/*!***************************************************!*\
  !*** ../node_modules/@segment/tsub/dist/index.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Store = exports.matches = exports.transform = void 0;\nvar transformers_1 = __webpack_require__(/*! ./transformers */ \"(ssr)/../node_modules/@segment/tsub/dist/transformers.js\");\nObject.defineProperty(exports, \"transform\", ({ enumerable: true, get: function () { return __importDefault(transformers_1).default; } }));\nvar matchers_1 = __webpack_require__(/*! ./matchers */ \"(ssr)/../node_modules/@segment/tsub/dist/matchers.js\");\nObject.defineProperty(exports, \"matches\", ({ enumerable: true, get: function () { return __importDefault(matchers_1).default; } }));\nvar store_1 = __webpack_require__(/*! ./store */ \"(ssr)/../node_modules/@segment/tsub/dist/store.js\");\nObject.defineProperty(exports, \"Store\", ({ enumerable: true, get: function () { return __importDefault(store_1).default; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L3RzdWIvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGFBQWEsR0FBRyxlQUFlLEdBQUcsaUJBQWlCO0FBQ25ELHFCQUFxQixtQkFBTyxDQUFDLGdGQUFnQjtBQUM3Qyw2Q0FBNEMsRUFBRSxxQ0FBcUMsbURBQW1ELEVBQUM7QUFDdkksaUJBQWlCLG1CQUFPLENBQUMsd0VBQVk7QUFDckMsMkNBQTBDLEVBQUUscUNBQXFDLCtDQUErQyxFQUFDO0FBQ2pJLGNBQWMsbUJBQU8sQ0FBQyxrRUFBUztBQUMvQix5Q0FBd0MsRUFBRSxxQ0FBcUMsNENBQTRDLEVBQUM7QUFDNUgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvdHN1Yi9kaXN0L2luZGV4LmpzP2JjMGYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlN0b3JlID0gZXhwb3J0cy5tYXRjaGVzID0gZXhwb3J0cy50cmFuc2Zvcm0gPSB2b2lkIDA7XG52YXIgdHJhbnNmb3JtZXJzXzEgPSByZXF1aXJlKFwiLi90cmFuc2Zvcm1lcnNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ0cmFuc2Zvcm1cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9faW1wb3J0RGVmYXVsdCh0cmFuc2Zvcm1lcnNfMSkuZGVmYXVsdDsgfSB9KTtcbnZhciBtYXRjaGVyc18xID0gcmVxdWlyZShcIi4vbWF0Y2hlcnNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJtYXRjaGVzXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2ltcG9ydERlZmF1bHQobWF0Y2hlcnNfMSkuZGVmYXVsdDsgfSB9KTtcbnZhciBzdG9yZV8xID0gcmVxdWlyZShcIi4vc3RvcmVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTdG9yZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX19pbXBvcnREZWZhdWx0KHN0b3JlXzEpLmRlZmF1bHQ7IH0gfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/tsub/dist/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/tsub/dist/matchers.js":
/*!******************************************************!*\
  !*** ../node_modules/@segment/tsub/dist/matchers.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar dlv_1 = __importDefault(__webpack_require__(/*! dlv */ \"(ssr)/../node_modules/dlv/dist/dlv.es.js\"));\nfunction matches(event, matcher) {\n    if (!matcher) {\n        throw new Error('No matcher supplied!');\n    }\n    switch (matcher.type) {\n        case 'all':\n            return all();\n        case 'fql':\n            return fql(matcher.ir, event);\n        default:\n            throw new Error(\"Matcher of type \".concat(matcher.type, \" unsupported.\"));\n    }\n}\nexports[\"default\"] = matches;\nfunction all() {\n    return true;\n}\nfunction fql(ir, event) {\n    if (!ir) {\n        return false;\n    }\n    try {\n        ir = JSON.parse(ir);\n    }\n    catch (e) {\n        throw new Error(\"Failed to JSON.parse FQL intermediate representation \\\"\".concat(ir, \"\\\": \").concat(e));\n    }\n    var result = fqlEvaluate(ir, event);\n    if (typeof result !== 'boolean') {\n        // An error was returned, or a lowercase, typeof, or similar function was run alone. Nothing to evaluate.\n        return false;\n    }\n    return result;\n}\n// FQL is 100% type strict in Go. Show no mercy to types which do not comply.\nfunction fqlEvaluate(ir, event) {\n    // If the given ir chunk is not an array, then we should check the single given path or value for literally `true`.\n    if (!Array.isArray(ir)) {\n        return getValue(ir, event) === true;\n    }\n    // Otherwise, it is a sequence of ordered steps to follow to reach our solution!\n    var item = ir[0];\n    switch (item) {\n        /*** Unary cases ***/\n        // '!' => Invert the result\n        case '!':\n            return !fqlEvaluate(ir[1], event);\n        /*** Binary cases ***/\n        // 'or' => Any condition being true returns true\n        case 'or':\n            for (var i = 1; i < ir.length; i++) {\n                if (fqlEvaluate(ir[i], event)) {\n                    return true;\n                }\n            }\n            return false;\n        // 'and' => Any condition being false returns false\n        case 'and':\n            for (var i = 1; i < ir.length; i++) {\n                if (!fqlEvaluate(ir[i], event)) {\n                    return false;\n                }\n            }\n            return true;\n        // Equivalence comparisons\n        case '=':\n        case '!=':\n            return compareItems(getValue(ir[1], event), getValue(ir[2], event), item, event);\n        // Numerical comparisons\n        case '<=':\n        case '<':\n        case '>':\n        case '>=':\n            // Compare the two values with the given operator.\n            return compareNumbers(getValue(ir[1], event), getValue(ir[2], event), item, event);\n        // item in [list]' => Checks whether item is in list\n        case 'in':\n            return checkInList(getValue(ir[1], event), getValue(ir[2], event), event);\n        /*** Functions ***/\n        // 'contains(str1, str2)' => The first string has a substring of the second string\n        case 'contains':\n            return contains(getValue(ir[1], event), getValue(ir[2], event));\n        // 'match(str, match)' => The given string matches the provided glob matcher\n        case 'match':\n            return match(getValue(ir[1], event), getValue(ir[2], event));\n        // 'lowercase(str)' => Returns a lowercased string, null if the item is not a string\n        case 'lowercase':\n            var target = getValue(ir[1], event);\n            if (typeof target !== 'string') {\n                return null;\n            }\n            return target.toLowerCase();\n        // 'typeof(val)' => Returns the FQL type of the value\n        case 'typeof':\n            // TODO: Do we need mapping to allow for universal comparisons? e.g. Object -> JSON, Array -> List, Floats?\n            return typeof getValue(ir[1], event);\n        // 'length(val)' => Returns the length of an array or string, NaN if neither\n        case 'length':\n            return length(getValue(ir[1], event));\n        // If nothing hit, we or the IR messed up somewhere.\n        default:\n            throw new Error(\"FQL IR could not evaluate for token: \".concat(item));\n    }\n}\nfunction getValue(item, event) {\n    // If item is an array, leave it as-is.\n    if (Array.isArray(item)) {\n        return item;\n    }\n    // If item is an object, it has the form of `{\"value\": VAL}`\n    if (typeof item === 'object') {\n        return item.value;\n    }\n    // Otherwise, it's an event path, e.g. \"properties.email\"\n    return (0, dlv_1.default)(event, item);\n}\nfunction checkInList(item, list, event) {\n    return list.find(function (it) { return getValue(it, event) === item; }) !== undefined;\n}\nfunction compareNumbers(first, second, operator, event) {\n    // Check if it's more IR (such as a length() function)\n    if (isIR(first)) {\n        first = fqlEvaluate(first, event);\n    }\n    if (isIR(second)) {\n        second = fqlEvaluate(second, event);\n    }\n    if (typeof first !== 'number' || typeof second !== 'number') {\n        return false;\n    }\n    // Reminder: NaN is not comparable to any other number (including NaN) and will always return false as desired.\n    switch (operator) {\n        // '<=' => The first number is less than or equal to the second.\n        case '<=':\n            return first <= second;\n        // '>=' => The first number is greater than or equal to the second\n        case '>=':\n            return first >= second;\n        // '<' The first number is less than the second.\n        case '<':\n            return first < second;\n        // '>' The first number is greater than the second.\n        case '>':\n            return first > second;\n        default:\n            throw new Error(\"Invalid operator in compareNumbers: \".concat(operator));\n    }\n}\nfunction compareItems(first, second, operator, event) {\n    // Check if it's more IR (such as a lowercase() function)\n    if (isIR(first)) {\n        first = fqlEvaluate(first, event);\n    }\n    if (isIR(second)) {\n        second = fqlEvaluate(second, event);\n    }\n    if (typeof first === 'object' && typeof second === 'object') {\n        first = JSON.stringify(first);\n        second = JSON.stringify(second);\n    }\n    // Objects with the exact same contents AND order ARE considered identical. (Don't compare by reference)\n    // Even in Go, this MUST be the same byte order.\n    // e.g. {a: 1, b:2} === {a: 1, b:2} BUT {a:1, b:2} !== {b:2, a:1}\n    // Maybe later we'll use a stable stringifier, but we're matching server-side behavior for now.\n    switch (operator) {\n        // '=' => The two following items are exactly identical\n        case '=':\n            return first === second;\n        // '!=' => The two following items are NOT exactly identical.\n        case '!=':\n            return first !== second;\n        default:\n            throw new Error(\"Invalid operator in compareItems: \".concat(operator));\n    }\n}\nfunction contains(first, second) {\n    if (typeof first !== 'string' || typeof second !== 'string') {\n        return false;\n    }\n    return first.indexOf(second) !== -1;\n}\nfunction match(str, glob) {\n    if (typeof str !== 'string' || typeof glob !== 'string') {\n        return false;\n    }\n    return globMatches(glob, str);\n}\nfunction length(item) {\n    // Match server-side behavior.\n    if (item === null) {\n        return 0;\n    }\n    // Type-check to avoid returning .length of an object\n    if (!Array.isArray(item) && typeof item !== 'string') {\n        return NaN;\n    }\n    return item.length;\n}\n// This is a heuristic technically speaking, but should be close enough. The odds of someone trying to test\n// a func with identical IR notation is pretty low.\nfunction isIR(value) {\n    // TODO: This can be better checked by checking if this is a {\"value\": THIS}\n    if (!Array.isArray(value)) {\n        return false;\n    }\n    // Function checks\n    if ((value[0] === 'lowercase' || value[0] === 'length' || value[0] === 'typeof') &&\n        value.length === 2) {\n        return true;\n    }\n    if ((value[0] === 'contains' || value[0] === 'match') && value.length === 3) {\n        return true;\n    }\n    return false;\n}\n// Any reputable glob matcher is designed to work on filesystems and doesn't allow the override of the separator\n// character \"/\". This is problematic since our server-side representation e.g. evaluates \"match('ab/c', 'a*)\"\n// as TRUE, whereas any glob matcher for JS available does false. So we're rewriting it here.\n// See: https://github.com/segmentio/glob/blob/master/glob.go\nfunction globMatches(pattern, str) {\n    var _a, _b;\n    Pattern: while (pattern.length > 0) {\n        var star = void 0;\n        var chunk = void 0;\n        (_a = scanChunk(pattern), star = _a.star, chunk = _a.chunk, pattern = _a.pattern);\n        if (star && chunk === '') {\n            // Trailing * matches rest of string\n            return true;\n        }\n        // Look for match at current position\n        var _c = matchChunk(chunk, str), t = _c.t, ok = _c.ok, err = _c.err;\n        if (err) {\n            return false;\n        }\n        // If we're the last chunk, make sure we've exhausted the str\n        // otherwise we'll give a false result even if we could still match\n        // using the star\n        if (ok && (t.length === 0 || pattern.length > 0)) {\n            str = t;\n            continue;\n        }\n        if (star) {\n            // Look for match, skipping i+1 bytes.\n            for (var i = 0; i < str.length; i++) {\n                ;\n                (_b = matchChunk(chunk, str.slice(i + 1)), t = _b.t, ok = _b.ok, err = _b.err);\n                if (ok) {\n                    // If we're the last chunk, make sure we exhausted the str.\n                    if (pattern.length === 0 && t.length > 0) {\n                        continue;\n                    }\n                    str = t;\n                    continue Pattern;\n                }\n                if (err) {\n                    return false;\n                }\n            }\n        }\n        return false;\n    }\n    return str.length === 0;\n}\nfunction scanChunk(pattern) {\n    var result = {\n        star: false,\n        chunk: '',\n        pattern: '',\n    };\n    while (pattern.length > 0 && pattern[0] === '*') {\n        pattern = pattern.slice(1);\n        result.star = true;\n    }\n    var inRange = false;\n    var i;\n    Scan: for (i = 0; i < pattern.length; i++) {\n        switch (pattern[i]) {\n            case '\\\\':\n                // Error check handled in matchChunk: bad pattern.\n                if (i + 1 < pattern.length) {\n                    i++;\n                }\n                break;\n            case '[':\n                inRange = true;\n                break;\n            case ']':\n                inRange = false;\n                break;\n            case '*':\n                if (!inRange) {\n                    break Scan;\n                }\n        }\n    }\n    result.chunk = pattern.slice(0, i);\n    result.pattern = pattern.slice(i);\n    return result;\n}\n// matchChunk checks whether chunk matches the beginning of s.\n// If so, it returns the remainder of s (after the match).\n// Chunk is all single-character operators: literals, char classes, and ?.\nfunction matchChunk(chunk, str) {\n    var _a, _b;\n    var result = {\n        t: '',\n        ok: false,\n        err: false,\n    };\n    while (chunk.length > 0) {\n        if (str.length === 0) {\n            return result;\n        }\n        switch (chunk[0]) {\n            case '[':\n                var char = str[0];\n                str = str.slice(1);\n                chunk = chunk.slice(1);\n                var notNegated = true;\n                if (chunk.length > 0 && chunk[0] === '^') {\n                    notNegated = false;\n                    chunk = chunk.slice(1);\n                }\n                // Parse all ranges\n                var foundMatch = false;\n                var nRange = 0;\n                while (true) {\n                    if (chunk.length > 0 && chunk[0] === ']' && nRange > 0) {\n                        chunk = chunk.slice(1);\n                        break;\n                    }\n                    var lo = '';\n                    var hi = '';\n                    var err = void 0;\n                    (_a = getEsc(chunk), lo = _a.char, chunk = _a.newChunk, err = _a.err);\n                    if (err) {\n                        return result;\n                    }\n                    hi = lo;\n                    if (chunk[0] === '-') {\n                        ;\n                        (_b = getEsc(chunk.slice(1)), hi = _b.char, chunk = _b.newChunk, err = _b.err);\n                        if (err) {\n                            return result;\n                        }\n                    }\n                    if (lo <= char && char <= hi) {\n                        foundMatch = true;\n                    }\n                    nRange++;\n                }\n                if (foundMatch !== notNegated) {\n                    return result;\n                }\n                break;\n            case '?':\n                str = str.slice(1);\n                chunk = chunk.slice(1);\n                break;\n            case '\\\\':\n                chunk = chunk.slice(1);\n                if (chunk.length === 0) {\n                    result.err = true;\n                    return result;\n                }\n            // Fallthrough, missing break intentional.\n            default:\n                if (chunk[0] !== str[0]) {\n                    return result;\n                }\n                str = str.slice(1);\n                chunk = chunk.slice(1);\n        }\n    }\n    result.t = str;\n    result.ok = true;\n    result.err = false;\n    return result;\n}\n// getEsc gets a possibly-escaped character from chunk, for a character class.\nfunction getEsc(chunk) {\n    var result = {\n        char: '',\n        newChunk: '',\n        err: false,\n    };\n    if (chunk.length === 0 || chunk[0] === '-' || chunk[0] === ']') {\n        result.err = true;\n        return result;\n    }\n    if (chunk[0] === '\\\\') {\n        chunk = chunk.slice(1);\n        if (chunk.length === 0) {\n            result.err = true;\n            return result;\n        }\n    }\n    // Unlike Go, JS strings operate on characters instead of bytes.\n    // This is why we aren't copying over the GetRuneFromString stuff.\n    result.char = chunk[0];\n    result.newChunk = chunk.slice(1);\n    if (result.newChunk.length === 0) {\n        result.err = true;\n    }\n    return result;\n}\n//# sourceMappingURL=matchers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L3RzdWIvZGlzdC9tYXRjaGVycy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDRCQUE0QixtQkFBTyxDQUFDLHFEQUFLO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZUFBZTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixlQUFlO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsYUFBYTtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzQ0FBc0M7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsV0FBVyxLQUFLLFdBQVcsS0FBSyxVQUFVLEtBQUs7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvQkFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC90c3ViL2Rpc3QvbWF0Y2hlcnMuanM/MDUwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBkbHZfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiZGx2XCIpKTtcbmZ1bmN0aW9uIG1hdGNoZXMoZXZlbnQsIG1hdGNoZXIpIHtcbiAgICBpZiAoIW1hdGNoZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBtYXRjaGVyIHN1cHBsaWVkIScpO1xuICAgIH1cbiAgICBzd2l0Y2ggKG1hdGNoZXIudHlwZSkge1xuICAgICAgICBjYXNlICdhbGwnOlxuICAgICAgICAgICAgcmV0dXJuIGFsbCgpO1xuICAgICAgICBjYXNlICdmcWwnOlxuICAgICAgICAgICAgcmV0dXJuIGZxbChtYXRjaGVyLmlyLCBldmVudCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXRjaGVyIG9mIHR5cGUgXCIuY29uY2F0KG1hdGNoZXIudHlwZSwgXCIgdW5zdXBwb3J0ZWQuXCIpKTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBtYXRjaGVzO1xuZnVuY3Rpb24gYWxsKCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gZnFsKGlyLCBldmVudCkge1xuICAgIGlmICghaXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpciA9IEpTT04ucGFyc2UoaXIpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gSlNPTi5wYXJzZSBGUUwgaW50ZXJtZWRpYXRlIHJlcHJlc2VudGF0aW9uIFxcXCJcIi5jb25jYXQoaXIsIFwiXFxcIjogXCIpLmNvbmNhdChlKSk7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBmcWxFdmFsdWF0ZShpciwgZXZlbnQpO1xuICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgLy8gQW4gZXJyb3Igd2FzIHJldHVybmVkLCBvciBhIGxvd2VyY2FzZSwgdHlwZW9mLCBvciBzaW1pbGFyIGZ1bmN0aW9uIHdhcyBydW4gYWxvbmUuIE5vdGhpbmcgdG8gZXZhbHVhdGUuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIEZRTCBpcyAxMDAlIHR5cGUgc3RyaWN0IGluIEdvLiBTaG93IG5vIG1lcmN5IHRvIHR5cGVzIHdoaWNoIGRvIG5vdCBjb21wbHkuXG5mdW5jdGlvbiBmcWxFdmFsdWF0ZShpciwgZXZlbnQpIHtcbiAgICAvLyBJZiB0aGUgZ2l2ZW4gaXIgY2h1bmsgaXMgbm90IGFuIGFycmF5LCB0aGVuIHdlIHNob3VsZCBjaGVjayB0aGUgc2luZ2xlIGdpdmVuIHBhdGggb3IgdmFsdWUgZm9yIGxpdGVyYWxseSBgdHJ1ZWAuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGlyKSkge1xuICAgICAgICByZXR1cm4gZ2V0VmFsdWUoaXIsIGV2ZW50KSA9PT0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlLCBpdCBpcyBhIHNlcXVlbmNlIG9mIG9yZGVyZWQgc3RlcHMgdG8gZm9sbG93IHRvIHJlYWNoIG91ciBzb2x1dGlvbiFcbiAgICB2YXIgaXRlbSA9IGlyWzBdO1xuICAgIHN3aXRjaCAoaXRlbSkge1xuICAgICAgICAvKioqIFVuYXJ5IGNhc2VzICoqKi9cbiAgICAgICAgLy8gJyEnID0+IEludmVydCB0aGUgcmVzdWx0XG4gICAgICAgIGNhc2UgJyEnOlxuICAgICAgICAgICAgcmV0dXJuICFmcWxFdmFsdWF0ZShpclsxXSwgZXZlbnQpO1xuICAgICAgICAvKioqIEJpbmFyeSBjYXNlcyAqKiovXG4gICAgICAgIC8vICdvcicgPT4gQW55IGNvbmRpdGlvbiBiZWluZyB0cnVlIHJldHVybnMgdHJ1ZVxuICAgICAgICBjYXNlICdvcic6XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGlyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZxbEV2YWx1YXRlKGlyW2ldLCBldmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyAnYW5kJyA9PiBBbnkgY29uZGl0aW9uIGJlaW5nIGZhbHNlIHJldHVybnMgZmFsc2VcbiAgICAgICAgY2FzZSAnYW5kJzpcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgaXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZxbEV2YWx1YXRlKGlyW2ldLCBldmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyBFcXVpdmFsZW5jZSBjb21wYXJpc29uc1xuICAgICAgICBjYXNlICc9JzpcbiAgICAgICAgY2FzZSAnIT0nOlxuICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVJdGVtcyhnZXRWYWx1ZShpclsxXSwgZXZlbnQpLCBnZXRWYWx1ZShpclsyXSwgZXZlbnQpLCBpdGVtLCBldmVudCk7XG4gICAgICAgIC8vIE51bWVyaWNhbCBjb21wYXJpc29uc1xuICAgICAgICBjYXNlICc8PSc6XG4gICAgICAgIGNhc2UgJzwnOlxuICAgICAgICBjYXNlICc+JzpcbiAgICAgICAgY2FzZSAnPj0nOlxuICAgICAgICAgICAgLy8gQ29tcGFyZSB0aGUgdHdvIHZhbHVlcyB3aXRoIHRoZSBnaXZlbiBvcGVyYXRvci5cbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlTnVtYmVycyhnZXRWYWx1ZShpclsxXSwgZXZlbnQpLCBnZXRWYWx1ZShpclsyXSwgZXZlbnQpLCBpdGVtLCBldmVudCk7XG4gICAgICAgIC8vIGl0ZW0gaW4gW2xpc3RdJyA9PiBDaGVja3Mgd2hldGhlciBpdGVtIGlzIGluIGxpc3RcbiAgICAgICAgY2FzZSAnaW4nOlxuICAgICAgICAgICAgcmV0dXJuIGNoZWNrSW5MaXN0KGdldFZhbHVlKGlyWzFdLCBldmVudCksIGdldFZhbHVlKGlyWzJdLCBldmVudCksIGV2ZW50KTtcbiAgICAgICAgLyoqKiBGdW5jdGlvbnMgKioqL1xuICAgICAgICAvLyAnY29udGFpbnMoc3RyMSwgc3RyMiknID0+IFRoZSBmaXJzdCBzdHJpbmcgaGFzIGEgc3Vic3RyaW5nIG9mIHRoZSBzZWNvbmQgc3RyaW5nXG4gICAgICAgIGNhc2UgJ2NvbnRhaW5zJzpcbiAgICAgICAgICAgIHJldHVybiBjb250YWlucyhnZXRWYWx1ZShpclsxXSwgZXZlbnQpLCBnZXRWYWx1ZShpclsyXSwgZXZlbnQpKTtcbiAgICAgICAgLy8gJ21hdGNoKHN0ciwgbWF0Y2gpJyA9PiBUaGUgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgdGhlIHByb3ZpZGVkIGdsb2IgbWF0Y2hlclxuICAgICAgICBjYXNlICdtYXRjaCc6XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2goZ2V0VmFsdWUoaXJbMV0sIGV2ZW50KSwgZ2V0VmFsdWUoaXJbMl0sIGV2ZW50KSk7XG4gICAgICAgIC8vICdsb3dlcmNhc2Uoc3RyKScgPT4gUmV0dXJucyBhIGxvd2VyY2FzZWQgc3RyaW5nLCBudWxsIGlmIHRoZSBpdGVtIGlzIG5vdCBhIHN0cmluZ1xuICAgICAgICBjYXNlICdsb3dlcmNhc2UnOlxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGdldFZhbHVlKGlyWzFdLCBldmVudCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgLy8gJ3R5cGVvZih2YWwpJyA9PiBSZXR1cm5zIHRoZSBGUUwgdHlwZSBvZiB0aGUgdmFsdWVcbiAgICAgICAgY2FzZSAndHlwZW9mJzpcbiAgICAgICAgICAgIC8vIFRPRE86IERvIHdlIG5lZWQgbWFwcGluZyB0byBhbGxvdyBmb3IgdW5pdmVyc2FsIGNvbXBhcmlzb25zPyBlLmcuIE9iamVjdCAtPiBKU09OLCBBcnJheSAtPiBMaXN0LCBGbG9hdHM/XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGdldFZhbHVlKGlyWzFdLCBldmVudCk7XG4gICAgICAgIC8vICdsZW5ndGgodmFsKScgPT4gUmV0dXJucyB0aGUgbGVuZ3RoIG9mIGFuIGFycmF5IG9yIHN0cmluZywgTmFOIGlmIG5laXRoZXJcbiAgICAgICAgY2FzZSAnbGVuZ3RoJzpcbiAgICAgICAgICAgIHJldHVybiBsZW5ndGgoZ2V0VmFsdWUoaXJbMV0sIGV2ZW50KSk7XG4gICAgICAgIC8vIElmIG5vdGhpbmcgaGl0LCB3ZSBvciB0aGUgSVIgbWVzc2VkIHVwIHNvbWV3aGVyZS5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZRTCBJUiBjb3VsZCBub3QgZXZhbHVhdGUgZm9yIHRva2VuOiBcIi5jb25jYXQoaXRlbSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFZhbHVlKGl0ZW0sIGV2ZW50KSB7XG4gICAgLy8gSWYgaXRlbSBpcyBhbiBhcnJheSwgbGVhdmUgaXQgYXMtaXMuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIC8vIElmIGl0ZW0gaXMgYW4gb2JqZWN0LCBpdCBoYXMgdGhlIGZvcm0gb2YgYHtcInZhbHVlXCI6IFZBTH1gXG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlLCBpdCdzIGFuIGV2ZW50IHBhdGgsIGUuZy4gXCJwcm9wZXJ0aWVzLmVtYWlsXCJcbiAgICByZXR1cm4gKDAsIGRsdl8xLmRlZmF1bHQpKGV2ZW50LCBpdGVtKTtcbn1cbmZ1bmN0aW9uIGNoZWNrSW5MaXN0KGl0ZW0sIGxpc3QsIGV2ZW50KSB7XG4gICAgcmV0dXJuIGxpc3QuZmluZChmdW5jdGlvbiAoaXQpIHsgcmV0dXJuIGdldFZhbHVlKGl0LCBldmVudCkgPT09IGl0ZW07IH0pICE9PSB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBjb21wYXJlTnVtYmVycyhmaXJzdCwgc2Vjb25kLCBvcGVyYXRvciwgZXZlbnQpIHtcbiAgICAvLyBDaGVjayBpZiBpdCdzIG1vcmUgSVIgKHN1Y2ggYXMgYSBsZW5ndGgoKSBmdW5jdGlvbilcbiAgICBpZiAoaXNJUihmaXJzdCkpIHtcbiAgICAgICAgZmlyc3QgPSBmcWxFdmFsdWF0ZShmaXJzdCwgZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoaXNJUihzZWNvbmQpKSB7XG4gICAgICAgIHNlY29uZCA9IGZxbEV2YWx1YXRlKHNlY29uZCwgZXZlbnQpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGZpcnN0ICE9PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc2Vjb25kICE9PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIFJlbWluZGVyOiBOYU4gaXMgbm90IGNvbXBhcmFibGUgdG8gYW55IG90aGVyIG51bWJlciAoaW5jbHVkaW5nIE5hTikgYW5kIHdpbGwgYWx3YXlzIHJldHVybiBmYWxzZSBhcyBkZXNpcmVkLlxuICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICAgICAgLy8gJzw9JyA9PiBUaGUgZmlyc3QgbnVtYmVyIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgc2Vjb25kLlxuICAgICAgICBjYXNlICc8PSc6XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QgPD0gc2Vjb25kO1xuICAgICAgICAvLyAnPj0nID0+IFRoZSBmaXJzdCBudW1iZXIgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzZWNvbmRcbiAgICAgICAgY2FzZSAnPj0nOlxuICAgICAgICAgICAgcmV0dXJuIGZpcnN0ID49IHNlY29uZDtcbiAgICAgICAgLy8gJzwnIFRoZSBmaXJzdCBudW1iZXIgaXMgbGVzcyB0aGFuIHRoZSBzZWNvbmQuXG4gICAgICAgIGNhc2UgJzwnOlxuICAgICAgICAgICAgcmV0dXJuIGZpcnN0IDwgc2Vjb25kO1xuICAgICAgICAvLyAnPicgVGhlIGZpcnN0IG51bWJlciBpcyBncmVhdGVyIHRoYW4gdGhlIHNlY29uZC5cbiAgICAgICAgY2FzZSAnPic6XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QgPiBzZWNvbmQ7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wZXJhdG9yIGluIGNvbXBhcmVOdW1iZXJzOiBcIi5jb25jYXQob3BlcmF0b3IpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb21wYXJlSXRlbXMoZmlyc3QsIHNlY29uZCwgb3BlcmF0b3IsIGV2ZW50KSB7XG4gICAgLy8gQ2hlY2sgaWYgaXQncyBtb3JlIElSIChzdWNoIGFzIGEgbG93ZXJjYXNlKCkgZnVuY3Rpb24pXG4gICAgaWYgKGlzSVIoZmlyc3QpKSB7XG4gICAgICAgIGZpcnN0ID0gZnFsRXZhbHVhdGUoZmlyc3QsIGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKGlzSVIoc2Vjb25kKSkge1xuICAgICAgICBzZWNvbmQgPSBmcWxFdmFsdWF0ZShzZWNvbmQsIGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmaXJzdCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHNlY29uZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZmlyc3QgPSBKU09OLnN0cmluZ2lmeShmaXJzdCk7XG4gICAgICAgIHNlY29uZCA9IEpTT04uc3RyaW5naWZ5KHNlY29uZCk7XG4gICAgfVxuICAgIC8vIE9iamVjdHMgd2l0aCB0aGUgZXhhY3Qgc2FtZSBjb250ZW50cyBBTkQgb3JkZXIgQVJFIGNvbnNpZGVyZWQgaWRlbnRpY2FsLiAoRG9uJ3QgY29tcGFyZSBieSByZWZlcmVuY2UpXG4gICAgLy8gRXZlbiBpbiBHbywgdGhpcyBNVVNUIGJlIHRoZSBzYW1lIGJ5dGUgb3JkZXIuXG4gICAgLy8gZS5nLiB7YTogMSwgYjoyfSA9PT0ge2E6IDEsIGI6Mn0gQlVUIHthOjEsIGI6Mn0gIT09IHtiOjIsIGE6MX1cbiAgICAvLyBNYXliZSBsYXRlciB3ZSdsbCB1c2UgYSBzdGFibGUgc3RyaW5naWZpZXIsIGJ1dCB3ZSdyZSBtYXRjaGluZyBzZXJ2ZXItc2lkZSBiZWhhdmlvciBmb3Igbm93LlxuICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICAgICAgLy8gJz0nID0+IFRoZSB0d28gZm9sbG93aW5nIGl0ZW1zIGFyZSBleGFjdGx5IGlkZW50aWNhbFxuICAgICAgICBjYXNlICc9JzpcbiAgICAgICAgICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kO1xuICAgICAgICAvLyAnIT0nID0+IFRoZSB0d28gZm9sbG93aW5nIGl0ZW1zIGFyZSBOT1QgZXhhY3RseSBpZGVudGljYWwuXG4gICAgICAgIGNhc2UgJyE9JzpcbiAgICAgICAgICAgIHJldHVybiBmaXJzdCAhPT0gc2Vjb25kO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcGVyYXRvciBpbiBjb21wYXJlSXRlbXM6IFwiLmNvbmNhdChvcGVyYXRvcikpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbnRhaW5zKGZpcnN0LCBzZWNvbmQpIHtcbiAgICBpZiAodHlwZW9mIGZpcnN0ICE9PSAnc3RyaW5nJyB8fCB0eXBlb2Ygc2Vjb25kICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBmaXJzdC5pbmRleE9mKHNlY29uZCkgIT09IC0xO1xufVxuZnVuY3Rpb24gbWF0Y2goc3RyLCBnbG9iKSB7XG4gICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnIHx8IHR5cGVvZiBnbG9iICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBnbG9iTWF0Y2hlcyhnbG9iLCBzdHIpO1xufVxuZnVuY3Rpb24gbGVuZ3RoKGl0ZW0pIHtcbiAgICAvLyBNYXRjaCBzZXJ2ZXItc2lkZSBiZWhhdmlvci5cbiAgICBpZiAoaXRlbSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLy8gVHlwZS1jaGVjayB0byBhdm9pZCByZXR1cm5pbmcgLmxlbmd0aCBvZiBhbiBvYmplY3RcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoaXRlbSkgJiYgdHlwZW9mIGl0ZW0gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgfVxuICAgIHJldHVybiBpdGVtLmxlbmd0aDtcbn1cbi8vIFRoaXMgaXMgYSBoZXVyaXN0aWMgdGVjaG5pY2FsbHkgc3BlYWtpbmcsIGJ1dCBzaG91bGQgYmUgY2xvc2UgZW5vdWdoLiBUaGUgb2RkcyBvZiBzb21lb25lIHRyeWluZyB0byB0ZXN0XG4vLyBhIGZ1bmMgd2l0aCBpZGVudGljYWwgSVIgbm90YXRpb24gaXMgcHJldHR5IGxvdy5cbmZ1bmN0aW9uIGlzSVIodmFsdWUpIHtcbiAgICAvLyBUT0RPOiBUaGlzIGNhbiBiZSBiZXR0ZXIgY2hlY2tlZCBieSBjaGVja2luZyBpZiB0aGlzIGlzIGEge1widmFsdWVcIjogVEhJU31cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gRnVuY3Rpb24gY2hlY2tzXG4gICAgaWYgKCh2YWx1ZVswXSA9PT0gJ2xvd2VyY2FzZScgfHwgdmFsdWVbMF0gPT09ICdsZW5ndGgnIHx8IHZhbHVlWzBdID09PSAndHlwZW9mJykgJiZcbiAgICAgICAgdmFsdWUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZhbHVlWzBdID09PSAnY29udGFpbnMnIHx8IHZhbHVlWzBdID09PSAnbWF0Y2gnKSAmJiB2YWx1ZS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIEFueSByZXB1dGFibGUgZ2xvYiBtYXRjaGVyIGlzIGRlc2lnbmVkIHRvIHdvcmsgb24gZmlsZXN5c3RlbXMgYW5kIGRvZXNuJ3QgYWxsb3cgdGhlIG92ZXJyaWRlIG9mIHRoZSBzZXBhcmF0b3Jcbi8vIGNoYXJhY3RlciBcIi9cIi4gVGhpcyBpcyBwcm9ibGVtYXRpYyBzaW5jZSBvdXIgc2VydmVyLXNpZGUgcmVwcmVzZW50YXRpb24gZS5nLiBldmFsdWF0ZXMgXCJtYXRjaCgnYWIvYycsICdhKilcIlxuLy8gYXMgVFJVRSwgd2hlcmVhcyBhbnkgZ2xvYiBtYXRjaGVyIGZvciBKUyBhdmFpbGFibGUgZG9lcyBmYWxzZS4gU28gd2UncmUgcmV3cml0aW5nIGl0IGhlcmUuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zZWdtZW50aW8vZ2xvYi9ibG9iL21hc3Rlci9nbG9iLmdvXG5mdW5jdGlvbiBnbG9iTWF0Y2hlcyhwYXR0ZXJuLCBzdHIpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIFBhdHRlcm46IHdoaWxlIChwYXR0ZXJuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHN0YXIgPSB2b2lkIDA7XG4gICAgICAgIHZhciBjaHVuayA9IHZvaWQgMDtcbiAgICAgICAgKF9hID0gc2NhbkNodW5rKHBhdHRlcm4pLCBzdGFyID0gX2Euc3RhciwgY2h1bmsgPSBfYS5jaHVuaywgcGF0dGVybiA9IF9hLnBhdHRlcm4pO1xuICAgICAgICBpZiAoc3RhciAmJiBjaHVuayA9PT0gJycpIHtcbiAgICAgICAgICAgIC8vIFRyYWlsaW5nICogbWF0Y2hlcyByZXN0IG9mIHN0cmluZ1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTG9vayBmb3IgbWF0Y2ggYXQgY3VycmVudCBwb3NpdGlvblxuICAgICAgICB2YXIgX2MgPSBtYXRjaENodW5rKGNodW5rLCBzdHIpLCB0ID0gX2MudCwgb2sgPSBfYy5vaywgZXJyID0gX2MuZXJyO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UncmUgdGhlIGxhc3QgY2h1bmssIG1ha2Ugc3VyZSB3ZSd2ZSBleGhhdXN0ZWQgdGhlIHN0clxuICAgICAgICAvLyBvdGhlcndpc2Ugd2UnbGwgZ2l2ZSBhIGZhbHNlIHJlc3VsdCBldmVuIGlmIHdlIGNvdWxkIHN0aWxsIG1hdGNoXG4gICAgICAgIC8vIHVzaW5nIHRoZSBzdGFyXG4gICAgICAgIGlmIChvayAmJiAodC5sZW5ndGggPT09IDAgfHwgcGF0dGVybi5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgc3RyID0gdDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFyKSB7XG4gICAgICAgICAgICAvLyBMb29rIGZvciBtYXRjaCwgc2tpcHBpbmcgaSsxIGJ5dGVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgKF9iID0gbWF0Y2hDaHVuayhjaHVuaywgc3RyLnNsaWNlKGkgKyAxKSksIHQgPSBfYi50LCBvayA9IF9iLm9rLCBlcnIgPSBfYi5lcnIpO1xuICAgICAgICAgICAgICAgIGlmIChvaykge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSB0aGUgbGFzdCBjaHVuaywgbWFrZSBzdXJlIHdlIGV4aGF1c3RlZCB0aGUgc3RyLlxuICAgICAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5sZW5ndGggPT09IDAgJiYgdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdHIgPSB0O1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBQYXR0ZXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLmxlbmd0aCA9PT0gMDtcbn1cbmZ1bmN0aW9uIHNjYW5DaHVuayhwYXR0ZXJuKSB7XG4gICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgc3RhcjogZmFsc2UsXG4gICAgICAgIGNodW5rOiAnJyxcbiAgICAgICAgcGF0dGVybjogJycsXG4gICAgfTtcbiAgICB3aGlsZSAocGF0dGVybi5sZW5ndGggPiAwICYmIHBhdHRlcm5bMF0gPT09ICcqJykge1xuICAgICAgICBwYXR0ZXJuID0gcGF0dGVybi5zbGljZSgxKTtcbiAgICAgICAgcmVzdWx0LnN0YXIgPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgaW5SYW5nZSA9IGZhbHNlO1xuICAgIHZhciBpO1xuICAgIFNjYW46IGZvciAoaSA9IDA7IGkgPCBwYXR0ZXJuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN3aXRjaCAocGF0dGVybltpXSkge1xuICAgICAgICAgICAgY2FzZSAnXFxcXCc6XG4gICAgICAgICAgICAgICAgLy8gRXJyb3IgY2hlY2sgaGFuZGxlZCBpbiBtYXRjaENodW5rOiBiYWQgcGF0dGVybi5cbiAgICAgICAgICAgICAgICBpZiAoaSArIDEgPCBwYXR0ZXJuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnWyc6XG4gICAgICAgICAgICAgICAgaW5SYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICddJzpcbiAgICAgICAgICAgICAgICBpblJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcqJzpcbiAgICAgICAgICAgICAgICBpZiAoIWluUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgU2NhbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0LmNodW5rID0gcGF0dGVybi5zbGljZSgwLCBpKTtcbiAgICByZXN1bHQucGF0dGVybiA9IHBhdHRlcm4uc2xpY2UoaSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIG1hdGNoQ2h1bmsgY2hlY2tzIHdoZXRoZXIgY2h1bmsgbWF0Y2hlcyB0aGUgYmVnaW5uaW5nIG9mIHMuXG4vLyBJZiBzbywgaXQgcmV0dXJucyB0aGUgcmVtYWluZGVyIG9mIHMgKGFmdGVyIHRoZSBtYXRjaCkuXG4vLyBDaHVuayBpcyBhbGwgc2luZ2xlLWNoYXJhY3RlciBvcGVyYXRvcnM6IGxpdGVyYWxzLCBjaGFyIGNsYXNzZXMsIGFuZCA/LlxuZnVuY3Rpb24gbWF0Y2hDaHVuayhjaHVuaywgc3RyKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICB0OiAnJyxcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBlcnI6IGZhbHNlLFxuICAgIH07XG4gICAgd2hpbGUgKGNodW5rLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChjaHVua1swXSkge1xuICAgICAgICAgICAgY2FzZSAnWyc6XG4gICAgICAgICAgICAgICAgdmFyIGNoYXIgPSBzdHJbMF07XG4gICAgICAgICAgICAgICAgc3RyID0gc3RyLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmsuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgdmFyIG5vdE5lZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChjaHVuay5sZW5ndGggPiAwICYmIGNodW5rWzBdID09PSAnXicpIHtcbiAgICAgICAgICAgICAgICAgICAgbm90TmVnYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBQYXJzZSBhbGwgcmFuZ2VzXG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kTWF0Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgblJhbmdlID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsubGVuZ3RoID4gMCAmJiBjaHVua1swXSA9PT0gJ10nICYmIG5SYW5nZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmsuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgbG8gPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhpID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IGdldEVzYyhjaHVuayksIGxvID0gX2EuY2hhciwgY2h1bmsgPSBfYS5uZXdDaHVuaywgZXJyID0gX2EuZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBoaSA9IGxvO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtbMF0gPT09ICctJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgKF9iID0gZ2V0RXNjKGNodW5rLnNsaWNlKDEpKSwgaGkgPSBfYi5jaGFyLCBjaHVuayA9IF9iLm5ld0NodW5rLCBlcnIgPSBfYi5lcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvIDw9IGNoYXIgJiYgY2hhciA8PSBoaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgblJhbmdlKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3VuZE1hdGNoICE9PSBub3ROZWdhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnPyc6XG4gICAgICAgICAgICAgICAgc3RyID0gc3RyLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmsuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdcXFxcJzpcbiAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIGlmIChjaHVuay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmVyciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmFsbHRocm91Z2gsIG1pc3NpbmcgYnJlYWsgaW50ZW50aW9uYWwuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChjaHVua1swXSAhPT0gc3RyWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC50ID0gc3RyO1xuICAgIHJlc3VsdC5vayA9IHRydWU7XG4gICAgcmVzdWx0LmVyciA9IGZhbHNlO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyBnZXRFc2MgZ2V0cyBhIHBvc3NpYmx5LWVzY2FwZWQgY2hhcmFjdGVyIGZyb20gY2h1bmssIGZvciBhIGNoYXJhY3RlciBjbGFzcy5cbmZ1bmN0aW9uIGdldEVzYyhjaHVuaykge1xuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgIGNoYXI6ICcnLFxuICAgICAgICBuZXdDaHVuazogJycsXG4gICAgICAgIGVycjogZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoY2h1bmsubGVuZ3RoID09PSAwIHx8IGNodW5rWzBdID09PSAnLScgfHwgY2h1bmtbMF0gPT09ICddJykge1xuICAgICAgICByZXN1bHQuZXJyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgaWYgKGNodW5rWzBdID09PSAnXFxcXCcpIHtcbiAgICAgICAgY2h1bmsgPSBjaHVuay5zbGljZSgxKTtcbiAgICAgICAgaWYgKGNodW5rLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0LmVyciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFVubGlrZSBHbywgSlMgc3RyaW5ncyBvcGVyYXRlIG9uIGNoYXJhY3RlcnMgaW5zdGVhZCBvZiBieXRlcy5cbiAgICAvLyBUaGlzIGlzIHdoeSB3ZSBhcmVuJ3QgY29weWluZyBvdmVyIHRoZSBHZXRSdW5lRnJvbVN0cmluZyBzdHVmZi5cbiAgICByZXN1bHQuY2hhciA9IGNodW5rWzBdO1xuICAgIHJlc3VsdC5uZXdDaHVuayA9IGNodW5rLnNsaWNlKDEpO1xuICAgIGlmIChyZXN1bHQubmV3Q2h1bmsubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlc3VsdC5lcnIgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0Y2hlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/tsub/dist/matchers.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/tsub/dist/store.js":
/*!***************************************************!*\
  !*** ../node_modules/@segment/tsub/dist/store.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar Store = /** @class */ (function () {\n    function Store(rules) {\n        this.rules = [];\n        this.rules = rules || [];\n    }\n    Store.prototype.getRulesByDestinationName = function (destinationName) {\n        var rules = [];\n        for (var _i = 0, _a = this.rules; _i < _a.length; _i++) {\n            var rule = _a[_i];\n            // Rules with no destinationName are global (workspace || workspace::source)\n            if (rule.destinationName === destinationName || rule.destinationName === undefined) {\n                rules.push(rule);\n            }\n        }\n        return rules;\n    };\n    return Store;\n}());\nexports[\"default\"] = Store;\n//# sourceMappingURL=store.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L3RzdWIvZGlzdC9zdG9yZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxnQkFBZ0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvdHN1Yi9kaXN0L3N0b3JlLmpzPzgwNmQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RvcmUocnVsZXMpIHtcbiAgICAgICAgdGhpcy5ydWxlcyA9IFtdO1xuICAgICAgICB0aGlzLnJ1bGVzID0gcnVsZXMgfHwgW107XG4gICAgfVxuICAgIFN0b3JlLnByb3RvdHlwZS5nZXRSdWxlc0J5RGVzdGluYXRpb25OYW1lID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uTmFtZSkge1xuICAgICAgICB2YXIgcnVsZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucnVsZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcnVsZSA9IF9hW19pXTtcbiAgICAgICAgICAgIC8vIFJ1bGVzIHdpdGggbm8gZGVzdGluYXRpb25OYW1lIGFyZSBnbG9iYWwgKHdvcmtzcGFjZSB8fCB3b3Jrc3BhY2U6OnNvdXJjZSlcbiAgICAgICAgICAgIGlmIChydWxlLmRlc3RpbmF0aW9uTmFtZSA9PT0gZGVzdGluYXRpb25OYW1lIHx8IHJ1bGUuZGVzdGluYXRpb25OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBydWxlcy5wdXNoKHJ1bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydWxlcztcbiAgICB9O1xuICAgIHJldHVybiBTdG9yZTtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTdG9yZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/tsub/dist/store.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/tsub/dist/transformers.js":
/*!**********************************************************!*\
  !*** ../node_modules/@segment/tsub/dist/transformers.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar md5_1 = __importDefault(__webpack_require__(/*! tiny-hashes/md5 */ \"(ssr)/../node_modules/tiny-hashes/md5/index.mjs\"));\nvar dlv_1 = __importDefault(__webpack_require__(/*! dlv */ \"(ssr)/../node_modules/dlv/dist/dlv.es.js\"));\nvar math_base_special_ldexp_1 = __importDefault(__webpack_require__(/*! @stdlib/math-base-special-ldexp */ \"(ssr)/../node_modules/@stdlib/math-base-special-ldexp/lib/index.js\"));\nvar dset_1 = __webpack_require__(/*! dset */ \"(ssr)/../node_modules/dset/dist/index.js\");\nvar unset_1 = __webpack_require__(/*! ./unset */ \"(ssr)/../node_modules/@segment/tsub/dist/unset.js\");\nfunction transform(payload, transformers) {\n    var transformedPayload = payload;\n    for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n        var transformer = transformers_1[_i];\n        switch (transformer.type) {\n            case 'drop':\n                return null;\n            case 'drop_properties':\n                dropProperties(transformedPayload, transformer.config);\n                break;\n            case 'allow_properties':\n                allowProperties(transformedPayload, transformer.config);\n                break;\n            case 'sample_event':\n                if (sampleEvent(transformedPayload, transformer.config)) {\n                    break;\n                }\n                return null;\n            case 'map_properties':\n                mapProperties(transformedPayload, transformer.config);\n                break;\n            case 'hash_properties':\n                // Not yet supported, but don't throw an error. Just ignore.\n                break;\n            default:\n                throw new Error(\"Transformer of type \\\"\".concat(transformer.type, \"\\\" is unsupported.\"));\n        }\n    }\n    return transformedPayload;\n}\nexports[\"default\"] = transform;\n// dropProperties removes all specified props from the object.\nfunction dropProperties(payload, config) {\n    filterProperties(payload, config.drop, function (matchedObj, dropList) {\n        dropList.forEach(function (k) { return delete matchedObj[k]; });\n    });\n}\n// allowProperties ONLY allows the specific targets within the keys. (e.g. \"a.foo\": [\"bar\", \"baz\"]\n// on {a: {foo: {bar: 1, baz: 2}, other: 3}} will not have any drops, as it only looks inside a.foo\nfunction allowProperties(payload, config) {\n    filterProperties(payload, config.allow, function (matchedObj, preserveList) {\n        Object.keys(matchedObj).forEach(function (key) {\n            if (!preserveList.includes(key)) {\n                delete matchedObj[key];\n            }\n        });\n    });\n}\nfunction filterProperties(payload, ruleSet, filterCb) {\n    Object.entries(ruleSet).forEach(function (_a) {\n        var key = _a[0], targets = _a[1];\n        var filter = function (obj) {\n            // Can only act on objects.\n            if (typeof obj !== 'object' || obj === null) {\n                return;\n            }\n            filterCb(obj, targets);\n        };\n        // If key is empty, it refers to the top-level object.\n        var matchedObject = key === '' ? payload : (0, dlv_1.default)(payload, key);\n        if (Array.isArray(matchedObject)) {\n            matchedObject.forEach(filter);\n        }\n        else {\n            filter(matchedObject);\n        }\n    });\n}\nfunction mapProperties(payload, config) {\n    // Some configs might try to modify or read from a field multiple times. We will only ever read\n    // values as they were before any modifications began. Thus, if you try to override e.g.\n    // {a: {b: 1}} with set(a, 'b', 2) (which results in {a: {b: 2}}) and then try to copy a.b into\n    // a.c, you will get {a: {b: 2, c:1}} and NOT {a: {b:2, c:2}}. This prevents map evaluation\n    // order from mattering, and === what server-side does.\n    // See: https://github.com/segmentio/tsub/blob/661695a63b60b90471796e667458f076af788c19/transformers/map_properties.go#L179-L200\n    var initialPayload = JSON.parse(JSON.stringify(payload));\n    for (var key in config.map) {\n        if (!config.map.hasOwnProperty(key)) {\n            continue;\n        }\n        var actionMap = config.map[key];\n        // Can't manipulate non-objects. Check that the parent is one. Strip the last .field\n        // from the string.\n        var splitKey = key.split('.');\n        var parent_1 = void 0;\n        if (splitKey.length > 1) {\n            splitKey.pop();\n            parent_1 = (0, dlv_1.default)(initialPayload, splitKey.join('.'));\n        }\n        else {\n            parent_1 = payload;\n        }\n        if (typeof parent_1 !== 'object') {\n            continue;\n        }\n        // These actions are exclusive to each other.\n        if (actionMap.copy) {\n            var valueToCopy = (0, dlv_1.default)(initialPayload, actionMap.copy);\n            if (valueToCopy !== undefined) {\n                (0, dset_1.dset)(payload, key, valueToCopy);\n            }\n        }\n        else if (actionMap.move) {\n            var valueToMove = (0, dlv_1.default)(initialPayload, actionMap.move);\n            if (valueToMove !== undefined) {\n                (0, dset_1.dset)(payload, key, valueToMove);\n            }\n            (0, unset_1.unset)(payload, actionMap.move);\n        }\n        // Have to check only if property exists, as null, undefined, and other vals could be explicitly set.\n        else if (actionMap.hasOwnProperty('set')) {\n            (0, dset_1.dset)(payload, key, actionMap.set);\n        }\n        // to_string is not exclusive and can be paired with other actions. Final action.\n        if (actionMap.to_string) {\n            var valueToString = (0, dlv_1.default)(payload, key);\n            // Do not string arrays and objects. Do not double-encode strings.\n            if (typeof valueToString === 'string' ||\n                (typeof valueToString === 'object' && valueToString !== null)) {\n                continue;\n            }\n            // TODO: Check stringifier in Golang for parity.\n            if (valueToString !== undefined) {\n                (0, dset_1.dset)(payload, key, JSON.stringify(valueToString));\n            }\n            else {\n                // TODO: Check this behavior.\n                (0, dset_1.dset)(payload, key, 'undefined');\n            }\n        }\n    }\n}\nfunction sampleEvent(payload, config) {\n    if (config.sample.percent <= 0) {\n        return false;\n    }\n    else if (config.sample.percent >= 1) {\n        return true;\n    }\n    // If we're not filtering deterministically, just use raw percentage.\n    if (!config.sample.path) {\n        return samplePercent(config.sample.percent);\n    }\n    // Otherwise, use a deterministic hash.\n    return sampleConsistentPercent(payload, config);\n}\nfunction samplePercent(percent) {\n    // Math.random returns [0, 1) => 0.0<>0.9999...\n    return Math.random() <= percent;\n}\n// sampleConsistentPercent converts an input string of bytes into a consistent uniform\n// continuous distribution of [0.0, 1.0]. This is based on\n// http://mumble.net/~campbell/tmp/random_real.c, but using the digest\n// result of the input value as the random information.\n// IMPORTANT - This function needs to === the Golang implementation to ensure that the two return the same vals!\n// See: https://github.com/segmentio/sampler/blob/65cb04132305a04fcd4bcaef67d57fbe40c30241/sampler.go#L13-L38\n// Since AJS supports IE9+ (typed arrays were introduced in IE10) we're doing some manual array math.\n// This could be done directly with strings, but arrays are easier to reason about/have better function support.\nfunction sampleConsistentPercent(payload, config) {\n    var field = (0, dlv_1.default)(payload, config.sample.path);\n    // Operate off of JSON bytes. TODO: Validate all type behavior, esp. strings.\n    var digest = (0, md5_1.default)(JSON.stringify(field));\n    var exponent = -64;\n    // Manually maintain 64-bit int as an array.\n    var significand = [];\n    // Left-shift and OR for first 8 bytes of digest. (8 bytes * 8 = 64 bits)\n    consumeDigest(digest.slice(0, 8), significand);\n    var leadingZeros = 0;\n    for (var i = 0; i < 64; i++) {\n        if (significand[i] === 1) {\n            break;\n        }\n        leadingZeros++;\n    }\n    if (leadingZeros !== 0) {\n        // Use the last 8 bytes of the digest, same as before.\n        var val = [];\n        consumeDigest(digest.slice(9, 16), val);\n        exponent -= leadingZeros;\n        // Left-shift away leading zeros in significand.\n        significand.splice(0, leadingZeros);\n        // Right-shift val by 64 minus leading zeros and push into significand.\n        val.splice(64 - leadingZeros);\n        significand = significand.concat(val);\n    }\n    // Flip 64th bit\n    significand[63] = significand[63] === 0 ? 1 : 0;\n    // Convert our manual binary into a JS num (binary arr => binary string => psuedo-int) and run the ldexp!\n    return (0, math_base_special_ldexp_1.default)(parseInt(significand.join(''), 2), exponent) < config.sample.percent;\n}\n// Array byte filler helper\nfunction consumeDigest(digest, arr) {\n    for (var i = 0; i < 8; i++) {\n        var remainder = digest[i];\n        for (var binary = 128; binary >= 1; binary /= 2) {\n            if (remainder - binary >= 0) {\n                remainder -= binary;\n                arr.push(1);\n            }\n            else {\n                arr.push(0);\n            }\n        }\n    }\n}\n//# sourceMappingURL=transformers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L3RzdWIvZGlzdC90cmFuc2Zvcm1lcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw0QkFBNEIsbUJBQU8sQ0FBQyx3RUFBaUI7QUFDckQsNEJBQTRCLG1CQUFPLENBQUMscURBQUs7QUFDekMsZ0RBQWdELG1CQUFPLENBQUMsMkdBQWlDO0FBQ3pGLGFBQWEsbUJBQU8sQ0FBQyxzREFBTTtBQUMzQixjQUFjLG1CQUFPLENBQUMsa0VBQVM7QUFDL0I7QUFDQTtBQUNBLG9EQUFvRCw0QkFBNEI7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsOEJBQThCO0FBQ3RFLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTyxJQUFJLE1BQU0sZUFBZSxhQUFhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLElBQUksT0FBTyx1Q0FBdUMsSUFBSSxNQUFNO0FBQ3BFLDBCQUEwQixJQUFJLFlBQVksU0FBUyxJQUFJLFVBQVU7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBLCtCQUErQixhQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXBvbGxvc3Byb2plY3QvbWljcm8tc2VydmljZS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvdHN1Yi9kaXN0L3RyYW5zZm9ybWVycy5qcz8zOTNjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIG1kNV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJ0aW55LWhhc2hlcy9tZDVcIikpO1xudmFyIGRsdl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJkbHZcIikpO1xudmFyIG1hdGhfYmFzZV9zcGVjaWFsX2xkZXhwXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIkBzdGRsaWIvbWF0aC1iYXNlLXNwZWNpYWwtbGRleHBcIikpO1xudmFyIGRzZXRfMSA9IHJlcXVpcmUoXCJkc2V0XCIpO1xudmFyIHVuc2V0XzEgPSByZXF1aXJlKFwiLi91bnNldFwiKTtcbmZ1bmN0aW9uIHRyYW5zZm9ybShwYXlsb2FkLCB0cmFuc2Zvcm1lcnMpIHtcbiAgICB2YXIgdHJhbnNmb3JtZWRQYXlsb2FkID0gcGF5bG9hZDtcbiAgICBmb3IgKHZhciBfaSA9IDAsIHRyYW5zZm9ybWVyc18xID0gdHJhbnNmb3JtZXJzOyBfaSA8IHRyYW5zZm9ybWVyc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZXIgPSB0cmFuc2Zvcm1lcnNfMVtfaV07XG4gICAgICAgIHN3aXRjaCAodHJhbnNmb3JtZXIudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnZHJvcCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjYXNlICdkcm9wX3Byb3BlcnRpZXMnOlxuICAgICAgICAgICAgICAgIGRyb3BQcm9wZXJ0aWVzKHRyYW5zZm9ybWVkUGF5bG9hZCwgdHJhbnNmb3JtZXIuY29uZmlnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2FsbG93X3Byb3BlcnRpZXMnOlxuICAgICAgICAgICAgICAgIGFsbG93UHJvcGVydGllcyh0cmFuc2Zvcm1lZFBheWxvYWQsIHRyYW5zZm9ybWVyLmNvbmZpZyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzYW1wbGVfZXZlbnQnOlxuICAgICAgICAgICAgICAgIGlmIChzYW1wbGVFdmVudCh0cmFuc2Zvcm1lZFBheWxvYWQsIHRyYW5zZm9ybWVyLmNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY2FzZSAnbWFwX3Byb3BlcnRpZXMnOlxuICAgICAgICAgICAgICAgIG1hcFByb3BlcnRpZXModHJhbnNmb3JtZWRQYXlsb2FkLCB0cmFuc2Zvcm1lci5jb25maWcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaGFzaF9wcm9wZXJ0aWVzJzpcbiAgICAgICAgICAgICAgICAvLyBOb3QgeWV0IHN1cHBvcnRlZCwgYnV0IGRvbid0IHRocm93IGFuIGVycm9yLiBKdXN0IGlnbm9yZS5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNmb3JtZXIgb2YgdHlwZSBcXFwiXCIuY29uY2F0KHRyYW5zZm9ybWVyLnR5cGUsIFwiXFxcIiBpcyB1bnN1cHBvcnRlZC5cIikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1lZFBheWxvYWQ7XG59XG5leHBvcnRzLmRlZmF1bHQgPSB0cmFuc2Zvcm07XG4vLyBkcm9wUHJvcGVydGllcyByZW1vdmVzIGFsbCBzcGVjaWZpZWQgcHJvcHMgZnJvbSB0aGUgb2JqZWN0LlxuZnVuY3Rpb24gZHJvcFByb3BlcnRpZXMocGF5bG9hZCwgY29uZmlnKSB7XG4gICAgZmlsdGVyUHJvcGVydGllcyhwYXlsb2FkLCBjb25maWcuZHJvcCwgZnVuY3Rpb24gKG1hdGNoZWRPYmosIGRyb3BMaXN0KSB7XG4gICAgICAgIGRyb3BMaXN0LmZvckVhY2goZnVuY3Rpb24gKGspIHsgcmV0dXJuIGRlbGV0ZSBtYXRjaGVkT2JqW2tdOyB9KTtcbiAgICB9KTtcbn1cbi8vIGFsbG93UHJvcGVydGllcyBPTkxZIGFsbG93cyB0aGUgc3BlY2lmaWMgdGFyZ2V0cyB3aXRoaW4gdGhlIGtleXMuIChlLmcuIFwiYS5mb29cIjogW1wiYmFyXCIsIFwiYmF6XCJdXG4vLyBvbiB7YToge2Zvbzoge2JhcjogMSwgYmF6OiAyfSwgb3RoZXI6IDN9fSB3aWxsIG5vdCBoYXZlIGFueSBkcm9wcywgYXMgaXQgb25seSBsb29rcyBpbnNpZGUgYS5mb29cbmZ1bmN0aW9uIGFsbG93UHJvcGVydGllcyhwYXlsb2FkLCBjb25maWcpIHtcbiAgICBmaWx0ZXJQcm9wZXJ0aWVzKHBheWxvYWQsIGNvbmZpZy5hbGxvdywgZnVuY3Rpb24gKG1hdGNoZWRPYmosIHByZXNlcnZlTGlzdCkge1xuICAgICAgICBPYmplY3Qua2V5cyhtYXRjaGVkT2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGlmICghcHJlc2VydmVMaXN0LmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgbWF0Y2hlZE9ialtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGZpbHRlclByb3BlcnRpZXMocGF5bG9hZCwgcnVsZVNldCwgZmlsdGVyQ2IpIHtcbiAgICBPYmplY3QuZW50cmllcyhydWxlU2V0KS5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIga2V5ID0gX2FbMF0sIHRhcmdldHMgPSBfYVsxXTtcbiAgICAgICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIC8vIENhbiBvbmx5IGFjdCBvbiBvYmplY3RzLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbHRlckNiKG9iaiwgdGFyZ2V0cyk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIElmIGtleSBpcyBlbXB0eSwgaXQgcmVmZXJzIHRvIHRoZSB0b3AtbGV2ZWwgb2JqZWN0LlxuICAgICAgICB2YXIgbWF0Y2hlZE9iamVjdCA9IGtleSA9PT0gJycgPyBwYXlsb2FkIDogKDAsIGRsdl8xLmRlZmF1bHQpKHBheWxvYWQsIGtleSk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1hdGNoZWRPYmplY3QpKSB7XG4gICAgICAgICAgICBtYXRjaGVkT2JqZWN0LmZvckVhY2goZmlsdGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpbHRlcihtYXRjaGVkT2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gbWFwUHJvcGVydGllcyhwYXlsb2FkLCBjb25maWcpIHtcbiAgICAvLyBTb21lIGNvbmZpZ3MgbWlnaHQgdHJ5IHRvIG1vZGlmeSBvciByZWFkIGZyb20gYSBmaWVsZCBtdWx0aXBsZSB0aW1lcy4gV2Ugd2lsbCBvbmx5IGV2ZXIgcmVhZFxuICAgIC8vIHZhbHVlcyBhcyB0aGV5IHdlcmUgYmVmb3JlIGFueSBtb2RpZmljYXRpb25zIGJlZ2FuLiBUaHVzLCBpZiB5b3UgdHJ5IHRvIG92ZXJyaWRlIGUuZy5cbiAgICAvLyB7YToge2I6IDF9fSB3aXRoIHNldChhLCAnYicsIDIpICh3aGljaCByZXN1bHRzIGluIHthOiB7YjogMn19KSBhbmQgdGhlbiB0cnkgdG8gY29weSBhLmIgaW50b1xuICAgIC8vIGEuYywgeW91IHdpbGwgZ2V0IHthOiB7YjogMiwgYzoxfX0gYW5kIE5PVCB7YToge2I6MiwgYzoyfX0uIFRoaXMgcHJldmVudHMgbWFwIGV2YWx1YXRpb25cbiAgICAvLyBvcmRlciBmcm9tIG1hdHRlcmluZywgYW5kID09PSB3aGF0IHNlcnZlci1zaWRlIGRvZXMuXG4gICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vc2VnbWVudGlvL3RzdWIvYmxvYi82NjE2OTVhNjNiNjBiOTA0NzE3OTZlNjY3NDU4ZjA3NmFmNzg4YzE5L3RyYW5zZm9ybWVycy9tYXBfcHJvcGVydGllcy5nbyNMMTc5LUwyMDBcbiAgICB2YXIgaW5pdGlhbFBheWxvYWQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgICBmb3IgKHZhciBrZXkgaW4gY29uZmlnLm1hcCkge1xuICAgICAgICBpZiAoIWNvbmZpZy5tYXAuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFjdGlvbk1hcCA9IGNvbmZpZy5tYXBba2V5XTtcbiAgICAgICAgLy8gQ2FuJ3QgbWFuaXB1bGF0ZSBub24tb2JqZWN0cy4gQ2hlY2sgdGhhdCB0aGUgcGFyZW50IGlzIG9uZS4gU3RyaXAgdGhlIGxhc3QgLmZpZWxkXG4gICAgICAgIC8vIGZyb20gdGhlIHN0cmluZy5cbiAgICAgICAgdmFyIHNwbGl0S2V5ID0ga2V5LnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBwYXJlbnRfMSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHNwbGl0S2V5Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHNwbGl0S2V5LnBvcCgpO1xuICAgICAgICAgICAgcGFyZW50XzEgPSAoMCwgZGx2XzEuZGVmYXVsdCkoaW5pdGlhbFBheWxvYWQsIHNwbGl0S2V5LmpvaW4oJy4nKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJlbnRfMSA9IHBheWxvYWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwYXJlbnRfMSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZXNlIGFjdGlvbnMgYXJlIGV4Y2x1c2l2ZSB0byBlYWNoIG90aGVyLlxuICAgICAgICBpZiAoYWN0aW9uTWFwLmNvcHkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZVRvQ29weSA9ICgwLCBkbHZfMS5kZWZhdWx0KShpbml0aWFsUGF5bG9hZCwgYWN0aW9uTWFwLmNvcHkpO1xuICAgICAgICAgICAgaWYgKHZhbHVlVG9Db3B5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAoMCwgZHNldF8xLmRzZXQpKHBheWxvYWQsIGtleSwgdmFsdWVUb0NvcHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbk1hcC5tb3ZlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVUb01vdmUgPSAoMCwgZGx2XzEuZGVmYXVsdCkoaW5pdGlhbFBheWxvYWQsIGFjdGlvbk1hcC5tb3ZlKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZVRvTW92ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgKDAsIGRzZXRfMS5kc2V0KShwYXlsb2FkLCBrZXksIHZhbHVlVG9Nb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICgwLCB1bnNldF8xLnVuc2V0KShwYXlsb2FkLCBhY3Rpb25NYXAubW92ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGF2ZSB0byBjaGVjayBvbmx5IGlmIHByb3BlcnR5IGV4aXN0cywgYXMgbnVsbCwgdW5kZWZpbmVkLCBhbmQgb3RoZXIgdmFscyBjb3VsZCBiZSBleHBsaWNpdGx5IHNldC5cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uTWFwLmhhc093blByb3BlcnR5KCdzZXQnKSkge1xuICAgICAgICAgICAgKDAsIGRzZXRfMS5kc2V0KShwYXlsb2FkLCBrZXksIGFjdGlvbk1hcC5zZXQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRvX3N0cmluZyBpcyBub3QgZXhjbHVzaXZlIGFuZCBjYW4gYmUgcGFpcmVkIHdpdGggb3RoZXIgYWN0aW9ucy4gRmluYWwgYWN0aW9uLlxuICAgICAgICBpZiAoYWN0aW9uTWFwLnRvX3N0cmluZykge1xuICAgICAgICAgICAgdmFyIHZhbHVlVG9TdHJpbmcgPSAoMCwgZGx2XzEuZGVmYXVsdCkocGF5bG9hZCwga2V5KTtcbiAgICAgICAgICAgIC8vIERvIG5vdCBzdHJpbmcgYXJyYXlzIGFuZCBvYmplY3RzLiBEbyBub3QgZG91YmxlLWVuY29kZSBzdHJpbmdzLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZVRvU3RyaW5nID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgICAgICh0eXBlb2YgdmFsdWVUb1N0cmluZyA9PT0gJ29iamVjdCcgJiYgdmFsdWVUb1N0cmluZyAhPT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE86IENoZWNrIHN0cmluZ2lmaWVyIGluIEdvbGFuZyBmb3IgcGFyaXR5LlxuICAgICAgICAgICAgaWYgKHZhbHVlVG9TdHJpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICgwLCBkc2V0XzEuZHNldCkocGF5bG9hZCwga2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZVRvU3RyaW5nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBDaGVjayB0aGlzIGJlaGF2aW9yLlxuICAgICAgICAgICAgICAgICgwLCBkc2V0XzEuZHNldCkocGF5bG9hZCwga2V5LCAndW5kZWZpbmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzYW1wbGVFdmVudChwYXlsb2FkLCBjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLnNhbXBsZS5wZXJjZW50IDw9IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb25maWcuc2FtcGxlLnBlcmNlbnQgPj0gMSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gSWYgd2UncmUgbm90IGZpbHRlcmluZyBkZXRlcm1pbmlzdGljYWxseSwganVzdCB1c2UgcmF3IHBlcmNlbnRhZ2UuXG4gICAgaWYgKCFjb25maWcuc2FtcGxlLnBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHNhbXBsZVBlcmNlbnQoY29uZmlnLnNhbXBsZS5wZXJjZW50KTtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlLCB1c2UgYSBkZXRlcm1pbmlzdGljIGhhc2guXG4gICAgcmV0dXJuIHNhbXBsZUNvbnNpc3RlbnRQZXJjZW50KHBheWxvYWQsIGNvbmZpZyk7XG59XG5mdW5jdGlvbiBzYW1wbGVQZXJjZW50KHBlcmNlbnQpIHtcbiAgICAvLyBNYXRoLnJhbmRvbSByZXR1cm5zIFswLCAxKSA9PiAwLjA8PjAuOTk5OS4uLlxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpIDw9IHBlcmNlbnQ7XG59XG4vLyBzYW1wbGVDb25zaXN0ZW50UGVyY2VudCBjb252ZXJ0cyBhbiBpbnB1dCBzdHJpbmcgb2YgYnl0ZXMgaW50byBhIGNvbnNpc3RlbnQgdW5pZm9ybVxuLy8gY29udGludW91cyBkaXN0cmlidXRpb24gb2YgWzAuMCwgMS4wXS4gVGhpcyBpcyBiYXNlZCBvblxuLy8gaHR0cDovL211bWJsZS5uZXQvfmNhbXBiZWxsL3RtcC9yYW5kb21fcmVhbC5jLCBidXQgdXNpbmcgdGhlIGRpZ2VzdFxuLy8gcmVzdWx0IG9mIHRoZSBpbnB1dCB2YWx1ZSBhcyB0aGUgcmFuZG9tIGluZm9ybWF0aW9uLlxuLy8gSU1QT1JUQU5UIC0gVGhpcyBmdW5jdGlvbiBuZWVkcyB0byA9PT0gdGhlIEdvbGFuZyBpbXBsZW1lbnRhdGlvbiB0byBlbnN1cmUgdGhhdCB0aGUgdHdvIHJldHVybiB0aGUgc2FtZSB2YWxzIVxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vc2VnbWVudGlvL3NhbXBsZXIvYmxvYi82NWNiMDQxMzIzMDVhMDRmY2Q0YmNhZWY2N2Q1N2ZiZTQwYzMwMjQxL3NhbXBsZXIuZ28jTDEzLUwzOFxuLy8gU2luY2UgQUpTIHN1cHBvcnRzIElFOSsgKHR5cGVkIGFycmF5cyB3ZXJlIGludHJvZHVjZWQgaW4gSUUxMCkgd2UncmUgZG9pbmcgc29tZSBtYW51YWwgYXJyYXkgbWF0aC5cbi8vIFRoaXMgY291bGQgYmUgZG9uZSBkaXJlY3RseSB3aXRoIHN0cmluZ3MsIGJ1dCBhcnJheXMgYXJlIGVhc2llciB0byByZWFzb24gYWJvdXQvaGF2ZSBiZXR0ZXIgZnVuY3Rpb24gc3VwcG9ydC5cbmZ1bmN0aW9uIHNhbXBsZUNvbnNpc3RlbnRQZXJjZW50KHBheWxvYWQsIGNvbmZpZykge1xuICAgIHZhciBmaWVsZCA9ICgwLCBkbHZfMS5kZWZhdWx0KShwYXlsb2FkLCBjb25maWcuc2FtcGxlLnBhdGgpO1xuICAgIC8vIE9wZXJhdGUgb2ZmIG9mIEpTT04gYnl0ZXMuIFRPRE86IFZhbGlkYXRlIGFsbCB0eXBlIGJlaGF2aW9yLCBlc3AuIHN0cmluZ3MuXG4gICAgdmFyIGRpZ2VzdCA9ICgwLCBtZDVfMS5kZWZhdWx0KShKU09OLnN0cmluZ2lmeShmaWVsZCkpO1xuICAgIHZhciBleHBvbmVudCA9IC02NDtcbiAgICAvLyBNYW51YWxseSBtYWludGFpbiA2NC1iaXQgaW50IGFzIGFuIGFycmF5LlxuICAgIHZhciBzaWduaWZpY2FuZCA9IFtdO1xuICAgIC8vIExlZnQtc2hpZnQgYW5kIE9SIGZvciBmaXJzdCA4IGJ5dGVzIG9mIGRpZ2VzdC4gKDggYnl0ZXMgKiA4ID0gNjQgYml0cylcbiAgICBjb25zdW1lRGlnZXN0KGRpZ2VzdC5zbGljZSgwLCA4KSwgc2lnbmlmaWNhbmQpO1xuICAgIHZhciBsZWFkaW5nWmVyb3MgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjQ7IGkrKykge1xuICAgICAgICBpZiAoc2lnbmlmaWNhbmRbaV0gPT09IDEpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGxlYWRpbmdaZXJvcysrO1xuICAgIH1cbiAgICBpZiAobGVhZGluZ1plcm9zICE9PSAwKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgbGFzdCA4IGJ5dGVzIG9mIHRoZSBkaWdlc3QsIHNhbWUgYXMgYmVmb3JlLlxuICAgICAgICB2YXIgdmFsID0gW107XG4gICAgICAgIGNvbnN1bWVEaWdlc3QoZGlnZXN0LnNsaWNlKDksIDE2KSwgdmFsKTtcbiAgICAgICAgZXhwb25lbnQgLT0gbGVhZGluZ1plcm9zO1xuICAgICAgICAvLyBMZWZ0LXNoaWZ0IGF3YXkgbGVhZGluZyB6ZXJvcyBpbiBzaWduaWZpY2FuZC5cbiAgICAgICAgc2lnbmlmaWNhbmQuc3BsaWNlKDAsIGxlYWRpbmdaZXJvcyk7XG4gICAgICAgIC8vIFJpZ2h0LXNoaWZ0IHZhbCBieSA2NCBtaW51cyBsZWFkaW5nIHplcm9zIGFuZCBwdXNoIGludG8gc2lnbmlmaWNhbmQuXG4gICAgICAgIHZhbC5zcGxpY2UoNjQgLSBsZWFkaW5nWmVyb3MpO1xuICAgICAgICBzaWduaWZpY2FuZCA9IHNpZ25pZmljYW5kLmNvbmNhdCh2YWwpO1xuICAgIH1cbiAgICAvLyBGbGlwIDY0dGggYml0XG4gICAgc2lnbmlmaWNhbmRbNjNdID0gc2lnbmlmaWNhbmRbNjNdID09PSAwID8gMSA6IDA7XG4gICAgLy8gQ29udmVydCBvdXIgbWFudWFsIGJpbmFyeSBpbnRvIGEgSlMgbnVtIChiaW5hcnkgYXJyID0+IGJpbmFyeSBzdHJpbmcgPT4gcHN1ZWRvLWludCkgYW5kIHJ1biB0aGUgbGRleHAhXG4gICAgcmV0dXJuICgwLCBtYXRoX2Jhc2Vfc3BlY2lhbF9sZGV4cF8xLmRlZmF1bHQpKHBhcnNlSW50KHNpZ25pZmljYW5kLmpvaW4oJycpLCAyKSwgZXhwb25lbnQpIDwgY29uZmlnLnNhbXBsZS5wZXJjZW50O1xufVxuLy8gQXJyYXkgYnl0ZSBmaWxsZXIgaGVscGVyXG5mdW5jdGlvbiBjb25zdW1lRGlnZXN0KGRpZ2VzdCwgYXJyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgdmFyIHJlbWFpbmRlciA9IGRpZ2VzdFtpXTtcbiAgICAgICAgZm9yICh2YXIgYmluYXJ5ID0gMTI4OyBiaW5hcnkgPj0gMTsgYmluYXJ5IC89IDIpIHtcbiAgICAgICAgICAgIGlmIChyZW1haW5kZXIgLSBiaW5hcnkgPj0gMCkge1xuICAgICAgICAgICAgICAgIHJlbWFpbmRlciAtPSBiaW5hcnk7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybWVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/tsub/dist/transformers.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@segment/tsub/dist/unset.js":
/*!***************************************************!*\
  !*** ../node_modules/@segment/tsub/dist/unset.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.unset = void 0;\nvar dlv_1 = __importDefault(__webpack_require__(/*! dlv */ \"(ssr)/../node_modules/dlv/dist/dlv.es.js\"));\nfunction unset(obj, prop) {\n    if ((0, dlv_1.default)(obj, prop)) {\n        var segs = prop.split('.');\n        var last = segs.pop();\n        while (segs.length && segs[segs.length - 1].slice(-1) === '\\\\') {\n            last = segs.pop().slice(0, -1) + '.' + last;\n        }\n        while (segs.length)\n            obj = obj[(prop = segs.shift())];\n        return delete obj[last];\n    }\n    return true;\n}\nexports.unset = unset;\n//# sourceMappingURL=unset.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L3RzdWIvZGlzdC91bnNldC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGFBQWE7QUFDYiw0QkFBNEIsbUJBQU8sQ0FBQyxxREFBSztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcG9sbG9zcHJvamVjdC9taWNyby1zZXJ2aWNlLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC90c3ViL2Rpc3QvdW5zZXQuanM/MzVjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudW5zZXQgPSB2b2lkIDA7XG52YXIgZGx2XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImRsdlwiKSk7XG5mdW5jdGlvbiB1bnNldChvYmosIHByb3ApIHtcbiAgICBpZiAoKDAsIGRsdl8xLmRlZmF1bHQpKG9iaiwgcHJvcCkpIHtcbiAgICAgICAgdmFyIHNlZ3MgPSBwcm9wLnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBsYXN0ID0gc2Vncy5wb3AoKTtcbiAgICAgICAgd2hpbGUgKHNlZ3MubGVuZ3RoICYmIHNlZ3Nbc2Vncy5sZW5ndGggLSAxXS5zbGljZSgtMSkgPT09ICdcXFxcJykge1xuICAgICAgICAgICAgbGFzdCA9IHNlZ3MucG9wKCkuc2xpY2UoMCwgLTEpICsgJy4nICsgbGFzdDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoc2Vncy5sZW5ndGgpXG4gICAgICAgICAgICBvYmogPSBvYmpbKHByb3AgPSBzZWdzLnNoaWZ0KCkpXTtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSBvYmpbbGFzdF07XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0cy51bnNldCA9IHVuc2V0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5zZXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@segment/tsub/dist/unset.js\n");

/***/ })

};
;