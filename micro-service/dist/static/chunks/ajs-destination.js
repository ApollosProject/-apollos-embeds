"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["ajs-destination"],{

/***/ "(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPlanEventEnabled: function() { return /* binding */ isPlanEventEnabled; }\n/* harmony export */ });\n/**\n * Determines whether a track event is allowed to be sent based on the\n * user's tracking plan.\n * If the user does not have a tracking plan or the event is allowed based\n * on the tracking plan configuration, returns true.\n */\nfunction isPlanEventEnabled(plan, planEvent) {\n    var _a, _b;\n    // Always prioritize the event's `enabled` status\n    if (typeof (planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) === 'boolean') {\n        return planEvent.enabled;\n    }\n    // Assume absence of a tracking plan means events are enabled\n    return (_b = (_a = plan === null || plan === void 0 ? void 0 : plan.__default) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n}\n//# sourceMappingURL=is-plan-event-enabled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9saWIvaXMtcGxhbi1ldmVudC1lbmFibGVkLmpzPzVlNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSB0cmFjayBldmVudCBpcyBhbGxvd2VkIHRvIGJlIHNlbnQgYmFzZWQgb24gdGhlXG4gKiB1c2VyJ3MgdHJhY2tpbmcgcGxhbi5cbiAqIElmIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSB0cmFja2luZyBwbGFuIG9yIHRoZSBldmVudCBpcyBhbGxvd2VkIGJhc2VkXG4gKiBvbiB0aGUgdHJhY2tpbmcgcGxhbiBjb25maWd1cmF0aW9uLCByZXR1cm5zIHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYW5FdmVudEVuYWJsZWQocGxhbiwgcGxhbkV2ZW50KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICAvLyBBbHdheXMgcHJpb3JpdGl6ZSB0aGUgZXZlbnQncyBgZW5hYmxlZGAgc3RhdHVzXG4gICAgaWYgKHR5cGVvZiAocGxhbkV2ZW50ID09PSBudWxsIHx8IHBsYW5FdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbkV2ZW50LmVuYWJsZWQpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIHBsYW5FdmVudC5lbmFibGVkO1xuICAgIH1cbiAgICAvLyBBc3N1bWUgYWJzZW5jZSBvZiBhIHRyYWNraW5nIHBsYW4gbWVhbnMgZXZlbnRzIGFyZSBlbmFibGVkXG4gICAgcmV0dXJuIChfYiA9IChfYSA9IHBsYW4gPT09IG51bGwgfHwgcGxhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbi5fX2RlZmF1bHQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbmFibGVkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtcGxhbi1ldmVudC1lbmFibGVkLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\n"));

/***/ }),

/***/ "(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LegacyDestination: function() { return /* binding */ LegacyDestination; },\n/* harmony export */   ajsDestinations: function() { return /* binding */ ajsDestinations; }\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(app-pages-browser)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/facade */ \"(app-pages-browser)/../node_modules/@segment/facade/dist/index.js\");\n/* harmony import */ var _segment_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_segment_facade__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/connection */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/context */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/core/context/index.js\");\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/context */ \"(app-pages-browser)/../node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../core/environment */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @segment/analytics-core */ \"(app-pages-browser)/../node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n/* harmony import */ var _lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../lib/is-plan-event-enabled */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js\");\n/* harmony import */ var _lib_merged_options__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../lib/merged-options */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js\");\n/* harmony import */ var _lib_p_while__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/p-while */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js\");\n/* harmony import */ var _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/priority-queue */ \"(app-pages-browser)/../node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../lib/priority-queue/persisted */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../middleware */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js\");\n/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loader */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @segment/analytics-core */ \"(app-pages-browser)/../node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\");\n/* harmony import */ var _core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/stats/metric-helpers */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(app-pages-browser)/../node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction flushQueue(xt, queue) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n        var failedQueue;\n        var _this = this;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    failedQueue = [];\n                    if ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)()) {\n                        return [2 /*return*/, queue];\n                    }\n                    return [4 /*yield*/, (0,_lib_p_while__WEBPACK_IMPORTED_MODULE_3__.pWhile)(function () { return queue.length > 0 && (0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOnline)(); }, function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n                            var ctx, result, success;\n                            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        ctx = queue.pop();\n                                        if (!ctx) {\n                                            return [2 /*return*/];\n                                        }\n                                        return [4 /*yield*/, (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__.attempt)(ctx, xt)];\n                                    case 1:\n                                        result = _a.sent();\n                                        success = result instanceof _core_context__WEBPACK_IMPORTED_MODULE_5__.Context;\n                                        if (!success) {\n                                            failedQueue.push(ctx);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                        // re-add failed tasks\n                    ];\n                case 1:\n                    _a.sent();\n                    // re-add failed tasks\n                    failedQueue.map(function (failed) { return queue.pushWithBackoff(failed); });\n                    return [2 /*return*/, queue];\n            }\n        });\n    });\n}\nvar LegacyDestination = /** @class */ (function () {\n    function LegacyDestination(name, version, writeKey, settings, options, integrationSource) {\n        if (settings === void 0) { settings = {}; }\n        var _this = this;\n        this.options = {};\n        this.type = 'destination';\n        this.middleware = [];\n        this.initializePromise = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.createDeferred)();\n        this.flushing = false;\n        this.name = name;\n        this.version = version;\n        this.settings = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, settings);\n        this.disableAutoISOConversion = options.disableAutoISOConversion || false;\n        this.integrationSource = integrationSource;\n        // AJS-Renderer sets an extraneous `type` setting that clobbers\n        // existing type defaults. We need to remove it if it's present\n        if (this.settings['type'] && this.settings['type'] === 'browser') {\n            delete this.settings['type'];\n        }\n        this.initializePromise.promise.then(function (isInitialized) { return (_this._initialized = isInitialized); }, function () { });\n        this.options = options;\n        this.buffer = options.disableClientPersistence\n            ? new _lib_priority_queue__WEBPACK_IMPORTED_MODULE_7__.PriorityQueue(4, [])\n            : new _lib_priority_queue_persisted__WEBPACK_IMPORTED_MODULE_8__.PersistedPriorityQueue(4, \"\".concat(writeKey, \":dest-\").concat(name));\n        this.scheduleFlush();\n    }\n    LegacyDestination.prototype.isLoaded = function () {\n        return !!this._ready;\n    };\n    LegacyDestination.prototype.ready = function () {\n        var _this = this;\n        return this.initializePromise.promise.then(function () { var _a; return (_a = _this.onReady) !== null && _a !== void 0 ? _a : Promise.resolve(); });\n    };\n    LegacyDestination.prototype.load = function (ctx, analyticsInstance) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var integrationSource, _b;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this._ready || this.onReady !== undefined) {\n                            return [2 /*return*/];\n                        }\n                        if (!((_a = this.integrationSource) !== null && _a !== void 0)) return [3 /*break*/, 1];\n                        _b = _a;\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, (0,_loader__WEBPACK_IMPORTED_MODULE_9__.loadIntegration)(ctx, this.name, this.version, this.options.obfuscate)];\n                    case 2:\n                        _b = (_c.sent());\n                        _c.label = 3;\n                    case 3:\n                        integrationSource = _b;\n                        this.integration = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.buildIntegration)(integrationSource, this.settings, analyticsInstance);\n                        this.onReady = new Promise(function (resolve) {\n                            var onReadyFn = function () {\n                                _this._ready = true;\n                                resolve(true);\n                            };\n                            _this.integration.once('ready', onReadyFn);\n                        });\n                        this.integration.on('initialize', function () {\n                            _this.initializePromise.resolve(true);\n                        });\n                        try {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                            });\n                            this.integration.initialize();\n                        }\n                        catch (error) {\n                            (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                                integrationName: this.name,\n                                methodName: 'initialize',\n                                type: 'classic',\n                                didError: true,\n                            });\n                            this.initializePromise.resolve(false);\n                            throw error;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.unload = function (_ctx, _analyticsInstance) {\n        return (0,_loader__WEBPACK_IMPORTED_MODULE_9__.unloadIntegration)(this.name, this.version, this.options.obfuscate);\n    };\n    LegacyDestination.prototype.addMiddleware = function () {\n        var _a;\n        var fn = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            fn[_i] = arguments[_i];\n        }\n        this.middleware = (_a = this.middleware).concat.apply(_a, fn);\n    };\n    LegacyDestination.prototype.shouldBuffer = function (ctx) {\n        return (\n        // page events can't be buffered because of destinations that automatically add page views\n        ctx.event.type !== 'page' &&\n            ((0,_core_connection__WEBPACK_IMPORTED_MODULE_2__.isOffline)() || this._ready === false || this._initialized === false));\n    };\n    LegacyDestination.prototype.send = function (ctx, clz, eventType) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            var plan, ev, planEvent, afterMiddleware, event, err_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.shouldBuffer(ctx)) {\n                            this.buffer.push(ctx);\n                            this.scheduleFlush();\n                            return [2 /*return*/, ctx];\n                        }\n                        plan = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.plan) === null || _b === void 0 ? void 0 : _b.track;\n                        ev = ctx.event.event;\n                        if (plan && ev && this.name !== 'Segment.io') {\n                            planEvent = plan[ev];\n                            if (!(0,_lib_is_plan_event_enabled__WEBPACK_IMPORTED_MODULE_11__.isPlanEventEnabled)(plan, planEvent)) {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), { All: false, 'Segment.io': true }));\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                                return [2 /*return*/, ctx];\n                            }\n                            else {\n                                ctx.updateEvent('integrations', (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, ctx.event.integrations), planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations));\n                            }\n                            if ((planEvent === null || planEvent === void 0 ? void 0 : planEvent.enabled) && (planEvent === null || planEvent === void 0 ? void 0 : planEvent.integrations[this.name]) === false) {\n                                ctx.cancel(new _core_context__WEBPACK_IMPORTED_MODULE_12__.ContextCancelation({\n                                    retry: false,\n                                    reason: \"Event \".concat(ev, \" disabled for integration \").concat(this.name, \" in tracking plan\"),\n                                    type: 'Dropped by plan',\n                                }));\n                                return [2 /*return*/, ctx];\n                            }\n                        }\n                        return [4 /*yield*/, (0,_middleware__WEBPACK_IMPORTED_MODULE_13__.applyDestinationMiddleware)(this.name, ctx.event, this.middleware)];\n                    case 1:\n                        afterMiddleware = _c.sent();\n                        if (afterMiddleware === null) {\n                            return [2 /*return*/, ctx];\n                        }\n                        event = new clz(afterMiddleware, {\n                            traverse: !this.disableAutoISOConversion,\n                        });\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                        });\n                        _c.label = 2;\n                    case 2:\n                        _c.trys.push([2, 5, , 6]);\n                        if (!this.integration) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.integration.invoke.call(this.integration, eventType, event)];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _c.sent();\n                        (0,_core_stats_metric_helpers__WEBPACK_IMPORTED_MODULE_10__.recordIntegrationMetric)(ctx, {\n                            integrationName: this.name,\n                            methodName: eventType,\n                            type: 'classic',\n                            didError: true,\n                        });\n                        throw err_1;\n                    case 6: return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.track = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Track, 'track')];\n            });\n        });\n    };\n    LegacyDestination.prototype.page = function (ctx) {\n        var _a;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (((_a = this.integration) === null || _a === void 0 ? void 0 : _a._assumesPageview) && !this._initialized) {\n                            this.integration.initialize();\n                        }\n                        return [4 /*yield*/, this.initializePromise.promise];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Page, 'page')];\n                }\n            });\n        });\n    };\n    LegacyDestination.prototype.identify = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Identify, 'identify')];\n            });\n        });\n    };\n    LegacyDestination.prototype.alias = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Alias, 'alias')];\n            });\n        });\n    };\n    LegacyDestination.prototype.group = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this, void 0, void 0, function () {\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_a) {\n                return [2 /*return*/, this.send(ctx, _segment_facade__WEBPACK_IMPORTED_MODULE_0__.Group, 'group')];\n            });\n        });\n    };\n    LegacyDestination.prototype.scheduleFlush = function () {\n        var _this = this;\n        if (this.flushing) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        setTimeout(function () { return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(_this, void 0, void 0, function () {\n            var _a;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.flushing = true;\n                        _a = this;\n                        return [4 /*yield*/, flushQueue(this, this.buffer)];\n                    case 1:\n                        _a.buffer = _b.sent();\n                        this.flushing = false;\n                        if (this.buffer.todo > 0) {\n                            this.scheduleFlush();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); }, Math.random() * 5000);\n    };\n    return LegacyDestination;\n}());\n\nfunction ajsDestinations(writeKey, settings, globalIntegrations, options, routingMiddleware, legacyIntegrationSources) {\n    var _a, _b;\n    if (globalIntegrations === void 0) { globalIntegrations = {}; }\n    if (options === void 0) { options = {}; }\n    if ((0,_core_environment__WEBPACK_IMPORTED_MODULE_14__.isServer)()) {\n        return [];\n    }\n    if (settings.plan) {\n        options = options !== null && options !== void 0 ? options : {};\n        options.plan = settings.plan;\n    }\n    var routingRules = (_b = (_a = settings.middlewareSettings) === null || _a === void 0 ? void 0 : _a.routingRules) !== null && _b !== void 0 ? _b : [];\n    var remoteIntegrationsConfig = settings.integrations;\n    var localIntegrationsConfig = options.integrations;\n    // merged remote CDN settings with user provided options\n    var integrationOptions = (0,_lib_merged_options__WEBPACK_IMPORTED_MODULE_15__.mergedOptions)(settings, options !== null && options !== void 0 ? options : {});\n    var adhocIntegrationSources = legacyIntegrationSources === null || legacyIntegrationSources === void 0 ? void 0 : legacyIntegrationSources.reduce(function (acc, integrationSource) {\n        var _a;\n        return ((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, acc), (_a = {}, _a[(0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveIntegrationNameFromSource)(integrationSource)] = integrationSource, _a)));\n    }, {});\n    var installableIntegrations = new Set((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArray)([], Object.keys(remoteIntegrationsConfig).filter(function (name) {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_16__.isInstallableIntegration)(name, remoteIntegrationsConfig[name]);\n    }), true), Object.keys(adhocIntegrationSources || {}).filter(function (name) {\n        return (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(remoteIntegrationsConfig[name]) ||\n            (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_17__.isPlainObject)(localIntegrationsConfig === null || localIntegrationsConfig === void 0 ? void 0 : localIntegrationsConfig[name]);\n    }), true));\n    return Array.from(installableIntegrations)\n        .filter(function (name) { return !(0,_utils__WEBPACK_IMPORTED_MODULE_16__.isDisabledIntegration)(name, globalIntegrations); })\n        .map(function (name) {\n        var integrationSettings = remoteIntegrationsConfig[name];\n        var version = (0,_loader__WEBPACK_IMPORTED_MODULE_9__.resolveVersion)(integrationSettings);\n        var destination = new LegacyDestination(name, version, writeKey, integrationOptions[name], options, adhocIntegrationSources === null || adhocIntegrationSources === void 0 ? void 0 : adhocIntegrationSources[name]);\n        var routing = routingRules.filter(function (rule) { return rule.destinationName === name; });\n        if (routing.length > 0 && routingMiddleware) {\n            destination.addMiddleware(routingMiddleware);\n        }\n        return destination;\n    });\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdFO0FBQ0Y7QUFDVjtBQUNLO0FBQ2Y7QUFDQTtBQUNtQjtBQUNaO0FBQ2Q7QUFDYztBQUNtQjtBQUNoQjtBQUN1RTtBQUMzRTtBQUM0QztBQUMxQjtBQUNSO0FBQ2xFO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkRBQVM7QUFDakM7QUFDQTtBQUNBLHlDQUF5QyxvREFBTSxlQUFlLDJCQUEyQiwwREFBUSxLQUFLLGdCQUFnQixPQUFPLGdEQUFTO0FBQ3RJO0FBQ0EsbUNBQW1DLGtEQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnRUFBTztBQUNwRTtBQUNBO0FBQ0Esb0VBQW9FLGtEQUFPO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCLElBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCx1Q0FBdUM7QUFDL0Y7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGdGQUFjO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBUSxHQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLDhDQUE4QyxpQkFBaUI7QUFDdEk7QUFDQTtBQUNBLGtCQUFrQiw4REFBYTtBQUMvQixrQkFBa0IsaUZBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFFBQVEsaUZBQWlGO0FBQzFKO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQTtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHdEQUFlO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMseURBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsNEJBQTRCLG9GQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9GQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSwwREFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDJEQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywrRUFBa0I7QUFDbkQsZ0VBQWdFLCtDQUFRLENBQUMsK0NBQVEsR0FBRyw2QkFBNkIsZ0NBQWdDO0FBQ2pKLCtDQUErQyw4REFBa0I7QUFDakU7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDcEY7QUFDQTtBQUNBLCtDQUErQyw4REFBa0I7QUFDakU7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx3RUFBMEI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsd0JBQXdCLG9GQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUIscURBQXFELGtEQUFLO0FBQzFELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxpREFBSTtBQUNqRTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEIsbUJBQW1CLGtEQUFXO0FBQzlCLHFEQUFxRCxxREFBUTtBQUM3RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCLG1CQUFtQixrREFBVztBQUM5QixxREFBcUQsa0RBQUs7QUFDMUQsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QixtQkFBbUIsa0RBQVc7QUFDOUIscURBQXFELGtEQUFLO0FBQzFELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsT0FBTyxnREFBUztBQUNqRDtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0EsQ0FBQztBQUM0QjtBQUN0QjtBQUNQO0FBQ0EseUNBQXlDO0FBQ3pDLDhCQUE4QjtBQUM5QixRQUFRLDREQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1FQUFhLGdFQUFnRTtBQUMxRztBQUNBO0FBQ0EsZ0JBQWdCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxnQkFBZ0IsS0FBSyx5RUFBZ0M7QUFDekYsS0FBSyxJQUFJO0FBQ1QsMENBQTBDLG9EQUFhLENBQUMsb0RBQWE7QUFDckUsZUFBZSxpRUFBd0I7QUFDdkMsS0FBSyxtREFBbUQ7QUFDeEQsZUFBZSx1RUFBYTtBQUM1QixZQUFZLHVFQUFhO0FBQ3pCLEtBQUs7QUFDTDtBQUNBLGtDQUFrQyxRQUFRLDhEQUFxQiw2QkFBNkI7QUFDNUY7QUFDQTtBQUNBLHNCQUFzQix1REFBYztBQUNwQztBQUNBLDREQUE0RCx1Q0FBdUM7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL2luZGV4LmpzP2E2OWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IEFsaWFzLCBHcm91cCwgSWRlbnRpZnksIFBhZ2UsIFRyYWNrIH0gZnJvbSAnQHNlZ21lbnQvZmFjYWRlJztcbmltcG9ydCB7IGlzT2ZmbGluZSwgaXNPbmxpbmUgfSBmcm9tICcuLi8uLi9jb3JlL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9jb250ZXh0JztcbmltcG9ydCB7IGlzU2VydmVyIH0gZnJvbSAnLi4vLi4vY29yZS9lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBhdHRlbXB0IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgaXNQbGFuRXZlbnRFbmFibGVkIH0gZnJvbSAnLi4vLi4vbGliL2lzLXBsYW4tZXZlbnQtZW5hYmxlZCc7XG5pbXBvcnQgeyBtZXJnZWRPcHRpb25zIH0gZnJvbSAnLi4vLi4vbGliL21lcmdlZC1vcHRpb25zJztcbmltcG9ydCB7IHBXaGlsZSB9IGZyb20gJy4uLy4uL2xpYi9wLXdoaWxlJztcbmltcG9ydCB7IFByaW9yaXR5UXVldWUgfSBmcm9tICcuLi8uLi9saWIvcHJpb3JpdHktcXVldWUnO1xuaW1wb3J0IHsgUGVyc2lzdGVkUHJpb3JpdHlRdWV1ZSB9IGZyb20gJy4uLy4uL2xpYi9wcmlvcml0eS1xdWV1ZS9wZXJzaXN0ZWQnO1xuaW1wb3J0IHsgYXBwbHlEZXN0aW5hdGlvbk1pZGRsZXdhcmUsIH0gZnJvbSAnLi4vbWlkZGxld2FyZSc7XG5pbXBvcnQgeyBidWlsZEludGVncmF0aW9uLCBsb2FkSW50ZWdyYXRpb24sIHJlc29sdmVJbnRlZ3JhdGlvbk5hbWVGcm9tU291cmNlLCByZXNvbHZlVmVyc2lvbiwgdW5sb2FkSW50ZWdyYXRpb24sIH0gZnJvbSAnLi9sb2FkZXInO1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IGlzRGlzYWJsZWRJbnRlZ3JhdGlvbiBhcyBzaG91bGRTa2lwSW50ZWdyYXRpb24sIGlzSW5zdGFsbGFibGVJbnRlZ3JhdGlvbiwgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IHJlY29yZEludGVncmF0aW9uTWV0cmljIH0gZnJvbSAnLi4vLi4vY29yZS9zdGF0cy9tZXRyaWMtaGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmZ1bmN0aW9uIGZsdXNoUXVldWUoeHQsIHF1ZXVlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmFpbGVkUXVldWU7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGZhaWxlZFF1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc09mZmxpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXVlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwV2hpbGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVldWUubGVuZ3RoID4gMCAmJiBpc09ubGluZSgpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCwgcmVzdWx0LCBzdWNjZXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXR0ZW1wdChjdHgsIHh0KV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSByZXN1bHQgaW5zdGFuY2VvZiBDb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRRdWV1ZS5wdXNoKGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZS1hZGQgZmFpbGVkIHRhc2tzXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlLWFkZCBmYWlsZWQgdGFza3NcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkUXVldWUubWFwKGZ1bmN0aW9uIChmYWlsZWQpIHsgcmV0dXJuIHF1ZXVlLnB1c2hXaXRoQmFja29mZihmYWlsZWQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1ZXVlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG52YXIgTGVnYWN5RGVzdGluYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTGVnYWN5RGVzdGluYXRpb24obmFtZSwgdmVyc2lvbiwgd3JpdGVLZXksIHNldHRpbmdzLCBvcHRpb25zLCBpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgICAgICBpZiAoc2V0dGluZ3MgPT09IHZvaWQgMCkgeyBzZXR0aW5ncyA9IHt9OyB9XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnR5cGUgPSAnZGVzdGluYXRpb24nO1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplUHJvbWlzZSA9IGNyZWF0ZURlZmVycmVkKCk7XG4gICAgICAgIHRoaXMuZmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IF9fYXNzaWduKHt9LCBzZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuZGlzYWJsZUF1dG9JU09Db252ZXJzaW9uID0gb3B0aW9ucy5kaXNhYmxlQXV0b0lTT0NvbnZlcnNpb24gfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb25Tb3VyY2UgPSBpbnRlZ3JhdGlvblNvdXJjZTtcbiAgICAgICAgLy8gQUpTLVJlbmRlcmVyIHNldHMgYW4gZXh0cmFuZW91cyBgdHlwZWAgc2V0dGluZyB0aGF0IGNsb2JiZXJzXG4gICAgICAgIC8vIGV4aXN0aW5nIHR5cGUgZGVmYXVsdHMuIFdlIG5lZWQgdG8gcmVtb3ZlIGl0IGlmIGl0J3MgcHJlc2VudFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc1sndHlwZSddICYmIHRoaXMuc2V0dGluZ3NbJ3R5cGUnXSA9PT0gJ2Jyb3dzZXInKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zZXR0aW5nc1sndHlwZSddO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucHJvbWlzZS50aGVuKGZ1bmN0aW9uIChpc0luaXRpYWxpemVkKSB7IHJldHVybiAoX3RoaXMuX2luaXRpYWxpemVkID0gaXNJbml0aWFsaXplZCk7IH0sIGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gb3B0aW9ucy5kaXNhYmxlQ2xpZW50UGVyc2lzdGVuY2VcbiAgICAgICAgICAgID8gbmV3IFByaW9yaXR5UXVldWUoNCwgW10pXG4gICAgICAgICAgICA6IG5ldyBQZXJzaXN0ZWRQcmlvcml0eVF1ZXVlKDQsIFwiXCIuY29uY2F0KHdyaXRlS2V5LCBcIjpkZXN0LVwiKS5jb25jYXQobmFtZSkpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goKTtcbiAgICB9XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmlzTG9hZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9yZWFkeTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5yZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsgdmFyIF9hOyByZXR1cm4gKF9hID0gX3RoaXMub25SZWFkeSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogUHJvbWlzZS5yZXNvbHZlKCk7IH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoY3R4LCBhbmFseXRpY3NJbnN0YW5jZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvblNvdXJjZSwgX2I7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlYWR5IHx8IHRoaXMub25SZWFkeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9hID0gdGhpcy5pbnRlZ3JhdGlvblNvdXJjZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRJbnRlZ3JhdGlvbihjdHgsIHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uLCB0aGlzLm9wdGlvbnMub2JmdXNjYXRlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gKF9jLnNlbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uU291cmNlID0gX2I7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uID0gYnVpbGRJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvblNvdXJjZSwgdGhpcy5zZXR0aW5ncywgYW5hbHl0aWNzSW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblJlYWR5ID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25SZWFkeUZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW50ZWdyYXRpb24ub25jZSgncmVhZHknLCBvblJlYWR5Rm4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLm9uKCdpbml0aWFsaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXRpYWxpemVQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uTmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnaW5pdGlhbGl6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzc2ljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZEludGVncmF0aW9uTWV0cmljKGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbk5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogJ2luaXRpYWxpemUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2xhc3NpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZEVycm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnVubG9hZCA9IGZ1bmN0aW9uIChfY3R4LCBfYW5hbHl0aWNzSW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIHVubG9hZEludGVncmF0aW9uKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uLCB0aGlzLm9wdGlvbnMub2JmdXNjYXRlKTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5hZGRNaWRkbGV3YXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBmbiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgZm5bX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSAoX2EgPSB0aGlzLm1pZGRsZXdhcmUpLmNvbmNhdC5hcHBseShfYSwgZm4pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnNob3VsZEJ1ZmZlciA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLy8gcGFnZSBldmVudHMgY2FuJ3QgYmUgYnVmZmVyZWQgYmVjYXVzZSBvZiBkZXN0aW5hdGlvbnMgdGhhdCBhdXRvbWF0aWNhbGx5IGFkZCBwYWdlIHZpZXdzXG4gICAgICAgIGN0eC5ldmVudC50eXBlICE9PSAncGFnZScgJiZcbiAgICAgICAgICAgIChpc09mZmxpbmUoKSB8fCB0aGlzLl9yZWFkeSA9PT0gZmFsc2UgfHwgdGhpcy5faW5pdGlhbGl6ZWQgPT09IGZhbHNlKSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChjdHgsIGNseiwgZXZlbnRUeXBlKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwbGFuLCBldiwgcGxhbkV2ZW50LCBhZnRlck1pZGRsZXdhcmUsIGV2ZW50LCBlcnJfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZEJ1ZmZlcihjdHgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaChjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhbiA9IChfYiA9IChfYSA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBsYW4pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50cmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ID0gY3R4LmV2ZW50LmV2ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYW4gJiYgZXYgJiYgdGhpcy5uYW1lICE9PSAnU2VnbWVudC5pbycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFuRXZlbnQgPSBwbGFuW2V2XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUGxhbkV2ZW50RW5hYmxlZChwbGFuLCBwbGFuRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC51cGRhdGVFdmVudCgnaW50ZWdyYXRpb25zJywgX19hc3NpZ24oX19hc3NpZ24oe30sIGN0eC5ldmVudC5pbnRlZ3JhdGlvbnMpLCB7IEFsbDogZmFsc2UsICdTZWdtZW50LmlvJzogdHJ1ZSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jYW5jZWwobmV3IENvbnRleHRDYW5jZWxhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRyeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiRXZlbnQgXCIuY29uY2F0KGV2LCBcIiBkaXNhYmxlZCBmb3IgaW50ZWdyYXRpb24gXCIpLmNvbmNhdCh0aGlzLm5hbWUsIFwiIGluIHRyYWNraW5nIHBsYW5cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRHJvcHBlZCBieSBwbGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC51cGRhdGVFdmVudCgnaW50ZWdyYXRpb25zJywgX19hc3NpZ24oX19hc3NpZ24oe30sIGN0eC5ldmVudC5pbnRlZ3JhdGlvbnMpLCBwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuaW50ZWdyYXRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGxhbkV2ZW50ID09PSBudWxsIHx8IHBsYW5FdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhbkV2ZW50LmVuYWJsZWQpICYmIChwbGFuRXZlbnQgPT09IG51bGwgfHwgcGxhbkV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFuRXZlbnQuaW50ZWdyYXRpb25zW3RoaXMubmFtZV0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2FuY2VsKG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIkV2ZW50IFwiLmNvbmNhdChldiwgXCIgZGlzYWJsZWQgZm9yIGludGVncmF0aW9uIFwiKS5jb25jYXQodGhpcy5uYW1lLCBcIiBpbiB0cmFja2luZyBwbGFuXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0Ryb3BwZWQgYnkgcGxhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYXBwbHlEZXN0aW5hdGlvbk1pZGRsZXdhcmUodGhpcy5uYW1lLCBjdHguZXZlbnQsIHRoaXMubWlkZGxld2FyZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlck1pZGRsZXdhcmUgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWZ0ZXJNaWRkbGV3YXJlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IG5ldyBjbHooYWZ0ZXJNaWRkbGV3YXJlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2U6ICF0aGlzLmRpc2FibGVBdXRvSVNPQ29udmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogZXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzc2ljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50cnlzLnB1c2goWzIsIDUsICwgNl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmludGVncmF0aW9uKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW50ZWdyYXRpb24uaW52b2tlLmNhbGwodGhpcy5pbnRlZ3JhdGlvbiwgZXZlbnRUeXBlLCBldmVudCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW50ZWdyYXRpb25NZXRyaWMoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25OYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogZXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzc2ljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyXzE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLnRyYWNrID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIFRyYWNrLCAndHJhY2snKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuaW50ZWdyYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fYXNzdW1lc1BhZ2V2aWV3KSAmJiAhdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UucHJvbWlzZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmQoY3R4LCBQYWdlLCAncGFnZScpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zZW5kKGN0eCwgSWRlbnRpZnksICdpZGVudGlmeScpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExlZ2FjeURlc3RpbmF0aW9uLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmQoY3R4LCBBbGlhcywgJ2FsaWFzJyldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnYWN5RGVzdGluYXRpb24ucHJvdG90eXBlLmdyb3VwID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2VuZChjdHgsIEdyb3VwLCAnZ3JvdXAnKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMZWdhY3lEZXN0aW5hdGlvbi5wcm90b3R5cGUuc2NoZWR1bGVGbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZsdXNoUXVldWUodGhpcywgdGhpcy5idWZmZXIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EuYnVmZmVyID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnRvZG8gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9LCBNYXRoLnJhbmRvbSgpICogNTAwMCk7XG4gICAgfTtcbiAgICByZXR1cm4gTGVnYWN5RGVzdGluYXRpb247XG59KCkpO1xuZXhwb3J0IHsgTGVnYWN5RGVzdGluYXRpb24gfTtcbmV4cG9ydCBmdW5jdGlvbiBhanNEZXN0aW5hdGlvbnMod3JpdGVLZXksIHNldHRpbmdzLCBnbG9iYWxJbnRlZ3JhdGlvbnMsIG9wdGlvbnMsIHJvdXRpbmdNaWRkbGV3YXJlLCBsZWdhY3lJbnRlZ3JhdGlvblNvdXJjZXMpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmIChnbG9iYWxJbnRlZ3JhdGlvbnMgPT09IHZvaWQgMCkgeyBnbG9iYWxJbnRlZ3JhdGlvbnMgPSB7fTsgfVxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgaWYgKGlzU2VydmVyKCkpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAoc2V0dGluZ3MucGxhbikge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge307XG4gICAgICAgIG9wdGlvbnMucGxhbiA9IHNldHRpbmdzLnBsYW47XG4gICAgfVxuICAgIHZhciByb3V0aW5nUnVsZXMgPSAoX2IgPSAoX2EgPSBzZXR0aW5ncy5taWRkbGV3YXJlU2V0dGluZ3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yb3V0aW5nUnVsZXMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdO1xuICAgIHZhciByZW1vdGVJbnRlZ3JhdGlvbnNDb25maWcgPSBzZXR0aW5ncy5pbnRlZ3JhdGlvbnM7XG4gICAgdmFyIGxvY2FsSW50ZWdyYXRpb25zQ29uZmlnID0gb3B0aW9ucy5pbnRlZ3JhdGlvbnM7XG4gICAgLy8gbWVyZ2VkIHJlbW90ZSBDRE4gc2V0dGluZ3Mgd2l0aCB1c2VyIHByb3ZpZGVkIG9wdGlvbnNcbiAgICB2YXIgaW50ZWdyYXRpb25PcHRpb25zID0gbWVyZ2VkT3B0aW9ucyhzZXR0aW5ncywgb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge30pO1xuICAgIHZhciBhZGhvY0ludGVncmF0aW9uU291cmNlcyA9IGxlZ2FjeUludGVncmF0aW9uU291cmNlcyA9PT0gbnVsbCB8fCBsZWdhY3lJbnRlZ3JhdGlvblNvdXJjZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxlZ2FjeUludGVncmF0aW9uU291cmNlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaW50ZWdyYXRpb25Tb3VyY2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBhY2MpLCAoX2EgPSB7fSwgX2FbcmVzb2x2ZUludGVncmF0aW9uTmFtZUZyb21Tb3VyY2UoaW50ZWdyYXRpb25Tb3VyY2UpXSA9IGludGVncmF0aW9uU291cmNlLCBfYSkpKTtcbiAgICB9LCB7fSk7XG4gICAgdmFyIGluc3RhbGxhYmxlSW50ZWdyYXRpb25zID0gbmV3IFNldChfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIE9iamVjdC5rZXlzKHJlbW90ZUludGVncmF0aW9uc0NvbmZpZykuZmlsdGVyKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBpc0luc3RhbGxhYmxlSW50ZWdyYXRpb24obmFtZSwgcmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnW25hbWVdKTtcbiAgICB9KSwgdHJ1ZSksIE9iamVjdC5rZXlzKGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzIHx8IHt9KS5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGlzUGxhaW5PYmplY3QocmVtb3RlSW50ZWdyYXRpb25zQ29uZmlnW25hbWVdKSB8fFxuICAgICAgICAgICAgaXNQbGFpbk9iamVjdChsb2NhbEludGVncmF0aW9uc0NvbmZpZyA9PT0gbnVsbCB8fCBsb2NhbEludGVncmF0aW9uc0NvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbG9jYWxJbnRlZ3JhdGlvbnNDb25maWdbbmFtZV0pO1xuICAgIH0pLCB0cnVlKSk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oaW5zdGFsbGFibGVJbnRlZ3JhdGlvbnMpXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuICFzaG91bGRTa2lwSW50ZWdyYXRpb24obmFtZSwgZ2xvYmFsSW50ZWdyYXRpb25zKTsgfSlcbiAgICAgICAgLm1hcChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgaW50ZWdyYXRpb25TZXR0aW5ncyA9IHJlbW90ZUludGVncmF0aW9uc0NvbmZpZ1tuYW1lXTtcbiAgICAgICAgdmFyIHZlcnNpb24gPSByZXNvbHZlVmVyc2lvbihpbnRlZ3JhdGlvblNldHRpbmdzKTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IExlZ2FjeURlc3RpbmF0aW9uKG5hbWUsIHZlcnNpb24sIHdyaXRlS2V5LCBpbnRlZ3JhdGlvbk9wdGlvbnNbbmFtZV0sIG9wdGlvbnMsIGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzID09PSBudWxsIHx8IGFkaG9jSW50ZWdyYXRpb25Tb3VyY2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZGhvY0ludGVncmF0aW9uU291cmNlc1tuYW1lXSk7XG4gICAgICAgIHZhciByb3V0aW5nID0gcm91dGluZ1J1bGVzLmZpbHRlcihmdW5jdGlvbiAocnVsZSkgeyByZXR1cm4gcnVsZS5kZXN0aW5hdGlvbk5hbWUgPT09IG5hbWU7IH0pO1xuICAgICAgICBpZiAocm91dGluZy5sZW5ndGggPiAwICYmIHJvdXRpbmdNaWRkbGV3YXJlKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5hZGRNaWRkbGV3YXJlKHJvdXRpbmdNaWRkbGV3YXJlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVzdGluYXRpb247XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js":
/*!******************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildIntegration: function() { return /* binding */ buildIntegration; },\n/* harmony export */   loadIntegration: function() { return /* binding */ loadIntegration; },\n/* harmony export */   resolveIntegrationNameFromSource: function() { return /* binding */ resolveIntegrationNameFromSource; },\n/* harmony export */   resolveVersion: function() { return /* binding */ resolveVersion; },\n/* harmony export */   unloadIntegration: function() { return /* binding */ unloadIntegration; }\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(app-pages-browser)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/parse-cdn */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js\");\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/load-script */ \"(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js\");\n\n\n\nfunction normalizeName(name) {\n    return name.toLowerCase().replace('.', '').replace(/\\s+/g, '-');\n}\nfunction obfuscatePathName(pathName, obfuscate) {\n    if (obfuscate === void 0) { obfuscate = false; }\n    return obfuscate ? btoa(pathName).replace(/=/g, '') : undefined;\n}\nfunction resolveIntegrationNameFromSource(integrationSource) {\n    return ('Integration' in integrationSource\n        ? integrationSource.Integration\n        : integrationSource).prototype.name;\n}\nfunction recordLoadMetrics(fullPath, ctx, name) {\n    var _a, _b;\n    try {\n        var metric = ((_b = (_a = window === null || window === void 0 ? void 0 : window.performance) === null || _a === void 0 ? void 0 : _a.getEntriesByName(fullPath, 'resource')) !== null && _b !== void 0 ? _b : [])[0];\n        // we assume everything that took under 100ms is cached\n        metric &&\n            ctx.stats.gauge('legacy_destination_time', Math.round(metric.duration), (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([\n                name\n            ], (metric.duration < 100 ? ['cached'] : []), true));\n    }\n    catch (_) {\n        // not available\n    }\n}\nfunction buildIntegration(integrationSource, integrationSettings, analyticsInstance) {\n    var integrationCtr;\n    // GA and Appcues use a different interface to instantiating integrations\n    if ('Integration' in integrationSource) {\n        var analyticsStub = {\n            user: function () { return analyticsInstance.user(); },\n            addIntegration: function () { },\n        };\n        integrationSource(analyticsStub);\n        integrationCtr = integrationSource.Integration;\n    }\n    else {\n        integrationCtr = integrationSource;\n    }\n    var integration = new integrationCtr(integrationSettings);\n    integration.analytics = analyticsInstance;\n    return integration;\n}\nfunction loadIntegration(ctx, name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var pathName, obfuscatedPathName, path, fullPath, err_1, deps;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    pathName = normalizeName(name);\n                    obfuscatedPathName = obfuscatePathName(pathName, obfuscate);\n                    path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n                    fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(fullPath)];\n                case 2:\n                    _a.sent();\n                    recordLoadMetrics(fullPath, ctx, name);\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    ctx.stats.gauge('legacy_destination_time', -1, [\"plugin:\".concat(name), \"failed\"]);\n                    throw err_1;\n                case 4:\n                    deps = window[\"\".concat(pathName, \"Deps\")];\n                    return [4 /*yield*/, Promise.all(deps.map(function (dep) { return (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.loadScript)(path + dep + '.gz'); }))\n                        // @ts-ignore\n                    ];\n                case 5:\n                    _a.sent();\n                    // @ts-ignore\n                    window[\"\".concat(pathName, \"Loader\")]();\n                    return [2 /*return*/, window[\n                        // @ts-ignore\n                        \"\".concat(pathName, \"Integration\")]];\n            }\n        });\n    });\n}\nfunction unloadIntegration(name, version, obfuscate) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var path, pathName, obfuscatedPathName, fullPath;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            path = (0,_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_1__.getNextIntegrationsURL)();\n            pathName = normalizeName(name);\n            obfuscatedPathName = obfuscatePathName(name, obfuscate);\n            fullPath = \"\".concat(path, \"/integrations/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \"/\").concat(version, \"/\").concat(obfuscatedPathName !== null && obfuscatedPathName !== void 0 ? obfuscatedPathName : pathName, \".dynamic.js.gz\");\n            return [2 /*return*/, (0,_lib_load_script__WEBPACK_IMPORTED_MODULE_2__.unloadScript)(fullPath)];\n        });\n    });\n}\nfunction resolveVersion(settings) {\n    var _a, _b, _c, _d;\n    return ((_d = (_b = (_a = settings === null || settings === void 0 ? void 0 : settings.versionSettings) === null || _a === void 0 ? void 0 : _a.override) !== null && _b !== void 0 ? _b : (_c = settings === null || settings === void 0 ? void 0 : settings.versionSettings) === null || _c === void 0 ? void 0 : _c.version) !== null && _d !== void 0 ? _d : 'latest');\n}\n//# sourceMappingURL=loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vbG9hZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQThEO0FBQ0Q7QUFDSTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixvREFBYTtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msa0NBQWtDO0FBQ2xFLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzRUFBc0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNERBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsT0FBTyw0REFBVSx1QkFBdUI7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQixtQkFBbUIsc0VBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw4REFBWTtBQUM5QyxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1uZXh0L2Rpc3QvcGtnL3BsdWdpbnMvYWpzLWRlc3RpbmF0aW9uL2xvYWRlci5qcz9lOTU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGdldE5leHRJbnRlZ3JhdGlvbnNVUkwgfSBmcm9tICcuLi8uLi9saWIvcGFyc2UtY2RuJztcbmltcG9ydCB7IGxvYWRTY3JpcHQsIHVubG9hZFNjcmlwdCB9IGZyb20gJy4uLy4uL2xpYi9sb2FkLXNjcmlwdCc7XG5mdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJy4nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xufVxuZnVuY3Rpb24gb2JmdXNjYXRlUGF0aE5hbWUocGF0aE5hbWUsIG9iZnVzY2F0ZSkge1xuICAgIGlmIChvYmZ1c2NhdGUgPT09IHZvaWQgMCkgeyBvYmZ1c2NhdGUgPSBmYWxzZTsgfVxuICAgIHJldHVybiBvYmZ1c2NhdGUgPyBidG9hKHBhdGhOYW1lKS5yZXBsYWNlKC89L2csICcnKSA6IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlSW50ZWdyYXRpb25OYW1lRnJvbVNvdXJjZShpbnRlZ3JhdGlvblNvdXJjZSkge1xuICAgIHJldHVybiAoJ0ludGVncmF0aW9uJyBpbiBpbnRlZ3JhdGlvblNvdXJjZVxuICAgICAgICA/IGludGVncmF0aW9uU291cmNlLkludGVncmF0aW9uXG4gICAgICAgIDogaW50ZWdyYXRpb25Tb3VyY2UpLnByb3RvdHlwZS5uYW1lO1xufVxuZnVuY3Rpb24gcmVjb3JkTG9hZE1ldHJpY3MoZnVsbFBhdGgsIGN0eCwgbmFtZSkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIG1ldHJpYyA9ICgoX2IgPSAoX2EgPSB3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cucGVyZm9ybWFuY2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRFbnRyaWVzQnlOYW1lKGZ1bGxQYXRoLCAncmVzb3VyY2UnKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10pWzBdO1xuICAgICAgICAvLyB3ZSBhc3N1bWUgZXZlcnl0aGluZyB0aGF0IHRvb2sgdW5kZXIgMTAwbXMgaXMgY2FjaGVkXG4gICAgICAgIG1ldHJpYyAmJlxuICAgICAgICAgICAgY3R4LnN0YXRzLmdhdWdlKCdsZWdhY3lfZGVzdGluYXRpb25fdGltZScsIE1hdGgucm91bmQobWV0cmljLmR1cmF0aW9uKSwgX19zcHJlYWRBcnJheShbXG4gICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgXSwgKG1ldHJpYy5kdXJhdGlvbiA8IDEwMCA/IFsnY2FjaGVkJ10gOiBbXSksIHRydWUpKTtcbiAgICB9XG4gICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgLy8gbm90IGF2YWlsYWJsZVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEludGVncmF0aW9uKGludGVncmF0aW9uU291cmNlLCBpbnRlZ3JhdGlvblNldHRpbmdzLCBhbmFseXRpY3NJbnN0YW5jZSkge1xuICAgIHZhciBpbnRlZ3JhdGlvbkN0cjtcbiAgICAvLyBHQSBhbmQgQXBwY3VlcyB1c2UgYSBkaWZmZXJlbnQgaW50ZXJmYWNlIHRvIGluc3RhbnRpYXRpbmcgaW50ZWdyYXRpb25zXG4gICAgaWYgKCdJbnRlZ3JhdGlvbicgaW4gaW50ZWdyYXRpb25Tb3VyY2UpIHtcbiAgICAgICAgdmFyIGFuYWx5dGljc1N0dWIgPSB7XG4gICAgICAgICAgICB1c2VyOiBmdW5jdGlvbiAoKSB7IHJldHVybiBhbmFseXRpY3NJbnN0YW5jZS51c2VyKCk7IH0sXG4gICAgICAgICAgICBhZGRJbnRlZ3JhdGlvbjogZnVuY3Rpb24gKCkgeyB9LFxuICAgICAgICB9O1xuICAgICAgICBpbnRlZ3JhdGlvblNvdXJjZShhbmFseXRpY3NTdHViKTtcbiAgICAgICAgaW50ZWdyYXRpb25DdHIgPSBpbnRlZ3JhdGlvblNvdXJjZS5JbnRlZ3JhdGlvbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGludGVncmF0aW9uQ3RyID0gaW50ZWdyYXRpb25Tb3VyY2U7XG4gICAgfVxuICAgIHZhciBpbnRlZ3JhdGlvbiA9IG5ldyBpbnRlZ3JhdGlvbkN0cihpbnRlZ3JhdGlvblNldHRpbmdzKTtcbiAgICBpbnRlZ3JhdGlvbi5hbmFseXRpY3MgPSBhbmFseXRpY3NJbnN0YW5jZTtcbiAgICByZXR1cm4gaW50ZWdyYXRpb247XG59XG5leHBvcnQgZnVuY3Rpb24gbG9hZEludGVncmF0aW9uKGN0eCwgbmFtZSwgdmVyc2lvbiwgb2JmdXNjYXRlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aE5hbWUsIG9iZnVzY2F0ZWRQYXRoTmFtZSwgcGF0aCwgZnVsbFBhdGgsIGVycl8xLCBkZXBzO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBwYXRoTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRQYXRoTmFtZSA9IG9iZnVzY2F0ZVBhdGhOYW1lKHBhdGhOYW1lLCBvYmZ1c2NhdGUpO1xuICAgICAgICAgICAgICAgICAgICBwYXRoID0gZ2V0TmV4dEludGVncmF0aW9uc1VSTCgpO1xuICAgICAgICAgICAgICAgICAgICBmdWxsUGF0aCA9IFwiXCIuY29uY2F0KHBhdGgsIFwiL2ludGVncmF0aW9ucy9cIikuY29uY2F0KG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gbnVsbCAmJiBvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IHZvaWQgMCA/IG9iZnVzY2F0ZWRQYXRoTmFtZSA6IHBhdGhOYW1lLCBcIi9cIikuY29uY2F0KHZlcnNpb24sIFwiL1wiKS5jb25jYXQob2JmdXNjYXRlZFBhdGhOYW1lICE9PSBudWxsICYmIG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gdm9pZCAwID8gb2JmdXNjYXRlZFBhdGhOYW1lIDogcGF0aE5hbWUsIFwiLmR5bmFtaWMuanMuZ3pcIik7XG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRTY3JpcHQoZnVsbFBhdGgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkTG9hZE1ldHJpY3MoZnVsbFBhdGgsIGN0eCwgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5nYXVnZSgnbGVnYWN5X2Rlc3RpbmF0aW9uX3RpbWUnLCAtMSwgW1wicGx1Z2luOlwiLmNvbmNhdChuYW1lKSwgXCJmYWlsZWRcIl0pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGRlcHMgPSB3aW5kb3dbXCJcIi5jb25jYXQocGF0aE5hbWUsIFwiRGVwc1wiKV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGRlcHMubWFwKGZ1bmN0aW9uIChkZXApIHsgcmV0dXJuIGxvYWRTY3JpcHQocGF0aCArIGRlcCArICcuZ3onKTsgfSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgd2luZG93W1wiXCIuY29uY2F0KHBhdGhOYW1lLCBcIkxvYWRlclwiKV0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHdpbmRvd1tcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIuY29uY2F0KHBhdGhOYW1lLCBcIkludGVncmF0aW9uXCIpXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVubG9hZEludGVncmF0aW9uKG5hbWUsIHZlcnNpb24sIG9iZnVzY2F0ZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGgsIHBhdGhOYW1lLCBvYmZ1c2NhdGVkUGF0aE5hbWUsIGZ1bGxQYXRoO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBwYXRoID0gZ2V0TmV4dEludGVncmF0aW9uc1VSTCgpO1xuICAgICAgICAgICAgcGF0aE5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgb2JmdXNjYXRlZFBhdGhOYW1lID0gb2JmdXNjYXRlUGF0aE5hbWUobmFtZSwgb2JmdXNjYXRlKTtcbiAgICAgICAgICAgIGZ1bGxQYXRoID0gXCJcIi5jb25jYXQocGF0aCwgXCIvaW50ZWdyYXRpb25zL1wiKS5jb25jYXQob2JmdXNjYXRlZFBhdGhOYW1lICE9PSBudWxsICYmIG9iZnVzY2F0ZWRQYXRoTmFtZSAhPT0gdm9pZCAwID8gb2JmdXNjYXRlZFBhdGhOYW1lIDogcGF0aE5hbWUsIFwiL1wiKS5jb25jYXQodmVyc2lvbiwgXCIvXCIpLmNvbmNhdChvYmZ1c2NhdGVkUGF0aE5hbWUgIT09IG51bGwgJiYgb2JmdXNjYXRlZFBhdGhOYW1lICE9PSB2b2lkIDAgPyBvYmZ1c2NhdGVkUGF0aE5hbWUgOiBwYXRoTmFtZSwgXCIuZHluYW1pYy5qcy5nelwiKTtcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1bmxvYWRTY3JpcHQoZnVsbFBhdGgpXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVZlcnNpb24oc2V0dGluZ3MpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgcmV0dXJuICgoX2QgPSAoX2IgPSAoX2EgPSBzZXR0aW5ncyA9PT0gbnVsbCB8fCBzZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2V0dGluZ3MudmVyc2lvblNldHRpbmdzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3ZlcnJpZGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IChfYyA9IHNldHRpbmdzID09PSBudWxsIHx8IHNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5ncy52ZXJzaW9uU2V0dGluZ3MpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy52ZXJzaW9uKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnbGF0ZXN0Jyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js\n"));

/***/ }),

/***/ "(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDisabledIntegration: function() { return /* binding */ isDisabledIntegration; },\n/* harmony export */   isInstallableIntegration: function() { return /* binding */ isInstallableIntegration; }\n/* harmony export */ });\nvar isInstallableIntegration = function (name, integrationSettings) {\n    var _a;\n    var type = integrationSettings.type, bundlingStatus = integrationSettings.bundlingStatus, versionSettings = integrationSettings.versionSettings;\n    // We use `!== 'unbundled'` (versus `=== 'bundled'`) to be inclusive of\n    // destinations without a defined value for `bundlingStatus`\n    var deviceMode = bundlingStatus !== 'unbundled' &&\n        (type === 'browser' || ((_a = versionSettings === null || versionSettings === void 0 ? void 0 : versionSettings.componentTypes) === null || _a === void 0 ? void 0 : _a.includes('browser')));\n    // checking for iterable is a quick fix we need in place to prevent\n    // errors showing Iterable as a failed destiantion. Ideally, we should\n    // fix the Iterable metadata instead, but that's a longer process.\n    return !name.startsWith('Segment') && name !== 'Iterable' && deviceMode;\n};\nvar isDisabledIntegration = function (integrationName, globalIntegrations) {\n    var allDisableAndNotDefined = globalIntegrations.All === false &&\n        globalIntegrations[integrationName] === undefined;\n    return (globalIntegrations[integrationName] === false || allDisableAndNotDefined);\n};\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5leHQvZGlzdC9wa2cvcGx1Z2lucy9hanMtZGVzdGluYXRpb24vdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtbmV4dC9kaXN0L3BrZy9wbHVnaW5zL2Fqcy1kZXN0aW5hdGlvbi91dGlscy5qcz9jYmQ1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgaXNJbnN0YWxsYWJsZUludGVncmF0aW9uID0gZnVuY3Rpb24gKG5hbWUsIGludGVncmF0aW9uU2V0dGluZ3MpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIHR5cGUgPSBpbnRlZ3JhdGlvblNldHRpbmdzLnR5cGUsIGJ1bmRsaW5nU3RhdHVzID0gaW50ZWdyYXRpb25TZXR0aW5ncy5idW5kbGluZ1N0YXR1cywgdmVyc2lvblNldHRpbmdzID0gaW50ZWdyYXRpb25TZXR0aW5ncy52ZXJzaW9uU2V0dGluZ3M7XG4gICAgLy8gV2UgdXNlIGAhPT0gJ3VuYnVuZGxlZCdgICh2ZXJzdXMgYD09PSAnYnVuZGxlZCdgKSB0byBiZSBpbmNsdXNpdmUgb2ZcbiAgICAvLyBkZXN0aW5hdGlvbnMgd2l0aG91dCBhIGRlZmluZWQgdmFsdWUgZm9yIGBidW5kbGluZ1N0YXR1c2BcbiAgICB2YXIgZGV2aWNlTW9kZSA9IGJ1bmRsaW5nU3RhdHVzICE9PSAndW5idW5kbGVkJyAmJlxuICAgICAgICAodHlwZSA9PT0gJ2Jyb3dzZXInIHx8ICgoX2EgPSB2ZXJzaW9uU2V0dGluZ3MgPT09IG51bGwgfHwgdmVyc2lvblNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2ZXJzaW9uU2V0dGluZ3MuY29tcG9uZW50VHlwZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcygnYnJvd3NlcicpKSk7XG4gICAgLy8gY2hlY2tpbmcgZm9yIGl0ZXJhYmxlIGlzIGEgcXVpY2sgZml4IHdlIG5lZWQgaW4gcGxhY2UgdG8gcHJldmVudFxuICAgIC8vIGVycm9ycyBzaG93aW5nIEl0ZXJhYmxlIGFzIGEgZmFpbGVkIGRlc3RpYW50aW9uLiBJZGVhbGx5LCB3ZSBzaG91bGRcbiAgICAvLyBmaXggdGhlIEl0ZXJhYmxlIG1ldGFkYXRhIGluc3RlYWQsIGJ1dCB0aGF0J3MgYSBsb25nZXIgcHJvY2Vzcy5cbiAgICByZXR1cm4gIW5hbWUuc3RhcnRzV2l0aCgnU2VnbWVudCcpICYmIG5hbWUgIT09ICdJdGVyYWJsZScgJiYgZGV2aWNlTW9kZTtcbn07XG5leHBvcnQgdmFyIGlzRGlzYWJsZWRJbnRlZ3JhdGlvbiA9IGZ1bmN0aW9uIChpbnRlZ3JhdGlvbk5hbWUsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgIHZhciBhbGxEaXNhYmxlQW5kTm90RGVmaW5lZCA9IGdsb2JhbEludGVncmF0aW9ucy5BbGwgPT09IGZhbHNlICYmXG4gICAgICAgIGdsb2JhbEludGVncmF0aW9uc1tpbnRlZ3JhdGlvbk5hbWVdID09PSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIChnbG9iYWxJbnRlZ3JhdGlvbnNbaW50ZWdyYXRpb25OYW1lXSA9PT0gZmFsc2UgfHwgYWxsRGlzYWJsZUFuZE5vdERlZmluZWQpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/../node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js\n"));

/***/ })

}]);